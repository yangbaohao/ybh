var quickKey=function(){var e=this;quickKey.prototype.defaultrow=function(){return{name:"",id:null,printOfGoods:"",photoId:"",salesQty:"",purchasedQty:"",spec:"",descr:"",color:"",prodColourDescr:"",weight:"",totalCartons:"",eachCartons:"",qty:"",priceBefore:"",price3:"",price3_server:"",extent:"",breadth:"",altitude:"",tj:"",deliveiedQty:"",deliveryQtyNow:"",remark:"",dzid:"",rowweight:"",ysprice:"",dsprice:"",volume:"",yards:"",unit:"",unitRate:"",basicUnit:"",unitsFlag:"",unitRateqty:"",deliveryQtyAll:"",inventoryReducere:"",amountFormula:"",inventoryQtyFormula:"",discount:"",originalPrice:"",specId:"",colorId:""}},quickKey.prototype.anyKey=function(){$(document).keyup(function(i){var t=i||window.event,r=t.keyCode,d=$("#addSO").is(":visible"),c=$("#viewSO").is(":visible"),o=$("#editSO").is(":visible"),a=$("#home_html").is(":visible");return 13!=r||t.ctrlKey||(a&&e.homeKey(),(d||o)&&e.addedit(r,t)),112==r||113==r||114==r||115==r||117==r?(t.preventDefault(),(d||o)&&e.addedit(r,t),!1):27==r?void((d||o)&&e.addedit(r,t)):48==r||49==r||50==r||51==r||52==r||53==r||54==r||55==r||56==r||57==r?void((d||o)&&e.addedit(r,t)):96==r||97==r||98==r||99==r||100==r||101==r||102==r||103==r||104==r||105==r?void((d||o)&&e.addedit(r,t)):81==r&&t.altKey?void((o||d)&&e.altQ(t)):81==r&&t.shiftKey?void((o||d)&&e.shiftQ(t)):87==r&&t.shiftKey?void((o||d)&&e.shiftW(t)):69==r&&t.altKey?void((o||d)&&e.altE(t)):38==r||40==r?((o||d)&&e.updown(t),void((o||c||d)&&e.topdown(t))):81==r&&t.ctrlKey?void e.ctrlQ(t):13==r&&t.ctrlKey?void e.ctrlEnter(t):t.shiftKey&&t.ctrlKey?void(c&&e.ctrlShift(t)):void 0})},quickKey.prototype.homeKey=function(){"Ocr_auditor"!=_global_settings.owner.roleName&&Core.AjaxRequest({type:"get",showMsg:!1,url:_global_settings.service.url+"/report/enterGrap",callback:function(e){Core.alert({message:"抢单成功，正在为您跳转至销售单界面...",hide:"500",callback:function(){$.addTab({title:"新建销售单",url:"page/modules/biz/addSaleOrder.html",pk:{data:e},reload:!0})}})},failure:function(e){Core.alert({message:e.responseJSON.errorMsg})}})},quickKey.prototype.addedit=function(i,t){if(!$("#viewSO").is(":visible")){var r=$("#addSO").is(":visible"),d="addSaleOrder_grid",c="addSO-ress",o="addSO",a=t.target.nodeName;switch(r||(o="editSO",c="editSO-ress",d="editSaleOrder_grid"),i){case 112:t.preventDefault();var l=$("#floatImg>img").length;l<5&&$("#"+o).find(".thumbnailImg").eq(0).trigger("dblclick");break;case 113:t.preventDefault();var l=$("#floatImg>img").length;l<5&&$("#"+o).find(".thumbnailImg").eq(1).trigger("dblclick");break;case 114:t.preventDefault();var l=$("#floatImg>img").length;l<5&&$("#"+o).find(".thumbnailImg").eq(2).trigger("dblclick");break;case 115:t.preventDefault();var l=$("#floatImg>img").length;l<5&&$("#"+o).find(".thumbnailImg").eq(3).trigger("dblclick");break;case 117:t.preventDefault();var l=$("#floatImg>img").length;l<5&&$("#"+o).find(".thumbnailImg").eq(4).trigger("dblclick");break;case 27:var n=$("#floatImg>img");n.length>0&&n.eq(0).trigger("dblclick");break;case 49:case 97:"BODY"==a&&($("#"+d).jqxGrid("selectcell",0,"productName"),$("#"+d).jqxGrid("begincelledit",0,"productName"));break;case 50:case 98:"BODY"==a&&($("#"+d).jqxGrid("selectcell",1,"productName"),$("#"+d).jqxGrid("begincelledit",1,"productName"));break;case 51:case 99:"BODY"==a&&($("#"+d).jqxGrid("selectcell",2,"productName"),$("#"+d).jqxGrid("begincelledit",2,"productName"));break;case 52:case 100:"BODY"==a&&($("#"+d).jqxGrid("selectcell",3,"productName"),$("#"+d).jqxGrid("begincelledit",3,"productName"));break;case 53:case 101:"BODY"==a&&($("#"+d).jqxGrid("selectcell",4,"productName"),$("#"+d).jqxGrid("begincelledit",4,"productName"));break;case 54:case 102:"BODY"==a&&($("#"+d).jqxGrid("selectcell",5,"productName"),$("#"+d).jqxGrid("begincelledit",5,"productName"));break;case 55:case 103:"BODY"==a&&($("#"+d).jqxGrid("selectcell",6,"productName"),$("#"+d).jqxGrid("begincelledit",6,"productName"));break;case 56:case 104:"BODY"==a&&($("#"+d).jqxGrid("selectcell",7,"productName"),$("#"+d).jqxGrid("begincelledit",7,"productName"));break;case 57:case 105:"BODY"==a&&($("#"+d).jqxGrid("selectcell",8,"productName"),$("#"+d).jqxGrid("begincelledit",8,"productName"));break;case 96:case 48:if("BODY"==a)for(var s=0;s<5;s++)$("#"+d).jqxGrid("addrow",null,e.defaultrow());break;case 13:"BODY"!=a&&"A"!=a||$("#"+c).trigger("click")}}},quickKey.prototype.viewKey=function(){},quickKey.prototype.editKey=function(e){},quickKey.prototype.altQ=function(e){if(e.preventDefault(),!$("#viewSO").is(":visible")){var i=$("#addSO").is(":visible");e.target;i?$("#addSO-box").is(":visible")?document.addSelectForm.addbox.focus():$("#addSO-productMeasFlag").is(":visible")?document.addSelectForm.addbox1.focus():document.addSelectForm.addbox2.focus():$("#editSO-box").is(":visible")?document.editSelectForm.editbox.focus():$("#editSO-productMeasFlag").is(":visible")?document.editSelectForm.editbox1.focus():document.editSelectForm.editbox2.focus()}},quickKey.prototype.shiftQ=function(e){if(e.preventDefault(),!$("#viewSO").is(":visible")){var i=$("#addSO").is(":visible"),t=(e.target,"addSO-addReceiverAddress");i||("editSO-ress",t="editSO-editReceiverAddress"),$("#"+t).jqxComboBox("focus"),$("#"+t).jqxComboBox("open"),$("#"+t).off("close").on("close",function(e){var i=$(this),t=i.jqxComboBox("getSelectedIndex");if(-1!=t){for(var r=i.jqxComboBox("getItem",t),d=i.find("input").val(),c=d.split(","),o=!1,a=0;a<c.length;a++)if(r.label==c[a].trim()){o=!0;break}o?i.jqxComboBox("uncheckItem",r.label):i.jqxComboBox("checkItem",r.label);if(""==i.find("input").val()){var l=i.jqxComboBox("getItem",0);i.jqxComboBox("checkItem",l.label)}i.jqxComboBox("unselectIndex",t)}})}},quickKey.prototype.shiftW=function(e){if(e.preventDefault(),!$("#viewSO").is(":visible")){var i=$("#addSO").is(":visible"),t=(e.target,"addSO-saleTime");i||(t="editSO-time"),$("#"+t).jqxDateTimeInput("focus"),$("#"+t).jqxDateTimeInput("open"),$("#"+t).off("close").on("close",function(){var e=$(this);e.jqxDateTimeInput("getText");e.find("input").focus()})}},quickKey.prototype.altE=function(e){if(e.preventDefault(),!$("#viewSO").is(":visible")){var i=$("#addSO").is(":visible"),t=(e.target,"addSO-receiveRecordTbody");i||(t="editSO-receiveRecordTbody"),$("#"+t).find("tr").eq(0).find(".receiveMoney").focus()}},quickKey.prototype.updown=function(e){if(e.preventDefault(),!$("#viewSO").is(":visible")){var i=$("#addSO").is(":visible"),t=e.target.parentNode,r="#addSO-receiveRecordTbody";i||(r="#editSO-receiveRecordTbody");var d=$(t).parents(r);if(1==d.length){var c=$(t).parent().index(),o=$(t).index();if(38==e.keyCode){if(0==c)return;d.find("tr").eq(c-1).find("td").eq(o).find("input").focus()}else{if(c==$(r).children().length-1)return;d.find("tr").eq(c+1).find("td").eq(o).find("input").focus()}}}},quickKey.prototype.ctrlQ=function(i){i.preventDefault();var t="addOcrOrderReject",r=$("#viewSO").is(":visible"),d=$("#editSO").is(":visible");r&&(t="viewSO-rejectBtn"),d&&(t="editSoRejectBtn"),e.btn(t),$("#"+t).trigger("click")},quickKey.prototype.topdown=function(e){e.preventDefault(),40==e.keyCode?$("#ocrOrderReject").is(":visible")&&($("#unkownWriting")[0].checked=!1,$("#unkownInformation")[0].checked=!0):$("#ocrOrderReject").is(":visible")&&($("#unkownWriting")[0].checked=!0,$("#unkownInformation")[0].checked=!1)},quickKey.prototype.ctrlEnter=function(i){i.preventDefault();var t=$("#addSO").is(":visible"),r=$("#viewSO").is(":visible"),d=$("#editSO").is(":visible"),c=$("#ocrOrderReject").is(":visible");return t?void(c?(e.btn("saveRejectReason"),$("#saveRejectReason").trigger("click")):$("#saveAddSaleOrderBtn").is(":visible")&&(e.btn("saveAddSaleOrderBtn"),$("#saveAddSaleOrderBtn").trigger("click"))):r?void(c?(e.btn("saveRejectReason"),$("#saveRejectReason").trigger("click")):$("#ocrCheckSubmitWindow").jqxWindow("isOpen")?(e.btn("saveOcrCheckSubmit"),$("#saveOcrCheckSubmit").trigger("click")):$("#viewSO-checkPass").is(":visible")&&(e.btn("viewSO-checkPass"),$("#viewSO-checkPass").trigger("click"))):d?void(c?(e.btn("saveRejectReason"),$("#saveRejectReason").trigger("click")):$("#ocrSubmitAgainWindow").jqxWindow("isOpen")?(e.btn("saveSubmitAgainSubmit"),$("#saveSubmitAgainSubmit").trigger("click")):(e.btn("saveEditBtn"),$("#saveEditBtn").trigger("click"))):void 0},quickKey.prototype.ctrlShift=function(i){i.preventDefault(),$("#ocrCheckSubmitWindow").jqxWindow("open",function(){e.btn("viewSO-checkRefuse"),$("#ocrCheckSubmitRemark").focus()})},quickKey.prototype.btn=function(e){$("#"+e).addClass("btnClass"),timeOut(function(){$("#"+e).removeClass("btnClass")},800)}};