!function(e){function t(t,i){return this.owner=t,this.datafield=null,this.displayfield=null,this.text="",this.sortable=!0,this.editable=!0,this.hidden=!1,this.hideable=!0,this.groupable=!0,this.renderer=null,this.cellsRenderer=null,this.columntype=null,this.cellsFormat="",this.align="left",this.cellsalign="left",this.width="auto",this.minwidth=25,this.maxwidth="auto",this.pinned=!1,this.visibleindex=-1,this.filterable=!0,this.filter=null,this.resizable=!0,this.draggable=!0,this.initeditor=null,this.createeditor=null,this.destroyeditor=null,this.geteditorvalue=null,this.autoCellHeight=!0,this.validation=null,this.classname="",this.cellclassname="",this.aggregates=null,this.aggregatesRenderer=null,this.rendered=null,this.exportable=!0,this.nullable=!0,this.columngroup=null,this.columntype="textbox",this.getcolumnproperties=function(){return{nullable:this.nullable,sortable:this.sortable,hidden:this.hidden,groupable:this.groupable,width:this.width,align:this.align,editable:this.editable,minwidth:this.minwidth,maxwidth:this.maxwidth,resizable:this.resizable,datafield:this.datafield,text:this.text,exportable:this.exportable,cellsalign:this.cellsalign,pinned:this.pinned,cellsFormat:this.cellsFormat,columntype:this.columntype,classname:this.classname,cellclassname:this.cellclassname,menu:this.menu}},this.setproperty=function(e,t){if(this[e]){var i=this[e];this[e]=t,this.owner._columnPropertyChanged(this,e,t,i)}else if(this[e.toLowerCase()]){var i=this[e.toLowerCase()];this[e.toLowerCase()]=t,this.owner._columnPropertyChanged(this,e.toLowerCase(),t,i)}},this._initfields=function(i){if(null!=i){var r=this;if(e.jqx.hasProperty(i,"dataField")&&(this.datafield=e.jqx.get(i,"dataField")),e.jqx.hasProperty(i,"displayField")?this.displayfield=e.jqx.get(i,"displayField"):this.displayfield=this.datafield,e.jqx.hasProperty(i,"columnType")&&(this.columntype=e.jqx.get(i,"columnType")),e.jqx.hasProperty(i,"validation")&&(this.validation=e.jqx.get(i,"validation")),e.jqx.hasProperty(i,"autoCellHeight")&&(this.autoCellHeight=e.jqx.get(i,"autoCellHeight")),e.jqx.hasProperty(i,"text")?this.text=e.jqx.get(i,"text"):this.text=this.displayfield,e.jqx.hasProperty(i,"sortable")&&(this.sortable=e.jqx.get(i,"sortable")),e.jqx.hasProperty(i,"hidden")&&(this.hidden=e.jqx.get(i,"hidden")),e.jqx.hasProperty(i,"groupable")&&(this.groupable=e.jqx.get(i,"groupable")),e.jqx.hasProperty(i,"renderer")&&(this.renderer=e.jqx.get(i,"renderer")),e.jqx.hasProperty(i,"align")&&(this.align=e.jqx.get(i,"align")),e.jqx.hasProperty(i,"cellsAlign")&&(this.cellsalign=e.jqx.get(i,"cellsAlign")),e.jqx.hasProperty(i,"cellsFormat")&&(this.cellsFormat=e.jqx.get(i,"cellsFormat")),e.jqx.hasProperty(i,"width")&&(this.width=e.jqx.get(i,"width")),e.jqx.hasProperty(i,"minWidth")&&(this.minwidth=e.jqx.get(i,"minWidth")),e.jqx.hasProperty(i,"maxWidth")&&(this.maxwidth=e.jqx.get(i,"maxWidth")),e.jqx.hasProperty(i,"cellsRenderer")&&(this.cellsRenderer=e.jqx.get(i,"cellsRenderer")),e.jqx.hasProperty(i,"columnType")&&(this.columntype=e.jqx.get(i,"columnType")),e.jqx.hasProperty(i,"pinned")&&(this.pinned=e.jqx.get(i,"pinned")),e.jqx.hasProperty(i,"filterable")&&(this.filterable=e.jqx.get(i,"filterable")),e.jqx.hasProperty(i,"filter")&&(this.filter=e.jqx.get(i,"filter")),e.jqx.hasProperty(i,"resizable")&&(this.resizable=e.jqx.get(i,"resizable")),e.jqx.hasProperty(i,"draggable")&&(this.draggable=e.jqx.get(i,"draggable")),e.jqx.hasProperty(i,"editable")&&(this.editable=e.jqx.get(i,"editable")),e.jqx.hasProperty(i,"initEditor")&&(this.initeditor=e.jqx.get(i,"initEditor")),e.jqx.hasProperty(i,"createEditor")&&(this.createeditor=e.jqx.get(i,"createEditor")),e.jqx.hasProperty(i,"destroyEditor")&&(this.destroyeditor=e.jqx.get(i,"destroyEditor")),e.jqx.hasProperty(i,"getEditorValue")&&(this.geteditorvalue=e.jqx.get(i,"getEditorValue")),e.jqx.hasProperty(i,"className")&&(this.classname=e.jqx.get(i,"className")),e.jqx.hasProperty(i,"cellClassName")&&(this.cellclassname=e.jqx.get(i,"cellClassName")),e.jqx.hasProperty(i,"aggregates")&&(this.aggregates=e.jqx.get(i,"aggregates")),e.jqx.hasProperty(i,"aggregatesRenderer")&&(this.aggregatesRenderer=e.jqx.get(i,"aggregatesRenderer")),e.jqx.hasProperty(i,"rendered")&&(this.rendered=e.jqx.get(i,"rendered")),e.jqx.hasProperty(i,"exportable")&&(this.exportable=e.jqx.get(i,"exportable")),e.jqx.hasProperty(i,"nullable")&&(this.nullable=e.jqx.get(i,"nullable")),e.jqx.hasProperty(i,"columnGroup")&&(this.columngroup=e.jqx.get(i,"columnGroup")),!i instanceof String&&"string"!=typeof i)for(var s in i)if(!r.hasOwnProperty(s)&&!r.hasOwnProperty(s.toLowerCase()))throw t.host.remove(),new Error("jqxDataTable: Invalid property name - "+s+".")}},this._initfields(i),this}e.jqx.jqxWidget("jqxDataTable","",{}),e.extend(e.jqx._jqxDataTable.prototype,{defineInstance:function(){var t={altRows:!1,aggregatesHeight:34,autoShowLoadElement:!0,autoRowHeight:!0,columnsHeight:30,columns:[],columnGroups:null,columnsResize:!1,columnsReorder:!1,dataview:null,disabled:!1,editable:!1,editSettings:{saveOnPageChange:!0,saveOnBlur:!0,saveOnSelectionChange:!0,cancelOnEsc:!0,saveOnEnter:!0,editSingleCell:!1,editOnDoubleClick:!0,editOnF2:!0},enableHover:!0,enableBrowserSelection:!1,filterHeight:30,filterable:!1,filterMode:"default",groupsRenderer:null,groups:new Array,headerZIndex:359,height:null,handleKeyboardNavigation:null,indentWidth:25,initRowDetails:!1,loadingErrorMessage:"The data is still loading and you cannot set a property or call a method. You can do that once the data binding is completed. jqxDataTable raises the 'bindingComplete' event when the binding is completed.",localization:null,pagerHeight:28,pageSize:10,pageSizeOptions:["5","10","20"],pageable:!1,pagerPosition:"bottom",pagerMode:"default",pageSizeMode:"default",pagerButtonsCount:5,pagerRenderer:null,ready:null,rendertoolbar:null,rowDetails:!1,renderStatusBar:null,rendered:null,rendering:null,rtl:!1,sortable:!1,showtoolbar:!1,showstatusbar:!1,statusBarHeight:34,serverProcessing:!1,selectionMode:"multiplerows",scrollBarSize:e.jqx.utilities.scrollBarSize,touchScrollBarSize:e.jqx.utilities.touchScrollBarSize,showAggregates:!1,showHeader:!0,maxHeight:999999,maxWidth:999999,autoBind:!0,beginEdit:null,endEdit:null,autokoupdates:!0,columnsVirtualization:!1,exportSettings:{columnsHeader:!0,hiddenColumns:!1,serverURL:null,characterSet:null,collapsedRecords:!1,recordsInView:!0,fileName:"jqxDataTable"},source:{beforeprocessing:null,beforesend:null,loaderror:null,localdata:null,data:null,datatype:"array",datafields:[],url:"",root:"",record:"",id:"",totalrecords:0,recordstartindex:0,recordendindex:0,loadallrecords:!0,sortcolumn:null,sortdirection:null,sort:null,filter:null,sortcomparer:null},toolbarHeight:34,tableZIndex:369,_updating:!1,touchmode:"auto",width:null,that:this,incrementalSearch:!0,events:["bindingComplete","sort","filter","pageChanged","pageSizeChanged","rowClick","rowDoubleClick","cellValueChanged","rowBeginEdit","rowEndEdit","rowSelect","rowUnselect","rowCheck","rowUncheck","columnResized","columnReordered","rowExpand","rowCollapse","cellBeginEdit","cellEndEdit"]};return e.extend(!0,this,t),this.that=this,t},createInstance:function(t){var i=this;if(15!=e.jqx.utilities.scrollBarSize&&(i.scrollBarSize=e.jqx.utilities.scrollBarSize),"table"==i.element.nodeName.toLowerCase()||e(i.element).children("table").length>0){var r=i.host.find("tbody tr"),s=i.host.find("th"),a=new Array;0===s.length&&(s=r[0],r.splice(0,1)),i.localizestrings&&(i.localizestrings(),null!=i.localization&&i.localizestrings(i.localization,!1));for(var o=[],l=0;l<r.length;l++){for(var n=r[l],d={},h=0;h<s.length;h++){var c=e.trim(e(s[h]).text());if(0===l){var u={name:c};if(i.columns[h]&&i.columns[h].cellsFormat){var g=i.columns[h].cellsFormat.toLowerCase();-1==g.indexOf("p")&&-1==g.indexOf("c")&&-1==g.indexOf("n")&&-1==g.indexOf("f")||(u.type="number"),-1==g.indexOf("d")&&-1==g.indexOf("m")&&-1==g.indexOf("y")&&-1==g.indexOf("h")&&-1==g.indexOf("m")&&-1==g.indexOf("s")&&-1==g.indexOf("t")||(u.type="date")}a.push(u)}var p=e(n).find("td:eq("+h+")");if(a[h].type){var f=i.getvaluebytype(e.trim(p.text()),a[h]);d[c]=f}else d[c]=e.trim(p.text())}o[o.length]=d}i.host.wrap("<div></div>");var v=i.host.parent(),m=i.host.data();m.jqxDataTable.host=v,m.jqxDataTable.element=v[0],i.host.parent()[0].id=i.element.id;try{i.host.parent()[0].style=i.element.style}catch(e){}i.element=v[0],i.host=v,i.host.data(m);var w={dataFields:a,localdata:o,datatype:"array"},y=new e.jqx.dataAdapter(w);i.source=y}i.source&&!i.source.dataBind&&(i.source=new e.jqx.dataAdapter(i.source));var x=i.source._source.datafields;x&&x.length>0&&(i._camelCase=void 0!==i.source._source.dataFields,i.selectionMode=i.selectionMode.toLowerCase()),null==i.host.attr("tabindex")&&i.host.attr("tabindex","0"),i.host.attr("role","grid"),i.host.attr("align","left"),i.host.addClass(i.toTP("jqx-grid")),i.host.addClass(i.toTP("jqx-reset")),i.host.addClass(i.toTP("jqx-rc-all")),i.host.addClass(i.toTP("jqx-widget")),i.host.addClass(i.toTP("jqx-widget-content")),i._testmodules()||(i.render(!0),e.jqx.utilities.resize(i.host,function(){var t=e(window).width(),r=e(window).height(),s=i.host.width(),a=i.host.height();i._lastHostWidth==s&&i._lastHostHeight==a||i._updatesize(i._lastHostWidth!=s,i._lastHostHeight!=a),i._lastWidth=t,i._lastHeight=r,i._lastHostWidth=s,i._lastHostHeight=a}))},getvaluebytype:function(t,i){var r=t;if(null==t)return t;if(","==this.gridlocalization.decimalseparator&&t.indexOf(this.gridlocalization.decimalseparator)>=0&&(t=t.replace(this.gridlocalization.decimalseparator,".")),t.indexOf(this.gridlocalization.currencysymbol)>=0&&(t=t.replace(this.gridlocalization.currencysymbol,"")),t.indexOf(this.gridlocalization.percentagesymbol)>=0&&(t=t.replace(this.gridlocalization.percentagesymbol,"")),e.isArray(t)&&"array"!=i.type){for(var s=0;s<t.length;s++)t[s]=this.getvaluebytype(t[s],i);return t}if("date"==i.type)if("NaN"==t)t="";else{var a=new Date(t);if("string"==typeof t&&i.format){var o=e.jqx.dataFormat.parsedate(t,i.format);null!=o&&(a=o)}t=("NaN"==a.toString()||"Invalid Date"==a.toString())&&e.jqx.dataFormat?e.jqx.dataFormat.tryparsedate(t):a,null==t&&(t=r)}else if("float"==i.type||"number"==i.type||"decimal"==i.type)if("NaN"==t)t="";else{var t=parseFloat(t);isNaN(t)&&(t=r)}else if("int"==i.type||"integer"==i.type){var t=parseInt(t);isNaN(t)&&(t=r)}else"bool"!=i.type&&"boolean"!=i.type||(null!=t&&void 0!=t.toLowerCase&&("false"==t.toLowerCase()?t=!1:"true"==t.toLowerCase()&&(t=!0)),t=1==t||(0!=t||""===t)&&"");return t},_builddataloadelement:function(){this.dataloadelement&&this.dataloadelement.remove(),this.dataloadelement=e('<div class="jqx-datatable-load" style="z-index: 99998; background-color:rgba(50,50,50,0.1); overflow: hidden; position: absolute;"></div>');var t=e('<div style="z-index: 99999; margin-left: -66px; left: 50%; top: 50%; margin-top: -24px; position: relative; width: 100px; height: 33px; padding: 5px; font-family: verdana; font-size: 12px; color: #767676; border-color: #898989; border-width: 1px; border-style: solid; background: #f6f6f6; border-collapse: collapse;"><div style="float: left;"><div style="float: left; overflow: hidden; width: 32px; height: 32px;" class="jqx-grid-load"/><span style="margin-top: 10px; float: left; display: block; margin-left: 5px;" >'+this.gridlocalization.loadtext+"</span></div></div>");if(t.addClass(this.toTP("jqx-rc-all")),this.dataloadelement.addClass(this.toTP("jqx-rc-all")),t.addClass(this.toTP("jqx-fill-state-normal")),this.dataloadelement.append(t),this.dataloadelement.width(this.width),this.dataloadelement.height(this.height),this.host.prepend(this.dataloadelement),""!=this.source._source.url){var i=!1;("auto"===this.height||null===this.height||this.autoheight)&&999999==this.maxHeight&&(i=!0),i?(this.host.height(100),this.dataloadelement.height(100)):(this.host.height(this.height),this.dataloadelement.height(this.height));var r=!1;("auto"===this.width||null===this.width||this.autoWidth)&&(r=!0),r?(this.host.width(300),this.dataloadelement.width(300)):(this.host.width(this.width),this.dataloadelement.width(this.width))}},_measureElement:function(t){var i=e("<span style='visibility: hidden; white-space: nowrap;'>measure Text</span>");i.addClass(this.toTP("jqx-widget")),e(document.body).append(i),"cell"==t?this._cellheight=i.height():this._columnheight=i.height(),i.remove()},_testmodules:function(){var t="",i=this,r=function(){""!=t.length&&(t+=",")};if(this.host.jqxScrollBar||(r(),t+=" jqxscrollbar.js"),this.host.jqxButton||(r(),t+=" jqxbuttons.js"),e.jqx.dataAdapter||(r(),t+=" jqxdata.js"),""!=t||this.editable||this.filterable||this.pageable){var s=[];if((this.filterable&&"simple"!=this.filterMode||"advanced"==this.pagerMode&&this.pageable)&&function(e){switch(e){case"checkbox":i.host.jqxCheckBox||s.checkbox||(s.checkbox=!0,r(),t+=" jqxcheckbox.js");break;case"dropdownlist":i.host.jqxDropDownList||s.dropdownlist?i.host.jqxListBox||s.listbox||(r(),s.listbox=!0,t+=" jqxlistbox.js"):(r(),s.dropdownlist=!0,t+=" jqxdropdownlist.js(requires: jqxlistbox.js)")}}("dropdownlist"),""!=t)throw new Error("jqxDataTable: Missing references to the following module(s): "+t)}return!1},focus:function(){try{this.wrapper.focus(),this.host.focus();var e=this;setTimeout(function(){e.wrapper.focus(),e.host.focus()},25),this.focused=!0}catch(e){}},hiddenParent:function(){return e.jqx.isHidden(this.host)},isBindingCompleted:function(){return!this._loading},_updatesize:function(t,i){if(!this._loading){var r=this,s=r.host.width(),a=r.host.height();r._oldWidth||(r._oldWidth=s),r._oldHeight||(r._oldHeight=a),void 0!=r._resizeTimer&&(clearTimeout(r._resizeTimer),r._resizeTimer=null);var o=function(){r._resizeTimer&&clearTimeout(r._resizeTimer),r.resizingGrid=!0,e.jqx.isHidden(r.host)||(r._updatecolumnwidths(),r.refresh(),r._oldWidth=s,r._oldHeight=a,r.resizingGrid=!1)};o(),r._resizeTimer=setTimeout(function(){var e=r.host.width(),t=r.host.height();r._oldWidth==e&&r._oldHeight==t||o()},300)}},resize:function(e,t){void 0!=e&&(this.width=e),void 0!=t&&(this.height=t),this._updatecolumnwidths(),this.refresh()},isTouchDevice:function(){if(void 0!=this.touchDevice)return this.touchDevice;var t=e.jqx.mobile.isTouchDevice();return this.touchDevice=t,1==this.touchmode?(t=!0,e.jqx.mobile.setMobileSimulator(this.table[0]),this.touchDevice=t):0==this.touchmode&&(t=!1),t&&(this.touchDevice=!0,this.host.addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-content").addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-header").addClass(this.toThemeProperty("jqx-touch")),this.scrollBarSize=this.touchScrollBarSize),t},toTP:function(e){return this.toThemeProperty(e)},localizestrings:function(t,i){if(this._cellscache=new Array,e.jqx.dataFormat&&e.jqx.dataFormat.cleardatescache(),this._loading)throw new Error("jqxDataTable: "+this.loadingErrorMessage);if(null!=t){for(var r in t)r.toLowerCase()!==r&&(t[r.toLowerCase()]=t[r]);for(var s=["pagergotopagestring","pagershowrowsstring","pagerrangestring","pagernextbuttonstring","pagerpreviousbuttonstring","pagerfirstbuttonstring","pagerlastbuttonstring","toppagerstring","firstDay","days","months","AM","PM","patterns","percentsymbol","currencysymbol","currencysymbolposition","decimalseparator","thousandsseparator","filterapplystring","filteraddnew","filtercancelstring","filterclearstring","filterstring","filterstringcomparisonoperators","filternumericcomparisonoperators","filterdatecomparisonoperators","filterbooleancomparisonoperators","emptydatastring","filterselectstring","todaystring","clearstring","validationstring","loadtext","filtersearchstring","loadingErrorMessage"],a=this,o=0;o<s.length;o++){var l=s[o];void 0!==t[l]&&(a.gridlocalization[l]=t[l])}t.loadingErrorMessage&&(this.loadingErrorMessage=t.loadingErrorMessage),!1!==i&&(this._builddataloadelement(),e(this.dataloadelement).css("visibility","hidden"),e(this.dataloadelement).css("display","none"))}else this.gridlocalization={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",d3:"dd-MMMM-yyyy",d4:"dd-MM-yy",d5:"H:mm",d6:"HH:mm",d7:"HH:mm tt",d8:"dd/MMMM/yyyy",d9:"MMMM-dd",d10:"MM-dd",d11:"MM-dd-yyyy"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:",",pagergotopagestring:"Go to page:",pagershowrowsstring:"Show rows:",pagerrangestring:" of ",pagerpreviousbuttonstring:"previous",pagernextbuttonstring:"next",pagerfirstbuttonstring:"first",pagerlastbuttonstring:"last",filterapplystring:"Apply",filtercancelstring:"Cancel",filterclearstring:"Clear Filter",filterstring:"advanced",filtersearchstring:"Search:",filterstringcomparisonoperators:["empty","not empty","contains","contains(match case)","does not contain","does not contain(match case)","starts with","starts with(match case)","ends with","ends with(match case)","equal","equal(match case)","null","not null"],filternumericcomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterdatecomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterbooleancomparisonoperators:["equal","not equal"],validationstring:"Entered value is not valid",emptydatastring:"暂无数据",filterselectstring:"Select Filter",loadtext:"Loading...",clearstring:"Clear",todaystring:"Today",loadingErrorMessage:"The data is still loading and you cannot set a property or call a method. You can do that once the data binding is completed. jqxDataTable raises the 'bindingComplete' event when the binding is completed."}},_updateScrollbars:function(e){var t=!1;("auto"===this.width||null===this.width||this.autowidth)&&999999==this.maxWidth&&(t=!0);var i=parseInt(this.scrollBarSize),r=this.table?this.table.height():0,s=0,a="inherit",o=this.vScrollBar[0].style.visibility;this.hScrollBar[0].style.visibility;if(e)var l=e;else var l=this.host.height();this.columnGroups?l-=this.showHeader?this.columnsheader.height():0:l-=this.showHeader?this.columnsHeight:0,this.filterable&&(l-=this.filter.height()),this.pageable&&(l-=this.pagerHeight,"both"===this.pagerPosition&&(l-=this.pagerHeight)),this.showtoolbar&&(l-=this.toolbarHeight),this.showstatusbar&&(l-=this.statusBarHeight),this.showAggregates&&(l-=this.aggregatesHeight);var n=!1;if(("auto"===this.height||null===this.height||this.autoheight)&&999999==this.maxHeight&&(n=!0),!n&&r>l&&(this.source.records.length>0||this.source.hierarchy&&this.source.hierarchy.length>0)?(this.vScrollBar[0].style.visibility=a,s=4+parseInt(i),this.vScrollBar.jqxScrollBar({max:r-l})):this.vScrollBar[0].style.visibility="hidden",o!=this.vScrollBar[0].style.visibility){this._updatecolumnwidths();var d=this.table.height();r!=d&&(r=d,!n&&r>l&&(this.source.records.length>0||this.source.hierarchy&&this.source.hierarchy.length>0)&&(this.vScrollBar[0].style.visibility=a,s=4+parseInt(i),this.vScrollBar.jqxScrollBar({max:r-l})))}0==this.scrollBarSize&&(s=0);var h=this.table?this.table.width():0;h>3&&(h-=3);var c=parseInt(this.host.css("border-left-width"))+parseInt(this.host.css("border-right-width")),u=c+this.host.width()-s;if(h>u&&!t){if(this.hScrollBar[0].style.visibility=a,this.hScrollBar.jqxScrollBar({max:h-u}),s=4+parseInt(i),0==i&&(s=0),!n){if(r>l-s+4&&(this.source.records.length>0||this.source.hierarchy&&this.source.hierarchy.length>0)){this.hScrollBar.jqxScrollBar({max:c+h-u});var g="hidden"===this.vScrollBar[0].style.visibility;this.vScrollBar[0].style.visibility=a,this._updatecolumnwidths(),g&&this.hScrollBar.jqxScrollBar({max:h-u+s+c});var p=this.table?this.table.width():0;p>3&&(p-=3),p!=h&&p<u&&(this.hScrollBar.jqxScrollBar({max:c+p-u}),this.hScrollBar[0].style.visibility="hidden",s=0)}this.vScrollBar.jqxScrollBar({max:r-l+s})}}else this.hScrollBar[0].style.visibility="hidden";0===this.source.records.length&&this.source.hierarchy&&0===this.source.hierarchy.length&&(this.vScrollBar[0].style.visibility="hidden",this.bottomRight[0].style.visibility="hidden"),"hidden"==this.vScrollBar[0].style.visibility&&0!=this.vScrollInstance.value&&this.vScrollInstance.setPosition(0)},_measureElementWidth:function(t){var i=e("<span style='visibility: hidden; white-space: nowrap;'>"+t+"</span>");i.addClass(this.toTP("jqx-widget")),i.addClass(this.toTP("jqx-grid")),i.addClass(this.toTP("jqx-grid-column-header")),i.addClass(this.toTP("jqx-widget-header")),e(document.body).append(i);var r=i.outerWidth()+20;return i.remove(),r},_arrangeAutoHeight:function(e){if(e||(e=0),"auto"===this.height||null===this.height||this.autoheight){var t=this.table.height(),i=0;if(this.columnGroups?i+=this.showHeader?this.columnsheader.height():-1:i+=this.showHeader?this.columnsHeight:-1,i+=this.showstatusbar?this.statusBarHeight:0,i+=this.showAggregates?this.aggregatesHeight:0,i+=this.showtoolbar?this.toolbarHeight:0,i+=this.pageable?this.pagerHeight:0,"both"===this.pagerPosition&&(i+=this.pageable?this.pagerHeight:0),i+=t,this.filterable){var r=this.filter.find(".filterrow"),s=this.filter.find(".filterrow-hidden"),a=1;s.length>0&&(a=0),i+=this.filterHeight-1+this.filterHeight*r.length*a}return i+e>this.maxHeight?this.host.height(this.maxHeight):this.host.height(i+e),!0}return!1},_arrangeAutoWidth:function(e){if(e||(e=0),"auto"===this.width||null===this.width||this.autowidth){for(var t=0,i=0;i<this.columns.records.length;i++){var r=this.columns.records[i].width;this.columns.records[i].hidden||("auto"==r?(r=this._measureElementWidth(this.columns.records[i].text),t+=r):t+=r)}return width=t,width+e>this.maxWidth?this.host.width(this.maxWidth):this.host.width(width+e),!0}return!1},_measureTopAndHeight:function(){var e=this.host.height(),t=0;if(this.showtoolbar&&(t+=this.toolbarHeight,e-=parseInt(this.toolbarHeight)),this.filterable){var i=this.filter.find(".filterrow"),r=this.filter.find(".filterrow-hidden"),s=1;r.length>0&&(s=0),t+=this.filterHeight,e-=parseInt(this.filterHeight);var a=1==s?i.length:0;t+=this.filterHeight*a,e-=this.filterHeight*a}return this.pageable&&"bottom"!=this.pagerPosition&&(t+=parseInt(this.pagerHeight)+1,e>this.pagerHeight&&"both"===this.pagerPosition&&(e-=parseInt(this.pagerHeight))),{top:t,height:e}},_arrange:function(){if(this.table){this._arrangeAutoHeight(),this._arrangeAutoWidth();var t=this.host.width(),i=this.host.height(),r=i;this.pageable?"bottom"===this.pagerPosition?(this.toppager[0].style.visibility="hidden",this.pager[0].style.visibility="inherit"):"both"===this.pagerPosition?(this.toppager[0].style.visibility="inherit",this.pager[0].style.visibility="inherit"):"top"===this.pagerPosition&&(this.toppager[0].style.visibility="inherit",this.pager[0].style.visibility="hidden"):(this.toppager[0].style.visibility="hidden",this.pager[0].style.visibility="hidden");var s=0;if(this.showtoolbar?(this.toolbar.width(t),this.toolbar.height(this.toolbarHeight-1),this.toolbar.css("top",0),s+=this.toolbarHeight,i-=parseInt(this.toolbarHeight)):this.toolbar[0].style.height="0px",this.filterable){this.filter.width(t),this.filter.css("top",s);var a=this.filter.find(".filterrow"),o=this.filter.find(".filterrow-hidden"),l=1;o.length>0&&(l=0),this.filter.height(this.filterHeight-1+this.filterHeight*a.length*l),s+=this.filterHeight,i-=parseInt(this.filterHeight);var n=1==l?a.length:0;s+=this.filterHeight*n,i-=this.filterHeight*n}if(this.showstatusbar?(this.statusbar.width(this.table?Math.max(t,this.table.width()):t),this.statusbar.height(this.statusBarHeight-1)):this.statusbar[0].style.height="0px",this.showAggregates?this.aggregates.height(this.aggregatesHeight-1):this.aggregates[0].style.height="0px",this.pageable&&"bottom"!=this.pagerPosition)this.toppager[0].style.width=t+"px",this.toppager[0].style.height=parseInt(this.pagerHeight)+"px",this.toppager[0].style.top=parseInt(s)+"px",s+=parseInt(this.pagerHeight)+1,i>this.pagerHeight&&(i-=parseInt(this.pagerHeight));else{this.toppager[0].style.width!=t+"px"&&(this.toppager[0].style.width=parseInt(t)+"px"),this.toppager[0].style.height!=this.pagerHeight+"px"&&(this.toppager[0].style.height=parseInt(this.pagerHeight)+"px"),this.toppager[0].style.top!=s+"px"&&(this.toppager[0].style.top=s+"px");var d="bottom"!=this.pagerPosition?this.pagerHeight:0,h=s+d+"px";this.content[0].style.top!=h&&(this.content[0].style.top=s+this.pagerHeight+"px")}this._updateScrollbars(r);var c=parseInt(this.scrollBarSize),u=2,g=0;if("hidden"!=this.vScrollBar[0].style.visibility&&(g=c+4),"hidden"!=this.hScrollBar[0].style.visibility&&(u=c+4+2),0==c&&(g=0,u=0),this.showAggregates&&("hidden"===this.hScrollBar[0].style.visibility?this.aggregates.width(this.table?Math.max(t,this.table.width())+4:t):this.aggregates.width("auto")),"hidden"!=this.vScrollBar[0].style.visibility||"hidden"!=this.hScrollBar[0].style.visibility){var p=this._arrangeAutoHeight(u-2),f=this._arrangeAutoWidth(g+1);if(p||f){var t=this.host.width();this.toppager[0].style.width=parseInt(t)+"px",this.toolbar[0].style.width=parseInt(t)+"px",this.statusbar[0].style.width=parseInt(t)+"px",this.filter[0].style.width=parseInt(t)+"px"}if(p){var v=this._measureTopAndHeight();s=v.top,i=v.height}}var m=0;this.pageable&&(m=this.pagerHeight,"top"!=this.pagerPosition&&(u+=this.pagerHeight)),this.showAggregates&&(u+=this.aggregatesHeight,m+=this.aggregatesHeight),this.showstatusbar&&(u+=this.statusBarHeight,m+=this.statusBarHeight),this.hScrollBar[0].style.height!=c+"px"&&(this.hScrollBar[0].style.height=parseInt(c)+"px"),this.hScrollBar[0].style.top==s+i-4-c-m+"px"&&"0px"==this.hScrollBar[0].style.left||(this.hScrollBar[0].style.top=s+i-4-c-m-1+"px",this.hScrollBar[0].style.left="0px");var w=this.hScrollBar[0].style.width,y=!1,x=!1;0==g?w!=t-2+"px"&&(this.hScrollBar[0].style.width=t-2+"px",y=!0):w!=t-c-4+"px"&&(this.hScrollBar[0].style.width=t-c-4+"px",y=!0),this.vScrollBar[0].style.width!=c+"px"&&(this.vScrollBar[0].style.width=c+"px",x=!0),this.vScrollBar[0].style.height!=parseInt(i)-u+"px"&&(this.vScrollBar[0].style.height=parseInt(i)-u+"px",x=!0),this.vScrollBar[0].style.left==parseInt(t)-parseInt(c)-4+"px"&&this.vScrollBar[0].style.top==s+"px"||(this.vScrollBar[0].style.top=s+"px",this.vScrollBar[0].style.left=parseInt(t)-parseInt(c)-4+"px"),this.rtl&&(this.vScrollBar.css({left:"0px",top:s}),"hidden"!=this.vScrollBar.css("visibility")&&this.hScrollBar.css({left:c+2}));var b=this.vScrollInstance;b.disabled=this.disabled;var _=this.hScrollInstance;_.disabled=this.disabled,y&&_.refresh(),x&&b.refresh();var j=function(e){"hidden"!=e.vScrollBar[0].style.visibility&&"hidden"!=e.hScrollBar[0].style.visibility?(e.bottomRight[0].style.visibility="inherit",e.bottomRight[0].style.left=1+parseInt(e.vScrollBar.css("left"))+"px",e.bottomRight[0].style.top=parseInt(e.hScrollBar.css("top"))+"px",e.rtl&&e.bottomRight.css("left","0px"),e.bottomRight[0].style.width=parseInt(c)+3+"px",e.bottomRight[0].style.height=parseInt(c)+4+"px",e.showAggregates&&(e.bottomRight.css("z-index",99),e.bottomRight.height(parseInt(c)+4+e.aggregatesHeight),e.bottomRight.css({top:parseInt(e.hScrollBar.css("top"))-e.aggregatesHeight}))):e.bottomRight[0].style.visibility="hidden"};if(j(this),this.content[0].style.width!=t-g+"px"&&(this.content[0].style.width=t-g+"px"),this.content[0].style.height!=i-u+3+"px"&&(this.content[0].style.height=i-u+3+"px"),this.content[0].style.top!=s+"px"&&(this.content[0].style.top=parseInt(s)+"px"),this.rtl&&(this.content.css("left",g),this.filter&&this.filter.children().length>0&&e(this.filter.children()).css("left",g),this.table)){var q=this.table.width();q<t-g&&(this.content.css("left",t-q+2),this.filter&&this.filter.children().length>0&&e(this.filter.children()).css("left",t-q+2))}this.showAggregates&&(this.aggregates.css("top",s+i-this.aggregatesHeight-(this.pageable?this.pagerHeight:0)-(this.showstatusbar?this.statusBarHeight+1:0)),this.rtl&&this.aggregates.css("left","0px"),"hidden"!=this.hScrollBar.css("visibility")&&(this.hScrollBar.css({top:s+i-4-c-m+this.aggregatesHeight+"px"}),this.aggregates.css("top",1+s+i-c-5-this.aggregatesHeight-(this.pageable?this.pagerHeight:0)-(this.showstatusbar?this.statusBarHeight+1:0))),j(this)),this.showstatusbar&&(this.statusbar.css("top",s+i-this.statusBarHeight-(this.pageable?this.pagerHeight:0)),this.rtl&&("hidden"==this.hScrollBar.css("visibility")?this.statusbar.css("left",this.content.css("left")):this.statusbar.css("left","0px"))),this.pageable?(this.pager[0].style.width=t+"px",this.pager[0].style.height=this.pagerHeight+"px",this.pager[0].style.top=parseInt(s)+parseInt(i)-parseInt(this.pagerHeight)-1+"px"):this.pager[0].style.height="0px",this.vScrollBar[0].style.zIndex=this.tableZIndex+this.headerZIndex+10+this.columns.records.length,this.hScrollBar[0].style.zIndex=this.tableZIndex+this.headerZIndex+10+this.columns.records.length,t!=parseInt(this.dataloadelement[0].style.width)&&(this.dataloadelement[0].style.width=this.element.style.width),i!=parseInt(this.dataloadelement[0].style.height)&&(this.dataloadelement[0].style.height=this.element.style.height),this._hostwidth=t}},scrollOffset:function(e,t){if(0==arguments.length||null!=e&&"object"==typeof e&&!e.top)return{left:this.hScrollBar.jqxScrollBar("value"),top:this.vScrollBar.jqxScrollBar("value")};if(null!=e&&"object"==typeof e)var t=e.left,i=e.top,e=i;null!=e&&null!=t&&void 0!=e&&void 0!=t&&(this.vScrollBar.jqxScrollBar("setPosition",e),this.hScrollBar.jqxScrollBar("setPosition",t))},scrollleft:function(e){null!=e&&void 0!=e&&"hidden"!=this.hScrollBar.css("visibility")&&this.hScrollBar.jqxScrollBar("setPosition",e)},scrolltop:function(e){null!=e&&void 0!=e&&"hidden"!=this.vScrollBar.css("visibility")&&this.vScrollBar.jqxScrollBar("setPosition",e)},beginUpdate:function(){this._updating=!0,this._datachanged=!1},endUpdate:function(e){this._updating=!1,!1!==e&&(this._rendercolumnheaders(),this.refresh())},updating:function(){return this._updating},databind:function(t,i,r){if(!0!==this.loadingstate){"block"==this.host.css("display")&&(this.autoShowLoadElement?(e(this.dataloadelement).css("visibility","visible"),e(this.dataloadelement).css("display","block"),this.dataloadelement.width(this.host.width()),this.dataloadelement.height(this.host.height())):(e(this.dataloadelement).css("visibility","hidden"),e(this.dataloadelement).css("display","none")));var s=this;null==t&&(t={}),void 0!=t.sortcomparer&&null!=t.sortcomparer||(t.sortcomparer=null),void 0!=t.filter&&null!=t.filter||(t.filter=null),void 0!=t.sort&&null!=t.sort||(t.sort=null),void 0!=t.data&&null!=t.data||(t.data=null);if(null!=t&&(void 0!=t._source?t._source.url:t.url),this.dataview=this.dataview||new e.jqx.dataView,this.dataview.pageable=this.pageable,this.dataview.grid=this,!s.initializedcall){if(t._source&&this.sortable&&(void 0!=t._source.sortcolumn&&(this.sortcolumn=t._source.sortcolumn,this.source.sortcolumn=this.sortcolumn,this.dataview.sortfield=t._source.sortcolumn,t._source.sortcolumn=null),void 0!=t._source.sortdirection)){this.dataview.sortfielddirection=t._source.sortdirection;var a=t._source.sortdirection;if("a"==a||"asc"==a||"ascending"==a||1==a)var o=!0;else var o=!1;this.sortdirection=null!=a?{ascending:o,descending:!o}:{ascending:!1,descending:!1}}
this.pageable&&t._source&&(void 0!=t._source.pagenum&&(this.dataview.pagenum=t._source.pagenum),void 0!=t._source.pagesize?(this.pageSize=t._source.pagesize,this.dataview.pagesize=t._source.pagesize):(this.dataview.pagesize=t._source.pagesize,void 0==this.dataview.pagesize&&(this.dataview.pagesize=this.pageSize))),this.sortable&&(t.sortcolumn&&(this.dataview.sortfield=t.sortcolumn),t.sortdirection&&(this.dataview.sortfielddirection=t.sortdirection))}this._loading=!0,this.dataview.update=function(t){s._loading=!1,s.rowsByKey=new Array;var a=s.source._source.datafields;if(s.groups&&s.groups.length>0){var o=Object.prototype.toString,l=s.groups[0];if(Object.prototype.toString="function"==typeof l?l:function(){return this[l]},!s.source.records.sort){var n=new Array,d=0;e.each(data,function(){n[startindex+d++]=this}),data=n}s.source.records.sort(function(t,i){if(void 0===t&&(t=null),void 0===i&&(i=null),null===t&&null===i)return 0;if(null===t&&null!==i)return-1;if(null!==t&&null===i)return 1;var r=0,s=0;if(t&&t.uid&&(r=t.uid),i&&i.uid&&(s=i.uid),t=t.toString(),i=i.toString(),e.jqx.dataFormat.isNumber(t)&&e.jqx.dataFormat.isNumber(i))return t<i?-1:t>i?1:0;if(e.jqx.dataFormat.isDate(t)&&e.jqx.dataFormat.isDate(i))return t<i?-1:t>i?1:0;e.jqx.dataFormat.isNumber(t)||e.jqx.dataFormat.isNumber(i)||(t=String(t).toLowerCase(),i=String(i).toLowerCase());try{if(t<i)return-1;if(t>i)return 1}catch(e){}if("number"==typeof r){if(r<s)return-1;if(r>s)return 1}return 0}),Object.prototype.toString=o}for(var h=0;h<s.source.records.length;h++){var c=s.source.records[h];if(s.rowsByKey[c.uid]=c,c.records&&c.records.length>0){var u=function(e){for(var t=0;t<e.length;t++)e[t]&&(s.rowsByKey[e[t].uid]=e[t],e[t].records&&e[t].records.length>0&&u(e[t].records))};u(c.records)}if(0===h){var g=!1;if(a)for(var p=0;p<a.length;p++)if(a[p]&&!a[p].type){g=!0,a[p].type="string";var f=c[a[p].name];if(void 0==f)continue;if(!0!==f&&!1!==f||(a[p].type="boolean"),null!=f&&f.toString().indexOf(s.gridlocalization.currencysymbol)>-1||f.toString().indexOf(s.gridlocalization.percentsymbol)>-1){var v=f.toString().split(" ").length,m=new Number(s._toNumber(f.toString()));isNaN(m)||1!=v||(a[p].type="number")}(e.jqx.dataFormat.isNumber(f)||!isNaN(parseFloat(f))&&isFinite(f))&&(a[p].type="number"),e.jqx.dataFormat.isDate(f)&&(a[p].type="date")}if(g)for(var p=0;p<a.length;p++){var w=s.source.getvaluebytype(c[a[p].name],a[p]);if(null!=w&&"number"==a[p].type){var y=w;y=new Number(s._toNumber(y.toString())),isNaN(y)||(w=y)}c[a[p].name]=w}}}if("pager"===i||"filter"===i||"sort"===i?s.refresh():s._render(),s.autoShowLoadElement&&!s._loading&&(e(s.dataloadelement).css("visibility","hidden"),e(s.dataloadelement).css("display","none")),s.pageable&&(s.disabled||s.pagernexttop&&(s.pagerfirsttop.jqxButton({disabled:!1}),s.pagerfirstbottom.jqxButton({disabled:!1}),s.pagerlasttop.jqxButton({disabled:!1}),s.pagerlastbottom.jqxButton({disabled:!1}),s.pagernexttop.jqxButton({disabled:!1}),s.pagerprevioustop.jqxButton({disabled:!1}),s.pagershowrowscombotop.jqxDropDownList&&"advanced"==s.pagerMode&&(s.pagershowrowscombotop.jqxDropDownList({disabled:!1}),s.pagershowrowscombobottom.jqxDropDownList({disabled:!1})),s.pagernextbottom.jqxButton({disabled:!1}),s.pagerpreviousbottom.jqxButton({disabled:!1}))),s._updateTouchScrolling(),s._raiseEvent("bindingComplete"),r&&r(),!s.initializedcall&&(s.initializedcall=!0,s.isInitialized=!0,s.ready&&s.ready(),(null!=s.width&&-1!=s.width.toString().indexOf("%")||null!=s.height&&-1!=s.height.toString().indexOf("%"))&&s._updatesize(!0),"hidden"==s.host.css("visibility"))){e.jqx.browser.msie&&e.jqx.browser.version;"visible"==s.vScrollBar.css("visibility")&&s.vScrollBar.css("visibility","inherit"),"visible"==s.hScrollBar.css("visibility")&&s.hScrollBar.css("visibility","inherit"),s._intervalTimer=setInterval(function(){"visible"==s.host.css("visibility")&&(s._updatesize(!0),clearInterval(s._intervalTimer))},100)}},this.dataview.databind(t)}},_raiseEvent:function(t,i){void 0==i&&(i={owner:null});var r=t;args=i,args.owner=this;var s=new e.Event(r);s.owner=this,s.args=args;var a=this.host.trigger(s);return i=s.args,a},ensureColumnVisible:function(e){for(var t=0,i=0,r=0;r<this.columns.records.length;r++){if(this.columns.records[r].datafield==e){t+=this.columns.records[r].width,i=this.columns.records[r].width;break}t+=this.columns.records[r].width}if("hidden"!=this.hScrollBar.css("visibility")){var s=this.hScrollBar.jqxScrollBar("value"),a=s+this.host.width();s>t-i?this.hScrollBar.jqxScrollBar("setPosition",t-i):t>a&&this.hScrollBar.jqxScrollBar("setPosition",s+t-a)}},ensurerowvisiblebykey:function(t){if("hidden"===this.vScrollBar[0].style.visibility)return!1;var i=this._getuirow(t);if(i){var r=this.vScrollBar.jqxScrollBar("value"),s=this.host.height(),a=0;this.columnGroups?a+=this.showHeader?this.columnsheader.height():0:a+=this.showHeader?this.columnsHeight:0,this.filterable&&(a+=this.filter.height()),this.pageable&&"top"===this.pagerPosition&&(a+=this.pagerHeight),this.showtoolbar&&(a+=this.toolbarHeight),s-=a,this.pageable&&"top"!==this.pagerPosition&&(s-=this.pagerHeight),this.showstatusbar&&(s-=this.statusBarHeightt),this.showAggregates&&(s-=this.aggregatesHeight),"hidden"!=this.hScrollBar.css("visibility")&&(s-=20);var o=this.host.coord().top+a,l=r,n=s+l,d=i.coord().top+r-o;d=Math.round(d);var h=d+i.outerHeight();if(h=Math.round(h),0===Math.round(i.position().top))return this.vScrollBar.jqxScrollBar("setPosition",0);var c=e(this._table.children()[1]).children().length-1,u=this._getuikey(c),g=this._getuirow(u);if(g&&g[0]===i[0])return this.vScrollBar.jqxScrollBar("setPosition",this.vScrollBar.jqxScrollBar("max"));if(d<l){var p=d-i.height();return p<0&&(p=0),this.vScrollBar.jqxScrollBar("setPosition",p)}return h>n?this.vScrollBar.jqxScrollBar("setPosition",4+h-s-r):void 0}},ensureRowVisible:function(e){var t=this._getkey(e);this.ensurerowvisiblebykey(t)},getColumn:function(t){var i=null;return this.columns.records&&e.each(this.columns.records,function(){if(this.datafield==t||this.displayfield==t)return i=this,!1}),i},_setcolumnproperty:function(e,t,i){if(null==e||null==t||null==i)return null;var r=t;t=t.toLowerCase();var s=this.getColumn(e);if(null!=s){s[t];s[t]=i,s[r]=i;var a=this.getColumn(e);switch(null!=a&&(a[t]=i),t){case"filteritems":case"text":case"editable":case"resizable":case"draggable":case"hidden":case"hideable":case"renderer":case"cellsrenderer":case"align":case"aggregates":case"cellsalign":case"cellsformat":case"pinned":case"contenttype":case"filterable":case"groupable":case"cellclass":case"cellclassname":case"class":case"width":case"minwidth":case"maxwidth":"align"==t?(this._rendercolumnheaders(),this.refresh()):"text"==t||"class"==t||"hidden"==t||"pinned"==t||"resizable"==t||"renderer"==t?(this._rendercolumnheaders(),this.refresh()):"width"==t||"maxwidth"==t||"minwidth"==t?(s._width=null,s._percentagewidth=null,this._updatecolumnwidths(),this.refresh()):this.refresh()}}},getColumnProperty:function(e,t){return null==e||null==t?null:(t=t.toLowerCase(),this.getColumn(e)[t])},setColumnProperty:function(e,t,i){this._setcolumnproperty(e,t,i)},hideColumn:function(e){this._setcolumnproperty(e,"hidden",!0)},showColumn:function(e){this._setcolumnproperty(e,"hidden",!1)},updateBoundData:function(e,t){this.databind(this.source,e,t)},refresh:function(t){if(1!=t){if(e.jqx.isHidden(this.host))return;this.vScrollInstance.setPosition(0),this._renderrows(),this.updatepagerdetails(),this._arrange(),this._arrangeFilterRow&&this._arrangeFilterRow(),this._renderhorizontalscroll(),this._showicons(),this.showAggregates&&this._updateaggregates(),this._updateTouchScrolling()}},_updateTouchScrolling:function(){var t=this.that;if(t.isTouchDevice()){var i=e.jqx.mobile.getTouchEventName("touchstart"),r=e.jqx.mobile.getTouchEventName("touchend"),s=e.jqx.mobile.getTouchEventName("touchmove");t.table&&(t.removeHandler(t.table,i+".touchScroll"),t.removeHandler(t.table,s+".touchScroll"),t.removeHandler(t.table,r+".touchScroll"),t.removeHandler(t.table,"touchcancel.touchScroll"),e.jqx.mobile.touchScroll(t.table[0],Math.max(t.vScrollInstance.max,t.hScrollInstance.max),function(e,i){if(null!=i&&"hidden"!=t.vScrollBar.css("visibility")){t.vScrollInstance.value;t.vScrollInstance.setPosition(i)}if(null!=e&&"hidden"!=t.hScrollBar.css("visibility")){t.hScrollInstance.value;t.hScrollInstance.setPosition(e)}t.scrolled=new Date,t.vScrollInstance.thumbCapture=!0},this.element.id,this.hScrollBar,this.vScrollBar))}},_showicons:function(){if(this.table)for(var t=0;t<this.columns.records.length;t++){var i=this.columns.records[t];if(e(i.filtericon).hide(),e(i.sortasc).hide(),e(i.sortdesc).hide(),"simple"!==this.filterMode)for(var r=0;r<this.dataview.filters.length;r++){var s=this.dataview.filters[r];if(s.datafield===i.displayfield){e(i.filtericon).show();break}}if(null!==this.sortcolumn&&this.sortcolumn===i.displayfield&&null!=this.sortdirection&&(this.sortdirection.ascending?e(i.sortasc).show():e(i.sortdesc).show()),"left"!=i.align&&"center"!=i.align&&!this.rtl||this.rtl&&"right"!=i.align&&"center"!=i.align){var a=e.jqx.isHidden(e(i.filtericon))?0:16;a+=e.jqx.isHidden(e(i.sortasc))?0:16,a+=e.jqx.isHidden(e(i.sortdesc))?0:16;var o=e(e(e(i.element).children()[0]).children()[0]);this.rtl?a>0?o.css("margin-left",4+a+"px"):o.css("margin-left","4px"):a>0?o.css("margin-right",4+a+"px"):o.css("margin-right","4px")}}},render:function(t){var i="<div style='overflow: hidden; -webkit-appearance: none; outline: none; width:100%; height: 100%; align:left; border: 0px; padding: 0px; margin: 0px; left: 0px; top: 0px; valign:top; position: relative;'><div id='wrapper"+this.element.id+"' style='overflow: hidden; -webkit-appearance: none; border: none; background: transparent; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; align:left; left: 0px; top: 0px; valign:top; position: relative;'><div id='toolbar' style='visibility: hidden; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='toppager' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='filter' style='visibility: hidden; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='content"+this.element.id+"' style='overflow: hidden; -webkit-appearance: none; border: none; background: transparent; outline: none; border: none; padding: 0px; margin-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='verticalScrollBar"+this.element.id+"' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='horizontalScrollBar"+this.element.id+"' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='bottomRight' style='align:left; valign:top; left: 0px; top: 0px; border: none; position: absolute;'></div><div id='aggregates' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='statusbar' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='pager' style='z-index: 20; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div></div></div>";this.element.innerText="",this.element.innerHTML=i,this.wrapper=this.host.find("#wrapper"+this.element.id),this.content=this.host.find("#content"+this.element.id),this.content.addClass(this.toTP("jqx-reset"));var r=this.host.find("#verticalScrollBar"+this.element.id),s=this.host.find("#horizontalScrollBar"+this.element.id);this.bottomRight=this.host.find("#bottomRight").addClass(this.toTP("jqx-grid-bottomright")).addClass(this.toTP("jqx-scrollbar-state-normal")),this.vScrollBar&&this.vScrollBar.jqxScrollBar("destroy"),this.hScrollBar&&this.hScrollBar.jqxScrollBar("destroy"),this.vScrollBar=r.jqxScrollBar({vertical:!0,rtl:this.rtl,touchMode:this.touchmode,theme:this.theme,_triggervaluechanged:!1}),this.hScrollBar=s.jqxScrollBar({vertical:!1,rtl:this.rtl,touchMode:this.touchmode,theme:this.theme,_triggervaluechanged:!1}),this.vScrollBar.css("visibility","hidden"),this.hScrollBar.css("visibility","hidden"),this.vScrollInstance=e.data(this.vScrollBar[0],"jqxScrollBar").instance,this.hScrollInstance=e.data(this.hScrollBar[0],"jqxScrollBar").instance,this.filter=this.host.find("#filter"),this.filter[0].id="filter"+this.element.id,this.filter.addClass(this.toTP("jqx-widget-header")),this.filter.addClass(this.toTP("jqx-grid-toolbar")),this.pager=this.host.find("#pager"),this.pager[0].id="pager"+this.element.id,this.toolbar=this.host.find("#toolbar"),this.toolbar[0].id="toolbar"+this.element.id,this.toolbar.addClass(this.toTP("jqx-grid-toolbar")),this.toolbar.addClass(this.toTP("jqx-widget-header")),this.aggregates=this.host.find("#aggregates"),this.aggregates[0].id="aggregates"+this.element.id,this.aggregates.addClass(this.toTP("jqx-grid-statusbar")),this.aggregates.addClass(this.toTP("jqx-widget-header")),this.statusbar=this.host.find("#statusbar"),this.statusbar[0].id="statusbar"+this.element.id,this.statusbar.addClass(this.toTP("jqx-grid-statusbar")),this.statusbar.addClass(this.toTP("jqx-widget-header")),this.pager.addClass(this.toTP("jqx-grid-pager")),this.pager.addClass(this.toTP("jqx-widget-header")),this.toppager=this.host.find("#toppager"),this.toppager.addClass(this.toTP("jqx-grid-pager-top")),this.toppager.addClass(this.toTP("jqx-widget-header")),this.gridtable=null,this.localizestrings&&(this.localizestrings(),null!=this.localization&&this.localizestrings(this.localization,!1)),this._builddataloadelement(),this._cachedcolumns=this.columns;var a=this.source.datafields;if(null==a&&this.source._source&&(a=this.source._source.datafields),a)for(var o=0;o<this.columns.length;o++){var l=this.columns[o];if(l&&l.cellsFormat&&l.cellsFormat.length>2)for(var n=0;n<a.length;n++)if(a[n].name==l.datafield&&!a[n].format){a[n].format=l.cellsFormat;break}}this.databind(this.source),this.showtoolbar&&this.toolbar.css("visibility","inherit"),this.showstatusbar&&this.statusbar.css("visibility","inherit"),this.showAggregates&&this.aggregates.css("visibility","inherit"),this.tableheight=null;var d=this,h=function(){d.content&&(d.content[0].scrollTop=0,d.content[0].scrollLeft=0),d.gridcontent&&(d.gridcontent[0].scrollLeft=0,d.gridcontent[0].scrollTop=0)};this.removeHandler(this.content,"scroll"),this.removeHandler(this.content,"mousedown"),this.addHandler(this.content,"scroll",function(e){return h(),!1}),!0!==t&&this._render()},_render:function(){if(null!=this.dataview&&!this._loading){(25!=this.columnsHeight||this.columnGroups)&&this._measureElement("column"),this.filterable?this.filter[0].style.visibility="inherit":this.filter[0].style.visibility="hidden",this.rowinfo=new Array,this._removeHandlers(),null==this.columns?this.columns=new e.jqx.dataCollection(this.element):this._initializeColumns(),this.host.height(this.height),this.host.width(this.width),e.jqx.utilities.html(this.content,""),this.columnsheader=this.columnsheader||e('<div style="overflow: hidden;"></div>'),this.columnsheader.remove(),this.columnsheader.addClass(this.toTP("jqx-widget-header")),this.columnsheader.addClass(this.toTP("jqx-grid-header")),this.showHeader?this.columnsheader&&this.columnsheader.css("display","block"):this.columnsheader.css("display","none"),this.gridcontent=this.gridcontent||e('<div style="width: 100%; overflow: hidden; position: absolute;"></div>'),this.gridcontent.remove();var t=this.columnsHeight;t=this._preparecolumnGroups(),this.columnsheader.height(t),this.content.append(this.columnsheader),this.content.append(this.gridcontent),this._rendercolumnheaders(),this.tableheight=null,this.gridcontent.find("#contenttable"+this.element.id).remove(),null!=this.table&&(this.table.remove(),this.table=null),this.table=e('<div id="contenttable'+this.element.id+'" style="overflow: hidden; position: relative;"></div>'),this.gridcontent.addClass(this.toTP("jqx-grid-content")),this.gridcontent.addClass(this.toTP("jqx-widget-content")),this.gridcontent.append(this.table),this._renderrows(),this.filterable&&this._renderfilter(),this.pageable&&this._initpager(),this._arrange(),this.renderStatusBar&&this.renderStatusBar(this.statusbar),this.rendertoolbar&&this.rendertoolbar(this.toolbar),this.showAggregates&&this._updateaggregates(),this.disabled&&this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")),this._renderhorizontalscroll(),this._showicons(),this._addHandlers()}},clear:function(){this.source&&(this.source.records=new Array,this.source.hierarchy=new Array),this.dataview._filteredData=new Array,this.databind(null),this._render()},_initpager:function(){var t=this.gridlocalization.pagergotopagestring,i=(this.gridlocalization.pagerrangestring,this.gridlocalization.pagershowrowsstring),r=(this.pagerHeight-17)/2;if(this.pagerdiv=this.pagerdiv||e('<div style="width: 100%; height: 100%; position: relative;"></div>'),this.toppagerdiv=this.toppagerdiv||e('<div style="width: 100%; height: 100%; position: relative;"></div>'),!this.pageable)return this.pagerdiv.remove(),void this.toppagerdiv.remove();if(this.pagerRenderer){this.pagerdiv.children().remove(),this.toppager.children().remove();var s=this.pagerRenderer();null!=s&&this.pagerdiv.append(e(s)),this.pager.append(this.pagerdiv);var s=this.pagerRenderer();null!=s&&this.toppagerdiv.append(e(s)),this.toppager.append(this.toppagerdiv)}else{this.pagerdiv.css("top",r),this.toppagerdiv.css("top",r);var a=function(r,s){var a=this,o=e('<div style="margin-right: 7px; width: 27px; height: 17px; float: right;"><input style="margin-top: 0px; text-align: right; width: 27px;" type="text"/></div>'),l=e('<div style="float: right; margin-right: 7px;"></div>'),n=e('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'),d=e('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'),h=e('<div type="button" style="margin-left: 3px; padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'),c=e('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'),u=e('<div style="margin-right: 7px; float: right;"></div>'),g=e('<div style="margin-right: 7px; float: right;"></div>'),p=e('<div style="padding-bottom: 3px; margin-right: 3px; float: right;"></div>');o.attr("disabled",a.disabled);var f=e('<div id="gridpagerlist" style="margin-top: 0px; margin-right: 7px; float: right;"></div>');if(f[0].id="gridpagerlist"+s+a.element.id,a.removeHandler(n,"mousedown"),a.removeHandler(n,"mouseup"),a.removeHandler(n,"click"),a.removeHandler(d,"mousedown"),a.removeHandler(d,"mouseup"),a.removeHandler(d,"click"),a.removeHandler(h,"mousedown"),a.removeHandler(h,"mouseup"),a.removeHandler(h,"click"),a.removeHandler(c,"mousedown"),a.removeHandler(c,"mouseup"),a.removeHandler(c,"click"),a.rtl?(n.attr("title",a.gridlocalization.pagerpreviousbuttonstring),d.attr("title",a.gridlocalization.pagernextbuttonstring)):(d.attr("title",a.gridlocalization.pagerpreviousbuttonstring),n.attr("title",a.gridlocalization.pagernextbuttonstring)),e.jqx.browser.msie&&e.jqx.browser.version<8&&p.css("padding-top","3px"),this["pagerfirst"+s]=h,this["pagerlast"+s]=c,this["pagernext"+s]=n,this["pagerprevious"+s]=d,this["pagergotoinput"+s]=o,this["pagerdetails"+s]=u,this["pagershowrows"+s]=g,this["pagergotolabel"+s]=l,this["pagershowrowscombo"+s]=f,this["pagerbuttons"+s]=p,"default"==a.pagerMode){a.rtl?(c.attr("title",a.gridlocalization.pagerfirstbuttonstring),h.attr("title",a.gridlocalization.pagerlastbuttonstring)):(h.attr("title",a.gridlocalization.pagerfirstbuttonstring),c.attr("title",a.gridlocalization.pagerlastbuttonstring));var v=e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");v.addClass(a.toThemeProperty("jqx-icon-arrow-first")),h.wrapInner(v);var m=e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");m.addClass(a.toThemeProperty("jqx-icon-arrow-last")),c.wrapInner(m),a.rtl?(r.append(c),r.append(n),r.append(p),r.append(d),r.append(h)):(r.append(h),r.append(d),r.append(p),r.append(n),r.append(c)),c.jqxButton({cursor:"pointer",disabled:a.disabled,theme:a.theme}),h.jqxButton({cursor:"pointer",disabled:a.disabled,theme:a.theme});var w=a.rtl?"right":"left";p.css("float",w),c.css("float",w),h.css("float",w),n.css("float",w),d.css("float",w),u.css("float",a.rtl?"left":"right"),a.rtl?(u.css("margin-left","7px"),u.css("margin-right","0px")):(u.css("margin-left","0px"),u.css("margin-right","7px"))}else a.rtl||(r.append(n),r.append(d));n.jqxButton({cursor:"pointer",disabled:a.disabled,theme:a.theme}),d.jqxButton({cursor:"pointer",disabled:a.disabled,theme:a.theme});var y=e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");y.addClass(a.toThemeProperty("jqx-icon-arrow-left")),d.wrapInner(y);var x=e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");if(x.addClass(a.toThemeProperty("jqx-icon-arrow-right")),n.wrapInner(x),a.rtl||r.append(u),"default"!=a.pagerMode){a.rtl?(r.append(l),r.append(o),r.append(g),r.append(f),r.append(u),r.append(n),r.append(d)):(r.append(f),r.append(g),r.append(o),r.append(l));var b=a.pageSizeOptions;f.jqxDropDownList({_checkForHiddenParent:!1,rtl:a.rtl,disabled:a.disabled,source:b,enableBrowserBoundsDetection:!0,keyboardSelection:!1,autoDropDownHeight:!0,width:44,height:16,theme:a.theme});for(var _=0,j=0;j<b.length;j++)this.pageSize>=b[j]&&(_=j);l[0].innerHTML=t,f.jqxDropDownList({selectedIndex:_});var q=o.find("input");q.addClass(a.toThemeProperty("jqx-input")),q.addClass(a.toThemeProperty("jqx-widget-content")),this.rtl&&q.css("direction","rtl");var a=this;this.removeHandler(f,"select"),this.addHandler(f,"select",function(e){if(e.args){a.vScrollInstance&&a.vScrollInstance.setPosition(0);var t=e.args.index;a.pagershowrowscombotop.data().jqxDropDownList.instance.selectIndex(t),a.pagershowrowscombobottom.data().jqxDropDownList.instance.selectIndex(t),a.pagershowrowscombobottom.data().jqxDropDownList.instance.renderSelection("mouse"),a.pagershowrowscombotop.data().jqxDropDownList.instance.renderSelection("mouse");var i=a.dataview.pagenum*a.dataview.pagesize,r=b[t],s=a.pageSize;a.pageSize=parseInt(r),isNaN(a.pageSize)&&(a.pageSize=10),r>=100?(a.pagershowrowscombotop.jqxDropDownList({width:55}),a.pagershowrowscombobottom.jqxDropDownList({width:55})):(a.pagershowrowscombotop.jqxDropDownList({width:44}),a.pagershowrowscombobottom.jqxDropDownList({width:44})),a.dataview.pagesize=a.pageSize;var o=Math.floor(i/a.dataview.pagesize);if(o!==a.dataview.pagenum||parseInt(r)!==parseInt(s)){a._raiseEvent("pageSizeChanged",{pagenum:o,oldpageSize:s,pageSize:a.dataview.pagesize});a.goToPage(o)||(a.serverProcessing?a.updateBoundData("pager"):a.refresh())}}});var o=o.find("input");o.addClass(a.toThemeProperty("jqx-grid-pager-input")),o.addClass(a.toThemeProperty("jqx-rc-all")),this.removeHandler(o,"keydown"),this.removeHandler(o,"change"),a.addHandler(o,"keydown",function(e){if(e.keyCode>=65&&e.keyCode<=90)return!1;if("13"==e.keyCode){var t=o.val();return t=parseInt(t),isNaN(t)||a.goToPage(t-1),!1}}),a.addHandler(o,"change",function(){var e=o.val();e=parseInt(e),isNaN(e)||a.goToPage(e-1)})}g[0].innerHTML=i,a.addHandler(n,"mouseenter",function(){x.addClass(a.toThemeProperty("jqx-icon-arrow-right-hover"))}),a.addHandler(d,"mouseenter",function(){y.addClass(a.toThemeProperty("jqx-icon-arrow-left-hover"))}),a.addHandler(n,"mouseleave",function(){x.removeClass(a.toThemeProperty("jqx-icon-arrow-right-hover"))}),a.addHandler(d,"mouseleave",function(){y.removeClass(a.toThemeProperty("jqx-icon-arrow-left-hover"))}),a.addHandler(n,"mousedown",function(){x.addClass(a.toThemeProperty("jqx-icon-arrow-right-selected"))}),a.addHandler(n,"mouseup",function(){x.removeClass(a.toThemeProperty("jqx-icon-arrow-right-selected"))}),a.addHandler(d,"mousedown",function(){y.addClass(a.toThemeProperty("jqx-icon-arrow-left-selected"))}),a.addHandler(d,"mouseup",function(){y.removeClass(a.toThemeProperty("jqx-icon-arrow-left-selected"))}),"default"===a.pagerMode&&(a.addHandler(c,"mouseenter",function(){m.addClass(a.toThemeProperty("jqx-icon-arrow-last-hover"))}),a.addHandler(h,"mouseenter",function(){v.addClass(a.toThemeProperty("jqx-icon-arrow-first-hover"))}),a.addHandler(c,"mouseleave",function(){m.removeClass(a.toThemeProperty("jqx-icon-arrow-last-hover"))}),a.addHandler(h,"mouseleave",function(){v.removeClass(a.toThemeProperty("jqx-icon-arrow-first-hover"))}),a.addHandler(c,"mousedown",function(){m.addClass(a.toThemeProperty("jqx-icon-arrow-last-selected"))}),a.addHandler(h,"mousedown",function(){v.addClass(a.toThemeProperty("jqx-icon-arrow-first-selected"))}),a.addHandler(c,"mouseup",function(){m.removeClass(a.toThemeProperty("jqx-icon-arrow-last-selected"))}),a.addHandler(h,"mouseup",function(){v.removeClass(a.toThemeProperty("jqx-icon-arrow-first-selected"))})),a.addHandler(e(document),"mouseup.pagerbuttons"+s+this.element.id,function(){x.removeClass(a.toThemeProperty("jqx-icon-arrow-right-selected")),y.removeClass(a.toThemeProperty("jqx-icon-arrow-left-selected")),m&&(m.removeClass(a.toThemeProperty("jqx-icon-arrow-last-selected")),v.removeClass(a.toThemeProperty("jqx-icon-arrow-first-selected")))}),a.addHandler(n,"click",function(){n.jqxButton("disabled")||(a.rtl?a.goToPrevPage():a.goToNextPage())}),a.addHandler(d,"click",function(){d.jqxButton("disabled")||(a.rtl?a.goToNextPage():a.goToPrevPage())}),"default"===this.pagerMode&&(a.addHandler(h,"click",function(){if(!h.jqxButton("disabled"))if(a.rtl){var e=a.dataview.totalrecords,t=Math.ceil(e/a.pageSize);a.goToPage(t-1)}else a.goToPage(0)}),a.addHandler(c,"click",function(){if(!c.jqxButton("disabled"))if(a.rtl)a.goToPage(0);else{var e=a.dataview.totalrecords,t=Math.ceil(e/a.pageSize);a.goToPage(t-1)}}))};this.pagerdiv.children().remove(),this.toppagerdiv.children().remove(),a.call(this,this.pagerdiv,"bottom"),a.call(this,this.toppagerdiv,"top"),this.pager.append(this.pagerdiv),this.toppager.append(this.toppagerdiv),this.updatepagerdetails()}},_updatepagertheme:function(){},goToPage:function(t,i){if(this._loading)return!1;if(void 0!=this.editKey){if(!this.editSettings.saveOnPageChange)return!1;if(!this.endroweditbykey(this.editKey))return!1}if(null!=t&&void 0!=t||(t=0),-1==t&&(t=0),t<0)return!1;var r=this.dataview.totalrecords,s=this.dataview.pagenum,a=Math.ceil(r/this.pageSize);return t>=a&&(0==this.dataview.totalrecords&&(this.dataview.pagenum=0,this.updatepagerdetails()),t>0&&(t=a-1)),this.dataview.pagenum!=t&&(this.pageable&&(this.dataview.pagenum=t,this._raiseEvent("pageChanged",{pagenum:t,oldpagenum:s,pageSize:this.dataview.pagesize})),this.serverProcessing?this.updateBoundData("pager",i):(this.refresh(),i&&e.isFunction(i)&&i()),!0)},goToPrevPage:function(e){if(this.dataview.pagenum>0)return this.goToPage(this.dataview.pagenum-1,e);if("default"!=this.pagerMode&&"advanced"!=this.pagerMode){var t=this.dataview.totalrecords,i=Math.ceil(t/this.pageSize);return this.goToPage(i-1,e)}return!1},goToNextPage:function(e){var t=this.dataview.totalrecords;this.summaryrows&&(t+=this.summaryrows.length);var i=Math.ceil(t/this.pageSize);return this.dataview.pagenum<i-1?this.goToPage(this.dataview.pagenum+1,e):"default"!=this.pagerMode&&"advanced"!=this.pagerMode&&this.goToPage(0,e)},updatepagerdetails:function(){if(this.pageable){var t=this;if(!this.serverProcessing)if(this.source.hierarchy){var i=t._names(),r=0,s=function(a,o){for(var l=0;l<o.length;l++)0==t.dataview.filters.length&&(o[l]._visible=!0),!1!==o[l]._visible&&r++,t.treeGrid&&"root"==t.treeGrid.pageSizeMode||o[l].records&&(o[l][i.expanded]||o[l][i.leaf])&&!1!==o[l]._visible&&(s(a+1,o[l].records),this.treeGrid&&e(this.treeGrid).jqxTreeGrid("showSubAggregates")&&0!=a&&r--)};s(0,this.dataview.rows),this.dataview.totalrecords=r}else this.dataview.totalrecords=this.dataview.rows.length;var a=this.dataview.pagenum*this.pageSize,o=(this.dataview.pagenum+1)*this.pageSize;o>=this.dataview.totalrecords&&(o=this.dataview.totalrecords);var l=this.dataview.totalrecords;a++;var n=Math.ceil(l/this.dataview.pagesize);if(n>=1&&n--,n++,"root"==this.pageSizeMode&&(n=Math.ceil(this.rootRecordsLength/this.dataview.pagesize),n>=1&&n--,n++,l=this.rootRecordsLength,this.dataview.totalrecords=this.rootRecordsLength),"default"!=this.pagerMode){if(this.pagergotoinputbottom){var d=this.pagergotoinputbottom.find("input");d.val(this.dataview.pagenum+1),d.attr("title","1 - "+n),d=this.pagergotoinputtop.find("input"),d.val(this.dataview.pagenum+1),d.attr("title","1 - "+n)}}else{var h="",c=this.pagerButtonsCount;0!=c&&c||(c=5);var u=0;for(this.rtl&&(u=c-1);this.rtl&&u>=0||!this.rtl&&u<c;){var g=1+u,p=this.dataview.pagenum/c;g+=Math.floor(p)*c;var f=this.toTP("jqx-grid-pager-number");if(f+=" "+this.toTP("jqx-rc-all"),g>n&&!this.rtl)break;if(this.rtl&&g>n)u--;else{if(this.rtl||0==u&&g>c&&(h+="<a class='"+f+"' tabindex=-1 href='javascript:;' data-page='"+(-1+g)+"'>...</a>"),this.dataview.pagenum===g-1&&(f+=" "+this.toTP("jqx-fill-state-pressed")),this.rtl){if(u===c-1){var f=this.toTP("jqx-grid-pager-number");f+=" "+this.toTP("jqx-rc-all"),n>=1+g&&(h+="<a class='"+f+"' tabindex=-1 href='javascript:;' data-page='"+(1+g)+"'>...</a>")}this.dataview.pagenum===g-1&&(f+=" "+this.toTP("jqx-fill-state-pressed")),h+="<a class='"+f+"' tabindex=-1 href='javascript:;' data-page='"+g+"'>"+g+"</a>"}else if(h+="<a class='"+f+"' tabindex=-1 href='javascript:;' data-page='"+g+"'>"+g+"</a>",u===c-1){var f=this.toTP("jqx-grid-pager-number");f+=" "+this.toTP("jqx-rc-all"),n>=1+g&&(h+="<a class='"+f+"' tabindex=-1 href='javascript:;' data-page='"+(1+g)+"'>...</a>")}if(this.rtl){var f=this.toTP("jqx-grid-pager-number");f+=" "+this.toTP("jqx-rc-all"),0==u&&g>c&&(h+="<a class='"+f+"' tabindex=-1 href='javascript:;' data-page='"+(-1+g)+"'>...</a>")}this.rtl?u--:u++}}if(!this.pagerbuttonsbottom)return;var v=this.pagerbuttonsbottom.find("a");this.removeHandler(v,"click"),this.removeHandler(v,"mouseenter"),this.removeHandler(v,"mouseleave");var v=this.pagerbuttonstop.find("a");this.removeHandler(v,"click"),this.removeHandler(v,"mouseenter"),this.removeHandler(v,"mouseleave"),this.pagerbuttonsbottom[0].innerHTML=h,this.pagerbuttonstop[0].innerHTML=h,this.disabled&&this.host.find(".jqx-grid-pager-number").css("cursor","default");var m=function(){v.click(function(i){if(!t.disabled){var r=e(i.target).attr("data-page");t.goToPage(parseInt(r)-1)}}),v.mouseenter(function(i){t.disabled||e(i.target).addClass(t.toTP("jqx-fill-state-hover"))}),v.mouseleave(function(i){t.disabled||e(i.target).removeClass(t.toTP("jqx-fill-state-hover"))})};if("both"===this.pagerPosition||"bottom"===this.pagerPosition){var v=this.pagerbuttonsbottom.find("a");m()}if("both"===this.pagerPosition||"top"===this.pagerPosition){var v=this.pagerbuttonstop.find("a");m()}}if(0==o&&o<a&&(a=0),this.pagerdetailsbottom&&(this.rtl?(this.pagerdetailsbottom[0].innerHTML=l+this.gridlocalization.pagerrangestring+o+"-"+a,this.pagerdetailstop[0].innerHTML=l+this.gridlocalization.pagerrangestring+o+"-"+a):(this.pagerdetailsbottom[0].innerHTML=a+"-"+o+this.gridlocalization.pagerrangestring+l,this.pagerdetailstop[0].innerHTML=a+"-"+o+this.gridlocalization.pagerrangestring+l)),"default"==this.pagerMode){var w=this.pagerbuttonsbottom.width()+e(this.pagerdetailsbottom).width()+160;this.pagerdiv.css("min-width",w),this.toppagerdiv.css("min-width",w)}a>o&&this.goToPrevPage()}},_preparecolumnGroups:function(){var e=this.columnsHeight;if(this.columnGroups){if(this.columnshierarchy=new Array,this.columnGroups.length){for(var t=this,i=0;i<this.columnGroups.length;i++)this.columnGroups[i].parent=null,this.columnGroups[i].groups=null;for(var i=0;i<this.columns.records.length;i++)this.columns.records[i].parent=null,this.columns.records[i].groups=null;for(var r=function(e){for(var i=0;i<t.columnGroups.length;i++){var r=t.columnGroups[i];if(r.name===e)return r}return null
},i=0;i<this.columnGroups.length;i++){var s=this.columnGroups[i];if(s.groups||(s.groups=null),s.parentGroup&&(s.parentgroup=s.parentGroup),s.parentgroup){var a=r(s.parentgroup);a&&(s.parent=a,a.groups||(a.groups=new Array),-1===a.groups.indexOf(s)&&a.groups.push(s))}}for(var i=0;i<this.columns.records.length;i++){var s=this.columns.records[i];if(s.columngroup){var a=r(s.columngroup);a&&(a.groups||(a.groups=new Array),s.parent=a,-1===a.groups.indexOf(s)&&a.groups.push(s))}}for(var o=0,i=0;i<this.columns.records.length;i++){var s=this.columns.records[i],l=s;for(s.level=0;l.parent;)l=l.parent,s.level++;var l=s,n=s.level;for(o=Math.max(o,s.level);l.parent;)(l=l.parent)&&(l.level=--n)}for(var d=function(e){var t=new Array;if(e.columngroup&&t.push(e),!e.groups)return new Array;for(var i=0;i<e.groups.length;i++)if(e.groups[i].columngroup)t.push(e.groups[i]);else if(e.groups[i].groups)for(var r=d(e.groups[i]),s=0;s<r.length;s++)t.push(r[s]);return t},i=0;i<this.columnGroups.length;i++){var s=this.columnGroups[i],h=d(s);s.columns=h;for(var c=new Array,u=0,g=0;g<h.length;g++)c.push(this.columns.records.indexOf(h[g])),h[g].pinned&&u++;if(0!=u)throw new Error("jqxDataTable: Column Groups initialization Error. Please, check the initialization of the jqxDataTable's columns array. The columns in a column group cannot be pinned.");c.sort(function(e,t){return e=parseInt(e),t=parseInt(t),e<t?-1:e>t?1:0});for(var p=1;p<c.length;p++)if(c[p]!=c[p-1]+1)throw new Error("jqxDataTable: Column Groups initialization Error. Please, check the initialization of the jqxDataTable's columns array. The columns in a column group are expected to be siblings in the columns array.")}}this.columnGroupslevel=1+o,e=this.columnGroupslevel*this.columnsHeight}return e},wheel:function(e,t){if(t.autoheight&&"hidden"==t.hScrollBar.css("visibility"))return e.returnValue=!0,!0;var i=0;if(e||(e=window.event),e.originalEvent&&e.originalEvent.wheelDelta&&(e.wheelDelta=e.originalEvent.wheelDelta),e.wheelDelta?i=e.wheelDelta/120:e.detail&&(i=-e.detail/3),i){var r=t._handleDelta(i);return r&&(e.preventDefault&&e.preventDefault(),null!=e.originalEvent&&(e.originalEvent.mouseHandled=!0),void 0!=e.stopPropagation&&e.stopPropagation()),!!r&&(r=!1,e.returnValue=r,r)}e.preventDefault&&e.preventDefault(),e.returnValue=!1},_handleDelta:function(e){if("hidden"!=this.vScrollBar.css("visibility")){var t=this.vScrollInstance.value;e<0?this.vScrollInstance.setPosition(this.vScrollInstance.value+20):this.vScrollInstance.setPosition(this.vScrollInstance.value-20);var i=this.vScrollInstance.value;if(t!=i)return!0}else if("hidden"!=this.hScrollBar.css("visibility")){var t=this.hScrollInstance.value;e>0?this.hScrollInstance.value>20?this.hScrollInstance.setPosition(this.hScrollInstance.value-20):this.hScrollInstance.setPosition(0):this.hScrollInstance.value<this.hScrollInstance.max?this.hScrollInstance.setPosition(this.hScrollInstance.value+20):this.hScrollInstance.setPosition(this.hScrollInstance.max);var i=this.hScrollInstance.value;if(t!=i)return!0}return!1},_removeHandlers:function(){this.removeHandler(this.host,"focus"),this.removeHandler(e(window),"jqxReady."+this.element.id),this._mousewheelfunc&&this.removeHandler(this.host,"mousewheel",this._mousewheelfunc);var t="mousedown";this.isTouchDevice()&&(t=e.jqx.mobile.getTouchEventName("touchstart")),this.removeHandler(this.host,"dragstart."+this.element.id),this.removeHandler(this.host,"keydown"),this.table&&(this.removeHandler(this.table,"mouseleave"),this.removeHandler(this.table,"mousemove"),this.removeHandler(this.table,t),this.removeHandler(this.table,"selectstart."+this.element.id),e.jqx.browser.msie&&e.jqx.browser.version<9&&this.removeHandler(this.table,"dblclick"))},_addHandlers:function(){var t=this;this._mousewheelfunc=this._mousewheelfunc||function(e){return t.wheel(e,t),!1},this.addHandler(this.host,"dragstart."+this.element.id,function(e){return!1}),this.addHandler(this.table,"selectstart."+this.element.id,function(i){return!!t.enableBrowserSelection||(!(!t.filterable||!e(i.target).ischildof(t.filterrow))||(!!(t.rowDetails&&e(i.target).parents("[data-role=details]").length>0)||void 0!=t.editKey&&void 0))}),this.addHandler(e(window),"jqxReady."+this.element.id,function(){t._updatecolumnwidths(),t.refresh()}),this.editable&&this.addHandler(e(document),"mousedown.gridedit"+this.element.id,function(i){if(t.editable&&t.editSettings.saveOnBlur&&null!=t.editKey&&!t.vScrollInstance.isScrolling()&&!t.vScrollInstance.isScrolling()){var r=t.host.coord(),s=t.host.width(),a=t.host.height(),o=!1,l=!1;if((i.pageY<r.top||i.pageY>r.top+a)&&(o=!0,l=!0),(i.pageX<r.left||i.pageX>r.left+s)&&(o=!0,!0),o){var n=t._editors;if(n)for(var d=0;d<n.length;d++){var h=n[d].editor,c=function(t){var r=e(t.children()[0]).data();if(r&&!r.jqxWidget&&(r=t.data()),r||(r=t.data()),r.jqxWidget&&r.jqxWidget.container&&"block"==r.jqxWidget.container[0].style.display){var s=r.jqxWidget,a=s.container.coord().top,n=s.container.coord().top+s.container.height();return!(!l||!(i.pageY<a||i.pageY>n))&&(o=!0,s.close(),!0)}}(h),u=h.attr("aria-owns");if(u){if(u==document.activeElement.id)return!0;if(e(document.activeElement).ischildof(e("#"+u)))return!0}else if(u=h.children().attr("aria-owns")){if(u==document.activeElement.id)return!0;if(e(document.activeElement).ischildof(e("#"+u)))return!0}if(!1===c)return}}o&&t.endroweditbykey(t.editKey)}}),this.removeHandler(this.host,"mousewheel",this._mousewheelfunc),this.addHandler(this.host,"mousewheel",this._mousewheelfunc),this.addHandler(this.host,"focus",function(e){e.preventDefault});var i=this.isTouchDevice();this.vScrollInstance.valueChanged=function(e){t._timer&&clearTimeout(t._timer),i?t.table&&(t.table[0].style.top=0-t.vScrollInstance.value+"px"):t._timer=setTimeout(function(){t.table&&(t.table[0].style.top=0-t.vScrollInstance.value+"px")},5)},this.hScrollInstance.valueChanged=function(e){t._timer&&clearTimeout(t._timer),i?t.table&&t._renderhorizontalscroll():t._timer=setTimeout(function(){t.table&&t._renderhorizontalscroll()},5)};var r="mousedown";this.isTouchDevice()&&(r=e.jqx.mobile.getTouchEventName("touchend"),e.jqx.browser.msie&&e.jqx.browser.version<10&&(r="mousedown"));var s=function(e,i){for(var r=null,s=t._table.coord(),a=s.top,o=s.left,l=t._table[0].rows,n=0;n<l.length;n++)for(var d=l[n],h=d.cells,c=0;c<h.length;c++){var u=h[c],g=u.offsetLeft+o,p=u.offsetTop+a,f=u.offsetWidth,v=u.offsetHeight;if(0!==f&&0!==v){if(!(p<=i&&i<p+v))break;if(g<=e&&e<g+f){r=u;break}}}return r},a=function(){if(t.hoveredRow){var e=t.hoveredRow[0].cells,i=function(e){for(var i=0;i<e.length;i++){var r=e[i],s=r.className;s=s.replace(" "+t.toTP("jqx-fill-state-hover"),""),s=s.replace(" "+t.toTP("jqx-grid-cell-hover"),""),r.className=s}};if(i(e),t._pinnedTable&&e.length>0){i(t._pinnedTable[0].rows[t.hoveredRow[0].rowIndex].cells)}}t.hoveredRow=null};this.addHandler(this.table,"mouseleave",function(e){a(),t.wrapper&&(t.wrapper.parent().removeAttr("tabindex",0),t.wrapper.removeAttr("tabindex",1),t.content.removeAttr("tabindex",2))});var o=function(e){if(!t.enableHover)return!0;if(t.hoveredRow=e,!e)return!0;var i=e[0].cells,r=t.rowDetails&&!t.treeGrid,s=r&&!t.treeGrid?1:0,a=0;s>0&&t.rtl&&(s=0,a=1);for(var o=s;o<i.length-a;o++){var l=i[o];l.className+=" "+t.toTP("jqx-fill-state-hover")+" "+t.toTP("jqx-grid-cell-hover")}if(t._pinnedTable&&t._pinnedTable[0].rows.length)for(var n=t._pinnedTable[0].rows[t.hoveredRow[0].rowIndex].cells,o=s;o<n.length-a;o++){var l=n[o];l.className+=" "+t.toTP("jqx-fill-state-hover")+" "+t.toTP("jqx-grid-cell-hover")}};t.isTouchDevice()&&(t.enableHover=!1),this.addHandler(this.table,"mousemove",function(i){var r=i.pageX,l=i.pageY;if(t.disabled)return!0;if(!t.enableHover)return!0;if(t.hScrollInstance.isScrolling()||t.vScrollInstance.isScrolling())return!0;var n=s(r,l);if(!n)return!0;var d=e(n).parent();return a(),!(!t.rowDetails||!t.treeGrid||"row-details"!=d.attr("data-role"))||(!(!t.renderedRecords||0!==t.renderedRecords.length)||(null!=t.editKey&&t.editKey===d.attr("data-key")||(o(d),!0)))}),this.addHandler(this.host,"keydown",function(e){return t._handleKey(e)}),e.jqx.browser.msie&&e.jqx.browser.version<9&&this.addHandler(this.table,"dblclick",function(e){t.table.trigger("mousedown",e)}),this.addHandler(this.table,r,function(i){var r=(i.target,null);if(t.disabled)return!0;if(!(t.touchmode&&i.originalEvent&&i.originalEvent._pageX)){var a=(t.table.coord(),i.pageX),l=i.pageY;if(e.jqx.browser.msie&&e.jqx.browser.version<9&&arguments&&2==arguments.length&&(a=arguments[1].pageX,l=arguments[1].pageY),t.isTouchDevice()){var n=e.jqx.position(i);if(a=n.left,l=n.top,isNaN(a)||isNaN(l)){var n=e.jqx.position(i.originalEvent);a=n.left,l=n.top}}r=s(a,l);var d=e(r).parent(),h=d.attr("data-key");if(t.rowDetails&&t.treeGrid&&"row-details"==d.attr("data-role"))return!0;var c=function(){t.enableBrowserSelection||(i.preventDefault&&i.preventDefault(),i.stopPropagation()),t.host.focus()};if(void 0!==h){var u=e(r).index(),g=t.columns.records[u];if(h==t.editKey){if(!t.editSettings.editSingleCell)return!0;if(t.clickedTD==r)return!0;if(null!=t.editKey&&t.editSettings.saveOnSelectionChange){var p=t.endroweditbykey(t.editKey);if(!p)return!0}}else if(null!=t.editKey&&t.editSettings.saveOnSelectionChange){var p=t.endroweditbykey(t.editKey);if(!p)return!0}t.clickedTD=r;var f=t.rowinfo[h];if(f&&f.group)return!0;var v=!1;if(f){var m=t.getrowdisplayindex(f.row),w=t.getrowindex(f.row);t._raiseEvent("rowClick",{index:m,boundIndex:w,key:h,row:f.row,originalEvent:i,dataField:g.datafield});var y=(new Date).getTime();t.clickTime||(t.clickTime=new Date),t._lastSelectedKey==h&&y-t.clickTime.getTime()<300&&(t._raiseEvent("rowDoubleClick",{index:m,boundIndex:w,key:h,row:f.row,originalEvent:i,dataField:g.datafield}),v=!0,i.preventDefault&&i.preventDefault())}if(t.clickTime=new Date,r.className.indexOf("jqx-grid-group")>=0)f.expanded?t.hidedetailsbykey(h):t.showdetailsbykey(h);else if(i.target&&i.target.className.indexOf&&i.target.className.indexOf("jqx-grid-group")>=0&&t.treeGrid)f.expanded?t.treeGrid.collapseRow(h):t.treeGrid.expandRow(h),o(t._getuirow(h)),i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault();else{if(!(i.target&&i.target.className.indexOf&&i.target.className.indexOf("checkbox")>=0&&t.treeGrid)){var u=e(r).index(),g=t.columns.records[u];if(i.stopPropagation&&i.stopPropagation(),t.editable&&null==t.editKey&&t._lastSelectedKey==h&&t.editSettings.editOnDoubleClick&&v){var p=t.beginroweditbykey(h,g);return!0}if(t.isTouchDevice()&&t.scrolled&&new Date-t.scrolled<500)return t.enableBrowserSelection||i.preventDefault&&i.preventDefault(),!1;if("singlerow"===t.selectionMode&&"custom"!==t.selectionMode)return t.selectrowbykey(h,"mouse",!1),t._lastSelectedKey=h,t._updateSelection(),i.preventDefault&&i.preventDefault(),c(),!0;if("custom"!==t.selectionMode&&(i.ctrlKey||i.metaKey||t.clearSelection(!1),i.shiftKey&&t._lastSelectedKey)){var f=t.rowinfo[t._lastSelectedKey];t._doSelection(t._lastSelectedKey,!0,!1);var x=e(t._table.children()[1]).children("[data-key="+t._lastSelectedKey+"]"),b=x.index(),_=d.index();return t._selectRange(_,b),t.selectrowbykey(h,"mouse",!1),t._updateSelection(),i.preventDefault&&i.preventDefault(),c(),!0}return t._lastSelectedKey=h,t.clickTime=new Date,"custom"===t.selectionMode||(f&&(f.selected?t.unselectrowbykey(h,"mouse",!1):t.selectrowbykey(h,"mouse",!1),c()),t._updateSelection(),t.enableBrowserSelection||i.preventDefault&&i.preventDefault(),!0)}f.checked?t.treeGrid.uncheckRow(h):t.treeGrid.checkRow(h),o(t._getuirow(h)),i.stopPropagation&&i.stopPropagation()}}}})},_updateSelection:function(){var t=this,i=e(t._table.children()[1]).children(),r=t._pinnedTable?e(t._pinnedTable.children()[1]).children():null,s=t.rowDetails&&!t.treeGrid,a=s?1:0,o=0;a>0&&t.rtl&&(a=0,o=1);for(var l=0;l<i.length;l++){var n=i[l].cells;if(r)var d=r[l].cells;var h=null;if(i[l].getAttribute&&(h=i[l].getAttribute("data-key")),t.rowinfo[h]&&"none"!==t.selectionMode)if(t.rowinfo[h].selected)for(var c=a;c<n.length-o;c++){var u=n[c];e(u).addClass(t.toTP("jqx-grid-cell-selected")+" "+t.toTP("jqx-fill-state-pressed")),d&&e(d[c]).addClass(t.toTP("jqx-grid-cell-selected")+" "+t.toTP("jqx-fill-state-pressed"))}else for(var c=a;c<n.length-o;c++){var u=n[c];if(d)var g=d[c];var p=u.className;p=p.replace(" jqx-fill-state-pressed",""),p=p.replace(" jqx-fill-state-pressed-"+t.theme,""),p=p.replace(" jqx-grid-cell-selected",""),p=p.replace(" jqx-grid-cell-selected-"+t.theme,""),u.className=p,g&&(g.className=p)}}},_selectRange:function(t,i){var r=e(e(this._table.children()[1]).children()[i]),s=this;if(t>i)for(var a=i,o=r;a<t;){var o=o.next(),l=o.attr("data-key");s._doSelection(l,!0,!1),a++}else if(t<i)for(var a=i,o=r;a>t;){var o=o.prev(),l=o.attr("data-key");this._doSelection(l,!0,!1),a--}},_getuikey:function(t,i){var r=null,s=e(this._table.children()[1]).children();if(r=e(s[t]).attr("data-key"),e(s[t]).attr("data-role")){var a=e(s[t]);if("next"==i){for(;a;)if(a=a.next()){var o=a.attr("data-role");if(!o)return r=a.attr("data-key")}}else if("prev"==i)for(;a;)if(a=a.prev()){var o=a.attr("data-role");if(!o)return r=a.attr("data-key")}return null}return r},getRows:function(){return this.source.records},getView:function(){var t=this,i=this._names(),r=new Array,s=function(r,a){if(a)for(var o=0;o<a.length;o++)if(a[o]&&!1!==a[o]._visible){var l=e.extend({},a[o]);r.push(l),a[o][i.expanded]?(l.records=new Array,s(l.records,a[o].records)):t.dataview.filters.length>0&&(l.records=new Array,s(l.records,a[o].records))}};return s(r,this.dataViewRecords),r},getKeys:function(){for(var e=new Array,t=this.source.records,i=0;i<t.length;i++)e.push(t[i].uid);return e},getKey:function(e){var t=this.getRows();return t?t[e].uid:-1},_getkey:function(t){if(this._loading)throw new Error("jqxDataTable: "+this.loadingErrorMessage);var i=null,r=function(){var i=e(this._table.children()[1]).children(),r=null,s=0;if(this.pageable&&(s-=this.dataview.pagenum*this.dataview.pagesize),this.groups.length>0){for(var a=0,o=0;o<i.length;o++){var l=e(i[o]);if(!(l.children()[0].getAttribute("colspan")>0)){if(a===s+t)return r=l.attr("data-key");a++}}return r}if(this.rowDetails)for(var a=0,o=0;o<i.length;o++){if(a===t+s)return r=e(i[o]).attr("data-key");o%2==1&&a++}else r=e(i[s+t]).attr("data-key");return r};if(null==(i=r.call(this))&&this.pageable){var s=Math.floor(t/this.dataview.pagesize);if(this.dataview.pagenum!=s){var a=this.getRows()[t];if(a&&null!=a.uid)return a.uid;if(isNaN(s))return null;this.goToPage(s),i=r.call(this)}}return i},_getuirow:function(t){try{var i=e(this._table.children()[1]).children("[data-key="+t+"]");if(i.length>0)return i}catch(i){for(var r=e(this._table.children()[1]).children(),s=0;s<r.length;s++){var a=r[s],o=a.getAttribute("data-key");if(t==o)return e(a)}return null}return null},_getpinneduirow:function(t){if(!this._pinnedTable)return null;try{var i=e(this._pinnedTable.children()[1]).children("[data-key="+t+"]");if(i.length>0)return i}catch(i){for(var r=e(this._pinnedTable.children()[1]).children(),s=0;s<r.length;s++){var a=r[s],o=a.getAttribute("data-key");if(t==o)return e(a)}return null}return null},_names:function(){var e={leaf:"leaf",parent:"parent",expanded:"expanded",checked:"checked",selected:"selected",level:"level",icon:"icon",data:"data"};if(!this.source||this.source&&!this.source._source.hierarchy)return e;var t=this.source._source.hierarchy.reservedNames;return t||e},_getMatches:function(t,i){if(void 0==t||0==t.length)return-1;var r=this.renderedRecords;void 0!=i&&(r=r.slice(i));var s=0;if(this.rowDetails&&!this.treeGrid&&s++,s<this.columns.records.length)var a=this.columns.records[s].datafield;else new Array;var o=new Array;return e.each(r,function(i){var r=this[a];r||(r=""),e.jqx.string.startsWithIgnoreCase(r.toString(),t)&&o.push(this.uid)}),o},_handleKey:function(t){if(this._loading)return!0;if(e(t.target).ischildof(this.filter))return!0;if(e(t.target).ischildof(this.toolbar))return!0;if(e(t.target).ischildof(this.statusbar))return!0;var i=this._names(),r=this,s=t.charCode?t.charCode:t.keyCode?t.keyCode:0,a=this._lastSelectedKey,o=(this.rowinfo[a],this._getuirow(a)),l=t.shiftKey&&"singlerow"!=this.selectionMode,n=t.ctrlKey||t.metaKey;if(o){if(this.handleKeyboardNavigation){if(this.handleKeyboardNavigation(s))return!0}if(this.editable&&void 0==this.editKey&&113===s&&this.editSettings.editOnF2&&this.beginroweditbykey(o.attr("data-key")),void 0==this.editKey&&!n&&!l&&this.incrementalSearch&&!(s>=33&&s<=40)){this._searchString||(this._searchString=""),(8==s||46==s)&&this._searchString.length>=1&&(this._searchString=this._searchString.substr(0,this._searchString.length-1));var d=String.fromCharCode(s),h=!isNaN(parseInt(d));if(s>=65&&s<=97||h||8==s||32==s||46==s){t.shiftKey||(d=d.toLocaleLowerCase()),8!=s&&32!=s&&46!=s&&(this._searchString.length>0&&this._searchString.substr(0,1)==d||(this._searchString+=d)),32==s&&(this._searchString+=" "),this._searchTime=new Date;var a=this.getSelection();if(a.length>=1){for(var c=a[0].uid,u=-1,g=0;g<this.renderedRecords.length;g++)if(this.renderedRecords[g].uid==c){u=g;break}var p=this._getMatches(this._searchString,u);if(0==p.length||p.length>0&&p[0]==c)var p=this._getMatches(this._searchString)}else var p=this._getMatches(this._searchString);if(p.length>0){var a=this.getSelection();if(a.length>=1){var f=p.indexOf(a[0].uid);if(-1==f)this.clearSelection(!1),this.selectrowbykey(p[0]);else{var v=f+1;v>=p.length&&(v=0),this.clearSelection(!1),this.selectrowbykey(p[v])}}else this.clearSelection(!1),this.selectrowbykey(p[0]);this._lastSearchString=this._searchString}}void 0!=this._searchTimer&&clearTimeout(this._searchTimer),27!=s&&13!=s||(this._searchString="",this._lastSearchString=""),this._searchTimer=setTimeout(function(){r._searchString="",r._lastSearchString=""},500)}if(void 0!=this.editKey){if(27===s&&this.editSettings.cancelOnEsc)this.endroweditbykey(this.editKey,!0);else if(13===s&&this.editSettings.saveOnEnter){if(t.target&&"div"!=t.target.nodeName.toLowerCase()&&"input"!=t.target.nodeName.toLowerCase())return!0;this.endroweditbykey(this.editKey,!1)}else if(this.editSettings.editSingleCell&&this.editColumn){var m=this.columns.records.indexOf(this.editColumn);if(9==s&&m<this.columns.records.length-1&&!t.shiftKey){for(var w=this.editKey,y=null,g=m+1;g<this.columns.records.length;g++)if(this.columns.records[g].editable&&!this.columns.records[g].hidden){y=this.columns.records[g];break}y&&(this.endroweditbykey(this.editKey,!1),this.beginroweditbykey(w,y))}else if(9==s&&t.shiftKey&&m>0){for(var w=this.editKey,x=null,g=m-1;g>=0;g--)if(this.columns.records[g].editable&&!this.columns.records[g].hidden){x=this.columns.records[g];break}x&&(this.endroweditbykey(this.editKey,!1),this.beginroweditbykey(w,x))}if(9==s){var b=this.rowinfo[this.editKey],u=this.getrowindex(b),o=this._getuirow(this.editKey);if(t.shiftKey||y){if(!x&&t.shiftKey){for(var _=null,g=this.columns.records.length-1;g>=0;g--)if(this.columns.records[g].editable&&!this.columns.records[g].hidden){_=this.columns.records[g];break}if(_){for(;o;)if(o=o.prev()){var j=o.attr("data-role");if(!j){var q=o.attr("data-key");break}}if(q){this.clearSelection(!1),this._lastSelectedKey=q;var b=this.rowsByKey[q],u=this.getrowindex(b),S=this.getrowdisplayindex(b);this._raiseEvent("rowSelect",{key:q,index:S,boundIndex:u,row:this.rowsByKey[q]}),this.endroweditbykey(this.editKey,!1),this._doSelection(q,!0,!0),this.beginroweditbykey(q,_)}}}}else{for(var _=null,g=0;g<this.columns.records.length;g++)if(this.columns.records[g].editable&&!this.columns.records[g].hidden){_=this.columns.records[g];break}if(_){for(;o;)if(o=o.next()){var j=o.attr("data-role");if(!j){var q=o.attr("data-key");break}}if(q){this.clearSelection(!1),this._lastSelectedKey=q;var b=this.rowsByKey[q],u=this.getrowindex(b),S=this.getrowdisplayindex(b);this._raiseEvent("rowSelect",{key:q,index:S,boundIndex:u,row:this.rowsByKey[q]});var T=this.endroweditbykey(this.editKey,!1);T?(this._doSelection(q,!0,!0),this.beginroweditbykey(q,_)):this.beginroweditbykey(this.editKey,_)}}}return!1}}return!0}if(t.ctrlKey||t.metaKey){var C=String.fromCharCode(s).toLowerCase();if("c"==C||"x"==C){var a=this.getSelection();if(a.length>=1){for(var z="",P=0;P<this.renderedRecords.length;P++)for(var k=this.renderedRecords[P],g=0;g<a.length;g++){var b=a[g];if(b.uid===k.uid){for(var B=0;B<this.columns.records.length;B++){var H=this.getCellTextByKey(b.uid,this.columns.records[B].displayfield);z+=H,B<this.columns.records.length-1&&(z+="\t")}z+="\r\n";break}}if(""!=z&&(z=z.substring(0,z.length-1)),window.clipboardData)window.clipboardData.setData("Text",z);else{var D=e('<textarea style="position: absolute; left: -1000px; top: -1000px;"/>');D.val(z),e("body").append(D),D.select(),setTimeout(function(){document.designMode="off",D.select(),D.remove()},100)}}}}if(32===s&&this.treeGrid&&this.treeGrid.checkboxes){var a=this.getSelection();if(a.length>1){for(var g=0;g<a.length;g++){var I=a[g].uid;this.rowinfo[I].checked?this.treeGrid.uncheckRow(I,!1):this.treeGrid.checkRow(I,!1)}return this._renderrows(),!1}var c=o.attr("data-key");if(c)return this.rowinfo[c].checked?this.treeGrid.uncheckRow(c):this.treeGrid.checkRow(c),!1}var F=o.index(),M=function(t){var i=null,s=e(r._table.children()[1]).children().length-1,a=e(e(r._table.children()[1]).children()[s]),o=a.attr("data-role");if(o){for(;a;)if(a=a.prev()){var o=a.attr("data-role");if(!o){i=a.attr("data-key");break}}}else i=a.attr("data-key");return"all"==t?{row:a,key:i}:i},R=function(t){var i=null,s=e(e(r._table.children()[1]).children()[0]),a=s.attr("data-role");if(a){for(;s;)if(s=s.next()){var a=s.attr("data-role");if(!a){i=s.attr("data-key");break}}}else i=s.attr("data-key");return"all"==t?{row:s,key:i}:i},c=null,A=function(){if(n||l||r.clearSelection(!1),33==s||37==s){var e=F;c=r._getuikey(e,"prev"),c||(c=R())}else if(34==s||39==s){var e=F;c=r._getuikey(e,"next"),c||(c=M())}else 38==s?c=M():40==s&&(c=R());r._lastSelectedKey=c;var t=r.rowsByKey[c],e=r.getrowindex(t),i=r.getrowdisplayindex(t);r._raiseEvent("rowSelect",{key:c,index:i,boundIndex:e,row:r.rowsByKey[c]}),r._doSelection(c,!0,!0),r.host.focus()};if(this.treeGrid&&this.rtl&&(37==s?s=39:39==s&&(s=37)),36==s||n&&38==s)return function(){r.clearSelection(!1);var e=R();l||n?r._selectRange(o.index(),0):r._lastSelectedKey=e,r.selectrowbykey(e,"keyboard")}(),!1;if(35==s||n&&40==s)return function(){r.clearSelection(!1);var e=M("all"),t=e.key;l||n?r._selectRange(o.index(),e.row.index()):r._lastSelectedKey=t,r.selectrowbykey(t,"keyboard")}(),!1;if(33==s||37==s){var c=o.attr("data-key");if(this.rowDetails&&37==s&&!this.treeGrid)return this.hidedetailsbykey(c),!1;if(this.treeGrid&&37==s){if(this.rowinfo[c].row&&!this.rowinfo[c].row[i.parent]&&!this.rowinfo[c][i.leaf]&&!this.rowinfo[c].expanded)return!1;if(this.rowinfo[c].expanded&&!this.rowinfo[c][i.leaf])return this.treeGrid.collapseRow(c),!1;if(this.rowinfo[c].row&&this.rowinfo[c].row[i.parent]&&(c=this.rowinfo[c].row[i.parent].uid),this.rowinfo[c][i.leaf])return!1}if(this.pageable&&!this.treeGrid)return this.rtl?this.goToNextPage(A):this.goToPrevPage(A),!1;if(this.treeGrid&&this.pageable&&33==s)return this.goToPrevPage(A),!1}else if(34==s||39==s){var c=o.attr("data-key");if(this.rowDetails&&39==s&&!this.treeGrid)return this.showdetailsbykey(c),!1;if(this.treeGrid&&39==s){if(this.rowinfo[c][i.leaf])return!1;if(!this.rowinfo[c].expanded)return this.treeGrid.expandRow(c),!1;if(this.rowinfo[c].row&&this.rowinfo[c].row.records&&this.rowinfo[c].row.records.length>0)if(this.dataview.filters.length>0){for(var L=this.rowinfo[c].row.records,g=0;g<L.length;g++)if(L[g]._visible){c=L[g].uid;break}}else c=this.rowinfo[c].row.records[0].uid}if(this.pageable&&!this.treeGrid)return this.rtl?this.goToPrevPage(A):this.goToNextPage(A),!1;if(this.treeGrid&&this.pageable&&34==s)return this.goToNextPage(A),!1}else if(38==s){for(;o;)if(o=o.prev()){var j=o.attr("data-role");if(!j){c=o.attr("data-key");break}}if(this.pageable&&null==c)return this.goToPrevPage(A),!1}else if(40==s){for(;o;)if(o=o.next()){var j=o.attr("data-role");if(!j){c=o.attr("data-key");break}}if(this.pageable&&null==c)return this.goToNextPage(A),!1}if(null!=c){if(n||l||this.clearSelection(!1),this.rowinfo[c]&&this.rowinfo[c].selected&&(n||l)){this._doSelection(this._lastSelectedKey,!1,!1),this._lastSelectedKey=c;var b=this.rowsByKey[c],u=this.getrowindex(b);r._updateSelection();var S=this.getrowdisplayindex(b);return this._raiseEvent("rowUnselect",{key:c,index:S,boundIndex:u,row:b}),!1}this._lastSelectedKey=c;var b=this.rowsByKey[c],u=this.getrowindex(b);this._doSelection(c,!0,!1),r._updateSelection();var S=this.getrowdisplayindex(b);if(this._raiseEvent("rowSelect",{key:c,index:S,boundIndex:u,row:b}),this.treeGrid)if(37==s){var o=this._getuirow(c),K=null;if(o){var j=o.attr("data-role");j||(K=o.attr("data-key"))}if(this.pageable&&null==K&&this.dataview.pagenum>0)for(;null==this._getuirow(c)&&this.dataview.pagenum>0;)this.goToPrevPage()}else if(39==s){var o=this._getuirow(c),K=null;if(o){var j=o.attr("data-role");j||(K=o.attr("data-key"))}this.pageable&&null==K&&this.goToNextPage()}return!1}}},_selection:function(e){if("selectionStart"in e[0]){var t=e[0],i=t.selectionEnd-t.selectionStart;return{start:t.selectionStart,end:t.selectionEnd,length:i,text:t.value}}var r=document.selection.createRange();if(null==r)return{start:0,end:t.value.length,length:0};var s=e[0].createTextRange(),a=s.duplicate();s.moveToBookmark(r.getBookmark()),a.setEndPoint("EndToStart",s);var i=r.text.length;return{start:a.text.length,end:a.text.length+r.text.length,length:i,text:r.text}},_doSelection:function(e,t,i){if(null==e)return void this.clearSelection();"singlerow"===this.selectionMode&&this.clearSelection(!1);var r=this.rowinfo[e];if(r)r.selected=t,this.ensurerowvisiblebykey(e);else{this.ensurerowvisiblebykey(e);var r=this.rowinfo[e];r?r.selected=t:this.rowinfo[e]={selected:t}}"none"!=this.selectionMode&&!1!==i&&this._renderrows()},clearSelection:function(e){if(this.rowinfo){var t=this.getRows();for(var i in this.rowinfo){var r=this.rowinfo[i];if(r.selected){r.selected=!1;var s=t.indexOf(r.row),a=this.getrowdisplayindex(r.row);this._raiseEvent("rowUnselect",{key:i,index:a,boundIndex:s,row:r.row})}}}!1!==e&&this._renderrows()},exportData:function(i){if(!e.jqx.dataAdapter.ArrayExporter){if(!this.treeGrid)throw"jqxDataTable: Missing reference to jqxdata.export.js!";throw"jqxTreeGrid: Missing reference to jqxdata.export.js!"}var r=this.exportSettings.columnsHeader;void 0==r&&(r=!0);var s=this.exportSettings.hiddenColumns;void 0==s&&(s=!1);var a=this.exportSettings.serverURL,o=this.exportSettings.characterSet,l=this.exportSettings.collapsedRecords;void 0==l&&(l=!1);var n=this.exportSettings.fileName;void 0===n&&(n=this.treeGrid?"jqxTreeGrid_Data":"jqxDataTable_Data");var d=this,h=this.getRows();if(1==this.exportSettings.recordsInView&&(h=this.getView()),this.treeGrid&&this.treeGrid.virtualModeCreateRecords)var h=this.treeGrid.getRows();if(this.groups&&this.groups.length>0){var c=this.source.getGroupedRecords(this.groups,"records","label",null,"data",null,"parent",h),u=function(t,i){for(var r=0;r<t.length;r++){var s=e.extend({},t[r]);if(i.push(s),s.records&&s.records.length>0)for(var a=u(s.records,new Array),o=0;o<a.length;o++)a[o].leaf,i.push(a[o])}return i},g=u.call(this,c,new Array);h=g}if(0==h.length)throw"No data to export.";this.exporting=!0,this.altRows&&this._renderrows();for(var p=new Array,f=0;f<this.columns.records.length;f++)!s&&this.columns.records[f].hidden||p.push(e.extend({},this.columns.records[f]));if(this.groups&&this.groups.length>0&&p.length>0)for(var v=this._names(),f=0;f<h.length;f++)h[f][v.leaf]||(d.rtl?h[f][p[p.length-1].displayfield]=h[f].label:h[f][p[0].displayfield]=h[f].label);var m=0;if(this.treeGrid){var w=this.treeGrid.getRows();1==this.exportSettings.recordsInView&&(w=this.getView());var v=this._names(),y=function(e){for(var t=0;t<e.length;t++){var i=e[t],r=i[v.expanded]||!i[v.expanded]&&l;m=Math.max(m,1+i[v.level]),i.records&&i.records.length>0&&r&&y(e[t].records)}};if(y(w),"xml"!=i&&"json"!=i){for(var x=p.length,f=0;f<m;f++){var b=new t(this,this);b.width=this.indentWidth,b.datafield="Level"+f,b.displayfield="Level"+f,b.align="center",b.cellsalign="center",b.text="",this.rtl?p.splice(x,0,b):p.splice(f,0,b)}var _=new Array,j=!(!this.source._source.hierarchy||!this.source._source.hierarchy.groupingDataFields),q=function(t){for(var r=0;r<t.length;r++){for(var s=e.extend({},t[r]),a=0;a<s[v.level];a++)s["Level"+a]="";var o=s[v.expanded]||!s[v.expanded]&&l;("xls"==i||"html"==i||"pdf"==i)&&s.records&&s.records.length>0?s["Level"+s[v.level]]=o?"-":"+":s["Level"+s[v.level]]="",s[v.leaf]&&(s["Level"+s[v.level]]="");for(var a=s[v.level]+1;a<m;a++)s["Level"+a]="";if(j&&!s[v.leaf]&&(d.rtl?s[p[p.length-m-1].displayfield]=s.label:s[p[m].displayfield]=s.label),s.aggregate)for(var n="xls"==i?"_AG":"",a=m;a<p.length;a++){var h=a;d.rtl&&(h=p.length-a-1),void 0!=s[p[h].displayfield]&&(s[p[h].displayfield]=n+s[p[h].displayfield])}_.push(s),o&&!s[v.leaf]&&q(s.records)}};q(w),h=_}else h=w}var S=void 0!=s&&s,T={},C={},z=this.host.find(".jqx-grid-cell:first"),P=this.host.find(".jqx-grid-cell-alt:first"),k=this.toThemeProperty;z.removeClass(k("jqx-grid-cell-selected")),z.removeClass(k("jqx-fill-state-pressed")),P.removeClass(k("jqx-grid-cell-selected")),P.removeClass(k("jqx-fill-state-pressed")),z.removeClass(k("jqx-grid-cell-hover")),z.removeClass(k("jqx-fill-state-hover")),P.removeClass(k("jqx-grid-cell-hover")),P.removeClass(k("jqx-fill-state-hover"));for(var B="cell",H=1,D="column",I=1,F=[],M=0;M<p.length;M++){var b=p[M];if(""!=b.cellclassname)if(b.customCellStyles=new Array,"string"==typeof b.cellclassname)b.customCellStyles.push(b.cellclassname);else for(var f=0;f<h.length;f++){var R=f,A=b.cellclassname(R,b.displayfield,h[f][b.displayfield],h[f]);A&&(b.customCellStyles[f]=A)}}if(e.each(p,function(t){var s=t;d.treeGrid&&(t>=m?s=p.length-m-1:m>0&&t<m&&(s=0));var a=e(d._table[0].rows[0].cells[s]);if(d._table[0].rows.length>1){var o=e(d._table[0].rows[1].cells[s]);if(0==o.length)var o=e(d._table[0].rows[1].cells[0])}if(0==a.length)var a=e(d._table[0].rows[0].cells[0]);var l=this,n=function(e){var t=d.toThemeProperty;if(e.removeClass(t("jqx-cell")),e.removeClass(t("jqx-grid-cell-selected")),e.removeClass(t("jqx-fill-state-pressed")),e.removeClass(t("jqx-grid-cell-hover")),e.removeClass(t("jqx-fill-state-hover")),l.customCellStyles)for(var i in l.customCellStyles)e.removeClass(l.customCellStyles[i])};if(n(a),o&&n(o),null==this.displayfield)return!0;d.showAggregates&&d.getcolumnaggregateddata&&F.push(d.getcolumnaggregateddata(this.displayfield,this.aggregates,!0,h));var c=d._getexportcolumntype(this);!this.exportable||this.hidden&&!S||(T[this.displayfield]={},T[this.displayfield].text=this.text,T[this.displayfield].width=parseInt(this.width),isNaN(T[this.displayfield].width)&&(T[this.displayfield].width=60),T[this.displayfield].width>500&&(T[this.displayfield].width=500),T[this.displayfield].formatString=this.cellsFormat,T[this.displayfield].localization=d.gridlocalization,T[this.displayfield].type=c,T[this.displayfield].cellsAlign=this.cellsalign,T[this.displayfield].hidden=!r,T[this.displayfield].index=s,T[this.displayfield].maxIndex=p.length),B="cell"+H;var u=this.element;if("json"!=i&&"xml"!=i){D="column"+I;var g=function(e,t,r,s,a,o,l,n,d){C[e]={index:1+l,maxIndex:p.length},o.rtl&&(C[e].index=p.length-l),"html"!=i&&"xls"!=i&&"pdf"!=i||(t&&(C[e]["font-size"]=t.css("font-size"),C[e]["font-weight"]=t.css("font-weight"),C[e]["font-style"]=t.css("font-style"),C[e]["background-color"]=o._getexportcolor(t.css("background-color")),C[e].color=o._getexportcolor(t.css("color")),C[e]["border-color"]=o._getexportcolor(t.css("border-top-color"))),r?C[e]["text-align"]=a.align:(C[e]["text-align"]=a.cellsalign,C[e].formatString=a.cellsFormat,C[e].dataType=c),"html"!=i&&"pdf"!=i||(C[e]["border-top-width"]="0px",o.rtl?(C[e]["border-left-width"]="1px",
C[e]["border-right-width"]="0px",l==p.length-m-1&&r&&(C[e]["border-right-width"]="1px")):(C[e]["border-left-width"]="0px",C[e]["border-right-width"]="1px"),C[e]["border-bottom-width"]="1px",t&&(C[e]["border-top-style"]=t.css("border-top-style"),C[e]["border-left-style"]=t.css("border-left-style"),C[e]["border-right-style"]=t.css("border-right-style"),C[e]["border-bottom-style"]=t.css("border-bottom-style")),r?(0!=l||o.rtl?l==p.length-1&&o.rtl&&(C[e]["border-right-width"]="1px"):C[e]["border-left-width"]="1px",t&&(C[e]["border-top-width"]="1px",C[e]["border-bottom-width"]=t.css("border-bottom-width"))):0!=l||o.rtl?l==p.length-1&&o.rtl&&(C[e]["border-right-width"]="1px"):C[e]["border-left-width"]="1px",t&&(C[e].height=t.css("height")),o.treeGrid&&!r&&(C[e].index-1<m?o.rtl?C[e]["border-left-width"]="0px":C[e]["border-right-width"]="0px":C[e].index-1==m&&(o.rtl?C[e]["border-right-width"]="0px":C[e]["border-left-width"]="0px")))),!a.exportable||a.hidden&&!S||(1==n?(T[a.displayfield].customCellStyles||(T[a.displayfield].customCellStyles=new Array),T[a.displayfield].customCellStyles[d]=e):r?T[a.displayfield].style=e:s?T[a.displayfield].cellAltStyle=e:T[a.displayfield].cellStyle=e)};if(g(D,u,!0,!1,this,d,t),I++,g(B,a,!1,!1,this,d,t),d.altRows&&(B="cellalt"+H,g(B,o,!1,!0,this,d,t)),this.customCellStyles){for(var f in l.customCellStyles)a.removeClass(l.customCellStyles[f]);for(var f in l.customCellStyles)a.addClass(l.customCellStyles[f]),g(B+l.customCellStyles[f],a,!1,!1,this,d,t,!0,f),a.removeClass(l.customCellStyles[f])}H++}}),"json"!=i&&"xml"!=i&&m>0&&this.treeGrid){var L=m+1;if(this.rtl&&(L=p.length-m),C["column"+L]){var K=C["column"+L];K.merge=m,K["border-left-width"]="1px";for(var f=(C["cell"+L],0);f<p.length;f++){var L=f+1;this.rtl&&(L=p.length-f),C["column"+L].level=f,C["column"+L].maxLevel=m,C["cell"+L].maxLevel=m;var b=p[f];if(b.customCellStyles)for(var O in b.customCellStyles)C["cell"+L+b.customCellStyles[O]]&&(C["cell"+L+b.customCellStyles[O]].maxLevel=m);C["cellalt"+L]&&(C["cellalt"+L].maxLevel=m)}for(var f=0;f<m;f++){var L=f+1,N=f;this.rtl&&(L=p.length-f);var G=C["column"+L];G.disabled=!0,C["cell"+L].level=N,C["cell"+L].maxLevel=m,C["column"+L].level=N,C["cellalt"+L]&&(C["cellalt"+L].level=N,C["cellalt"+L].maxLevel=m);var b=p[f];if(b.customCellStyles)for(var O in b.customCellStyles)C["cell"+L+b.customCellStyles[O]]&&(C["cell"+L+b.customCellStyles[O]].maxLevel=m,C["cell"+L+b.customCellStyles[O]].level=N);if(("html"==i||"pdf"==i||"xls"==i)&&(G["font-size"]=K["font-size"],G["font-weight"]=K["font-weight"],G["font-style"]=K["font-style"],G["background-color"]=K["background-color"],G.color=K.color,G["border-color"]=K["border-color"],"html"==i||"pdf"==i)){G["border-top-width"]=K["border-top-width"],G["border-left-width"]=K["border-left-width"],this.rtl&&(G["border-right-width"]=K["border-right-width"],0==f&&(G["border-right-width"]="1px")),0!=f||this.rtl?0==f&&this.rtl&&(G["border-left-width"]="0px"):G["border-left-width"]="0px",this.rtl?this.rtl&&(G["border-left-width"]="0px"):G["border-right-width"]="0px",G["border-bottom-width"]="0px";var G=C["cell"+L];this.rtl?this.rtl&&(G["border-left-width"]="0px"):G["border-right-width"]="0px"}}}}if(this.showAggregates){var E=[],W="xls"==i?"_AG":"",V=0;this.rowDetails&&!this.treeGrid&&V++,F.length>0&&(e.each(p,function(e){if(this.aggregates)for(var t=0;t<this.aggregates.length;t++)if(E[t]||(E[t]={}),E[t]){var i=d._getaggregatename(this.aggregates[t]),r=d._getaggregatetype(this.aggregates[t]),s=F[e-V];s&&(E[t][this.displayfield]=W+i+": "+s[r])}}),e.each(p,function(e){for(var t=0;t<E.length;t++)void 0==E[t][this.displayfield]&&(E[t][this.displayfield]=W)})),e.each(E,function(){h.push(this)})}var U=this,Y=e.jqx.dataAdapter.ArrayExporter(h,T,C,a,this.treeGrid&&("xml"==i||"json"==i));if(void 0==n){this._renderrows();var X=this.treeGrid&&("xml"==i||"json"==i),Z=Y.exportTo(i,this.treeGrid&&("xml"==i||"json"==i));return this.showAggregates&&e.each(E,function(){h.pop(this)}),setTimeout(function(){U.exporting=!1},50),Z}var X=this.treeGrid&&("xml"==i||"json"==i);Y.exportToFile(i,n,a,o,X),this.showAggregates&&e.each(E,function(){h.pop(this)}),this._renderrows(),setTimeout(function(){U.exporting=!1},50)},_getexportcolor:function(e){var t=e;if("transparent"==e&&(t="#FFFFFF"),t&&t.toString()||(t="#FFFFFF"),-1!=t.toString().indexOf("rgb")){var i=t.split(",");if(-1!=t.toString().indexOf("rgba")){var r=parseInt(i[0].substring(5)),s=parseInt(i[1]),a=parseInt(i[2]),o=parseInt(i[3].substring(1,4)),l={r:r,g:s,b:a},n=this._rgbToHex(l);return 0==r&&0==s&&0==a&&0==o?"#ffffff":"#"+n}var r=parseInt(i[0].substring(4)),s=parseInt(i[1]),a=parseInt(i[2].substring(1,4)),l={r:r,g:s,b:a},n=this._rgbToHex(l);return"#"+n}if(-1!=t.toString().indexOf("#")&&4==t.toString().length){t+=t.toString().substring(1,4)}return t},_rgbToHex:function(e){return this._intToHex(e.r)+this._intToHex(e.g)+this._intToHex(e.b)},_intToHex:function(e){var t=parseInt(e).toString(16);return 1==t.length&&(t="0"+t),t.toUpperCase()},_getexportcolumntype:function(t){var i=this,r="string",s=i.source.datafields||(i.source._source?i.source._source.datafields:null);if(s){var a="";if(e.each(s,function(){if(this.name==t.displayfield)return this.type&&(a=this.type),!1}),a)return a}if(null!=t){if(void 0==this.dataview.cachedrecords)return r;var o=null;if(this.virtualmode)e.each(this.dataview.cachedrecords,function(){return o=this[t.displayfield],!1});else{if(0==this.dataview.cachedrecords.length)return r;if(null!=(o=this.dataview.cachedrecords[0][t.displayfield])&&""==o.toString())return"string"}if(null!=o){if(-1!=t.cellsFormat.indexOf("c"))return"number";if(-1!=t.cellsFormat.indexOf("n"))return"number";if(-1!=t.cellsFormat.indexOf("p"))return"number";if(-1!=t.cellsFormat.indexOf("d"))return"date";if(-1!=t.cellsFormat.indexOf("y"))return"date";if(-1!=t.cellsFormat.indexOf("M"))return"date";if(-1!=t.cellsFormat.indexOf("m"))return"date";if(-1!=t.cellsFormat.indexOf("t"))return"date";if("boolean"==typeof o)r="boolean";else if(e.jqx.dataFormat.isNumber(o))r="number";else{var l=new Date(o);if("NaN"==l.toString()||"Invalid Date"==l.toString())if(e.jqx.dataFormat){if(null!=(l=e.jqx.dataFormat.tryparsedate(o))){if(l&&l.getFullYear()&&1970==l.getFullYear()&&0==l.getMonth()&&1==l.getDate()){var n=new Number(o);return isNaN(n)?"string":"number"}return"date"}r="string"}else r="string";else r="date"}}}return r},showDetails:function(e){var t=this._getkey(e);this.showdetailsbykey(t)},hideDetails:function(e){var t=this._getkey(e);this.hidedetailsbykey(t)},setCellValueByKey:function(t,i,r){var s=this,a=this.rowsByKey[t],o=this.getrowindex(a),l=a;if(null!=l&&l[i]==r)return!1;if(null==l||null!==l[i]||""!==r){var n="";if(null!=l&&l[i]!==r){var d=this.getColumn(i),h="string",c=this.source.datafields||(this.source._source?this.source._source.datafields:null);if(c){var u="";e.each(c,function(){if(this.name==d.displayfield)return this.type&&(u=this.type),!1}),u&&(h=u)}if(n=l[i],!d.nullable||null!=r&&""!==r&&d.nullable&&void 0===r.label){if(e.jqx.dataFormat.isNumber(n)||"number"==h||"float"==h||"int"==h||"decimal"==h&&"date"!=h)r=new Number(r),r=parseFloat(r),isNaN(r)&&(r=0);else if((e.jqx.dataFormat.isDate(n)||"date"==h)&&""!=r){var g=r;g=new Date(g),"Invalid Date"!=g&&null!=g?r=g:"Invalid Date"==g&&(g=new Date,r=g)}if(l[i]===r)return}if(s.dataview._filteredData=null,s.dataview._sortData=null,s.dataview._sortHierarchyData=null,l[i]=r,this.treeGrid){var p=this.treeGrid.getRow(t);p&&(p[i]=r)}if(null!=r&&null!=r.label){var d=this.getColumn(i);if(l[d.displayfield]=r.label,l[i]=r.value,this.treeGrid){var p=this.treeGrid.getRow(t);p&&(p[d.displayfield]=r.label,p[i]=r.value)}}}if(this.source&&this.source._knockoutdatasource&&!this._updateFromAdapter&&this.autokoupdates&&this.source._source._localdata){var f=o,v=this.source._source._localdata()[f];this.source.suspendKO=!0;var m=v;if(m[i]&&m[i].subscribe)null!=r&&null!=r.label?(m[d.displayfield](r.label),m[i](r.value)):m[i](r);else{var c=this.source._source.datafields,w=null;if(c&&e.each(c,function(){if(this.name==i)return w=this.map,!1}),null==w)null!=r&&null!=r.label?(m[i]=r.value,m[d.displayfield]=r.label):m[i]=r;else{var y=w.split(this.source.mapChar);if(y.length>0){for(var x=m,b=0;b<y.length-1;b++)x=x[y[b]];x[y[y.length-1]]=r}}this.source._source._localdata.replace(v,e.extend({},m))}this.source.suspendKO=!1}if(this.source.updaterow&&(void 0==sync||1==sync)){var _=!1,j=function(e){0==e&&this.setCellValue(a,i,n,!0,!1)};try{var q=t;_=this.source.updaterow(q,l,j),void 0==_&&(_=!0)}catch(e){return _=!1,void this.setCellValue(a,i,n)}}var S=this.getrowdisplayindex(a),d=this.getColumn(i);this._raiseEvent("cellValueChanged",{value:r,oldValue:n,dataField:i,displayField:d.displayfield,key:t,boundIndex:o,index:S,row:this.rowsByKey[t]}),this.editable&&null!=this.editKey||this._renderrows()}},setCellValue:function(e,t,i){if(null==e||null==t)return!1;var r=parseInt(e),s=this._getkey(r);this.setCellValueByKey(s,t,i)},getCellText:function(e,t){if(null==e||null==t)return!1;var i=parseInt(e),r=this._getkey(i);return this.getCellTextByKey(r,t)},getCellTextByKey:function(t,i){if(null==t||null==i)return null;var r=this.getCellValueByKey(t,i),s=this.getColumn(i);return s&&""!=s.cellsFormat&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(r)?r=e.jqx.dataFormat.formatdate(r,s.cellsFormat,this.gridlocalization):(e.jqx.dataFormat.isNumber(r)||!isNaN(parseFloat(r))&&isFinite(r))&&(r=e.jqx.dataFormat.formatnumber(r,s.cellsFormat,this.gridlocalization))),r},getCellValue:function(e,t){if(null==e||null==t)return!1;var i=parseInt(e),r=this._getkey(i);return this.getCellValueByKey(r,t)},getCellValueByKey:function(e,t){var i=this.rowsByKey[e];!i&&this.treeGrid&&(i=this.treeGrid.getRow(e));var r=(this.getrowindex(i),i);return null!=r?r[t]:null},beginRowEdit:function(e){var t=this._getkey(e);this.beginroweditbykey(t)},beginCellEdit:function(e,t){var i=this._getkey(e),r=this.getColumn(t);this.beginroweditbykey(i,r)},endCellEdit:function(e,t,i){this.endRowEdit(e,i)},endRowEdit:function(e,t){var i=this._getkey(e);this.endroweditbykey(i,t)},getrowindex:function(e){var t=this.getRows().indexOf(e);if(-1!=t)return t;if(this.groups&&this.groups.length>0)for(var i=this.getRows(),r=0;r<i.length;r++)if(e.originalRecord){if(i[r].uid==e.originalRecord.uid){t=r;break}}else if(i[r].uid==e.uid){t=r;break}return t},getrowdisplayindex:function(e){if(this.treeGrid)return-1;var t=this.getView(),i=t.indexOf(e);if(-1!=i)return i;if(void 0==e)return i;for(var r=t,s=0;s<r.length;s++)if(r[s].uid==e.uid||e.originalRecord&&r[s].uid==e.originalRecord.uid){i=s;break}return i},beginroweditbykey:function(t,i){if(this.beginEdit){if(!1===this.beginEdit(t,i))return!1}var r=this.treeGrid?this.source._source.hierarchy&&this.source._source.hierarchy.groupingDataFields?this.source._source.hierarchy.groupingDataFields.length:0:this.groups.length;if(r>0){var s=this.rowsByKey[t];if(this.treeGrid)var s=this.treeGrid.getRow(t);if(s.level<r)return!1}if(null==this._lastSelectedKey&&this.selectrowbykey(t),this.editKey===t&&void 0!=this.editKey)return!1;if(this.rowinfo[t]&&this.rowinfo[t].locked)return!1;if(null!=this.editKey)return this.endroweditbykey(t,!0),!1;var a=this.editSettings.editSingleCell;if(!i&&a&&this.columns.records&&this.columns.records.length>0){for(var o=0;o<this.columns.records.length&&(i=this.columns.records[o],!i.editable||i.hidden);o++);if(!i)return!1}if(a&&i&&!i.editable)return this.editKey=null,!1;a&&(this.editColumn=i);var l=this,s=this.rowsByKey[t];if(this.treeGrid)var s=this.treeGrid.getRow(t);var n=this.getrowindex(s),d=this._getuirow(t),h=this._getpinneduirow(t);this._editors=new Array;var c=!1;if(d)for(var u=d[0].cells,g=0,o=0;o<u.length;o++){var p=this.columns.records[o],f=u[o];if(!p.rowDetailscolumn&&!(p.checkboxcolumn||(p.pinned&&(f=h[0].cells[o]),a&&i&&p.datafield!=i.datafield||(e(f).removeClass(this.toTP("jqx-grid-cell-selected")),e(f).removeClass(this.toTP("jqx-fill-state-pressed")),e(f).removeClass(this.toTP("jqx-grid-cell-hover")),e(f).removeClass(this.toTP("jqx-fill-state-hover")),"none"==p.columntype)))){var v=e(f).outerWidth(),m=e(f).width();0===g&&(g=e(f).outerHeight()-1),e(f).css("padding","0px"),cellContent="<div style='height:"+g+"px; width: 100%; overflow: hidden; border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 9999;'></div>";var w=this.getCellTextByKey(t,p.displayfield);f.innerHTML=cellContent;var y=e(f.firstChild);switch(p.columntype){case"textbox":case"default":var x=e("<input style='border: none;' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' type='textbox'/>").appendTo(y);if(this.rtl&&x.css("direction","rtl"),x.addClass(this.toThemeProperty("jqx-input")),x.addClass(this.toThemeProperty("jqx-widget-content")),x.addClass(this.toThemeProperty("jqx-cell-editor")),x[0].onfocus=function(t){setTimeout(function(){if(t){var i=e(t.target).parent().parent().index();i>=0&&l.ensureColumnVisible(l.columns.records[i].datafield)}else{var i=e(document.activeElement).parent().parent().index();i>=0&&l.ensureColumnVisible(l.columns.records[i].datafield)}l.content&&(l.content[0].scrollTop=0,l.content[0].scrollLeft=0),l.gridcontent&&(l.gridcontent[0].scrollLeft=0,l.gridcontent[0].scrollTop=0)},10)},p.editable){if(!c){c=!0;var b=e.jqx.browser.msie&&e.jqx.browser.version>10;b||x.focus();var _=x;setTimeout(function(){var e=_.val().length;b||_.focus();try{if("selectionStart"in _[0])_[0].setSelectionRange(0,e);else{var t=_[0].createTextRange();t.collapse(!0),t.moveEnd("character",e),t.moveStart("character",0),t.select()}}catch(e){}},10)}}else x.attr("disabled",!0),x.attr("readOnly",!0),x.addClass(this.toThemeProperty("jqx-fill-state-disabled"));if(x.width(m),x.height(g),e.jqx.browser.msie&&e.jqx.browser.version<9&&x.css("line-height",parseInt(g)+"px"),x.css("text-align",p.cellsalign),null===w&&(w=""),void 0==w&&(w=""),x.val(w),p.createeditor){var j=w,w=this.getCellValueByKey(t,p.displayfield);p.createeditor(this.treeGrid?t:n,w,x,j,m,g)}if(this._editors.push({column:p,editor:x}),""!=p.cellsFormat&&(-1==p.cellsFormat.indexOf("p")&&-1==p.cellsFormat.indexOf("c")&&-1==p.cellsFormat.indexOf("n")&&-1==p.cellsFormat.indexOf("f")||x.keydown(function(e){var t=e.charCode?e.charCode:e.keyCode?e.keyCode:0,i=String.fromCharCode(t),r=parseInt(i);if(isNaN(r))return!0;if(l._selection(x).length>0)return!0;var s="",a=x.val();if(p.cellsFormat.length>1){var o=parseInt(p.cellsFormat.substring(1));isNaN(o)&&(o=0)}else var o=0;if(o>0&&-1!=a.indexOf(l.gridlocalization.decimalseparator)&&l._selection(x).start>a.indexOf(l.gridlocalization.decimalseparator))return!0;for(var n=0;n<a.length-o;n++){var d=a.substring(n,n+1);null!=d.match(/^[0-9]+$/)&&(s+=d)}return!(s.length>=11)&&void 0})),p.initeditor){var j=w,w=this.getCellValueByKey(t,p.displayfield);p.initeditor(this.treeGrid?t:n,w,x,j,m,g)}break;case"custom":case"template":this.editorsCache||(this.editorsCache=new Array);var q=e("<div style='width: 100%; height: 100%; border: none;'></div>").appendTo(y),S=e.trim(p.datafield).split(" ").join("");-1!=S.indexOf(".")&&(S=S.replace(".",""));var T=this.editorsCache["templateeditor_"+S];if("custom"==p.columntype)var T=this.editorsCache["customeditor_"+S+"_"+t];var j=w,w=this.getCellValueByKey(t,p.displayfield);if(T){var x=T;x.width(v),x.height(g),x.appendTo(q)}else{var x=e("<div style='border: none;'></div>");x.width(v),x.height(g),T=x,null===w&&(w=""),"custom"!=p.columntype?this.editorsCache["templateeditor_"+S]=x:this.editorsCache["customeditor_"+S+"_"+t]=x,x.appendTo(q),p.createeditor&&p.createeditor(this.treeGrid?t:n,w,x,j,v,g)}p.initeditor&&p.initeditor(this.treeGrid?t:n,w,x,j,v,g),this._editors.push({column:p,editor:x})}}}this.editKey=t,this.beginUpdate();var C=this.getrowdisplayindex(s);if(this._raiseEvent("rowBeginEdit",{key:t,index:C,boundIndex:n,row:this.rowsByKey[t]}),a){var s=this.rowsByKey[t],z=null,P=null;s&&(z=s[i.datafield],P=s[i.displayfield]),this._raiseEvent("cellBeginEdit",{value:z,displayValue:P,key:t,index:C,dataField:i.datafield,displayField:i.displayfield,boundIndex:n,row:this.rowsByKey[t]})}this.endUpdate(!1)},_toNumber:function(e){e.indexOf||void 0==e||(e=e.toString()),e.indexOf(this.gridlocalization.currencysymbol)>-1&&(e=e.replace(this.gridlocalization.currencysymbol,""));e=function(e,t,i){var r=e;if(t==i)return e;for(var s=r.indexOf(t);-1!=s;)r=r.replace(t,i),s=r.indexOf(t);return r}(e,this.gridlocalization.thousandsseparator,""),e=e.replace(this.gridlocalization.decimalseparator,"."),e.indexOf(this.gridlocalization.percentsymbol)>-1&&(e=e.replace(this.gridlocalization.percentsymbol,""));for(var t="",i=0;i<e.length;i++){var r=e.substring(i,i+1);"-"===r&&(t+="-"),"."===r&&(t+="."),null!=r.match(/^[0-9]+$/)&&(t+=r)}return e=t,e=e.replace(/ /g,"")},_geteditorvalue:function(t,i,r,s){var a=new String;if(i){if(!t.geteditorvalue)switch(t.columntype){case"textbox":default:if(a=i.val(),""!=t.cellsFormat){var o="string",l=this.source.datafields||(this.source._source?this.source._source.datafields:null);if(l){var n="";e.each(l,function(){if(this.name==t.displayfield)return this.type&&(n=this.type),!1}),n&&(o=n)}var d="number"===o||"float"===o||"int"===o||"integer"===o,h="date"===o||"time"===o;if(d||"string"===o&&(-1!=t.cellsFormat.indexOf("p")||-1!=t.cellsFormat.indexOf("c")||-1!=t.cellsFormat.indexOf("n")||-1!=t.cellsFormat.indexOf("f"))){if(""===a&&t.nullable)return"";a=this._toNumber(a),a=new Number(a),isNaN(a)&&(a="")}if(h||"string"===o&&(-1!=t.cellsFormat.indexOf("H")||-1!=t.cellsFormat.indexOf("m")||-1!=t.cellsFormat.indexOf("M")||-1!=t.cellsFormat.indexOf("y")||-1!=t.cellsFormat.indexOf("h")||-1!=t.cellsFormat.indexOf("d"))){if(""===a&&t.nullable)return"";var c=a;a=new Date(a),("Invalid Date"==a||null==a||t.cellsFormat.length>1)&&(e.jqx.dataFormat&&(a=e.jqx.dataFormat.parsedate(c,t.cellsFormat,this.gridlocalization)),"Invalid Date"!=a&&null!=a||(a=""))}}t.displayfield!=t.datafield&&(a={label:a,value:a})}if(t.geteditorvalue){var u=this.getCellValueByKey(s,t.displayfield);a=t.geteditorvalue(this.treeGrid?s:r,u,i)}}return a},_validateEditors:function(e){for(var t=this,i=!0,r=t.rowsByKey[e],s=t.getrowindex(r),a=t._editors,e=t.editKey,o=t._getuirow(e),l=0;l<a.length;l++){var n=a[l].editor,d=a[l].column,h=t._geteditorvalue(d,n,s,e);if(d.validation){n.removeClass(t.toThemeProperty("jqx-grid-validation-label"));var c=d.datafield;try{var u=d.validation({value:h,row:e,datafield:d.datafield,displayfield:d.displayfield,column:d},h),g=t.gridlocalization.validationstring;void 0!=u.message&&(g=u.message);("boolean"==typeof u?u:u.result)||(void 0!=u.showmessage&&1!=u.showmessage||t._showvalidationpopup(o,c,g,n),i=!1)}catch(e){t._showvalidationpopup(o,c,t.gridlocalization.validationstring,n),i=!1}}}return i},endroweditbykey:function(t,i){var r=this;if(null!==r.editKey){if(this.endEdit){if(!1===this.endEdit(t))return}var s=r.rowsByKey[t],a=r.getrowindex(s),o=r._editors,l=r.editKey;r._getuirow(l);if(!0!==i){var n=!0;if(o&&(n=r._validateEditors(l))){for(var d=e.extend({},s),h=e.extend({},s),c=0;c<o.length;c++){var u=o[c].editor,g=o[c].column,p=r._geteditorvalue(g,u,a,l);p&&void 0!=p.label?(d[g.displayfield]=p.label,d[g.datafield]=p.value):d[g.displayfield]=p}var f=function(){r.dataview._sortHierarchyData=null,r.dataview._sortData=null;for(var i=0;i<o.length;i++){var n=o[i].editor,d=o[i].column,c=r._geteditorvalue(d,n,a,l),u=h[d.displayfield];if(c&&void 0!=c.label?(s[d.displayfield]=c.label,s[d.datafield]=c.value):s[d.displayfield]=c,r.treeGrid){var g=r.treeGrid.getRow(l);g&&(g[d.displayfield]=c)}if(r.editorsCache){var p=function(e){if(e&&e.jqxWidget){var t=e.jqxWidget.element.className;if((t.indexOf("dropdownlist")>=0||t.indexOf("datetimeinput")>=0||t.indexOf("combobox")>=0||t.indexOf("menu")>=0)&&e.jqxWidget.isOpened){e.jqxWidget.isOpened()&&e.jqxWidget.close()}}},f="customeditor_"+d.displayfield+"_"+t,v="templateeditor_"+d.displayfield;if(r.editorsCache[f]){var m=e(r.editorsCache[f]).data(),w=r.editorsCache[f];!m.jqxWidget&&e(w).children()[0]&&e(e(w).children()[0]).data().jqxWidget&&(m=e(e(w).children()[0]).data()),p(m),r.editorsCache[f].detach()}if(r.editorsCache[v]){r.editorsCache[v].detach();var m=e(r.editorsCache[v]).data(),w=r.editorsCache[v];!m.jqxWidget&&e(w).children()[0]&&e(e(w).children()[0]).data().jqxWidget&&(m=e(e(w).children()[0]).data()),p(m)}}c!=u&&(r.beginUpdate(),r._raiseEvent("cellValueChanged",{value:c,oldValue:u,dataField:d.datafield,displayField:d.displayfield,key:t,index:a,row:s}),r.endUpdate(!1))}};r.updaterowbykey(r.editKey,d,!1,f)}if(!n)return!1}return r._detachEditors(l),!0}},_detachEditors:function(t){var i=this,r=i.rowsByKey[t],s=i.getrowindex(r);if(i.editorsCache)for(var a in i.editorsCache){var o=e(i.editorsCache[a]).data();if(o&&o.jqxWidget){var l=o.jqxWidget.element.className;if((l.indexOf("dropdownlist")>=0||l.indexOf("datetimeinput")>=0||l.indexOf("combobox")>=0||l.indexOf("menu")>=0)&&o.jqxWidget.isOpened){var n=o.jqxWidget.isOpened();n&&o.jqxWidget.close()}}e(i.editorsCache[a]).detach()}i.beginUpdate();var d=i.getrowdisplayindex(r);if(i.editSettings.editSingleCell){var r=i.rowsByKey[t],h=null,c=null;r&&(h=r[i.editColumn.datafield],c=r[i.editColumn.displayfield]),i._raiseEvent("cellEndEdit",{value:h,displayValue:c,key:t,index:d,dataField:i.editColumn.datafield,displayField:i.editColumn.displayfield,boundIndex:s,row:i.rowsByKey[t]})}i._raiseEvent("rowEndEdit",{key:t,index:d,boundIndex:s,row:i.rowsByKey[t]}),i.endUpdate(!1),i.editColumn=null,i.editKey=null,i._renderrows(),i._renderhorizontalscroll(),i.host.focus(),setTimeout(function(){i.host.focus()},10)},_showvalidationpopup:function(t,i,r,s){if(void 0==r)var r=this.gridlocalization.validationstring;s.addClass(this.toThemeProperty("jqx-grid-validation-label"));var a=e("<div style='z-index: 99999; top: 0px; left: 0px; position: absolute;'></div>"),o=e("<div style='width: 20px; height: 20px; z-index: 999999; top: 0px; left: 0px; position: absolute;'></div>");a.html(r),o.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up")),a.addClass(this.toThemeProperty("jqx-grid-validation")),a.addClass(this.toThemeProperty("jqx-rc-all")),a.hide(),o.hide(),a.prependTo(this.table),o.prependTo(this.table);var l=this.hScrollInstance,n=l.value,d=parseInt(n),h=this.getColumn(i).uielement;if(t){var c=t;a.css("top",parseInt(c.position().top)+30+"px");var u=parseInt(a.css("top"));o.css("top",u-11),o.removeClass(),o.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up"));var g=!1;u>=this._table.height()&&(o.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-up")),o.addClass(this.toThemeProperty("jqx-grid-validation-arrow-down")),u=parseInt(c.position().top)-c.outerHeight()-5,u<0&&(u=0,o.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-down")),g=!0),a.css("top",u+"px"),o.css("top",u+a.outerHeight()-9));var p=-d+parseInt(e(h).position().left),f=parseInt(this._table.css("left"));isNaN(f)&&(f=0),0!=f&&(d=0),o.css("left",d+p+30);var v=a.width();if(v+p>this.host.width()-20){p-=v+p-this.host.width()+40}g?a.css("left",d+parseInt(e(h).position().left)-a.outerWidth()):a.css("left",d+p),s.mouseenter(function(){s.hasClass("jqx-grid-validation-label")&&(a.show(),o.show())}),s.mouseleave(function(){a.hide(),o.hide()}),this.popups||(this.popups=new Array),this.popups[this.popups.length]={validation:a,validationrow:o}}},addRow:function(t,i,r,s){if(void 0!=i){this._datachanged=!0,void 0==r&&(r="last");var a=!1,o=this.that;if(null==t){var l=this.dataview.filters&&this.dataview.filters.length>0,n=l?this.source.records.length:this.dataview.totalrecords;if(!this.pageable){this.source._source.totalrecords?this.dataview.totalrecords=this.source._source.totalrecords:this.source._source.totalRecords?this.dataview.totalrecords=this.source._source.totalRecords:0!==this.source.hierarchy.length?this.dataview.totalrecords=this.source.hierarchy.length:this.dataview.totalrecords=this.source.records.length;var n=l?this.source.records.length:this.dataview.totalrecords}if(e.isArray(i)){var d=new Array;e.each(i,function(e,t){var r=o.dataview.getid(o.dataview.source.id,i[e],n+e);d.push(r),o.getColumn(o.dataview.source.id)&&(i[e][o.dataview.source.id]=r)}),t=d}else t=this.dataview.getid(this.dataview.source.id,i,n),this.getColumn(this.dataview.source.id)&&(i[this.dataview.source.id]=t)}else e.isArray(i)?e.each(i,function(e,r){var s=t[e];o.getColumn(o.dataview.source.id)&&(i[e][o.dataview.source.id]=s)}):this.getColumn(this.dataview.source.id)&&(i[this.dataview.source.id]=t);var h=!!this.treeGrid&&!!this.treeGrid.virtualModeCreateRecords,c=function(t,i,r,a){if(t._loading)throw new Error("jqxDataTable: "+t.loadingErrorMessage);var o=t.vScrollInstance.value,l=!1;if(e.isArray(r)?e.each(r,function(e,r){var o=null;null!=i&&null!=i[e]&&(o=i[e]),this.uid=o,t.rowsByKey[o]=this,i==s&&(s=null),l=t.source.addRecord(this,a,s,h)}):(r.uid=i,t.rowsByKey[i]=r,i==s&&(s=null),l=t.source.addRecord(r,a,s,h)),t.groups&&t.groups.length>0){var n=Object.prototype.toString,d=t.groups[0];if(Object.prototype.toString="function"==typeof d?d:function(){return this[d]},!t.source.records.sort){var c=new Array,u=0;e.each(data,function(){c[startindex+u++]=this}),data=c}t.source.records.sort(function(t,i){if(void 0===t&&(t=null),void 0===i&&(i=null),null===t&&null===i)return 0;if(null===t&&null!==i)return-1;if(null!==t&&null===i)return 1;var r=0,s=0;if(t&&t.uid&&(r=t.uid),i&&i.uid&&(s=i.uid),t=t.toString(),i=i.toString(),e.jqx.dataFormat.isNumber(t)&&e.jqx.dataFormat.isNumber(i))return t<i?-1:t>i?1:0;if(e.jqx.dataFormat.isDate(t)&&e.jqx.dataFormat.isDate(i))return t<i?-1:t>i?1:0;e.jqx.dataFormat.isNumber(t)||e.jqx.dataFormat.isNumber(i)||(t=String(t).toLowerCase(),i=String(i).toLowerCase());try{if(t<i)return-1;if(t>i)return 1}catch(e){}if("number"==typeof r){if(r<s)return-1;if(r>s)return 1}return 0}),Object.prototype.toString=n}return t.dataview._filteredData=null,t.dataview._sortData=null,t.dataview._sortHierarchyData=null,void 0!=t._updating&&0!=t._updating||t.refresh(),t.source&&t.source._knockoutdatasource&&!t._updateFromAdapter&&t.autokoupdates&&t.source._source._localdata&&(t.source.suspendKO=!0,t.source._source._localdata.push(r),t.source.suspendKO=!1),t.vScrollInstance.setPosition(o),l};if(this.source.addrow){var u=function(e,s){1!=e&&void 0!=e||(void 0!=s&&(t=s),c(o,t,i,r))};try{a=o.treeGrid?this.source.addrow(t,i,r,s,u):this.source.addrow(t,i,r,u),void 0==a&&(a=!0)}catch(e){a=!1}if(0==a)return!1}else c(this,t,i,r);return a}return!1},deleteRow:function(e){var t=this._getkey(e);this.deleterowbykey(t)},deleterowbykey:function(t){if(void 0!=t){this._datachanged=!0;var i=!1,r=this.that,s=function(t,i){if(t._loading)throw new Error("jqxDataTable: "+t.loadingErrorMessage);t.dataview._filteredData=null,t.dataview._sortData=null,t.dataview._sortHierarchyData=null;var r=!1,s=t.vScrollInstance.value;if(e.isArray(i))e.each(i,function(){var e=this;if(t.rowsByKey[e]){if(r=!0,t.rowinfo[e].selected&&t.unselectrowbykey(e,!1),t.treeGrid)var i=t._names(),s=t.rowsByKey[e][i.parent];if(delete t.rowsByKey[e],t.treeGrid&&t.rowinfo[e]){var a=t.rowinfo[e].row.records,o=function(e){for(var i=0;i<e.length;i++){var r=e[i].uid;delete t.rowsByKey[r],delete t.rowinfo[r],e[i].records&&o(e[i].records)}};a&&(o(a),delete t.rowinfo[e])}t.source.deleteRecord(e),s&&i&&s.records&&0==s.records.length&&(s[i.leaf]=!0,t.rowinfo[s.uid][i.leaf]=!0)}});else{var r=!1;if(t.rowsByKey[i]){if(r=!0,t.rowinfo[i].selected&&t.unselectrowbykey(i,!1),t.treeGrid)var a=t._names(),o=t.rowsByKey[i][a.parent];if(delete t.rowsByKey[i],t.treeGrid&&t.rowinfo[i]){var l=t.rowinfo[i].row.records,n=function(e){for(var i=0;i<e.length;i++){var r=e[i].uid;delete t.rowsByKey[r],delete t.rowinfo[r],e[i].records&&n(e[i].records)}};l&&n(l)}delete t.rowinfo[i],t.source.deleteRecord(i),o&&a&&o.records&&0==o.records.length&&(o[a.leaf]=!0,t.rowinfo[o.uid][a.leaf]=!0)}}return t.refresh(),t.source&&t.source._knockoutdatasource&&!t._updateFromAdapter&&t.autokoupdates&&t.source._source._localdata&&(t.source.suspendKO=!0,t.source._source._localdata.pop(rowdata),t.source.suspendKO=!1),t.vScrollInstance.setPosition(s),r};if(this.source.deleterow){var a=function(e){1!=e&&void 0!=e||s(r,t)};try{this.source.deleterow(t,a),void 0==i&&(i=!0)}catch(e){i=!1}}else i=s(r,t);return i}return!1},updateRow:function(e,t){var i=this._getkey(e);this.updaterowbykey(i,t)},updaterowbykey:function(t,i,r,s){if(void 0!=t&&void 0!=i){var a=this.that,o=!1,l=function(t,i,s){if(t._loading)throw new Error("jqxDataTable: "+t.loadingErrorMessage);t.dataview._filteredData=null,t.dataview._sortData=null,t.dataview._sortHierarchyData=null;var a=!1;if(e.isArray(i))e.each(i,function(e,i){var r=t.rowsByKey[this],o=function(t,i){r?r[this]=s[e]:a=!1,a=!0};o(),t.treeGrid&&(r=t.treeGrid.getRow(this),o())});else{var o=t.rowsByKey[i],l=function(e){if(e){for(var i=0;i<t.columns.records.length;i++)e[t.columns.records[i].datafield]=s[t.columns.records[i].datafield],t.groups.length>0&&e.originalRecord&&(e.originalRecord[t.columns.records[i].datafield]=s[t.columns.records[i].datafield]);a=!0}else a=!1};l(o),t.treeGrid&&(o=t.treeGrid.getRow(i),l(o))}var n=t.vScrollInstance.value;if(void 0!=r&&1!=r||void 0!=t._updating&&0!=t._updating||t._renderrows(),t.showAggregates&&t._updatecolumnsaggregates&&t._updatecolumnsaggregates(),t.source&&t.source._knockoutdatasource&&!t._updateFromAdapter&&t.autokoupdates&&t.source._source._localdata){var o=t.rowsByKey[i],d=t.getrowindex(o),h=t.source._source._localdata()[d];t.source.suspendKO=!0,t.source._source._localdata.replace(h,e.extend({},o)),t.source.suspendKO=!1}return t.vScrollInstance.setPosition(n),a};if(this.source.updaterow){var n=function(e){1!=e&&void 0!=e||(l(a,t,i),s&&s(),a._renderrows(!1))};try{o=this.source.updaterow(t,i,n),void 0==o&&(o=!0)}catch(e){o=!1}}else o=l(a,t,i),o&&s&&s(),a._renderrows(!1);return o}return!1},lockRow:function(e){var t=this._getkey(e);this.lockrowbykey(t)},unlockRow:function(e){var t=this._getkey(e);this.unlockrowbykey(t)},lockrowbykey:function(e){this.rowinfo[e]?this.rowinfo[e].locked=!0:this.rowinfo[e]={locked:!0},this._renderrows()},unlockrowbykey:function(e){this.rowinfo[e]?this.rowinfo[e].locked=!1:this.rowinfo[e]={locked:!1},this._renderrows()},selectRow:function(e){var t=this._getkey(e);this.selectrowbykey(t)},unselectRow:function(e){var t=this._getkey(e);this.unselectrowbykey(t)},selectrowbykey:function(e,t,i){"keyboard"!=t&&"mouse"!=t&&(this._lastSelectedKey=e);var r=!1!==i;this._doSelection(e,!0,r);var s=this.rowsByKey[e],a=this.getrowindex(s),o=this.getrowdisplayindex(s);this._raiseEvent("rowSelect",{key:e,index:o,boundIndex:a,row:this.rowsByKey[e]})},unselectrowbykey:function(e,t){var i=!1!==t;this._doSelection(e,!1,i);var r=this.rowsByKey[e],s=this.getrowindex(r),a=this.getrowdisplayindex(r);this._raiseEvent("rowUnselect",{key:e,index:a,boundIndex:s,row:this.rowsByKey[e]})},getSelection:function(){var e=new Array;if(this.rowinfo)for(var t in this.rowinfo){var i=this.rowinfo[t];i.selected&&e.push(i.row)}return e},showdetailsbykey:function(t){if(this.rowDetails){var i=this.rowinfo[t];if(i){i.expanded=!0;var r=e(this._table.children()[1]).children("[data-key="+t+"]"),s=e(this._pinnedTable.children()[1]).children("[data-key="+t+"]");if(r){var a=s.children(),o=e(a[0]);if(this.rtl)var o=e(a[a.length-1]);this.rtl?(o.removeClass(this.toThemeProperty("jqx-grid-group-collapse-rtl")),o.addClass(this.toThemeProperty("jqx-grid-group-expand-rtl")),o.removeClass(this.toThemeProperty("jqx-icon-arrow-left")),o.addClass(this.toThemeProperty("jqx-icon-arrow-down"))):(o.removeClass(this.toThemeProperty("jqx-grid-group-collapse")),o.addClass(this.toThemeProperty("jqx-grid-group-expand")),o.removeClass(this.toThemeProperty("jqx-icon-arrow-right")),o.addClass(this.toThemeProperty("jqx-icon-arrow-down"))),r.next().show();var l=s.next();if(l.show(),e.jqx.browser.msie&&e.jqx.browser.version<8&&(r.next().children().show(),s.next().children().show()),!i.initialized){
var n=i.detailsHeight,d=this.initRowDetails(t,i.row,e(e(l).children().children().children()[0]),i);i.details=e(l).children().children().children()[0],i.initialized=!0,!1!==d&&i.detailsHeight==n||(!1===d&&(i.expanded=!1,i.nodetails=!0,l.hide()),this._renderrows())}this._updateScrollbars(),("auto"===this.height||null===this.height||this.autoheight)&&this._arrange();var h=this.getrowindex(i.row),c=this.getrowdisplayindex(i.row);this._raiseEvent("rowExpand",{row:i.row,index:c,boundIndex:h,rowKey:t})}}}},hidedetailsbykey:function(t){if(this.rowDetails){var i=this.rowinfo[t];if(i){i.expanded=!1;var r=e(this._table.children()[1]).children("[data-key="+t+"]"),s=e(this._pinnedTable.children()[1]).children("[data-key="+t+"]");if(r){var a=s.children(),o=e(a[0]);if(this.rtl)var o=e(a[a.length-1]);this.rtl?(o.addClass(this.toThemeProperty("jqx-grid-group-collapse-rtl")),o.removeClass(this.toThemeProperty("jqx-grid-group-expand-rtl")),o.addClass(this.toThemeProperty("jqx-icon-arrow-left")),o.removeClass(this.toThemeProperty("jqx-icon-arrow-down"))):(o.addClass(this.toThemeProperty("jqx-grid-group-collapse")),o.removeClass(this.toThemeProperty("jqx-grid-group-expand")),o.addClass(this.toThemeProperty("jqx-icon-arrow-right")),o.removeClass(this.toThemeProperty("jqx-icon-arrow-down"))),r.next().hide(),s.next().hide(),e.jqx.browser.msie&&e.jqx.browser.version<8&&(r.next().children().hide(),s.next().children().hide()),this._updateScrollbars(),("auto"===this.height||null===this.height||this.autoheight)&&this._arrange();var l=this.getrowindex(i.row),n=this.getrowdisplayindex(i.row);this._raiseEvent("rowCollapse",{row:i.row,index:n,boundIndex:l,rowKey:t})}}}},_getvirtualcolumnsindexes:function(e,t,i,r,s){if(this.rowDetails||this.rtl||this.editcell||this.width&&this.width.toString().indexOf("%")>=0||this.exporting)return{start:0,end:i+r};var a=0,o=-1,l=i+r;if(this.autorowheight)return{start:0,end:i+r};if(!s)for(var n=0;n<i+r;n++){if(this.columns.records[n].hidden||(a+=this.columns.records[n].width),a>=e&&-1==o&&(o=n),a>t+e){l=n;break}}return l++,l>i+r&&(l=i+r),-1==o&&(o=0),{start:o,end:l}},_renderhorizontalscroll:function(){var e=this.hScrollInstance,t=e.value;"hidden"===this.hScrollBar.css("visibility")&&(e.value=0,t=0);var i=parseInt(t);if(null!=this.table){var r=this.columnsrow,s=this.columns.records.length-0,a=this.columns.records,o=0==this.source.records.length;if(this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&(i=e.max-i),o&&!this._haspinned)this.table[0].style.left=-i+"px",r[0].style.marginLeft=-i+"px";else{if(this._haspinned||void 0==this._haspinned){for(var l=0;l<0+s;l++){if(a[l].pinned){var n=null;if(this.showAggregates&&this.statusbar[0].cells&&(n=this.statusbar[0].cells[l]),this.filterrow&&this.filterrow[0].cells&&(filtercell=this.filterrow[0].cells[l]),this.rtl){var d=r[0].cells[l];d.style.marginLeft=-parseInt(t)+"px",n&&(n.style.marginLeft=-parseInt(t)+"px"),this.filterrow&&filtercell&&(filtercell.style.marginLeft=-parseInt(t)+"px")}else{var d=r[0].cells[l];d.style.marginLeft=i+"px",n&&(n.style.marginLeft=i+"px"),this.filterrow&&filtercell&&(filtercell.style.marginLeft=i+"px")}}}if(this.columnsVirtualization){for(var h=this._getvirtualcolumnsindexes(i,this.host.width(),0,this.columns.records.length,!1),c=h.start,u=h.end,g=0;g<c;g++){var p=g,f=this.columns.records[p].element[0];if(!this.columns.records[p].pinned&&(f.parentNode&&f.parentNode.removeChild(f),this.filterrow&&this.filterrow[0])){var v=this.filterrow[0].cells[p];v.parentNode&&v.parentNode.removeChild(v)}}for(var g=u;g<this.columns.records.length;g++){var p=g,f=this.columns.records[p].element[0];if(!this.columns.records[p].pinned&&(f.parentNode&&f.parentNode.removeChild(f),this.filterrow&&this.filterrow[0])){var v=this.filterrow[0].cells[p];v.parentNode&&v.parentNode.removeChild(v)}}for(var g=c;g<u;g++){var p=g;if(f=this.columns.records[p].element[0],!this.columns.records[p].pinned&&(f.parentNode||this.columnsrow[0].appendChild(f),this.filterrow&&this.filterrow[0])){var v=this.filterrow[0].cells[p];v.parentNode||this.filterrow[0].appendChild(v)}}}this._table[0].style.left=-i+"px",r[0].style.marginLeft=-i+"px"}else if(0==this._haspinned){if(this.columnsVirtualization){for(var h=this._getvirtualcolumnsindexes(i,this.host.width(),0,this.columns.records.length,!1),c=h.start,u=h.end,g=0;g<c;g++){var p=g,f=this.columns.records[p].element[0];if(f.parentNode&&f.parentNode.removeChild(f),this.filterrow&&this.filterrow[0]){var v=this.filterrow[0].cells[p];v.parentNode&&v.parentNode.removeChild(v)}}for(var g=u;g<this.columns.records.length;g++){var p=g,f=this.columns.records[p].element[0];if(f.parentNode&&f.parentNode.removeChild(f),this.filterrow&&this.filterrow[0]){var v=this.filterrow[0].cells[p];v.parentNode&&v.parentNode.removeChild(v)}}for(var g=c;g<u;g++){var p=g;if(f=this.columns.records[p].element[0],f.parentNode||this.columnsrow[0].appendChild(f),this.filterrow&&this.filterrow[0]){var v=this.filterrow[0].cells[p];v.parentNode||this.filterrow[0].appendChild(v)}}}this.table[0].style.left=-i+"px",r[0].style.marginLeft=-i+"px"}this.filterrow&&(this.filterrow[0].style.left=-i+"px",this.rtl&&(this.filterrow[0].style.left=-i+parseInt(this.content.css("left"))+"px"))}if(this.showAggregates&&this.aggregates[0].cells){var m=0;this.rtl&&"hidden"!=this.vScrollBar.css("visibility")&&(m="hidden"!=this.hScrollBar.css("visibility")?2+parseInt(this.hScrollBar.css("left")):3+parseInt(this.vScrollBar.width())),this.aggregates[0].style.marginLeft=-i+m+"px"}}},_initializeColumns:function(){var i=this.source.datafields;null==i&&this.source._source&&(i=this.source._source.datafields);var r=!!i&&i.length>0;if(this.columns&&this.columns.records)for(var s=0;s<this.columns.records.length;s++)this._removecolumnhandlers(this.columns.records[s]);var a=this,o=new e.jqx.dataCollection(this.element),l=0;if(this._haspinned=!1,this._columns?this.columns=this._columns:this._columns=this.columns,"checkbox"==this.selectionMode){var n=new t(a,this);n.visibleindex=l++,n.width=a.indentWidth,n.checkboxcolumn=!0,n.editable=!1,n.columntype="checkbox",n.groupable=!1,n.draggable=!1,n.filterable=!1,n.resizable=!1,n.datafield="_checkboxcolumn",o.add(n)}if(this.rowDetails&&!this.treeGrid){var n=new t(a,this);n.visibleindex=l++,n.width=a.indentWidth,n.editable=!1,n.rowDetailscolumn=!0,n.groupable=!1,n.draggable=!1,n.pinned=!0,n.filterable=!1,n.resizable=!1,n.text="",o.add(n)}var d=new Array;e.each(this.columns,function(e){if(void 0!=a.columns[e]){var i=new t(a,this);if(i.visibleindex=l++,void 0!=this.dataField&&(this.datafield=this.dataField),this.pinned&&(a._haspinned=!0),null==this.datafield)a.source&&a.source._source&&"array"==a.source._source.datatype&&(r||(a.source._source.datafields?a.source._source.datafields.push({name:e.toString()}):(a.source._source.datafields=new Array,a.source._source.datafields.push({name:e.toString()}))),this.datafield=e.toString(),this.displayfield=e.toString(),i.datafield=this.datafield,i.displayfield=this.displayfield);else{if(d[this.datafield])throw new Error("jqxDataTable: Invalid column 'dataField' setting. jqxDataTable's columns should be initialized with unique data fields.");d[this.datafield]=!0}o.add(i)}}),this.rtl&&o.records.reverse(),this.columns=o},addFilter:function(e,t){this.getColumn(e)&&this.dataview.addFilter(e,t)},removeFilter:function(e){this.getColumn(e)&&this.dataview.removeFilter(e)},clearFilters:function(e,t){this.dataview.filters=new Array,this.dataview._filteredData=null,this.dataview._sortData=null,this.dataview._sortHierarchyData=null,!1!==t&&this.resetfilter(),!1!==e&&this.applyFilters()},resetfilter:function(){if(this.filterinput&&this.filterinput.val(""),this.filterrow)for(var t=0;t<this.filterrow[0].cells.length;t++){var i=this.filterrow[0].cells[t],r=e(i).find("input:first"),s=e(i).find(".filterconditions"),a=this.columns.records[t];if(a.filterable){r.val("");var o=this.getcolumntypebydatafield(a),l=new e.jqx.filter;switch(o){case"number":case"int":case"float":case"decimal":filtertype="numericfilter",conditions=l.getoperatorsbyfiltertype("numericfilter");break;case"boolean":case"bool":filtertype="booleanfilter",conditions=l.getoperatorsbyfiltertype("booleanfilter");break;case"date":case"time":filtertype="datefilter",conditions=l.getoperatorsbyfiltertype("datefilter");break;case"string":filtertype="stringfilter",conditions=l.getoperatorsbyfiltertype("stringfilter")}s.length>0&&("stringfilter"===filtertype?s.jqxDropDownList({selectedIndex:2}):s.jqxDropDownList({selectedIndex:0}))}}},applyFilters:function(){if(this.editable&&null!=this.editKey){this.endroweditbykey(this.editKey)}if(this.dataview._filteredData=null,this.dataview._sortData=null,this.dataview._sortHierarchyData=null,this.serverProcessing?(this.dataview.pagenum=0,this.updateBoundData("filter")):(this.goToPage(0),this.refresh()),arguments&&arguments.length>0){if(this._updateSimpleFilter&&this.filtercolumnsList){var e=this.filtercolumnsList.jqxDropDownList("getSelectedItem").value;this._updateSimpleFilter(e)}this._updateFilterRow&&this._updateFilterRow()}this._raiseEvent("filter",{filters:this.dataview.filters})},sortBy:function(e,t){if(this.dataview._filteredData=null,this.dataview._sortData=null,this.dataview._sortHierarchyData=null,this._loading)throw new Error("jqxDataTable: "+this.loadingErrorMessage);if(this.editable&&null!=this.editKey){this.endroweditbykey(this.editKey)}if(null==e&&(t=null,e=this.sortcolumn),e){var i=this;ascending="a"==t||"asc"==t||"ascending"==t||1==t,i.sortdirection=null!=t?{ascending:ascending,descending:!ascending}:{ascending:!1,descending:!1},i.sortcolumn=null!=t?e:null,i.source.sort&&(i.dataview.sortfield=e,i.dataview.sortfielddirection=null==t?"":ascending?"asc":"desc",i.source.sort&&!this._loading&&i.source.sort(e,t)),i.dataview.sortBy(e,t),i._raiseEvent("sort",{sortcolumn:this.sortcolumn,sortdirection:this.sortdirection})}this.serverProcessing?this.updateBoundData("sort"):this.refresh()},_togglesort:function(e){var t=this;if(!this.disabled&&e.sortable&&t.sortable){var i={sortcolumn:this.sortcolumn,sortdirection:this.sortdirection},r=null;null!=i.sortcolumn&&i.sortcolumn==e.displayfield?(r=i.sortdirection.ascending,r=1!=r&&null):r=!0,t.sortBy(e.displayfield,r)}},_renderfilter:function(){var t=this,i=e("<div style='position: relative; margin: 4px;'><input style='height: 22px; direction: ltr;' role='textbox' type='text'/><div style='cursor: pointer; height: 100%;'><div></div></div></div>");i.height(22);var r=i.find("input"),s=i.find("div:first");i.addClass(this.toThemeProperty("jqx-rc-all")),i.addClass(this.toThemeProperty("jqx-widget")),i.addClass(this.toThemeProperty("jqx-input-group")),r.addClass(this.toThemeProperty("jqx-input")),r.addClass(this.toThemeProperty("jqx-rc-l")),r.addClass(this.toThemeProperty("jqx-input-group-addon")),r.addClass(this.toThemeProperty("jqx-widget")),r.addClass(this.toThemeProperty("jqx-widget-content")),s.addClass(this.toThemeProperty("jqx-fill-state-normal")),s.addClass(this.toThemeProperty("jqx-rc-r")),s.addClass(this.toThemeProperty("jqx-input-group-addon")),s.find("div").addClass(this.toThemeProperty("jqx-icon-search")),this.rtl&&(r.addClass(this.toThemeProperty("jqx-rtl")),r.css("direction","rtl")),this.filter.children().remove(),this.filterbutton=s;for(var a=new Array,o=0;o<t.columns.records.length;o++)t.columns.records[o].datafield&&t.columns.records[o].filterable&&a.push({label:t.columns.records[o].text,value:t.columns.records[o].displayfield});var l=a.length<10,n=e("<div style='position: relative; top: 50%; display: none; margin-right: 4px; margin-left: 4px; float: left;'>"+this.gridlocalization.filtersearchstring+"</div>");this.filter.append(n);var d=e("<div class='filtercolumns' style='position: relative; margin: 4px; float: left;'></div>");this.filter.append(d),d.jqxDropDownList&&d.jqxDropDownList({theme:this.theme,enableBrowserBoundsDetection:!0,autoDropDownHeight:l,rtl:t.rtl,dropDownWidth:220,selectedIndex:0,width:"auto",height:20,source:a,displayMember:"label",valueMember:"value"}),this.filtercolumnsList=d;var h=function(e){t.filterinput.val("");for(var i=0;i<t.dataview.filters.length;i++){var r=t.dataview.filters[i];r.datafield===e&&t.filterinput.val(r.filter.getfilterat(0).filtervalue)}};30!==t.filterHeight&&(t.filtercolumnsList.css("margin-top",t.filterHeight/2-10),i.css("margin-top",t.filterHeight/2-10)),t._updateSimpleFilter=h,this.addHandler(d,"select",function(e){var t=e.args.item.value;h(t)}),"simple"===this.filterMode?(this.filtercolumnsList.hide(),n.show(),n.css("margin-top",-this.filter.height()/2),i.css("float","left")):(this.filtercolumnsList.show(),n.hide());var c=function(){if(!s.hasClass("jqx-fill-state-disabled")){var i=r.val();if(d.jqxDropDownList)var a=d.jqxDropDownList("getSelectedItem");var o=function(i,r,s){var a=new e.jqx.filter,o=t.getcolumntypebydatafield(i),l=t._getfiltertype(o);if("datefilter"==l)var n=a.createfilter(l,r,"EQUAL",null,i.cellsFormat,t.gridlocalization);else if("numericfilter"==l||"booleanfilter"==l){"numericfilter"==l&&(","==t.gridlocalization.decimalseparator&&r.indexOf(t.gridlocalization.decimalseparator)>=0&&(r=r.replace(t.gridlocalization.decimalseparator,".")),r.indexOf(t.gridlocalization.currencysymbol)>=0&&(r=r.replace(t.gridlocalization.currencysymbol,"")),r.indexOf(t.gridlocalization.percentagesymbol)>=0&&(r=r.replace(t.gridlocalization.percentagesymbol,"")));var n=a.createfilter(l,r,"EQUAL",null,i.cellsFormat,t.gridlocalization)}else var n=a.createfilter(l,r,"CONTAINS");return a.operator=s,a.addfilter(0,n),a};if("simple"!==t.filterMode){if(a){var l=a.value,n=t.getColumn(l),h=o(n,i,"and");i.length>0?(t.removeFilter(l),t.addFilter(l,h),t.applyFilters()):(t.removeFilter(l),t.applyFilters()),"advanced"===t.filterMode&&t._updateFilterRow&&t._updateFilterRow(!0)}}else{if(t.clearFilters(!1,!1),i.length>0)for(var c=0;c<t.columns.records.length;c++){var n=t.columns.records[c],h=o(n,i,"or");t.addFilter(n.datafield,h)}t.applyFilters()}0==t.dataview.filters.length?t.filtericon.fadeOut(200):t.filtericon.fadeIn(200)}};if(r.keydown(function(e){if(13===e.keyCode)return c(),e.preventDefault&&e.preventDefault(),!1}),s.click(function(){c()}),this.filterinput=r,this.filter.append(i),"advanced"==this.filterMode){var u=e("<a style='float: left; position: relative; margin: 2px; margin-left: 10px;' href='#'>"+this.gridlocalization.filterstring+"</a>");i.append(u),this.addHandler(u,"click",function(i){var r=function(i){if(t.filterrow)for(var r=0;r<t.filterrow[0].cells.length;r++){var s=t.filterrow[0].cells[r],a=e(s).find("input:first"),o=t.columns.records[r];if(o.filterable){!0===i&&a.val("");for(var l=0;l<t.dataview.filters.length;l++){var n=t.dataview.filters[l];if(n.datafield===o.displayfield){a.val(n.filter.getfilterat(0).filtervalue);break}}}}},s=function(i){if(t.filterrow)for(var r=0;r<t.filterrow[0].cells.length;r++){var s=t.filterrow[0].cells[r],a=e(s).find("input:first"),o=t.columns.records[r];o.hidden?s.style.visibility="hidden":s.style.visibility="inherit",o.filterable&&(s.style.left=parseInt(0)+parseInt(o.uielement[0].style.left)+"px",s.style.width=6+o.width+"px",a[0]&&(a[0].style.width=o.width-6-22+"px"))}};t._updateFilterRow=r,t._arrangeFilterRow=s;var a=function(){t.filtercolumnsList.jqxDropDownList({disabled:!0}),t.filterinput.addClass(t.toThemeProperty("jqx-fill-state-disabled")),t.filterinput.attr("disabled",!0),t.filterbutton.addClass(t.toThemeProperty("jqx-fill-state-disabled"))};return 0===t.filter.find(".filterrow").length?(t._renderadvancedfilter(),a(),r(),t._arrange(),s()):("none"===t.filter.find(".filterrow").css("display")?(a(),t.filter.find(".filterrow").removeClass("filterrow-hidden"),r(),t.filter.find(".filterrow").show(),s()):(t.filtercolumnsList.jqxDropDownList({disabled:!1}),t.filterinput.removeClass(t.toThemeProperty("jqx-fill-state-disabled")),t.filterinput.attr("disabled",!1),t.filterbutton.removeClass(t.toThemeProperty("jqx-fill-state-disabled")),h(t.filtercolumnsList.jqxDropDownList("getSelectedItem").value),t.filter.find(".filterrow").addClass("filterrow-hidden"),t.filter.find(".filterrow").hide()),t._arrange()),!1})}var g=e("<div style='float: left; width: 16px; height: 16px; position: relative; margin: 3px;'></div>");g.attr("title",t.gridlocalization.filterclearstring),g.addClass(t.toThemeProperty("jqx- md-cancel  ")),i.append(g),g.hide(),t.filtericon=g,g.click(function(){t.clearFilters(),t.filtericon.fadeOut(200)}),t.dataview.filters.length>0&&("advanced"!=t.filterMode?h(t.dataview.filters[0].datafield):t._updateFilterRow&&t._updateFilterRow())},_renderadvancedfilter:function(){var t=this,i=function(){t.clearFilters(!1,!1);for(var i=t.filtercolumnsList.jqxDropDownList("getSelectedItem").value,r=(t.filterinput.val(),0);r<t.filterrow[0].cells.length;r++){var s=t.filterrow[0].cells[r],a=e(s).find("input:first"),o=e(s).find(".filterconditions"),l=t.columns.records[r],n="";if(l.filterable){l.displayfield===i&&t.filterinput.val(a.val());var d=t.getcolumntypebydatafield(l),h=new e.jqx.filter;switch(d){case"number":case"int":case"float":case"decimal":filtertype="numericfilter",conditions=h.getoperatorsbyfiltertype("numericfilter");break;case"boolean":case"bool":filtertype="booleanfilter",conditions=h.getoperatorsbyfiltertype("booleanfilter");break;case"date":case"time":filtertype="datefilter",conditions=h.getoperatorsbyfiltertype("datefilter");break;case"string":filtertype="stringfilter",conditions=h.getoperatorsbyfiltertype("stringfilter")}if(0==o.length)n="stringfilter"===filtertype?conditions[2]:conditions[0];else{var c=o.jqxDropDownList("getSelectedItem");n=c?conditions[c.index]:"stringfilter"===filtertype?conditions[2]:conditions[0]}var u=a.val();if(u.length>0||0==u.length&&"NOT_NULL"==n||0==u.length&&"NOT_EMPTY"==n||0==u.length&&"EMPTY"==n||0==u.length&&"NULL"==n){var g=l.displayfield,p=new e.jqx.filter;"numericfilter"==filtertype&&(","==t.gridlocalization.decimalseparator&&u.indexOf(t.gridlocalization.decimalseparator)>=0&&(u=u.replace(t.gridlocalization.decimalseparator,".")),u.indexOf(t.gridlocalization.currencysymbol)>=0&&(u=u.replace(t.gridlocalization.currencysymbol,"")),u.indexOf(t.gridlocalization.percentagesymbol)>=0&&(u=u.replace(t.gridlocalization.percentagesymbol,"")));var h=p.createfilter(filtertype,u,n,null,l.cellsFormat,t.gridlocalization);p.addfilter(0,h),t.addFilter(g,p)}}}t.dataview.filters.length>0?t.applyFilters():t.clearFilters(),0==t.dataview.filters.length?t.filtericon.fadeOut(200):t.filtericon.fadeIn(200)};!function(){var r=e("<div style='position: relative;' class='filterrow'></div>").appendTo(t.filter);t.filterrow=r,r[0].cells=new Array,r.height(24),r.width(t.table.width());var s=t.filtercolumnsList.jqxDropDownList("getSelectedItem").value,a=t.filterinput.val();e.each(t.columns.records,function(){var o=this,l=e("<div></div>").appendTo(r);if(l.css("position","absolute"),l.css("left",0+parseInt(o.uielement[0].style.left)),o.pinned&&(l.css("z-index",t.tableZIndex+t.columns.records.length),l.addClass(t.toThemeProperty("jqx-widget-header"))),r[0].cells.push(l[0]),!this.filterable)return!0;var n=e("<input style='margin-left: 4px; height: 20px; float: left;' role='textbox' type='text'/>").appendTo(l);n.keydown(function(e){13===e.keyCode&&i()}),o.displayfield===s&&n.val(a),n.addClass(t.toThemeProperty("jqx-input")),n.addClass(t.toThemeProperty("jqx-rc-all")),n.addClass(t.toThemeProperty("jqx-widget")),n.addClass(t.toThemeProperty("jqx-widget-content"));var d=e("<div style='cursor: pointer; margin-left: 4px; margin-bottom: 4px; margin-top: 6px; width: 18px; position: relative; margin-top: 4px; float: left;'></div>").appendTo(l);d.append(e("<div style='width: 16px; height: 16px;' class='"+t.toThemeProperty("jqx-grid-column-filterbutton")+"'></div>")),n.focus(function(){t.ensureColumnVisible(o.displayfield),t.filter[0].scrollLeft=0,t.ensureColumnVisible(o.displayfield),setTimeout(function(){t.filter[0].scrollLeft=0,t.ensureColumnVisible(o.displayfield)},10)}),d.click(function(){var i=e("<div class='filterconditions' style='position: relative; margin-top: 1px; float: left;'></div>");i.insertAfter(d),d.remove();var r=t.getcolumntypebydatafield(o),s=t._getfiltersbytype(r);index="string"===r?2:0,i.jqxDropDownList({theme:t.theme,enableBrowserBoundsDetection:!0,renderMode:"simple",arrowSize:0,selectedIndex:index,rtl:t.rtl,dropDownWidth:230,dropDownHeight:180,width:20,height:20,source:s,selectionRenderer:function(){return"<div style='width: 16px; height: 16px;' class='"+t.toThemeProperty("jqx-grid-column-filterbutton")+"'></div>"}}),t.addHandler(i,"close",function(e){n.focus(),setTimeout(function(){n.focus()},10)}),i.removeAttr("tabindex"),i.find("div").removeAttr("tabindex"),i.jqxDropDownList("open")}),n[0].style.width=o.width-6-22+"px"}),e("<div style='clear: both;'></div>").appendTo(r)}();var r=e("<div style='position:relative;' class='filterrow'></div>").appendTo(t.filter),s=e("<input type='button' style='position: relative; float: left; margin-top: 4px; margin-left: 4px;' value='"+t.gridlocalization.filterapplystring+"'/>").appendTo(r),a=e("<input type='button' style='position: relative; float: left; margin-top: 4px;  margin-left: 4px;' value='"+t.gridlocalization.filtercancelstring+"'/>").appendTo(r);s.css("left",0),a.css("left",0),s.jqxButton({theme:t.theme}),a.jqxButton({theme:t.theme}),a.click(function(){t.filtercolumnsList.jqxDropDownList({disabled:!1}),t.filterinput.removeClass(t.toThemeProperty("jqx-fill-state-disabled")),t.filterinput.attr("disabled",!1),t.filterbutton.removeClass(t.toThemeProperty("jqx-fill-state-disabled")),t.filter.find(".filterrow").addClass("filterrow-hidden"),t.filter.find(".filterrow").hide(),t._arrange()}),s.click(function(){i()}),t._renderhorizontalscroll()},_getfiltertype:function(e){var t="stringfilter";switch(e){case"number":case"int":case"float":case"decimal":t="numericfilter";break;case"boolean":case"bool":t="booleanfilter";break;case"date":case"time":t="datefilter";break;case"string":t="stringfilter"}return t},getcolumntypebydatafield:function(t){var i=this,r=i.source.datafields||(i.source._source?i.source._source.datafields:null);if(r){var s="";if(e.each(r,function(){if(this.name==t.displayfield)return this.type&&(s=this.type),!1}),s)return s}return"string"},_getfiltersbytype:function(e){var t=this,i="";switch(e){case"number":case"float":case"int":i=t.gridlocalization.filternumericcomparisonoperators;break;case"date":i=t.gridlocalization.filterdatecomparisonoperators;break;case"boolean":case"bool":i=t.gridlocalization.filterbooleancomparisonoperators;break;case"string":default:i=t.gridlocalization.filterstringcomparisonoperators}return i},_getcellvalue:function(e,t){var i=null;return i=t[e.datafield],null!=e.displayfield&&(i=t[e.displayfield]),null==i&&(i=""),i},_renderrows:function(t){if(this.editable&&null!=this.editKey&&!1!==t){this.endroweditbykey(this.editKey)}if(this.treeGrid)return void this.treeGrid._renderrows();if(!this._loading&&!this._updating){this.rendering&&this.rendering();var i=this,r=0;this.table[0].rows=new Array;var s=this.toTP("jqx-cell")+" "+this.toTP("jqx-widget-content");this.rtl&&(s+=" "+this.toTP("jqx-cell-rtl"));var a=this.columns.records.length,o=e.jqx.browser.msie&&e.jqx.browser.version<8;o&&this.host.attr("hideFocus","true");var l=i.groups.length,n=new Array,d=this.source.records;if(d=this.dataview.evaluate(d),this.dataViewRecords=d,"all"==this.dataview.pagesize||!this.pageable||this.serverProcessing){var h=d;if(this.pageable&&this.serverProcessing&&d.length>this.dataview.pagesize)var h=d.slice(this.dataview.pagesize*this.dataview.pagenum,this.dataview.pagesize*this.dataview.pagenum+this.dataview.pagesize)}else var h=d.slice(this.dataview.pagesize*this.dataview.pagenum,this.dataview.pagesize*this.dataview.pagenum+this.dataview.pagesize);if(i.groups&&i.groups.length>0){var c=this.pageable?this.dataview.pagesize*this.dataview.pagenum:0;if("root"===this.pageSizeMode){var u=i.source.getGroupedRecords(i.groups,"records","label",null,"data",null,"parent",d,0);i.rootRecordsLength=u.length,u=function(e){for(var t=0,r=new Array,s=0;s<e.length;s++){var a=e[s];if(0==a.level&&t++,t>i.dataview.pagesize*i.dataview.pagenum&&t<=i.dataview.pagesize*i.dataview.pagenum+i.dataview.pagesize&&r.push(a),t>i.dataview.pagesize*i.dataview.pagenum+i.dataview.pagesize)break}return r}(u)}else var u=i.source.getGroupedRecords(i.groups,"records","label",null,"data",null,"parent",h,c);var g=function(e,t){for(var i=0;i<e.length;i++){var r=e[i];if(t.push(r),r.records&&r.records.length>0)for(var s=g(r.records,new Array),a=0;a<s.length;a++)s[a].leaf,t.push(s[a])}return t},n=g.call(i,u,new Array);h=n,this.rowsByKey=new Array;for(var p=0;p<h.length;p++){var f=h[p];this.rowsByKey[f.uid]=f}}var n=h;this.renderedRecords=n;var v=n.length,m=this.tableZIndex,w=0,y=0;if(o)for(var x=0;x<a;x++){var b=this.columns.records[x],_=b.width;_<b.minwidth&&(_=b.minwidth),_>b.maxwidth&&(_=b.maxwidth);var j=e('<table><tr><td role="gridcell" style="max-width: '+_+"px; width:"+_+'px;" class="'+s+'"></td></tr></table>');e(document.body).append(j);var q=j.find("td");w=1+parseInt(q.css("padding-left"))+parseInt(q.css("padding-right")),j.remove();break}for(var S=this.rtl?" "+this.toTP("jqx-grid-table-rtl"):"",T="<table cellspacing='0' cellpadding='0' class='"+this.toTP("jqx-grid-table")+S+"' id='table"+this.element.id+"'><colgroup>",C="<table cellspacing='0' cellpadding='0' class='"+this.toTP("jqx-grid-table")+S+"' id='pinnedtable"+this.element.id+"'><colgroup>",z=0,P=a,x=0;x<a;x++){var b=this.columns.records[x];if(b.hidden)z++,P--;else{var _=b.width;if(_<b.minwidth&&(_=b.minwidth),_>b.maxwidth&&(_=b.maxwidth),_-=w,_<0&&(_=0),o){var k=_;if(x==z&&k++,b.rowDetailscolumn){var k=k+4;C+="<col style='max-width: "+k+"px; width: "+k+"px;'>",T+="<col style='max-width: "+k+"px; width: "+k+"px;'>"}else C+="<col style='max-width: "+k+"px; width: "+k+"px;'>",T+="<col style='max-width: "+k+"px; width: "+k+"px;'>"}else C+="<col style='max-width: "+_+"px; width: "+_+"px;'>",T+="<col style='max-width: "+_+"px; width: "+_+"px;'>";y+=_}}T+="</colgroup>",C+="</colgroup>",this._hiddencolumns=!1;var B=!1;if(this.rowDetails&&this._pinnedTable&&(this._pinnedTable.find("[data-role=details]").detach(),this._table.find("[data-role=details]").detach()),0===v){var H='<tr role="row">',D=this.host.height();if(this.pageable&&(D-=this.pagerHeight,"both"===this.pagerPosition&&(D-=this.pagerHeight)),D-=this.columnsHeight,this.filterable){var I=this.filter.find(".filterrow"),F=this.filter.find(".filterrow-hidden"),M=1;F.length>0&&(M=0),D-=this.filterHeight+this.filterHeight*I.length*M}this.showstatusbar&&(D-=this.statusBarHeight),this.showAggregates&&(D-=this.aggregatesHeight),D<25&&(D=25),"hidden"!=this.hScrollBar[0].style.visibility&&(D-=this.hScrollBar.outerHeight()),("auto"===this.height||null===this.height||this.autoheight)&&(D=300);var j='<td colspan="'+this.columns.records.length+'" role="gridcell" style="border: none; min-height: '+D+"px; height: "+D+"px; max-width:"+y+"px; width:"+y+"px;",s=this.toTP("jqx-cell")+" "+this.toTP("jqx-grid-cell")+" "+this.toTP("jqx-item");s+=" "+this.toTP("jqx-center-align"),j+='" class="'+s+'">',j+=this.gridlocalization.emptydatastring,j+="</td>",H+=j,T+=H,C+=H,this.table[0].style.width=y+2+"px",r=y}for(var R=this.getRows(),A=new Array,p=0;p<n.length;p++){var f=n[p],L=f.uid;void 0===f.uid&&(f.uid=this.dataview.generatekey());var H='<tr data-key="'+L+'" role="row" id="row'+p+this.element.id+'">',K='<tr data-key="'+L+'" role="row" id="row'+p+this.element.id+'">';if(l>0&&f.level<l)var H='<tr data-role="row-group" data-key="'+L+'" role="row" id="row'+p+this.element.id+'">',K='<tr data-role="row-group" data-key="'+L+'" role="row" id="row'+p+this.element.id+'">';for(var O=0,N=0,x=0;x<a;x++){var G=this.columns.records[x];(G.pinned||this.rtl&&this.columns.records[a-1].pinned)&&(B=!0);var _=G.width;_<G.minwidth&&(_=G.minwidth),_>G.maxwidth&&(_=G.maxwidth),_-=w,_<0&&(_=0);var s=this.toTP("jqx-cell")+" "+this.toTP("jqx-grid-cell")+" "+this.toTP("jqx-item");G.pinned&&(s+=" "+this.toTP("jqx-grid-cell-pinned")),this.sortcolumn===G.displayfield&&(s+=" "+this.toTP("jqx-grid-cell-sort")),this.altRows&&p%2!=0&&(s+=" "+this.toTP("jqx-grid-cell-alt")),this.rtl&&(s+=" "+this.toTP("jqx-cell-rtl"));var E="";if(l>0&&f.level<l)if(o)s+=" "+this.toTP("jqx-grid-cell-pinned");else{s+=" "+this.toTP("jqx-grid-cell-pinned"),E+=' colspan="'+a+'"';for(var k=0,W=0;W<a;W++){var V=i.columns.records[W],U=V.width;U<V.minwidth&&(_=V.minwidth),U>V.maxwidth&&(_=V.maxwidth),U-=w,U<0&&(U=0),V.hidden||(k+=U)}_=k}var j='<td role="gridcell" '+E+' style="max-width:'+_+"px; width:"+_+"px;",Y='<td role="gridcell" '+E+' style="pointer-events: none; visibility: hidden; border-color: transparent; max-width:'+_+"px; width:"+_+"px;";x==a-1&&1==a&&(j+="border-right-color: transparent;",Y+="border-right-color: transparent;");var X=!1;l>0&&f.level<l&&(X=!0),X?this.rtl&&(s+=" "+this.toTP("jqx-right-align")):"left"!=G.cellsalign&&("right"===G.cellsalign?s+=" "+this.toTP("jqx-right-align"):s+=" "+this.toTP("jqx-center-align")),this.rowinfo[f.uid]&&(this.rowinfo[f.uid].selected&&!G.rowDetailscolumn&&this.editKey!==f.uid&&"none"!==this.selectionMode&&(s+=" "+this.toTP("jqx-grid-cell-selected"),s+=" "+this.toTP("jqx-fill-state-pressed")),this.rowinfo[f.uid].locked&&(s+=" "+this.toTP("jqx-grid-cell-locked"))),G.hidden?X||(j+="display: none;",Y+="display: none;",this._hiddencolumns=!0):(O+=w+_,0==N&&(j+="border-left-width: 0px;",Y+="border-left-width: 0px;"),N++),l>0&&o&&X&&x>=l&&(j+="font-size: 1px; border-color: transparent;  color: transparent;",Y+="font-size: 1px; border-color: transparent; color: transparent;"),G.pinned&&(j+="pointer-events: auto;",Y+="pointer-events: auto;"),!X&&G.rowDetailscolumn&&(this.rowinfo[f.uid]?this.rowinfo[f.uid].nodetails||(this.rowinfo[f.uid].expanded?(this.rtl?s+=" "+this.toTP("jqx-grid-group-expand-rtl"):s+=" "+this.toTP("jqx-grid-group-expand"),s+=" "+this.toTP("jqx-icon-arrow-down")):this.rtl?(s+=" "+this.toTP("jqx-grid-group-collapse-rtl"),s+=" "+this.toTP("jqx-icon-arrow-left")):(s+=" "+this.toTP("jqx-grid-group-collapse"),s+=" "+this.toTP("jqx-icon-arrow-right"))):this.rtl?(s+=" "+this.toTP("jqx-grid-group-collapse-rtl"),s+=" "+this.toTP("jqx-icon-arrow-left")):(s+=" "+this.toTP("jqx-grid-group-collapse"),s+=" "+this.toTP("jqx-icon-arrow-right"))),(!this.autoRowHeight||this.autoRowHeight&&!G.autoCellHeight)&&(s+=" "+this.toTP("jqx-grid-cell-nowrap "));var Z=i._getcellvalue(G,f),$=G.cellsFormat;if(l>0&&f.level<l&&(Z=f.label,$=i.getColumn(i.groups[f.level]).cellsFormat),""!=$&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(Z)?Z=e.jqx.dataFormat.formatdate(Z,$,i.gridlocalization):(e.jqx.dataFormat.isNumber(Z)||!isNaN(parseFloat(Z))&&isFinite(Z))&&(Z=e.jqx.dataFormat.formatnumber(Z,$,i.gridlocalization))),X)this.groupsRenderer&&(Z=this.groupsRenderer(Z,f,f.level));else{if(""!=G.cellclassname&&G.cellclassname)if("string"==typeof G.cellclassname)s+=" "+G.cellclassname;else{var J=G.cellclassname(p,G.datafield,Z,f);J&&(s+=" "+J)}if(""!=G.cellsRenderer&&G.cellsRenderer){var Q=R.indexOf(f);if(-1===Q&&f.originalRecord)var Q=R.indexOf(f.originalRecord);Z=G.cellsRenderer(Q,G.datafield,Z,f),Z&&(Z.indexOf("<jqx-")>=0||Z.indexOf(" ng-")>=0)&&A.push({rowKey:f.uid,row:Q,column:G.datafield,value:Z,columnIndex:x})}}if(j+='" class="'+s+'">',j+=Z,j+="</td>",Y+='" class="'+s+'">',Y+=Z,Y+="</td>",G.pinned?(K+=j,H+=j):(H+=j,B&&(K+=Y)),l>0&&!o&&f.level<l)break}if(0==r&&(this.table[0].style.width=O+2+"px",r=O),H+="</tr>",K+="</tr>",T+=H,C+=K,this.rowinfo[f.uid]?("group"in this.rowinfo[f.uid]||(this.rowinfo[f.uid].group=X),"row"in this.rowinfo[f.uid]||(this.rowinfo[f.uid].row=f),"details"in this.rowinfo[f.uid]||(this.rowinfo[f.uid].details=null),"detailsHeight"in this.rowinfo[f.uid]||(this.rowinfo[f.uid].detailsHeight=200),"initialized"in this.rowinfo[f.uid]||(this.rowinfo[f.uid].initialized=!1),"expanded"in this.rowinfo[f.uid]||(this.rowinfo[f.uid].expanded=!1)):this.rowinfo[f.uid]={group:X,row:f,details:null,detailsHeight:200,
initialized:!1,expanded:!1},this.serverProcessing&&(this.rowinfo[f.uid].row=f),this.rowDetails){var ee=this.rowinfo[f.uid].detailsHeight;if(this.rowinfo[f.uid])if(this.rowinfo[f.uid].expanded)var te='<tr data-role="row-details"><td valign="top" style="pointer-events: auto; overflow: hidden; min-height: '+ee+"px; max-height: "+ee+"px; height: "+ee+'px; overflow: hidden; border-left: none; border-right: none;" colspan="'+this.columns.records.length+'" role="gridcell"';else var te='<tr data-role="row-details" style="display: none;"><td valign="top" style="pointer-events: auto; overflow: hidden; min-height: '+ee+"px; max-height: "+ee+"px; height: "+ee+'px; overflow: hidden; border-left: none; border-right: none;" colspan="'+this.columns.records.length+'" role="gridcell"';else var te='<tr data-role="row-details" style="display: none;"><td valign="top" style="pointer-events: auto; overflow: hidden; min-height: '+ee+"px; max-height: "+ee+"px; height: "+ee+'px; overflow: hidden; border-left: none; border-right: none;" colspan="'+this.columns.records.length+'" role="gridcell"';var s=this.toTP("jqx-cell")+" "+this.toTP("jqx-grid-cell")+" "+this.toTP("jqx-item");s+=" "+this.toTP("jqx-details"),s+=" "+this.toTP("jqx-reset"),te+='" class="'+s+'"><div style="pointer-events: auto; overflow: hidden; min-height: '+ee+"px; max-height: "+ee+"px; height: "+ee+'px;"><div data-role="details"></div></div></td></tr>',T+=te,C+=te}}if(T+="</table>",C+="</table>",B){i.WinJS?MSApp.execUnsafeLocalFunction(function(){i.table.html(C+T)}):i.table[0].innerHTML=C+T;var ie=this.table.find("#table"+this.element.id),re=this.table.find("#pinnedtable"+this.element.id);if(re.css("float","left"),re.css("pointer-events","none"),ie.css("float","left"),re[0].style.position="absolute",ie[0].style.position="relative",ie[0].style.zIndex=m-10,re[0].style.zIndex=m+10,this._table=ie,this._table[0].style.left="0px",this._pinnedTable=re,this._pinnedTable[0].style.left="0px",this._pinnedTable[0].style.width=r+"px",this._table[0].style.width=r+"px",this.rtl&&r>parseInt(this.element.style.width)&&this._haspinned&&(this._pinnedTable[0].style.left=3-r+parseInt(this.element.style.width)+"px"),this.rowDetails)for(var p=0;p<v;p++){var f=n[p],L=f.uid;if(this.rowinfo[L].details){var se=e(this._table.children()[1]).children("[data-key="+L+"]"),ae=e(this._pinnedTable.children()[1]).children("[data-key="+L+"]");if(se){var oe=ae.next(),le=e(e(oe).children().children());le.children().detach(),le.append(this.rowinfo[f.uid].details)}}}}else{i.WinJS?MSApp.execUnsafeLocalFunction(function(){i.table.html(T)}):i.table[0].innerHTML=T;var W=this.table.find("#table"+this.element.id);this._table=W,e.jqx.browser.msie&&e.jqx.browser.version<10&&(this._table[0].style.width=r+"px"),0===v&&(this._table[0].style.width=2+r+"px")}if(0===v&&(this._table[0].style.tableLayout="auto",this._pinnedTable&&(this._pinnedTable[0].style.tableLayout="auto")),A&&A.length>0){this._table[0].rows;e.each(A,function(){var t=(this.row,this.rowKey),r=(this.column,this.columnIndex),s=i._getuirow(t);if(s){var a=s[0].cells[r];e.jqx.angularCompile&&e.jqx.angularCompile(a,"<div>"+a.innerHTML+"</div>")}})}this.rendered&&this.rendered()}},getcolumnindex:function(e){var t=this.getColumn(e);return this.columns.records.indexOf(t)},setcolumnindex:function(t,i,r){var s=this.getColumn(t);if(!(s.pinned||s.hidden||s.checkboxcolumn||s.grouped)){var a=this.columns.records.indexOf(s);this.columns.records.splice(a,1),this.columns.records.splice(i,0,s);var o=0,l=this.headerZIndex;this.columnsrow.children().detach();var n=this.toThemeProperty("jqx-grid-cell");n+=" "+this.toThemeProperty("jqx-grid-cell-pinned"),n+=" "+this.toThemeProperty("jqx-item");var d=this;if(void 0!=d.filterrow){e(d.filterrow.children()[0])}this.columnsrow[0].cells=[];var h=!1;if(e.each(this.columns.records,function(e,t){var i=this.uielement;d.columnsrow.append(i),d.rtl?i.css("z-index",l++):i.css("z-index",l--);var r=d.rtl?250+l+1:250+l-1;this.pinned&&i.css("z-index",r);var s=this.width;i.css("left",o),d.columnsrow[0].cells[d.columnsrow[0].cells.length]=i[0],this.hidden&&(h=!0),this.hidden&&this.hideable||(o+=s)}),this.groupable){var c=this.groups.length;c>0&&a-c>=0&&(a-=c,i-=c)}this.rowDetails&&a-1>=0&&(a--,i--),"checkbox"==this.selectionMode&&a-1>=0&&(a--,i--);var s=this._columns[a];this._columns.splice(a,1),this._columns.splice(i,0,s),this.resize(),this._rendercolumnGroups(),this._raiseEvent("columnReordered",{dataField:s.datafield,oldIndex:a,newIndex:i})}},_pinnedColumnsLength:function(){var t=0;return e.each(this.columns.records,function(){this.pinned&&t++,this.grouped&&t++}),this.rowDetails&&t++,"checkbox"==this.selectionMode&&t++,t},_handlecolumnsReorder:function(){var t=this,i=-1,r=!1;if(t.columnsReorder){var s="mousemove.reorder"+this.element.id,a="mousedown.reorder"+this.element.id,o="mouseup.reorder"+this.element.id,l=!1;this.isTouchDevice()&&!0!==this.touchmode&&(l=!0,s=e.jqx.mobile.getTouchEventName("touchmove")+".reorder"+this.element.id,a=e.jqx.mobile.getTouchEventName("touchstart")+".reorder"+this.element.id,o=e.jqx.mobile.getTouchEventName("touchend")+".reorder"+this.element.id),this.removeHandler(e(document),s),this.addHandler(e(document),s,function(s){if(t.resizing)return!0;if(null!=t.reordercolumn){var a=parseInt(s.pageX),o=parseInt(s.pageY);if(l){var n=t.getTouches(s),d=n[0];void 0!=d&&(a=parseInt(d.pageX),o=parseInt(d.pageY))}var h=t.host.coord(),c=parseInt(h.left),u=parseInt(h.top);void 0!=t.dragmousedownoffset&&null!=t.dragmousedownoffset||(t.dragmousedownoffset={left:0,top:0});var g=parseInt(a)-parseInt(t.dragmousedownoffset.left),p=parseInt(o)-parseInt(t.dragmousedownoffset.top);if(t.reordercolumn.css({left:g+"px",top:p+"px"}),r=!1,a>=c&&a<=c+t.host.width()&&o>=u&&o<=u+t.host.height()&&(r=!0),i=-1,r){t.reordercolumnicon.removeClass(t.toThemeProperty("jqx-grid-dragcancel-icon")),t.reordercolumnicon.addClass(t.toThemeProperty("jqx-grid-drag-icon"));var f=t.columnsheader.coord(),v=f.top+t.columnsheader.height();if(null!=t.columnsdropline)if(o>=f.top&&o<=v){if(i=t._handlereordercolumnsdroplines(a),t.columnGroups&&-1!=i){var m=0;m+=t._pinnedColumnsLength();var w=i.index;if(w>=m){var y=t.columns.records[w];if(void 0!=y){var x=t.columns.records.indexOf(t.getColumn(y.datafield));if(null==y.datafield)var x=t.columns.records.indexOf(t.getcolumnbytext(y.text));var b=e.data(t.reordercolumn[0],"reorderrecord"),_=t.columns.records.indexOf(t.getColumn(b)),j=y;if(_<x&&"before"==i.position&&(j=t.columns.records[x-1]),j.columngroup!=t.getColumn(b).columngroup)return void t.columnsdropline.hide()}}}}else t.columnsdropline.fadeOut("slow")}else null!=t.columnsdropline&&t.columnsdropline.fadeOut("slow"),t.reordercolumnicon.removeClass(t.toThemeProperty("jqx-grid-drag-icon")),t.reordercolumnicon.addClass(t.toThemeProperty("jqx-grid-dragcancel-icon"));if(s.preventDefault&&(s.preventDefault(),s.stopPropagation()),l)return s.preventDefault(),s.stopPropagation(),!1}}),this.columnsbounds=new Array,this.removeHandler(e(document),a),this.addHandler(e(document),a,function(i){if(t.resizing)return!0;t.columnsbounds=new Array;var r=t.host.coord().left,s=t.host.coord().top;t.showtoolbar&&(s+=t.toolbarHeight),t.filter&&(s+=t.filter.height());var a=0;e.each(t.columns.records,function(i){var o=this;if(o.hidden)return t.columnsbounds[t.columnsbounds.length]={top:s,column:o,left:r,width:0,height:2},!0;0==a&&(r=t.rtl?parseInt(t.host.coord().left)-t.hScrollInstance.max+t.hScrollInstance.value:parseInt(t.host.coord().left)-t.hScrollInstance.value),a++;var l=2+t.columnsHeight;t.columnshierarchy&&(s=e(o.uielement).coord().top,l=e(o.uielement).height()),t.columnsbounds[t.columnsbounds.length]={top:s,column:o,left:r,width:o.width,height:l},r+=o.width})}),this.removeHandler(e(document),o),this.addHandler(e(document),o,function(s){if(t.resizing)return!0;t.__drag=!1,e(document.body).removeClass("jqx-disableselect");parseInt(s.pageX),parseInt(s.pageY);if(l){var a=t.getTouches(s),o=a[0];parseInt(o.pageX),parseInt(o.pageY)}var n=t.host.coord(),d=(parseInt(n.left),parseInt(n.top));if(t.showtoolbar&&(d+=t.toolbarHeight),t.columndragstarted=!1,t.dragmousedown=null,null!=t.reordercolumn){var h=e.data(t.reordercolumn[0],"reorderrecord"),c=t.columns.records.indexOf(t.getColumn(h));t.reordercolumn.remove(),t.reordercolumn=null;var u=0;if(u+=t._pinnedColumnsLength(),null!=h){if(r&&-1!=i){var g=i.index;if(g>=u){var p=t.columns.records[g];if(void 0!=p){var f=t.columns.records.indexOf(t.getColumn(p.datafield));if(null==p.datafield)var f=t.columns.records.indexOf(t.getcolumnbytext(p.text));if(t.columnGroups){var v=p;if(c<f&&"before"==i.position&&(v=t.columns.records[f-1]),v.columngroup!=t.getColumn(h).columngroup)return void(null!=t.columnsdropline&&(t.columnsdropline.remove(),t.columnsdropline=null))}c<f?"before"==i.position?t.setcolumnindex(h,f-1):t.setcolumnindex(h,f):c>f&&t.setcolumnindex(h,f)}}}null!=t.columnsdropline&&(t.columnsdropline.remove(),t.columnsdropline=null)}}})}},getcolumnbytext:function(t){var i=null;return this.columns.records&&e.each(this.columns.records,function(){if(this.text==t)return i=this,!1}),i},_handlereordercolumnsdroplines:function(t){var i=this,r=-1,s=i._pinnedColumnsLength(),a=parseInt(i.host.coord().left),o=a+i.host.width(),l="hidden"!=i.vScrollBar.css("visibility")?19:0;return i.rtl||(l=0),e.each(i.columnsbounds,function(e){if(e>=s){if(0==this.width)return!0;if(t<=this.left+this.width/2)return t>o?(i.columnsdropline.fadeOut(),!1):(i.columnsdropline.css("left",l+parseInt(this.left)+"px"),i.columnsdropline.css("top",parseInt(this.top)+"px"),i.columnsdropline.height(this.height),i.columnsdropline.fadeIn("slow"),r={index:e,position:"before"},!1);if(t>=this.left+this.width/2){if(this.left+this.width>o)return i.columnsdropline.fadeOut(),!1;i.columnsdropline.css("left",l+1+this.left+this.width),i.columnsdropline.css("top",this.top),i.columnsdropline.height(this.height),i.columnsdropline.fadeIn("slow"),r={index:e,position:"after"}}}}),r},_createreordercolumn:function(t,i,r){var s=this,a=i;s.reordercolumn&&s.reordercolumn.remove(),s.columnsdropline&&s.columnsdropline.remove(),s.reordercolumn=e("<div></div>");var o=t.clone();s.reordercolumn.css("z-index",999999),o.css("border-width","1px"),o.css("opacity","0.4");var l=e(o.find("."+s.toThemeProperty("jqx-grid-column-menubutton")));l.length>0&&l.css("display","none");var n=e(o.find(".jqx- md-cancel  "));n.length>0&&n.css("display","none"),s.reordercolumnicon=e('<div style="z-index: 9999; position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -7px;"></div>'),s.reordercolumnicon.addClass(s.toThemeProperty("jqx-grid-drag-icon")),s.reordercolumn.css("float","left"),s.reordercolumn.css("position","absolute");s.host.coord();o.width(t.width()+16),s.reordercolumn.append(o),s.reordercolumn.height(t.height()),s.reordercolumn.width(o.width()),s.reordercolumn.append(s.reordercolumnicon),e(document.body).append(s.reordercolumn),o.css("margin-left",0),o.css("left",0),o.css("top",0),s.reordercolumn.css("left",a.left+s.dragmousedown.left),s.reordercolumn.css("top",a.top+s.dragmousedown.top),void 0!=r&&r&&(s.columnsdropline=e('<div style="z-index: 9999; display: none; position: absolute;"></div>'),s.columnsdropline.width(2),s.columnsdropline.addClass(s.toThemeProperty("jqx-grid-group-drag-line")),e(document.body).append(s.columnsdropline))},_handlecolumnsdragreorder:function(t,i){this.reordercolumn&&this.reordercolumn.remove(),this.columnsdropline&&this.columnsdropline.remove(),this.dragmousedown=null,this.dragmousedownoffset=null,this.columndragstarted=!1,this.reordercolumn=null;var r,s=this,a=!1;this.isTouchDevice()&&!0!==this.touchmode&&(a=!0);var o="mousedown.drag",r="mousemove.drag";a?(o=e.jqx.mobile.getTouchEventName("touchstart")+".drag",r=e.jqx.mobile.getTouchEventName("touchmove")+".drag"):this.addHandler(i,"dragstart",function(e){return!1}),this.addHandler(i,o,function(i){if(0==t.draggable)return!0;if(s.resizing)return!0;s.__drag=!0;var r=i.pageX,o=i.pageY;if(a){var l=s.getTouches(i),n=l[0];r=n.pageX,o=n.pageY}s.dragmousedown={left:r,top:o};var d=e(i.target).coord();return s.dragmousedownoffset={left:parseInt(r)-parseInt(d.left),top:parseInt(o-d.top)},i.preventDefault&&i.preventDefault(),!0}),this.addHandler(i,r,function(o){if(!t.draggable)return!0;if(void 0==t.datafield)return!0;if(t.pinned)return!0;if(s.resizing)return!0;if(s.dragmousedown){var l=o.pageX,n=o.pageY;if(a){var d=s.getTouches(o),h=d[0];void 0!=h&&(l=h.pageX,n=h.pageY)}if(r={left:l,top:n},!s.columndragstarted&&null==s.reordercolumn){var c=Math.abs(r.left-s.dragmousedown.left),u=Math.abs(r.top-s.dragmousedown.top);(c>3||u>3)&&(s._createreordercolumn(i,r,!0),e(document.body).addClass("jqx-disableselect"),e.data(s.reordercolumn[0],"reorderrecord",t.datafield))}}})},getTouches:function(t){return e.jqx.mobile.getTouches(t)},_handlecolumnsResize:function(){var t=this;if(this.columnsResize){var i=!1;t.isTouchDevice()&&(i=!0);var r="mousemove.resize"+this.element.id,s="mousedown.resize"+this.element.id,a="mouseup.resize"+this.element.id;if(i)var r=e.jqx.mobile.getTouchEventName("touchmove")+".resize"+this.element.id,s=e.jqx.mobile.getTouchEventName("touchstart")+".resize"+this.element.id,a=e.jqx.mobile.getTouchEventName("touchend")+".resize"+this.element.id;this.removeHandler(e(document),r),this.addHandler(e(document),r,function(r){if(null!=t.resizablecolumn&&!t.disabled&&t.resizing&&null!=t.resizeline){var s=(t.resizablecolumn.columnelement,t.host.coord()),a=parseInt(t.resizestartline.coord().left),o=a-t._startcolumnwidth,l=t.resizablecolumn.column.minwidth;l="auto"==l?0:parseInt(l);var n=t.resizablecolumn.column.maxwidth;n="auto"==n?0:parseInt(n);var d=r.pageX;if(i){d=e.jqx.mobile.getTouches(r)[0].pageX}o+=l;var h=n>0?a+n:0,c=0==n||t._startcolumnwidth+d-a<n;if(t.rtl)var c=!0;if(c)if(t.rtl){if(d>=s.left&&d<=s.left+t.host.width()&&(t.resizeline.css("left",d),i))return!1}else if(d>=s.left&&d>=o&&(0!=h&&r.pageX<h?t.resizeline.css("left",d):0==h&&t.resizeline.css("left",d),i))return!1}if(!i&&null!=t.resizablecolumn)return!1}),this.removeHandler(e(document),s),this.addHandler(e(document),s,function(i){if(null!=t.resizablecolumn&&!t.disabled){var r=t.resizablecolumn.columnelement;if(r.coord().top+r.height()+5<i.pageY)return void(t.resizablecolumn=null);if(r.coord().top-5>i.pageY)return void(t.resizablecolumn=null);t._startcolumnwidth=t.resizablecolumn.column.width,t.resizablecolumn.column._width=null,e(document.body).addClass("jqx-disableselect"),e(document.body).addClass("jqx-position-reset"),t._mouseDownResize=new Date,t.resizing=!0,t._resizecolumn=t.resizablecolumn.column,t.resizeline=t.resizeline||e('<div style="position: absolute;"></div>'),t.resizestartline=t.resizestartline||e('<div style="position: absolute;"></div>'),t.resizebackground=t.resizebackground||e('<div style="position: absolute; left: 0; top: 0; background: #000;"></div>'),t.resizebackground.css("opacity",.01),t.resizebackground.css("cursor","col-resize"),t.resizeline.css("cursor","col-resize"),t.resizestartline.css("cursor","col-resize"),t.resizeline.addClass(t.toThemeProperty("jqx-grid-column-resizeline")),t.resizestartline.addClass(t.toThemeProperty("jqx-grid-column-resizestartline")),e(document.body).append(t.resizeline),e(document.body).append(t.resizestartline),e(document.body).append(t.resizebackground);var s=t.resizablecolumn.columnelement.coord();t.resizebackground.css("left",t.host.coord().left),t.resizebackground.css("top",t.host.coord().top),t.resizebackground.width(t.host.width()),t.resizebackground.height(t.host.height()),t.resizebackground.css("z-index",999999999);var a=function(e){t.rtl?e.css("left",parseInt(s.left)):e.css("left",parseInt(s.left)+t._startcolumnwidth);var i=0;i+=t.showtoolbar?t.toolbarHeight:0,i+=t.showstatusbar?t.statusBarHeight:0,i+=t.showAggregates?t.aggregatesHeight:0,t.pageable&&"bottom"!=t.pagerPosition&&(i+=t.pagerHeight),t.filterable&&(i+=t.filter.height());var r=0;t.pageable&&"top"!=t.pagerPosition&&(r=t.pagerHeight);var a="hidden"!=t.hScrollBar.css("visibility")?t.scrollBarSize:0;e.css("top",parseInt(s.top)),e.css("z-index",9999999999),t.columnGroups?e.height(t.host.height()+t.resizablecolumn.columnelement.height()-r-i-a-t.columnGroupslevel*t.columnsHeight):e.height(t.host.height()-r-i-a),e.show("fast")};a(t.resizeline),a(t.resizestartline),t.dragmousedown=null}});var o=function(){if(e(document.body).removeClass("jqx-disableselect"),e(document.body).removeClass("jqx-position-reset"),t.resizing){t._mouseUpResize=new Date;if(t._mouseUpResize-t._mouseDownResize<200)return t.resizing=!1,void(null!=t._resizecolumn&&null!=t.resizeline&&"block"==t.resizeline.css("display")&&(t._resizecolumn=null,t.resizeline.hide(),t.resizestartline.hide(),t.resizebackground.remove()));if(t.resizing=!1,!t.disabled){var i=t.host.width();if("hidden"!=t.vScrollBar[0].style.visibility&&(i-=20),i<0&&(i=0),null!=t._resizecolumn&&null!=t.resizeline&&"block"==t.resizeline.css("display")){var r=parseInt(t.resizeline.css("left")),s=parseInt(t.resizestartline.css("left")),a=t._startcolumnwidth+r-s;if(t.rtl)var a=t._startcolumnwidth-r+s;var o=t._resizecolumn.width;t._resizecolumn.width=a,void 0!=t._resizecolumn._percentagewidth&&(t._resizecolumn._percentagewidth=a/i*100);for(var l=0;l<t._columns.length;l++)if(t._columns[l].datafield===t._resizecolumn.datafield){t._columns[l].width=t._resizecolumn.width;break}var n=(t.hScrollBar[0].style.visibility,t._resizecolumn.displayfield);t._updatecolumnwidths(),t.refresh(),t._resizecolumn=null,t.resizeline.hide(),t.resizestartline.hide(),t.resizebackground.remove(),t.resizablecolumn=null,t._raiseEvent("columnResized",{dataField:n,oldWidth:o,newWidth:a})}else t.resizablecolumn=null}}};try{if(""!=document.referrer||window.frameElement){var l=null;if(null!=window.top&&window.top!=window.self&&window.parent&&document.referrer&&(l=document.referrer),l&&-1!=l.indexOf(document.location.host)){var n=function(e){o()};window.top.document.addEventListener?window.top.document.addEventListener("mouseup",n,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",n)}}}catch(e){}this.removeHandler(e(document),a),this.addHandler(e(document),a,function(i){if(null!=e.data(document.body,"contextmenu"+t.element.id)&&t.autoshowcolumnsmenubutton)return!0;o()})}},_updatecolumnwidths:function(){var t=this.host.width(),i=t;"hidden"!==this.vScrollBar.css("visibility")&&this.scrollBarSize>0&&(t-=parseInt(this.scrollBarSize)+6,i=t);var r="";if(void 0!=this.columns&&void 0!=this.columns.records){var s=this,a=!1;e.each(this.columns.records,function(e,a){if(!this.hidden)if(-1!=this.width.toString().indexOf("%")||void 0!=this._percentagewidth){var a=0;"hidden"==s.vScrollBar[0].style.visibility||s.scrollBarSize;0==s.scrollBarSize&&0,a=parseFloat(this.width)*i/100,void 0!=this._percentagewidth&&(a=parseFloat(this._percentagewidth)*i/100),a<this.minwidth&&"auto"!=this.minwidth&&(a=this.minwidth),a>this.maxwidth&&"auto"!=this.maxwidth&&(a=this.maxwidth),t-=Math.round(a)}else"auto"==this.width||this._width?r+=this.text:t-=this.width});var o=this.columnsheader.find("#columntable"+this.element.id);if(0!=o.length){var l=0,n=o.find(".jqx-grid-column-header"),d=0;e.each(this.columns.records,function(o,h){var c=e(n[o]),u=!1,g=this.width,p=this.width;if(-1==this.width.toString().indexOf("%")&&void 0==this._percentagewidth||(g=void 0!=this._percentagewidth?parseFloat(this._percentagewidth)*i/100:parseFloat(this.width)*i/100,g=Math.round(g),u=!0),"auto"==this.width||this._width||u)if(u)g<this.minwidth&&"auto"!=this.minwidth&&(g=this.minwidth,this.width=g),g>this.maxwidth&&"auto"!=this.maxwidth&&(g=this.maxwidth,this.width=g),parseInt(c[0].style.width)!=g&&(c.width(g),this.width=g);else{var f=Math.floor(t*(this.text.length/r.length));isNaN(f)&&(f=this.minwidth);var v=t*(this.text.length/r.length)-f;l+=v,l>=1&&(l-=1,f++),l>=.5&&o==s.columns.records.length-1&&f++,f<0&&($element=e("<span>"+this.text+"</span>"),e(document.body).append($element),f=10+$element.width(),$element.remove()),f<this.minwidth&&(f=this.minwidth),f>this.maxwidth&&(f=this.maxwidth),this._width="auto",this.width=f,c.width(this.width)}else parseInt(c[0].style.width)!=this.width&&c.width(this.width);parseInt(c[0].style.left)!=d&&c.css("left",d),this.hidden||(d+=this.width),this._requirewidthupdate=!0,p!==this.width&&(a=!0)}),this.columnsheader.width(2+d),o.width(this.columnsheader.width()),this._resizecolumnGroups(),a&&this._renderrows(),this.showAggregates&&this._refreshcolumnsaggregates()}}},_rendercolumnheaders:function(){var t=this;if(!this._updating){this._columnsbydatafield=new Array,this.columnsheader.find("#columntable"+this.element.id).remove();var i=e('<div id="columntable'+this.element.id+'" style="height: 100%; position: relative;"></div>');i[0].cells=new Array;var r=0,s="",a=this.host.width(),o=a,l=new Array,n=new Array;if(e.each(this.columns.records,function(e,i){if(!this.hidden)if("auto"==this.width||this._width)s+=this.text;else if(this.width<this.minwidth&&"auto"!=this.minwidth)a-=this.minwidth;else if(this.width>this.maxwidth&&"auto"!=this.maxwidth)a-=this.maxwidth;else if(-1!=this.width.toString().indexOf("%")){var i=0;i=parseFloat(this.width)*o/100,i<this.minwidth&&"auto"!=this.minwidth&&(i=this.minwidth),i>this.maxwidth&&"auto"!=this.maxwidth&&(i=this.maxwidth),a-=i}else"string"==typeof this.width&&(this.width=parseInt(this.width)),a-=this.width;this.pinned||this.grouped||this.checkboxcolumn?(t._haspinned&&(this.pinned=!0),l[l.length]=this):n[n.length]=this}),this.rtl){var d=0;l.reverse();for(var h=this.columns.records.length-1;h>=this.columns.records.length-l.length;h--)this.columns.replace(h,l[d++]);for(var c=0;c<n.length;c++)this.columns.replace(c,n[c])}else{for(var h=0;h<l.length;h++)this.columns.replace(h,l[h]);for(var c=0;c<n.length;c++)this.columns.replace(l.length+c,n[c])}var u=this.headerZIndex,g=t.columnsHeight,p=function(e,i){var r=t.columnGroupslevel*t.columnsHeight;return r-=i.level*t.columnsHeight},f=0;e.each(this.columns.records,function(l,n){this.height=t.columnsHeight,t.columnGroups&&t.columnGroups.length&&(this.height=p(this.datafield,this),g=this.height);var d=t.toTP("jqx-grid-column-header")+" "+t.toTP("jqx-widget-header");t.rtl&&(d+=" "+t.toTP("jqx-grid-column-header-rtl")),t.enableBrowserSelection||(d+=" "+t.toTP("jqx-disableselect"));var h=self.rtl?250+u+1:250+u-1,c=t.rtl?u++:u--,v=e('<div role="columnheader" style="z-index: '+c+';position: absolute; height: 100%;" class="'+d+'"><div style="height: 100%; width: 100%;"></div></div>');t.rtl&&0===l&&(v[0].style.borderLeftColor="transparent"),t.columnGroups&&(v[0].style.height=g+"px",v[0].style.bottom="0px",this.pinned&&(v[0].style.zIndex=h)),this.uielement=v,this.element=v,""!=this.classname&&this.classname&&v.addClass(this.classname);var m=this.width,w=!1;if(null===this.width&&(this.width="auto"),-1==this.width.toString().indexOf("%")&&void 0==this._percentagewidth||(m=void 0!=this._percentagewidth?parseFloat(this._percentagewidth)*o/100:parseFloat(this.width)*o/100,m=Math.round(m),w=!0),"auto"==this.width||this._width||w)if(w)m<this.minwidth&&"auto"!=this.minwidth&&(m=this.minwidth),m>this.maxwidth&&"auto"!=this.maxwidth&&(m=this.maxwidth),void 0!=this._percentagewidth&&-1==this.width.toString().indexOf("%")||(this._percentagewidth=this.width),v.width(m),this.width=m;else{var y=Math.floor(a*(this.text.length/s.length)),x=a*(this.text.length/s.length)-y;f+=x,f>=1&&(f-=1,y++),f>=.5&&l==t.columns.records.length-1&&y++,isNaN(y)&&(y=this.minwidth),y<0&&($element=e("<span>"+this.text+"</span>"),e(document.body).append($element),y=10+$element.width(),$element.remove()),y<this.minwidth&&(y=this.minwidth),y>this.maxwidth&&(y=this.maxwidth),this._width="auto",this.width=parseInt(y),m=this.width,v.width(this.width)}else m<this.minwidth&&"auto"!=this.minwidth&&(m=this.minwidth),m>this.maxwidth&&"auto"!=this.maxwidth&&(m=this.maxwidth),v[0].style.width=parseInt(m)+"px";this.hidden&&v.css("display","none");var b=e(v.children()[0]);i[0].cells[l]=v[0];var _=null!=this.renderer?this.renderer(this.text,this.align,g):t._rendercolumnheader(this.text,this.align,g,t);if(null==_&&(_=t._rendercolumnheader(this.text,this.align,g,t)),null!=this.renderer&&(_=e(_)),!0,t.WinJS?MSApp.execUnsafeLocalFunction(function(){b.append(e(_))}):this.renderer?b.append(e(_)):_&&(b[0].innerHTML=_),null!=_){var j=e('<div class="iconscontainer" style="height: '+g+'px; margin-left: -32px; display: block; position: absolute; left: 100%; top: 0%; width: 32px;"><div class="filtericon '+t.toTP("jqx-widget-header")+'" style="height: '+g+'px; float: right; display: none; width: 16px;"><div class="'+t.toTP("jqx-grid-column-filterbutton")+'" style="width: 100%; height:100%;"></div></div><div class="sortasc '+t.toTP("jqx-widget-header")+'" style="height: '+g+'px; float: right; display: none; width: 16px;"><div class="'+t.toTP("jqx-grid-column-sortascbutton")+'" style="width: 100%; height:100%;"></div></div><div class="sortdesc '+t.toTP("jqx-widget-header")+'" style="height: '+g+'px; float: right; display: none; width: 16px;"><div class="'+t.toTP("jqx-grid-column-sortdescbutton")+'" style="width: 100%; height:100%;"></div></div></div>');b.append(j);var q=j.children();this.sortasc=q[1],this.sortdesc=q[2],this.filtericon=q[0],this.iconscontainer=j,t.rtl&&(j.css("margin-left","0px"),j.css("left","0px"),e(this.sortasc).css("float","left"),e(this.filtericon).css("float","left"),e(this.sortdesc).css("float","left"))}i.append(v),t.columnsReorder&&this.draggable&&t._handlecolumnsdragreorder&&t._handlecolumnsdragreorder(this,v);var S=this;if(t.addHandler(v,"click",function(e){if(S.checkboxcolumn)return!0;t._togglesort&&(t._loading||t._togglesort(S)),e.preventDefault()}),t.columnsResize){var T=!1,C="mousemove";t.isTouchDevice()&&(T=!0,C=e.jqx.mobile.getTouchEventName("touchstart")),t.addHandler(v,C,function(i){if(!S.resizable)return t.resizablecolumn=null,!0;var r=parseInt(i.pageX),s=5,a=parseInt(v.coord().left);if(t.hasTransform&&(a=e.jqx.utilities.getOffset(v).left),t._handlecolumnsResize){if(T){return r=e.jqx.mobile.getTouches(i)[0].pageX,s=40,r>=a+S.width-s?(t.resizablecolumn={columnelement:v,column:S},v.css("cursor","col-resize")):(v.css("cursor",""),t.resizablecolumn=null),!0}var o=S.width;if(t.rtl&&(o=0),r>=a+o-s){if(r<=a+o+s)return t.resizablecolumn={columnelement:v,column:S},v.css("cursor","col-resize"),!1;v.css("cursor",""),t.resizablecolumn=null}else v.css("cursor",""),r<a+o-s&&(S._animating||S._menuvisible||v.mouseenter()),t.resizablecolumn=null}})}if(v.css("left",r),this.hidden||(r+=m),S.rendered){S.rendered(e(b[0].firstChild),S.align,g)&&null!=j&&j.hide()}}),r>0?this.columnsheader.width(2+r):this.columnsheader.width(r),this.columnsrow=i,t.columnsheader.append(i),i.width(r),this._handlecolumnsdragdrop&&this._handlecolumnsdragdrop(),this._handlecolumnsReorder&&this._handlecolumnsReorder(),this._handlecolumnsResize&&this._handlecolumnsResize(),this.columnGroups&&this._rendercolumnGroups()}},_rendercolumnGroups:function(){if(this.columnGroups){for(var t=0,i=0;i<this.columns.records.length;i++)this.columns.records[i].pinned&&t++;var r=this.headerZIndex-t+this.columns.records.length,s=this,a=s.toTP("jqx-grid-column-header")+" "+s.toTP("jqx-grid-columngroup-header")+" "+s.toTP("jqx-widget-header");s.rtl&&(a+=" "+s.toTP("jqx-grid-columngroup-header-rtl"));var o=this.columnsheader.find("#columntable"+this.element.id);o.find("jqx-grid-columngroup-header").remove();for(var l=0;l<this.columnGroupslevel-1;l++)for(var i=0;i<this.columnGroups.length;i++){var n=this.columnGroups[i],d=n.level;if(d===l){var h=d*this.columnsHeight,c=99999;if(n.groups){var u=function(e){for(var t=0,i=0;i<e.groups.length;i++){var r=e.groups[i];r.groups?t+=u(r):r.hidden||(t+=r.width,c=Math.min(parseInt(r.element[0].style.left),c))}return t};n.width=u(n),n.left=c;var g=this.columnsHeight,p=r--,f=e('<div role="columnheader" style="z-index: '+p+';position: absolute;" class="'+a+'"></div>'),v=e(this._rendercolumnheader(n.text,n.align,this.columnsHeight,this));f.append(v),f[0].style.left=c+"px",0===c&&(f[0].style.borderLeftColor="transparent"),f[0].style.top=h+"px",f[0].style.height=g+"px",f[0].style.width=-1+n.width+"px",o.append(f),n.element=f}}}}},_resizecolumnGroups:function(){if(this.columnGroups)for(var e=0;e<this.columnGroups.length;e++){var t=this.columnGroups[e],i=t.level,r=i*this.columnsHeight,s=99999;if(t.groups){var a=function(e){for(var t=0,i=0;i<e.groups.length;i++){var r=e.groups[i];r.groups?t+=a(r):r.hidden||(t+=r.width,s=Math.min(parseInt(r.element[0].style.left),s))}return t};t.width=a(t),t.left=s;var o=this.columnsHeight,l=t.element;l[0].style.left=s+"px",l[0].style.top=r+"px",l[0].style.height=o+"px",l[0].style.width=-1+t.width+"px"}}},_removecolumnhandlers:function(t){var i=this,r=e(t.element);if(r.length>0){i.removeHandler(r,"mouseenter"),i.removeHandler(r,"mouseleave");var s=e(t.filtericon);i.removeHandler(s,"mousedown"),i.removeHandler(s,"click"),i.removeHandler(r,"click")}},_calculateaggregate:function(e,t,i,r){if(!e.datafield)return null;var s=e.aggregates;if(s||(s=t),s){for(var a=new Array,o=0;o<s.length;o++)"count"!=s[o]&&(a[a.length]=e.cellsFormat);if(this.source&&this.source.getAggregatedData){void 0==r&&(r=this.getRows(),this.dataViewRecords&&(r=this.dataViewRecords));var l=r,n=-1;if(this.treeGrid){var d=new Array,h=function(e){for(var t=0;t<e.length;t++)void 0!=e[t]&&(-1==n&&(n=e[t].level),e[t].aggregate||d.push(e[t]),!e[t].leaf&&e[t].records&&e[t].records.length>0&&h(e[t].records))};h(r),r=d}if(this.treeGrid&&this.filterable&&this.dataview.filters.length>0){for(var c=new Array,o=0;o<r.length;o++)r[o]&&!1!==r[o]._visible&&c.push(r[o]);r=c;for(var u=new Array,o=0;o<l.length;o++)l[o]&&!1!==l[o]._visible&&u.push(l[o]);l=u}if(void 0==i||1==i){var g=this.source.getAggregatedData([{name:e.datafield,aggregates:s,formatStrings:a}],this.gridlocalization,r,n);if(this.treeGrid){var p=this.source._source.hierarchy&&this.source._source.hierarchy.groupingDataFields?this.source._source.hierarchy.groupingDataFields.length:0;if((0==p||n>=p)&&g&&(void 0!=g[e.datafield].sum||void 0!=g[e.datafield].avg)){var f=this.source.getAggregatedData([{name:e.datafield,aggregates:s,formatStrings:a}],this.gridlocalization,l,n);void 0!=g[e.datafield].sum&&(g[e.datafield].sum=f[e.datafield].sum),void 0!=g[e.datafield].avg&&(g[e.datafield].avg=f[e.datafield].avg)}}return g}var g=this.source.getAggregatedData([{name:e.datafield,aggregates:s}],this.gridlocalization,r,n);if(this.treeGrid&&g&&(void 0!=g[e.datafield].sum||void 0!=g[e.datafield].avg)){var p=this.source._source.hierarchy&&this.source._source.hierarchy.groupingDataFields?this.source._source.hierarchy.groupingDataFields.length:0;if(0==p||n>=p){var f=this.source.getAggregatedData([{name:e.datafield,aggregates:s}],this.gridlocalization,l,n);void 0!=g[e.datafield].sum&&(g[e.datafield].sum=f[e.datafield].sum),void 0!=g[e.datafield].avg&&(g[e.datafield].avg=f[e.datafield].avg)}}return g}}return null},getcolumnaggregateddata:function(e,t,i,r){var s=this.getColumn(e);if(!s)return"";var a=void 0!=i&&0!=i&&i;if(null==t)return"";var o=s.aggregates;s.aggregates=null;var l=this._calculateaggregate(s,t,a,r),n={};return l&&(n=l[e],s.aggregates=o),n},_updatecolumnaggregates:function(t,i,r){var s=this;if(i)if(r.children().remove(),r.html(""),t.aggregatesRenderer){if(i){var a=t.aggregatesRenderer(i[t.datafield],t,r,this.getcolumnaggregateddata(t.datafield,t.aggregates),"aggregates");r.html(a)}}else e.each(i,function(){var t=this;for(o in t){var i=e('<div style="position: relative; margin: 4px; overflow: hidden;"></div>'),a=o;a=s._getaggregatename(a),i.html(a+":"+t[o]),s.rtl&&i.addClass(s.toThemeProperty("jqx-rtl")),r.append(i)}});else if(r.children().remove(),r.html(""),t.aggregatesRenderer){var o={};t.aggregates&&(o=this.getcolumnaggregateddata(t.datafield,t.aggregates));var a=t.aggregatesRenderer({},t,r,null);r.html(a)}},_getaggregatetype:function(e){switch(e){case"min":case"max":case"count":case"avg":case"product":case"var":case"varp":
case"stdev":case"stdevp":case"sum":return e}var t=e;for(var i in e){t=i;break}return t},_getaggregatename:function(e){var t=e;switch(e){case"min":t="Min";break;case"max":t="Max";break;case"count":t="Count";break;case"avg":t="Avg";break;case"product":t="Product";break;case"var":t="Var";break;case"stdevp":t="StDevP";break;case"stdev":t="StDev";break;case"varp":t="VarP";case"sum":t="Sum"}if(e===t&&"string"!=typeof t)for(var i in e){t=i;break}return t},_updatecolumnsaggregates:function(){var t=this.getRows();this.dataViewRecords&&(t=this.dataViewRecords);var i=this.columns.records.length;if(void 0!=this.aggregates[0].cells)for(var r=0;r<i;r++){var s=e(this.aggregates[0].cells[r]),a=this.columns.records[r],o=this._calculateaggregate(a,null,!0,t);this._updatecolumnaggregates(a,o,s)}},_refreshcolumnsaggregates:function(){var t=this.columns.records.length;if(void 0!=this.aggregates[0].cells)for(var i=0,r=0;r<t;r++){var s=e(this.aggregates[0].cells[r]),a=this.columns.records[r];s&&(s.width(a.width),s[0].style.left=i+"px",a.hidden&&a.hideable?s.css("display","none"):i+=a.width)}},_updateaggregates:function(){var t=e('<div style="position: relative;" id="statusrow'+this.element.id+'"></div>'),i=0,r=this.columns.records.length,s=this.toThemeProperty("jqx-grid-cell");this.rtl&&(s+=" "+this.toThemeProperty("jqx-grid-cell-rtl"),i=0,t.css("border-left-width","0px"),this.aggregates.css("border-left-color","transparent")),s+=" "+this.toThemeProperty("jqx-grid-cell-pinned");var a=r+10,o=new Array;this.aggregates[0].cells=o;for(var l=0;l<r;l++){var n=this.columns.records[l],d=this._calculateaggregate(n),h=n.width;h<n.minwidth&&(h=n.minwidth),h>n.maxwidth&&(h=n.maxwidth);var c=s;n.cellsalign&&(c+=" "+this.toThemeProperty("jqx-"+n.cellsalign+"-align"));var u=e('<div style="overflow: hidden; position: absolute; height: 100%;" class="'+c+'"></div>');t.append(u),u.css("left",i),this.rtl?(u.css("z-index",a++),0==l&&u.css("border-left-width","0px")):u.css("z-index",a--),u.width(h),u[0].style.left=i+"px",n.hidden&&n.hideable?u.css("display","none"):i+=h,o[o.length]=u[0],this._updatecolumnaggregates(n,d,u)}e.jqx.browser.msie&&e.jqx.browser.version<8&&t.css("z-index",a--),t.width(parseInt(i)+2),t.height(this.aggregatesHeight),this.aggregates.children().remove(),this.aggregates.append(t),this.aggregates.removeClass(this.toThemeProperty("jqx-widget-header")),this.aggregates.addClass(s),this.aggregates.css("border-bottom-color","transparent"),this.aggregates.css("border-top-width","1px"),this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&this._renderhorizontalscroll()},destroy:function(){var t=this;if(t.columns&&t.columns.records)for(var i=0;i<t.columns.records.length;i++)t._removecolumnhandlers(t.columns.records[i]);t.removeHandler(e(document),"mouseup.pagerbuttonstop"),t.removeHandler(e(document),"mouseup.pagerbuttonsbottom"),t.removeHandler(t.content,"scroll"),t.removeHandler(t.content,"mousedown"),t.removeHandler(e(document),"mousedown.gridedit"+t.element.id);var r="mousemove.resize"+t.element.id,s="mousedown.resize"+t.element.id,a="mouseup.resize"+t.element.id;t.removeHandler(e(document),r),t.removeHandler(e(document),s),t.removeHandler(e(document),a);var r="mousemove.reorder"+t.element.id,s="mousedown.reorder"+t.element.id,a="mouseup.reorder"+t.element.id;if(t.removeHandler(e(document),r),t.removeHandler(e(document),s),t.removeHandler(e(document),a),t.filterable){if(t.filterrow)for(var i=0;i<t.filterrow[0].cells.length;i++){var o=t.filterrow[0].cells[i],l=e(o).find(".filterconditions");t.columns.records[i];l.length>0&&l.jqxDropDownList("destroy")}t.filtercolumnsList&&t.filtercolumnsList.jqxDropDownList("destroy")}if(t.pageable){t.pagershowrowscombotop&&t.pagershowrowscombotop.jqxDropDownList&&t.pagershowrowscombotop.jqxDropDownList("destroy"),t.pagershowrowscombobottom&&t.pagershowrowscombobottom.jqxDropDownList&&t.pagershowrowscombobottom.jqxDropDownList("destroy");var n=t.pagerbuttonsbottom.find("a");t.removeHandler(n,"click"),t.removeHandler(n,"mouseenter"),t.removeHandler(n,"mouseleave"),n.remove();var n=t.pagerbuttonstop.find("a");t.removeHandler(n,"click"),t.removeHandler(n,"mouseenter"),t.removeHandler(n,"mouseleave"),n.remove(),t.pagernexttop&&(t.pagernexttop.jqxButton("destroy"),t.pagerprevioustop.jqxButton("destroy"),t.pagernextbottom.jqxButton("destroy"),t.pagerpreviousbottom.jqxButton("destroy"),t.pagerfirsttop.jqxButton("destroy"),t.pagerfirstbottom.jqxButton("destroy"),t.pagerlasttop.jqxButton("destroy"),t.pagerlastbottom.jqxButton("destroy"))}t._removeHandlers(),t.vScrollBar.jqxScrollBar("destroy"),t.hScrollBar.jqxScrollBar("destroy"),delete t.vScrollBar,delete t.hScrollBar,delete t._mousewheelfunc,e.jqx.utilities.resize(t.host,null,!0),t.host.remove()},propertiesChangedHandler:function(e,t,i){i.width&&i.height&&2==Object.keys(i).length&&e.refresh()},propertyChangedHandler:function(t,i,r,s){if(void 0!=this.isInitialized&&0!=this.isInitialized&&!(t.batchUpdate&&t.batchUpdate.width&&t.batchUpdate.height&&2==Object.keys(t.batchUpdate).length)&&s!==r)if("filterable"==i)t._render();else if("height"===i)t.host.height(t.height),t.host.width(t.width),t._updatesize(!1,!0);else if("width"===i)t.host.height(t.height),t.host.width(t.width),t._updatesize(!0,!1);else if("source"===i)t.updateBoundData();else if("columns"===i||"columnGroups"===i)t._columns=null,t._render();else if("rtl"===i)t.content.css("left",""),t.columns=t._columns,t.vScrollBar.jqxScrollBar({rtl:s}),t.hScrollBar.jqxScrollBar({rtl:s}),t._render();else if("pagerMode"===i)t.pagerMode=s,t._initpager();else if("pageSizeOptions"==i){t._initpager();for(var a=!1,o=0;o<s.length;o++)if(parseInt(s[o])==t.pageSize){a=!0;break}a||e.jqx.set(t,[{pageSize:s[0]}])}else if("pageSize"==i){var l=t.dataview.pagenum*t.dataview.pagesize;t.dataview.pagesize=t.pageSize;var n=Math.floor(l/t.dataview.pagesize);if(n!==t.dataview.pagenum||parseInt(s)!==parseInt(r)){t._raiseEvent("pageSizeChanged",{pagenum:s,oldpageSize:r,pageSize:t.dataview.pagesize});var d=t.goToPage(n);d||(t.serverProcessing?t.updateBoundData("pager"):t.refresh())}}else if("pagerPosition"===i)t.refresh();else if("selectionMode"===i)t.selectionMode=s.toLowerCase();else if("touchmode"==i)t.touchDevice=null,t._removeHandlers(),t.touchDevice=null,t.vScrollBar.jqxScrollBar({touchMode:s}),t.hScrollBar.jqxScrollBar({touchMode:s}),t._updateTouchScrolling(),t._arrange(),t._updatecolumnwidths(),t._renderrows(),t._addHandlers();else{if("enableHover"==i)return;if("disabled"==i)s?t.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")):t.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")),t.pageable&&(t.pagernexttop&&(t.pagernexttop.jqxButton({disabled:s}),t.pagerprevioustop.jqxButton({disabled:s}),t.pagernextbottom.jqxButton({disabled:s}),t.pagerpreviousbottom.jqxButton({disabled:s}),t.pagerfirsttop.jqxButton({disabled:s}),t.pagerfirstbottom.jqxButton({disabled:s}),t.pagerlasttop.jqxButton({disabled:s}),t.pagerlastbottom.jqxButton({disabled:s}),t.pagershowrowscombotop.jqxDropDownList&&"advanced"==t.pagerMode&&(t.pagershowrowscombotop.jqxDropDownList({disabled:!1}),t.pagershowrowscombobottom.jqxDropDownList({disabled:!1}))),t.host.find(".jqx-grid-pager-number").css("cursor",s?"default":"pointer")),t.host.find(".jqx-grid-group-collapse").css("cursor",s?"default":"pointer"),t.host.find(".jqx-grid-group-expand").css("cursor",s?"default":"pointer");else if("columnsHeight"==i)t._render();else if("theme"==i){if(e.jqx.utilities.setTheme(r,s,t.host),t.vScrollBar.jqxScrollBar({theme:t.theme}),t.hScrollBar.jqxScrollBar({theme:t.theme}),t.pageable&&t.pagernexttop&&(t.pagernexttop.jqxButton({theme:t.theme}),t.pagerprevioustop.jqxButton({theme:t.theme}),t.pagernextbottom.jqxButton({theme:t.theme}),t.pagerpreviousbottom.jqxButton({theme:t.theme}),t.pagerfirsttop.jqxButton({theme:t.theme}),t.pagerfirstbottom.jqxButton({theme:t.theme}),t.pagerlasttop.jqxButton({theme:t.theme}),t.pagerlastbottom.jqxButton({theme:t.theme}),t.pagershowrowscombotop.jqxDropDownList&&"advanced"==t.pagerMode&&(t.pagershowrowscombotop.jqxDropDownList({theme:t.theme}),t.pagershowrowscombobottom.jqxDropDownList({theme:t.theme}))),t.filterable){var h=e(".filterconditions");h.length>0&&h.jqxDropDownList({theme:t.theme}),t.filtercolumnsList&&t.filtercolumnsList.jqxDropDownList({theme:t.theme})}t.refresh()}else t.refresh()}},_rendercolumnheader:function(e,t,i,r){var s="4px";return r.columnGroups?(s=i/2-this._columnheight/2,s<0&&(s=4),s+="px"):25!=this.columnsHeight&&(s=this.columnsHeight/2-this._columnheight/2,s<0&&(s=4),s+="px"),'<div style="overflow: hidden; text-overflow: ellipsis; text-align: '+t+"; margin-left: 4px; margin-right: 4px; margin-bottom: "+s+"; margin-top: "+s+';"><span style="text-overflow: ellipsis; cursor: default;">'+e+"</span></div>"}}),e.jqx.dataCollection=function(e){return this.records=new Array,this.owner=e,this.updating=!1,this.beginUpdate=function(){this.updating=!0},this.resumeupdate=function(){this.updating=!1},this.clear=function(){this.records=new Array},this.replace=function(e,t){this.records[e]=t},this.isempty=function(e){return void 0==this.records[e]},this.initialize=function(e){e<1&&(e=1),this.records[e-1]=-1},this.length=function(){return this.records.length},this.indexOf=function(e){return this.records.indexOf(e)},this.add=function(e){return null!=e&&(this.records[this.records.length]=e,!0)},this.insertAt=function(e,t){return null!=e&&void 0!=e&&(null!=t&&(e>=0&&(e<this.records.length?(this.records.splice(e,0,t),!0):this.add(t))))},this.remove=function(e){if(null==e||void 0==e)return!1;var t=this.records.indexOf(e);return-1!=t&&(this.records.splice(t,1),!0)},this.removeAt=function(e){if(null==e||void 0==e)return!1;if(e<0)return!1;if(e<this.records.length){this.records[e];return this.records.splice(e,1),!0}return!1},this},e.jqx.dataView=function(){return this.that=this,this.grid=null,this.records=[],this.rows=[],this.columns=[],this.filters=new Array,this.pagesize=0,this.pagenum=0,this.source=null,this.databind=function(t,i){var r=!!t._source,s=null;this._sortData=null,this._sortHierarchyData=null,r?(s=t,t=t._source):s=new e.jqx.dataAdapter(t,{autoBind:!1});var a=function(e){e.originaldata=s.originaldata,e.records=s.records,e.hierarchy=s.hierarchy,e.grid.serverProcessing||(e._sortData=null,e._sortfield=null,e._filteredData=null,e._sortHierarchyData=null),e.hierarchy||(e.hierarchy=new Array,s.hierarchy=new Array),s._source.totalrecords?e.totalrecords=s._source.totalrecords:s._source.totalRecords?e.totalrecords=s._source.totalRecords:0!==e.hierarchy.length?e.totalrecords=e.hierarchy.length:e.totalrecords=e.records.length,e.cachedrecords=s.cachedrecords};!function(e){s.recordids=[],s.records=new Array,s.cachedrecords=new Array,s.originaldata=new Array,s._options.totalrecords=e.totalrecords,s._options.originaldata=e.originaldata,s._options.recordids=e.recordids,s._options.cachedrecords=new Array,s._options.pagenum=e.pagenum,s._options.pageable=e.pageable,void 0!=t.type&&(s._options.type=t.type),void 0!=t.formatdata&&(s._options.formatData=t.formatdata),void 0!=t.contenttype&&(s._options.contentType=t.contenttype),void 0!=t.async&&(s._options.async=t.async),void 0!=t.updaterow&&(s._options.updaterow=t.updaterow),void 0!=t.addrow&&(s._options.addrow=t.addrow),void 0!=t.deleterow&&(s._options.deleterow=t.deleterow),0==e.pagesize&&(e.pagesize=10),s._options.pagesize=e.pagesize}(this),this.source=t,void 0!==i&&(uniqueId=i);var o=this;switch(t.datatype){case"local":case"array":default:if(null==t.localdata&&(t.localdata=[]),null!=t.localdata){s.unbindBindingUpdate(o.grid.element.id),(!o.grid.autoBind&&o.grid.isInitialized||o.grid.autoBind)&&s.dataBind();var l=function(){a(o),o.update()};l(),s.bindBindingUpdate(o.grid.element.id,l)}break;case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":case"csv":case"tab":if(null!=t.localdata){s.unbindBindingUpdate(o.grid.element.id),(!o.grid.autoBind&&o.grid.isInitialized||o.grid.autoBind)&&s.dataBind();var l=function(e){a(o),o.update()};return l(),void s.bindBindingUpdate(o.grid.element.id,l)}for(var n=0,d={},h=0;h<this.filters.length;h++){var c=this.filters[h].datafield,u=this.filters[h].filter,g=u.getfilters();d[c+"operator"]=u.operator;for(var p=0;p<g.length;p++){g[p].datafield=c;var f=g[p].value;d["filtervalue"+n]=f.toString(),d["filtercondition"+n]=g[p].condition,d["filteroperator"+n]=g[p].operator,d["filterdatafield"+n]=c,n++}}d.filterslength=n,e.extend(d,{sortdatafield:o.sortfield,sortorder:o.sortfielddirection,pagenum:o.pagenum,pagesize:o.grid.pageSize});var v=s._options.data;s._options.data?e.extend(s._options.data,d):(t.data&&e.extend(d,t.data),s._options.data=d);var l=function(){var t=e.jqx.browser.msie&&e.jqx.browser.version<9,i=function(){a(o),o.update()};if(t)try{i()}catch(e){}else i()};s.unbindDownloadComplete(o.grid.element.id),s.bindDownloadComplete(o.grid.element.id,l),s._source.loaderror=function(e,t,i){l()},(!o.grid.autoBind&&o.grid.isInitialized||o.grid.autoBind)&&s.dataBind(),s._options.data=v}},this.addFilter=function(e,t){this._sortData=null,this._sortHierarchyData=null;for(var i=-1,r=0;r<this.filters.length;r++)if(this.filters[r].datafield==e){i=r;break}-1==i?this.filters[this.filters.length]={filter:t,datafield:e}:this.filters[i]={filter:t,datafield:e}},this.removeFilter=function(e){this._sortData=null,this._sortHierarchyData=null;for(var t=0;t<this.filters.length;t++)if(this.filters[t].datafield==e){this.filters.splice(t,1);break}},this.sortBy=function(e,t){if(null==t)return this.sortfield="",void(this.sortfielddirection="");void 0==t&&(t=!0),t="a"==t||"asc"==t||"ascending"==t||1==t,"constructor"==e&&(e=""),this.sortfield=e,this.sortfielddirection=t?"asc":"desc"},this._sort=function(t){if(!this.sortfield||!this.sortfielddirection)return t;if(this._sortfield==this.sortfield&&this._sortfielddirection==this.sortfielddirection&&this._sortData)return this._sortData;var i=this,r=Object.prototype.toString;Object.prototype.toString="function"==typeof i.sortfield?i.sortfield:function(){return this[i.sortfield]};var s="";this.source.datafields&&e.each(this.source.datafields,function(){if(this.name==i.sortfield)return this.type&&(s=this.type),!1});for(var a=new Array,o=0;o<t.length;o++)a.push(e.extend({originalRecord:t[o]},t[o]));if(this._sortfield=this.sortfield,this._sortfielddirection=this.sortfielddirection,"desc"===this.sortfielddirection)var l=a.sort(function(e,t){return i._compare(e,t,s)}).reverse();else var l=a.sort(function(e,t){return i._compare(e,t,s)});return this._sortData=l,Object.prototype.toString=r,l},this._compare=function(t,i,r){var t=t,i=i;if(void 0===t&&(t=null),void 0===i&&(i=null),null===t&&null===i)return 0;if(null===t&&null!==i)return 1;if(null!==t&&null===i)return 1;if(t=t.toString(),i=i.toString(),e.jqx.dataFormat)if(r&&""!=r)switch(r){case"number":case"int":case"float":return t<i?-1:t>i?1:0;case"date":case"time":return t<i?-1:t>i?1:0;case"string":case"text":t=String(t).toLowerCase(),i=String(i).toLowerCase()}else{if(e.jqx.dataFormat.isNumber(t)&&e.jqx.dataFormat.isNumber(i))return t<i?-1:t>i?1:0;if(e.jqx.dataFormat.isDate(t)&&e.jqx.dataFormat.isDate(i))return t<i?-1:t>i?1:0;e.jqx.dataFormat.isNumber(t)||e.jqx.dataFormat.isNumber(i)||(t=String(t).toLowerCase(),i=String(i).toLowerCase())}try{if(t<i)return-1;if(t>i)return 1}catch(e){}return 0},this._equals=function(e,t){return 0===this._compare(e,t)},this.evaluate=function(t){if(this.grid.serverProcessing){if(t&&(""==this.grid.source._source.id||null==this.grid.source._source.id)&&this.grid.pageable){var i=this.grid.pageSize*this.pagenum;this.grid.rowsByKey=new Array;var r=this;e.each(t,function(e){this.uid=i,r.grid.rowsByKey[this.uid]=this,i++})}return t}var s=new Array;if(this.filters.length){var a=new Array,o=function(e,t){for(var i=0;i<e.length;i++){var r=e[i];r._visible=!0;for(var s=void 0,o=0;o<this.filters.length;o++){var l=this.filters[o].filter,n=r[this.filters[o].datafield],d=l.evaluate(n);s=void 0==s?d:"or"==l.operator?s||d:s&&d}r._visible=!1,(s||r.aggregate)&&(r._visible=!0,t.push(r),a[r.uid]=r)}};if(this._filteredData)this.rows=this._filteredData;else{if(this.source.hierarchy||this.grid.source.hierarchy&&this.grid.source.hierarchy.length>0){var l=new Array,n=function(e,t){for(var i=0;i<t.length;i++){var r=t[i];l.push(r),r.records&&r.records.length>0&&n(r,r.records)}};n(null,t),o.call(this,l,s);for(var d=0;d<s.length;d++)for(var h=s[d];h.parent;){var c=h.parent;a[c.uid]||(c._visible=!0,a[c.uid]=c),h=c}s=t}else o.call(this,t,s);this._filteredData=s,this.rows=s}}else this.rows=t;if(this.source.hierarchy||this.grid.source.hierarchy&&this.grid.source.hierarchy.length>0){var r=this,u=new Array;this._sortData=null;var g=function(t,i){r._sortData=null;var s=null;if(r.source.hierarchy.groupingDataFields)if(i&&i.length>0&&i[0].level<r.source.hierarchy.groupingDataFields.length){s=new Array;for(var a=0;a<i.length;a++)s.push(e.extend({originalRecord:i[a]},i[a]))}else s=r._sort(i);else s=r._sort(i);t.records?t.records=s:t=t.concat(s);for(var a=0;a<s.length;a++)s[a].records&&s[a].records.length&&g(s[a],s[a].records);return t};(this.sortfield||this.sortfielddirection)&&(u=this._sortHierarchyData?this._sortHierarchyData:g(u,t),this.rows=u,this._sortHierarchyData=u)}else this.rows=this._sort(this.rows);return this.rows},this.getid=function(t,i,r){if(e(t,i).length>0)return e(t,i).text();if(this.rows&&""!=t&&void 0!=t&&this.rows.length>0){var s=this.rows[this.rows.length-1][t];null==s&&(s=null);for(var a=1;a<=100;a++){var o=this.grid.rowsByKey[a+s];if(!o){if(this.grid&&this.grid.treeGrid&&this.grid.treeGrid.virtualModeCreateRecords){var o=this.grid.rowsByKey["jqx"+s+a];if(o)continue;return"jqx"+s+a}return s+a}}}if(void 0!=t&&t.toString().length>0){var l=e(i).attr(t);if(null!=l&&l.toString().length>0)return this.grid&&this.grid.treeGrid&&this.grid.treeGrid.virtualModeCreateRecords?"jqx"+l:l}if(this.rows&&this.rows.length>0){var o=this.grid.rowsByKey[r];if(o){var s=this.rows[this.rows.length-1][t];null==s&&(s="");for(var a=1;a<=1e3;a++){var o=this.grid.rowsByKey[a+s];if(!o){if(this.grid&&this.grid.treeGrid&&this.grid.treeGrid.virtualModeCreateRecords){var o=this.grid.rowsByKey["jqx"+s+a];if(o)continue;return"jqx"+s+a}return s+a}}}}if(this.grid&&this.grid.treeGrid&&this.grid.treeGrid.virtualModeCreateRecords){var o=this.grid.rowsByKey["jqx"+r];if(!o)return"jqx"+r;for(var a=r+1;a<=100;a++){var o=this.grid.rowsByKey["jqx"+a];if(!o){var o=this.grid.rowsByKey["jqx"+a];if(o)continue;return"jqx"+a}}}return r},this.generatekey=function(){var e=function(){return 16*(1+Math.random())|0};return""+e()+e()+"-"+e()+"-"+e()},this}}(jqxBaseFramework);