!function(e){e.jqx.jqxWidget("jqxChart","",{}),e.extend(e.jqx._jqxChart.prototype,{defineInstance:function(){e.extend(!0,this,this._defaultSettings),this._createColorsCache()},_defaultSettings:{title:"Title",description:"Description",source:[],seriesGroups:[],categoryAxis:null,xAxis:{},valueAxis:null,renderEngine:"",enableAnimations:!0,enableAxisTextAnimation:!1,backgroundImage:"",background:"#FFFFFF",padding:{left:5,top:5,right:5,bottom:5},backgroundColor:"#FFFFFF",showBorderLine:!0,borderLineWidth:1,borderLineColor:null,borderColor:null,titlePadding:{left:5,top:5,right:5,bottom:10},showLegend:!0,legendLayout:null,enabled:!0,colorScheme:"scheme01",animationDuration:500,showToolTips:!0,toolTipShowDelay:500,toolTipDelay:500,toolTipHideDelay:4e3,toolTipMoveDuration:300,toolTipFormatFunction:null,toolTipAlignment:"dataPoint",localization:null,columnSeriesOverlap:!1,rtl:!1,legendPosition:null,greyScale:!1,axisPadding:5,enableCrosshairs:!1,crosshairsColor:"#BCBCBC",crosshairsDashStyle:"2,2",crosshairsLineWidth:1,enableEvents:!0,_itemsToggleState:[],_isToggleRefresh:!1,_isSelectorRefresh:!1,_sliders:[],_selectorRange:[],_rangeSelectorInstances:{},_resizeState:{},renderer:null,_isRangeSelectorInstance:!1,drawBefore:null,draw:null,_renderData:{},enableSampling:!0},_defaultLineColor:"#BCBCBC",_touchEvents:{mousedown:e.jqx.mobile.getTouchEventName("touchstart"),click:e.jqx.mobile.getTouchEventName("touchstart"),mouseup:e.jqx.mobile.getTouchEventName("touchend"),mousemove:e.jqx.mobile.getTouchEventName("touchmove"),mouseenter:"mouseenter",mouseleave:"mouseleave"},_getEvent:function(e){return this._isTouchDevice?this._touchEvents[e]:e},destroy:function(){this.host.remove()},_jqxPlot:null,createInstance:function(t){if(!e.jqx.dataAdapter)throw"jqxdata.js is not loaded";var i=this;i._refreshOnDownloadComlete(),i._isTouchDevice=e.jqx.mobile.isTouchDevice(),i._jqxPlot||(i._jqxPlot=new jqxPlot),i.addHandler(i.host,i._getEvent("mousemove"),function(t){if(0!=i.enabled){i._isRangeSelectorInstance||i.host.css("cursor","default");var r=t.pageX||t.clientX||t.screenX,s=t.pageY||t.clientY||t.screenY,a=i.host.offset();if(i._isTouchDevice){var n=e.jqx.position(t);r=n.left,s=n.top}r-=a.left,s-=a.top,i.onmousemove(r,s)}}),i.addHandler(i.host,i._getEvent("mouseleave"),function(e){if(0!=i.enabled){var t=i._mouseX,r=i._mouseY,s=i._plotRect;s&&t>=s.x&&t<=s.x+s.width&&r>=s.y&&r<=s.y+s.height||(i._cancelTooltipTimer(),i._hideToolTip(0),i._unselect())}}),i.addHandler(i.host,"click",function(t){if(0!=i.enabled){var r=t.pageX||t.clientX||t.screenX,s=t.pageY||t.clientY||t.screenY,a=i.host.offset();if(i._isTouchDevice){var n=e.jqx.position(t);r=n.left,s=n.top}r-=a.left,s-=a.top,i._mouseX=r,i._mouseY=s,!isNaN(i._lastClickTs)&&(new Date).valueOf()-i._lastClickTs<100||(this._hostClickTimer=setTimeout(function(){if(i._isTouchDevice||(i._cancelTooltipTimer(),i._hideToolTip(),i._unselect()),i._pointMarker&&i._pointMarker.element){var e=i.seriesGroups[i._pointMarker.gidx],r=e.series[i._pointMarker.sidx];t.stopImmediatePropagation(),i._raiseItemEvent("click",e,r,i._pointMarker.iidx)}},100))}});var r=i.element.style;if(r){var s=!1;null!=r.width&&(s|=-1!=r.width.toString().indexOf("%")),null!=r.height&&(s|=-1!=r.height.toString().indexOf("%")),s&&e.jqx.utilities.resize(this.host,function(){i.timer&&clearTimeout(i.timer);i.timer=setTimeout(function(){var e=i.enableAnimations;i.enableAnimations=!1,i.refresh(),i.enableAnimations=e},1)},!1,!0)}},_refreshOnDownloadComlete:function(){var t=this,i=this.source;if(i instanceof e.jqx.dataAdapter){var r=i._options;(void 0==r||void 0!=r&&!r.autoBind)&&(i.autoSync=!1,i.dataBind());var s=this.element.id;if(0==i.records.length){var a=function(){t.ready&&t.ready(),t.refresh()};i.unbindDownloadComplete(s),i.bindDownloadComplete(s,a)}else t.ready&&t.ready();i.unbindBindingUpdate(s),i.bindBindingUpdate(s,function(){t._supressBindingRefresh||t.refresh()})}},propertyChangedHandler:function(e,t,i,r){void 0!=this.isInitialized&&0!=this.isInitialized&&("source"==t&&this._refreshOnDownloadComlete(),this.refresh())},_initRenderer:function(t){if(!e.jqx.createRenderer)throw"Please include jqxdraw.js";return e.jqx.createRenderer(this,t)},_internalRefresh:function(){var t=this;if(!e.jqx.isHidden(t.host)){t._stopAnimations(),t.renderer&&(t._isToggleRefresh||t._isUpdate)||(t._hideToolTip(0),t._isVML=!1,t.host.empty(),t._measureDiv=void 0,t._initRenderer(t.host));var i=t.renderer;if(i){var r=i.getRect();t._render({x:1,y:1,width:r.width,height:r.height}),this._raiseEvent("refreshBegin",{instance:this}),i instanceof e.jqx.HTML5Renderer&&i.refresh(),t._isUpdate=!1,this._raiseEvent("refreshEnd",{instance:this})}}},saveAsPNG:function(e,t,i){return this._saveAsImage("png",e,t,i)},saveAsJPEG:function(e,t,i){return this._saveAsImage("jpeg",e,t,i)},saveAsPDF:function(e,t,i){return this._saveAsImage("pdf",e,t,i)},_saveAsImage:function(t,i,r,s){for(var a=!1,n=0;n<this.seriesGroups.length&&!a;n++){var o=this._getXAxis(n);o&&o.rangeSelector&&(a=!0)}return e.jqx._widgetToImage(this,t,i,r,s,a?this._selectorSaveAsImageCallback:void 0)},_selectorSaveAsImageCallback:function(t,i){for(var r=t,s=0;s<r.seriesGroups.length;s++){var a=r._getXAxis(s);if(a&&a.rangeSelector&&!a.rangeSelector.renderTo){var n=r._rangeSelectorInstances[s];if(n){var o=n.jqxChart("getInstance"),l=(o.renderEngine,o.renderer.getRect()),h=o.renderer.getContainer().find("canvas")[0],d=h.getContext("2d"),f=r._sliders[s],g="horizontal"==r.seriesGroups[s].orientation,u=g?"height":"width",c=g?"width":"height",m=g?"y":"x",x=g?"x":"y",_={};_[m]=f.startOffset+f.rect[m],_[x]=f.rect[x],_[u]=f.endOffset-f.startOffset,_[c]=f.rect[c];var p=a.rangeSelector.colorSelectedRange||"blue",y=(a.rangeSelector.colorUnselectedRange,a.rangeSelector.colorRangeLine||"grey"),v=[];v.push(o.renderer.rect(_.x,_.y,_.width,_.height,{fill:p,opacity:.1})),g?(v.push(o.renderer.line(e.jqx._ptrnd(f.rect.x+f.rect.width),e.jqx._ptrnd(f.rect.y),e.jqx._ptrnd(f.rect.x+f.rect.width),e.jqx._ptrnd(_.y),{stroke:y,opacity:.5})),v.push(o.renderer.line(e.jqx._ptrnd(f.rect.x+f.rect.width),e.jqx._ptrnd(_.y+_.height),e.jqx._ptrnd(f.rect.x+f.rect.width),e.jqx._ptrnd(f.rect.y+f.rect.height),{stroke:y,opacity:.5})),v.push(o.renderer.line(e.jqx._ptrnd(f.rect.x),e.jqx._ptrnd(_.y),e.jqx._ptrnd(f.rect.x+f.rect.width),e.jqx._ptrnd(_.y),{stroke:y,opacity:.5})),v.push(o.renderer.line(e.jqx._ptrnd(f.rect.x),e.jqx._ptrnd(_.y+_.height),e.jqx._ptrnd(f.rect.x+f.rect.width),e.jqx._ptrnd(_.y+_.height),{stroke:y,opacity:.5}))):(v.push(o.renderer.line(e.jqx._ptrnd(f.rect.x),e.jqx._ptrnd(f.rect.y),e.jqx._ptrnd(_.x),e.jqx._ptrnd(f.rect.y),{stroke:y,opacity:.5})),v.push(o.renderer.line(e.jqx._ptrnd(_.x+_.width),e.jqx._ptrnd(f.rect.y),e.jqx._ptrnd(f.rect.x+f.rect.width),e.jqx._ptrnd(f.rect.y),{stroke:y,opacity:.5})),v.push(o.renderer.line(e.jqx._ptrnd(_.x),e.jqx._ptrnd(f.rect.y),e.jqx._ptrnd(_.x),e.jqx._ptrnd(f.rect.y+f.rect.height),{stroke:y,opacity:.5})),v.push(o.renderer.line(e.jqx._ptrnd(_.x+_.width),e.jqx._ptrnd(f.rect.y),e.jqx._ptrnd(_.x+_.width),e.jqx._ptrnd(f.rect.y+f.rect.height),{stroke:y,opacity:.5}))),o.renderer.refresh();var N=d.getImageData(l.x,l.y,l.width,l.height);i.getContext("2d").putImageData(N,parseInt(n.css("left")),parseInt(n.css("top")),1,1,l.width,l.height);for(var M=0;M<v.length;M++)o.renderer.removeElement(v[M]);o.renderer.refresh()}}}return!0},refresh:function(){this._internalRefresh()},update:function(){this._isUpdate=!0,this._internalRefresh()},_seriesTypes:["line","stackedline","stackedline100","spline","stackedspline","stackedspline100","stepline","stackedstepline","stackedstepline100","area","stackedarea","stackedarea100","splinearea","stackedsplinearea","stackedsplinearea100","steparea","stackedsteparea","stackedsteparea100","rangearea","splinerangearea","steprangearea","column","stackedcolumn","stackedcolumn100","rangecolumn","scatter","stackedscatter","stackedscatter100","bubble","stackedbubble","stackedbubble100","pie","donut","candlestick","ohlc","waterfall","stackedwaterfall"],clear:function(){var e=this;for(var t in e._defaultSettings)e[t]=e._defaultSettings[t];e.title="",e.description="",e.refresh()},_render:function(t){var i=this,r=i.renderer;i._colorsCache.clear(),!i._isToggleRefresh&&i._isUpdate&&i._renderData&&i._renderDataClone(),i._renderData=[],r.clear(),i._unselect(),i._hideToolTip(0);var s=i.backgroundImage;void 0==s||""==s?i.host.css({"background-image":""}):i.host.css({"background-image":-1!=s.indexOf("(")?s:"url('"+s+"')"}),i._rect=t;var a=i.padding||{left:5,top:5,right:5,bottom:5},n=r.createClipRect(t),o=r.beginGroup();r.setClip(o,n);var l=r.rect(t.x,t.y,t.width-2,t.height-2);if(void 0==s||""==s?r.attr(l,{fill:i.backgroundColor||i.background||"white"}):r.attr(l,{fill:"transparent"}),0!=i.showBorderLine){var h=void 0==i.borderLineColor?i.borderColor:i.borderLineColor;void 0==h&&(h=i._defaultLineColor);var d=this.borderLineWidth;(isNaN(d)||d<0||d>10)&&(d=1),r.attr(l,{"stroke-width":d,stroke:h})}else e.jqx.browser.msie&&e.jqx.browser.version<9&&r.attr(l,{"stroke-width":1,stroke:i.backgroundColor||"white"});e.isFunction(i.drawBefore)&&i.drawBefore(r,t);var f={x:a.left,y:a.top,width:t.width-a.left-a.right,height:t.height-a.top-a.bottom};i._paddedRect=f;var g,u=i.titlePadding||{left:2,top:2,right:2,bottom:2};if(i.title&&i.title.length>0){var c=i.toThemeProperty("jqx-chart-title-text",null);g=r.measureText(i.title,0,{class:c}),r.text(i.title,f.x+u.left,f.y+u.top,f.width-(u.left+u.right),g.height,0,{class:c},!0,"center","center"),f.y+=g.height,f.height-=g.height}if(i.description&&i.description.length>0){var m=i.toThemeProperty("jqx-chart-title-description",null);g=r.measureText(i.description,0,{class:m}),r.text(i.description,f.x+u.left,f.y+u.top,f.width-(u.left+u.right),g.height,0,{class:m},!0,"center","center"),f.y+=g.height,f.height-=g.height}(i.title||i.description)&&(f.y+=u.bottom+u.top,f.height-=u.bottom+u.top);var x={x:f.x,y:f.y,width:f.width,height:f.height};i._plotRect=x,i._buildStats(x);for(var _,p=i._isPieOnlySeries(),y=i.seriesGroups,v={xAxis:{},valueAxis:{}},N=0;N<y.length&&!p;N++)if("pie"!=y[N].type&&"donut"!=y[N].type){var M=i._getXAxis(N);if(!M)throw"seriesGroup["+N+"] is missing xAxis definition";var b=M==i._getXAxis()?-1:N;v.xAxis[b]=0}var w=i.axisPadding;isNaN(w)&&(w=5);var A={left:0,right:0,leftCount:0,rightCount:0},S=[];for(N=0;N<y.length;N++){var C=y[N];if("pie"!=C.type&&"donut"!=C.type&&1!=C.spider&&1!=C.polar){_="horizontal"==C.orientation;var M=i._getXAxis(N),b=M==i._getXAxis()?-1:N,k=i._getValueAxis(N),D=k==i._getValueAxis()?-1:N,O=_?M.axisSize:k.axisSize,F={x:0,y:x.y,width:x.width,height:x.height},j=_?i._getXAxis(N).position:k.position;O&&"auto"!=O||(_?(O=this._renderXAxis(N,F,!0,x).width,1==(1&v.xAxis[b])?O=0:O>0&&(v.xAxis[b]|=1)):(O=i._renderValueAxis(N,F,!0,x).width,1==(1&v.valueAxis[D])?O=0:O>0&&(v.valueAxis[D]|=1))),"left"!=j&&1==i.rtl&&(j="right"),"right"!=j&&(j="left"),A[j+"Count"]>0&&A[j]>0&&O>0&&(A[j]+=w),S.push({width:O,position:j,xRel:A[j]}),A[j]+=O,A[j+"Count"]++}else S.push({width:0,position:0,xRel:0})}var T=Math.max(1,Math.max(t.width,t.height)),I={top:0,bottom:0,topCount:0,bottomCount:0},P=[];for(N=0;N<y.length;N++){var C=y[N];if("pie"!=C.type&&"donut"!=C.type&&1!=C.spider&&1!=C.polar){_="horizontal"==C.orientation;var k=this._getValueAxis(N),D=k==i._getValueAxis()?-1:N,M=i._getXAxis(N),b=M==i._getXAxis()?-1:N,q=_?k.axisSize:M.axisSize,j=_?k.position:M.position;q&&"auto"!=q||(_?(q=i._renderValueAxis(N,{x:0,y:0,width:T,height:0},!0,x).height,2==(2&v.valueAxis[D])?q=0:q>0&&(v.valueAxis[D]|=2)):(q=i._renderXAxis(N,{x:0,y:0,width:T,height:0},!0).height,2==(2&v.xAxis[b])?q=0:q>0&&(v.xAxis[b]|=2))),"top"!=j&&(j="bottom"),I[j+"Count"]>0&&I[j]>0&&q>0&&(I[j]+=w),P.push({height:q,position:j,yRel:I[j]}),I[j]+=q,I[j+"Count"]++}else P.push({height:0,position:0,yRel:0})}i._createAnimationGroup("series");var L=0!=i.showLegend,R=L?i._renderLegend(i.legendLayout?i._rect:f,!0):{width:0,height:0};if(!this.legendLayout||isNaN(this.legendLayout.left)&&isNaN(this.legendLayout.top)||(R={width:0,height:0}),f.height<I.top+I.bottom+R.height||f.width<A.left+A.right)return void r.endGroup();x.height-=I.top+I.bottom+R.height,x.x+=A.left,x.width-=A.left+A.right,x.y+=I.top;var G=[];if(!p){i._getXAxis().tickMarksColor||i._defaultLineColor;for(N=0;N<y.length;N++){var C=y[N];if(1!=C.polar&&1!=C.spider&&"pie"!=C.type&&"donut"!=C.type){_="horizontal"==C.orientation;var b=i._getXAxis(N)==i._getXAxis()?-1:N,D=i._getValueAxis(N)==i._getValueAxis()?-1:N,F={x:x.x,y:0,width:x.width,height:P[N].height};if("top"!=P[N].position?F.y=x.y+x.height+P[N].yRel:F.y=x.y-P[N].yRel-P[N].height,_){if(4==(4&v.valueAxis[D]))continue;if(!i._isGroupVisible(N))continue;i._renderValueAxis(N,F,!1,x),v.valueAxis[D]|=4}else{if(G.push(F),4==(4&v.xAxis[b]))continue;if(!i._isGroupVisible(N))continue;i._renderXAxis(N,F,!1,x),v.xAxis[b]|=4}}}}if(L){var V=i.legendLayout?i._rect:f,E=f.x+e.jqx._ptrnd((f.width-R.width)/2),H=x.y+x.height+I.bottom,O=f.width,q=R.height;i.legendLayout&&(isNaN(i.legendLayout.left)||(E=i.legendLayout.left),isNaN(i.legendLayout.top)||(H=i.legendLayout.top),isNaN(i.legendLayout.width)||(O=i.legendLayout.width),isNaN(i.legendLayout.height)||(q=i.legendLayout.height)),E+O>V.x+V.width&&(O=V.x+V.width-E),H+q>V.y+V.height&&(q=V.y+V.height-H),i._renderLegend({x:E,y:H,width:O,height:q})}if(i._hasHorizontalLines=!1,!p)for(N=0;N<y.length;N++){var C=y[N];if(1!=C.polar&&1!=C.spider&&"pie"!=C.type&&"donut"!=C.type){_="horizontal"==y[N].orientation;var F={x:x.x-S[N].xRel-S[N].width,y:x.y,width:S[N].width,height:x.height};"left"!=S[N].position&&(F.x=x.x+x.width+S[N].xRel);var b=i._getXAxis(N)==i._getXAxis()?-1:N,D=i._getValueAxis(N)==i._getValueAxis()?-1:N;if(_){if(G.push(F),8==(8&v.xAxis[b]))continue;if(!i._isGroupVisible(N))continue;i._renderXAxis(N,F,!1,x),v.xAxis[b]|=8}else{if(8==(8&v.valueAxis[D]))continue;if(!i._isGroupVisible(N))continue;i._renderValueAxis(N,F,!1,x),v.valueAxis[D]|=8}}}if(!(x.width<=0||x.height<=0)){for(i._plotRect={x:x.x,y:x.y,width:x.width,height:x.height},N=0;N<y.length;N++)this._drawPlotAreaLines(N,!0,{gridLines:!1,tickMarks:!1,alternatingBackground:!0}),this._drawPlotAreaLines(N,!1,{gridLines:!1,tickMarks:!1,alternatingBackground:!0});for(N=0;N<y.length;N++)this._drawPlotAreaLines(N,!0,{gridLines:!0,tickMarks:!0,alternatingBackground:!1}),this._drawPlotAreaLines(N,!1,{gridLines:!0,tickMarks:!0,alternatingBackground:!1});var B=!1;for(N=0;N<y.length&&!B;N++){var C=y[N];if(void 0!==C.annotations||e.isFunction(C.draw)||e.isFunction(C.drawBefore)){B=!0;break}}var z=r.beginGroup();if(!B){var W=r.createClipRect({x:x.x-2,y:x.y,width:x.width+4,height:x.height});r.setClip(z,W)}for(N=0;N<y.length;N++){var C=y[N],X=!1;for(var U in i._seriesTypes)if(i._seriesTypes[U]==C.type){X=!0;break}if(!X)throw'Invalid serie type "'+C.type+'"';e.isFunction(C.drawBefore)&&C.drawBefore(r,t,N,this),1!=C.polar&&1!=C.spider||-1==C.type.indexOf("pie")&&-1==C.type.indexOf("donut")&&i._renderSpiderAxis(N,x),i._renderAxisBands(N,x,!0),i._renderAxisBands(N,x,!1)}for(N=0;N<y.length;N++){var C=y[N];if(i._isColumnType(C.type)?i._renderColumnSeries(N,x):-1!=C.type.indexOf("pie")||-1!=C.type.indexOf("donut")?i._renderPieSeries(N,x):-1!=C.type.indexOf("line")||-1!=C.type.indexOf("area")?i._renderLineSeries(N,x):-1!=C.type.indexOf("scatter")||-1!=C.type.indexOf("bubble")?i._renderScatterSeries(N,x):-1==C.type.indexOf("candlestick")&&-1==C.type.indexOf("ohlc")||i._renderCandleStickSeries(N,x,-1!=C.type.indexOf("ohlc")),C.annotations){if(!this._moduleAnnotations)throw"Please include 'jqxchart.annotations.js'";for(var Y=0;Y<C.annotations.length;Y++)i._renderAnnotation(N,C.annotations[Y],x)}e.isFunction(C.draw)&&i.draw(r,t,N,this)}if(r.endGroup(),0==i.enabled){var Z=r.rect(t.x,t.y,t.width,t.height);r.attr(Z,{fill:"#777777",opacity:.5,stroke:"#00FFFFFF"})}e.isFunction(i.draw)&&i.draw(r,t),r.endGroup(),i._startAnimation("series");for(var J=!1,N=0;N<i.seriesGroups.length&&!J;N++){var M=i._getXAxis(N);M&&M.rangeSelector&&(J=!0)}if(J){if(!this._moduleRangeSelector)throw"Please include 'jqxchart.rangeselector.js'";var Q=[];for(this._isSelectorRefresh||(i.removeHandler(e(document),i._getEvent("mousemove"),i._onSliderMouseMove),i.removeHandler(e(document),i._getEvent("mousedown"),i._onSliderMouseDown),i.removeHandler(e(document),i._getEvent("mouseup"),i._onSliderMouseUp)),i._isSelectorRefresh||(i._rangeSelectorInstances={}),N=0;N<i.seriesGroups.length;N++){var K=this._getXAxis(N);-1==Q.indexOf(K)&&this._renderXAxisRangeSelector(N,G[N])&&Q.push(K)}}}},_isPieOnlySeries:function(){var e=this.seriesGroups;if(0==e.length)return!1;for(var t=0;t<e.length;t++)if("pie"!=e[t].type&&"donut"!=e[t].type)return!1;return!0},_renderChartLegend:function(t,i,r,s){var a=this,n=a.renderer,o={x:i.x,y:i.y,width:i.width,height:i.height};o.width>=6&&(o.x+=3,o.width-=6),o.height>=6&&(o.y+=3,o.height-=6);for(var l={width:o.width,height:0},h=0,d=0,f=20,g=0,u=10,c=0,m=0;m<t.length;m++){var x=t[m].css;x||(x=a.toThemeProperty("jqx-chart-legend-text",null)),f=20;var _=t[m].text,p=n.measureText(_,0,{class:x});p.height>f&&(f=p.height),p.width>c&&(c=p.width),s?(0!=m&&(d+=f),d>o.height&&(d=0,h+=c+20+u,c=p.width,l.width=h+c)):(0!=h&&(h+=10),h+20+p.width>o.width&&p.width<o.width&&(h=0,d+=f,f=20,g=o.width,l.height=d+f));var y=!1;if(p.width>o.width){y=!0;for(var v=o.width,N=_,M=N.split(/\s+/),b=[],w="",A=0;A<M.length;A++){var S=w+(w.length>0?" ":"")+M[A],C=a.renderer.measureText(S,0,{class:x});C.width>v&&S.length>0&&w.length>0?(b.push({text:w}),w=M[A]):w=S,A+1==M.length&&b.push({text:w})}p.width=0;for(var k=0,D=0;D<b.length;D++){var O=b[D].text,C=a.renderer.measureText(O,0,{class:x});p.width=Math.max(p.width,C.width),k+=p.height}p.height=k}var F=h+p.width<o.width&&d+p.height<i.height;if(a.legendLayout)var F=o.x+h+p.width<a._rect.x+a._rect.width&&o.y+d+p.height<a._rect.y+a._rect.height;if(!r&&F){var j=t[m].seriesIndex,T=t[m].groupIndex,I=t[m].itemIndex,P=t[m].fillColor,q=t[m].lineColor,L=a._isSerieVisible(T,j,I),R=n.beginGroup(),G=L?t[m].opacity:.1;if(y){for(var N=_,v=o.width,M=N.split(/\s+/),V=0,b=[],w="",A=0;A<M.length;A++){var S=w+(w.length>0?" ":"")+M[A],C=a.renderer.measureText(S,0,{class:x});C.width>v&&S.length>0&&w.length>0?(b.push({text:w,dy:V}),V+=C.height,w=M[A]):w=S,A+1==M.length&&b.push({text:w,dy:V})}for(var D=0;D<b.length;D++){var O=b[D].text;V=b[D].dy;var C=a.renderer.measureText(O,0,{class:x});s?a.renderer.text(O,o.x+h+15,o.y+d+V,p.width,f,0,{class:x},!1,"left","center"):a.renderer.text(O,o.x+h+15,o.y+d+V,p.width,f,0,{class:x},!1,"center","center")}var E=n.rect(o.x+h,o.y+d+5+V/2,u,u);s&&(d+=V),a.renderer.attr(E,{fill:P,"fill-opacity":G,stroke:q,"stroke-width":1,"stroke-opacity":t[m].opacity})}else{var E=n.rect(o.x+h,o.y+d+5,u,u);a.renderer.attr(E,{fill:P,"fill-opacity":G,stroke:q,"stroke-width":1,"stroke-opacity":t[m].opacity}),s?a.renderer.text(_,o.x+h+15,o.y+d,p.width,p.height+5,0,{class:x},!1,"left","center"):a.renderer.text(_,o.x+h+15,o.y+d,p.width,f,0,{class:x},!1,"center","center")}a.renderer.endGroup(),a._setLegendToggleHandler(T,j,I,R)}s||(h+=p.width+20,g<h&&(g=h))}if(r)return l.height=e.jqx._ptrnd(d+f+5),l.width=e.jqx._ptrnd(g),l},isSerieVisible:function(e,t,i){return this._isSerieVisible(e,t,i)},_isSerieVisible:function(t,i,r){for(;this._itemsToggleState.length<t+1;)this._itemsToggleState.push([]);for(var s=this._itemsToggleState[t];s.length<i+1;)s.push(!!isNaN(r)||[]);var a=s[i];if(isNaN(r))return a;for(e.isArray(a)||(s[i]=a=[]);a.length<r+1;)a.push(!0);return a[r]},isGroupVisible:function(e){return this._isGroupVisible(e)},_isGroupVisible:function(e){var t=!1,i=this.seriesGroups[e].series;if(!i)return t;for(var r=0;r<i.length;r++)if(this._isSerieVisible(e,r)){t=!0;break}return t},_toggleSerie:function(t,i,r,s){var a=!this._isSerieVisible(t,i,r);void 0!=s&&(a=s);var n=this.seriesGroups[t],o=n.series[i];if(this._raiseEvent("toggle",{state:a,seriesGroup:n,serie:o,elementIndex:r}),isNaN(r))this._itemsToggleState[t][i]=a;else{var l=this._itemsToggleState[t][i];for(e.isArray(l)||(l=[]);l.length<r;)l.push(!0);l[r]=a}this._isToggleRefresh=!0,this.update(),this._isToggleRefresh=!1},showSerie:function(e,t,i){this._toggleSerie(e,t,i,!0)},hideSerie:function(e,t,i){this._toggleSerie(e,t,i,!1)},_setLegendToggleHandler:function(e,t,i,r){var s=this.seriesGroups[e],a=s.series[t],n=a.enableSeriesToggle;if(void 0==n&&(n=0!=s.enableSeriesToggle),n){var o=this;this.renderer.addHandler(r,"click",function(r){o._toggleSerie(e,t,i)})}},_renderLegend:function(e,t){for(var i=this,r=[],s=0;s<i.seriesGroups.length;s++){var a=i.seriesGroups[s];if(0!=a.showLegend)for(var n=0;n<a.series.length;n++){var o=a.series[n];if(0!=o.showLegend){var l,h=i._getSerieSettings(s,n);if("pie"!=a.type&&"donut"!=a.type){var d=o.legendFormatSettings||a.legendFormatSettings,f=o.legendFormatFunction||a.legendFormatFunction;l=i._formatValue(o.displayText||o.dataField||"",d,f,s,n,NaN);var g=i._getSeriesColors(s,n),u=this._get([o.legendFillColor,o.legendColor,g.fillColor]),c=this._get([o.legendLineColor,o.legendColor,g.lineColor]);r.push({groupIndex:s,seriesIndex:n,text:l,css:o.displayTextClass,fillColor:u,lineColor:c,opacity:h.opacity})}else for(var m=i._getXAxis(s),d=o.legendFormatSettings||a.legendFormatSettings||m.formatSettings||o.formatSettings||a.formatSettings,f=o.legendFormatFunction||a.legendFormatFunction||m.formatFunction||o.formatFunction||a.formatFunction,x=i._getDataLen(s),_=0;_<x;_++){l=i._getDataValue(_,o.displayText,s),l=i._formatValue(l,d,f,s,n,_);var g=i._getColors(s,n,_);r.push({groupIndex:s,seriesIndex:n,itemIndex:_,text:l,css:o.displayTextClass,fillColor:g.fillColor,lineColor:g.lineColor,opacity:h.opacity})}}}}return i._renderChartLegend(r,e,t,i.legendLayout&&"vertical"==i.legendLayout.flow)},_getInterval:function(e,t){if(!e)return t;var i=this._get([e.unitInterval,t]);return isNaN(e.step)||(i=e.step*t),i},_getOffsets:function(e,t,i,r,s,a,n,o,l){var h=this._getInterval(s[e],o),d=[];(""==e||s[e].visible&&"custom"!=s[e].visible)&&(d=this._generateIntervalValues(r,h,o,n,l));var f;if("labels"!=e){var g=n?a.left:0;if(!n&&o>1&&(g=a.left*(o+1)),1==d.length&&(g*=2),f=this._valuesToOffsets(d,t,r,i,a,!1,g),!n){var u=(a.left+a.right)*h/o;t.flip?f.unshift(f[0]+u):f.push(f[f.length-1]+u)}}else{var g=a.left;1==d.length&&(g*=2),f=this._valuesToOffsets(d,t,r,i,a,n,g)}var c=this._arraysToObjectsArray([d,f],["value","offset"]);if(t[e]&&t[e].custom)for(var m=this._objectsArraysToArray(t[e].custom,"value"),x=this._objectsArraysToArray(t[e].custom,"offset"),_=this._valuesToOffsets(m,t,r,i,a,n,a.left),p=0;p<t[e].custom.length;p++)c.push({value:m[p],offset:isNaN(x[p])?_[p]:x[p]});return c},_renderXAxis:function(t,i,r,s){var a=this,n=a._getXAxis(t),o=a.seriesGroups[t],l="horizontal"==o.orientation,h={width:0,height:0},d=a._getAxisSettings(n);if(!n||!d.visible||"spider"==o.type)return h;if(!a._isGroupVisible(t)||this._isPieGroup(t))return h;for(var f=a._alignValuesWithTicks(t);a._renderData.length<t+1;)a._renderData.push({});a.rtl&&(n.flip=!0);var g=l?i.height:i.width,u=n.text,c=a._calculateXOffsets(t,g),m=c.axisStats,x=n.rangeSelector,_=0;if(x){if(!this._moduleRangeSelector)throw"Please include 'jqxchart.rangeselector.js'";_=this._selectorGetSize(n)}var p=l&&"right"==n.position||!l&&"top"==n.position;!r&&x&&(l?(i.width-=_,"right"!=n.position&&(i.x+=_)):(i.height-=_,"top"==n.position&&(i.y+=_)));var y={rangeLength:c.rangeLength,itemWidth:c.itemWidth,intervalWidth:c.intervalWidth,data:c,settings:d,isMirror:p,rect:i};a._renderData[t].xAxis=y;var v=m.interval;if(isNaN(v))return h;l&&(d.title.angle-=90,d.labels.angle-=90);var N,M=this._getInterval(d.gridLines,v),b=this._getInterval(d.tickMarks,v),w=this._getInterval(d.labels,v),A=m.min,S=m.max,C=c.padding,k=1==n.flip||a.rtl,D={min:A,max:S};m.logAxis.enabled&&(D.min=m.logAxis.minPow,D.max=m.logAxis.maxPow),"date"==n.type?(d.gridLines.offsets=this._generateDTOffsets(A,S,g,C,M,v,m.dateTimeUnit,f,NaN,!1,k),d.tickMarks.offsets=this._generateDTOffsets(A,S,g,C,b,v,m.dateTimeUnit,f,NaN,!1,k),N=this._generateDTOffsets(A,S,g,C,w,v,m.dateTimeUnit,f,NaN,!0,k)):(d.gridLines.offsets=this._getOffsets("gridLines",n,g,m,d,C,f,v),d.tickMarks.offsets=this._getOffsets("tickMarks",n,g,m,d,C,f,v),N=this._getOffsets("labels",n,g,m,d,C,f,v));var O,F=a.renderer.getRect();F.width,i.x,i.width,a._getDataLen(t);a._elementRenderInfo&&a._elementRenderInfo.length>t&&(O=a._elementRenderInfo[t].xAxis);var j,T=[];d.labels.formatFunction&&(j=d.labels.formatFunction);var I;d.labels.formatSettings&&(I=e.extend({},d.labels.formatSettings)),"date"==n.type&&(n.dateFormat&&!j?I?I.dateFormat=I.dateFormat||n.dateFormat:I={dateFormat:n.dateFormat}:j||I&&(!I||I.dateFormat)||(j=this._getDefaultDTFormatFn(n.baseUnit||"day")));for(var P=0;P<N.length;P++){var q=N[P].value,L=N[P].offset;if(!isNaN(L)){var R=void 0;"date"!=n.type&&m.useIndeces&&n.dataField&&(R=Math.round(q),void 0==(q=a._getDataValue(R,n.dataField))&&(q=""));var u=a._formatValue(q,I,j,t,void 0,R);void 0!=u&&""!=u.toString()||(isNaN(R)&&(R=P),R>=m.filterRange.min&&R<=m.filterRange.max&&(u=m.useIndeces?(m.min+R).toString():void 0==q?"":q.toString()));var G={key:q,text:u,targetX:L,x:L};O&&O.itemOffsets[q]&&(G.x=O.itemOffsets[q].x,G.y=O.itemOffsets[q].y),T.push(G)}}var V=a._getAnimProps(t),E=V.enabled&&T.length<500?V.duration:0;0==a.enableAxisTextAnimation&&(E=0);var H={items:T,renderData:y},B=a._renderAxis(l,p,d,{x:i.x,y:i.y,width:i.width,height:i.height},s,v,!1,!0,H,r,E);return l?B.width+=_:B.height+=_,B},_animateAxisText:function(e,t){for(var i=e.items,r=e.textSettings,s=0;s<i.length;s++){var a=i[s];if(a&&a.visible){var n=a.targetX,o=a.targetY;isNaN(a.x)||isNaN(a.y)||(n=a.x+(n-a.x)*t,o=a.y+(o-a.y)*t),a.element&&(this.renderer.removeElement(a.element),a.element=void 0),a.element=this.renderer.text(a.text,n,o,a.width,a.height,r.angle,{class:r.style},!1,r.halign,r.valign,r.textRotationPoint)}}},_getPolarAxisCoords:function(t,i){var r=this.seriesGroups[t],s=i.x+e.jqx.getNum([r.offsetX,i.width/2]),a=i.y+e.jqx.getNum([r.offsetY,i.height/2]),n=Math.min(i.width,i.height),o=r.radius;this._isPercent(o)&&(o=parseFloat(o)/100*n/2),isNaN(o)&&(o=n/2*.6);var l=this._alignValuesWithTicks(t),h=this._get([r.startAngle,r.minAngle,0])-90;h=isNaN(h)?0:2*Math.PI*h/360;var d=this._get([r.endAngle,r.maxAngle,360])-90;if(d=isNaN(d)?2*Math.PI:2*Math.PI*d/360,h>d){var f=h;h=d,d=f}var g=e.jqx._rnd(Math.abs(h-d)/(2*Math.PI),.001,!0),u=2*Math.PI*o*g,c=this._calcGroupOffsets(t,i).xoffsets;if(c){var m=!(Math.abs(Math.abs(d-h)-2*Math.PI)>1e-5);if(r.spider){axisStats=this._getXAxisStats(t,this._getXAxis(t),u);var x=axisStats.interval;(isNaN(x)||0==x)&&(x=1);var _=(axisStats.max-axisStats.min)/x+(m?1:0);if((_=Math.round(_))>2){var p=Math.cos(Math.abs(d-h)/2/_);p=e.jqx._rnd(p,.01),0==p&&(p=1);var y=o/p;y>o&&l&&(o=y)}}return o=e.jqx._ptrnd(o),{x:s,y:a,r:o,adjR:this._get([y,o]),itemWidth:c.itemWidth,rangeLength:c.rangeLength,valuesOnTicks:l,startAngle:h,endAngle:d,isClosedCircle:m,axisSize:u}}},_toPolarCoord:function(t,i,r,s){var a=Math.abs(t.startAngle-t.endAngle)/(2*Math.PI),n=2*(r-i.x)*Math.PI*a/Math.max(1,i.width)+t.startAngle,o=(i.height+i.y-s)*t.r/Math.max(1,i.height),l=t.x+o*Math.cos(n),h=t.y+o*Math.sin(n);return{x:e.jqx._ptrnd(l),y:e.jqx._ptrnd(h)}},_renderSpiderAxis:function(t,i){var r=this,s=r._getXAxis(t),a=this._getAxisSettings(s);if(s&&a.visible){var n=r.seriesGroups[t],o=r._getPolarAxisCoords(t,i);if(o){var l=e.jqx._ptrnd(o.x),h=e.jqx._ptrnd(o.y),d=o.adjR,f=o.startAngle,g=o.endAngle;if(!(d<1)){var u=e.jqx._rnd(Math.abs(f-g)/(2*Math.PI),.001,!0),c=2*Math.PI*d*u,m=o.isClosedCircle,x=this._renderData[t].xoffsets;if(x.rangeLength){var _=x.axisStats.interval;(isNaN(_)||_<1)&&(_=1);var p="horizontal"==n.orientation;for(p&&"right"==s.position||!p&&s.position;r._renderData.length<t+1;)r._renderData.push({});var y={rangeLength:x.rangeLength,itemWidth:x.itemWidth,data:x,rect:i,settings:a};r._renderData[t].xAxis=y,r._renderData[t].polarCoords=o;for(var v=!0,N=0;N<t;N++){var M=(r._renderData[N].xAxis,r._renderData[N].polarCoords),b=r._getXAxis(N),w=!1;for(var A in o)if(o[A]!=M[A]){w=!0;break}w&&b==s||(v=!1)}var S,C=a.gridLines,k=a.tickMarks,D=a.labels,O=this._getInterval(C,_),F=this._getInterval(k,_),j=this._getInterval(D,_),T=r._alignValuesWithTicks(t),I=r.renderer,P=x.axisStats,q=P.min,L=P.max,R=this._getPaddingSize(x.axisStats,s,T,c,!0,m,!1),G=1==s.flip||r.rtl;"date"==s.type?(C.offsets=this._generateDTOffsets(q,L,c,R,O,_,s.baseUnit,!0,0,!1,G),k.offsets=this._generateDTOffsets(q,L,c,R,F,_,s.baseUnit,!0,0,!1,G),S=this._generateDTOffsets(q,L,c,R,j,_,s.baseUnit,!0,0,!0,G)):(a.gridLines.offsets=this._getOffsets("gridLines",s,c,P,a,R,!0,_),a.tickMarks.offsets=this._getOffsets("tickMarks",s,c,P,a,R,!0,_),S=this._getOffsets("labels",s,c,P,a,R,!0,_));var V,E=r.renderer.getRect();E.width,i.x,i.width,r._getDataLen(t);r._elementRenderInfo&&r._elementRenderInfo.length>t&&(V=r._elementRenderInfo[t].xAxis);for(var H=[],B=this._getDataLen(t),N=0;N<S.length;N++){var z=S[N].offset,W=S[N].value;if("date"!=s.type&&P.useIndeces&&s.dataField){var X=Math.round(W);if(X>=B)continue;W=r._getDataValue(X,s.dataField),void 0==W&&(W="")}var U=r._formatValue(W,D.formatSettings,D.formatFunction,t,void 0,X);void 0!=U&&""!=U.toString()||(U=P.useIndeces?(P.min+N).toString():void 0==W?"":W.toString());var Y={key:W,text:U,targetX:z,x:z};V&&V.itemOffsets[W]&&(Y.x=V.itemOffsets[W].x,Y.y=V.itemOffsets[W].y),H.push(Y)}var Z={stroke:C.color,fill:"none","stroke-width":C.width,"stroke-dasharray":C.dashStyle||""};if(!n.spider)if(1==u)I.circle(l,h,d,Z);else{var J=-f/Math.PI*180,Q=-g/Math.PI*180;this.renderer.pieslice(l,h,0,d,Math.min(J,Q),Math.max(J,Q),void 0,Z)}var K=H.length,$=(Math.PI,f);if(C.visible&&v){T||m||C.offsets.unshift({offset:-R.right});for(var N=0;N<C.offsets.length;N++){var ee=C.offsets[N].offset;T||(ee+=m?R.right/2:R.right);var te=$+2*ee*Math.PI*u/Math.max(1,c);if(!(te-g>.01)){var ie=e.jqx._ptrnd(l+d*Math.cos(te)),re=e.jqx._ptrnd(h+d*Math.sin(te));I.line(l,h,ie,re,Z)}}}if(k.visible&&v){var se={stroke:k.color,fill:"none","stroke-width":k.width,"stroke-dasharray":k.dashStyle||""};T||m||k.offsets.unshift({offset:-R.right});for(var N=0;N<k.offsets.length;N++){var ee=k.offsets[N].offset;T||(ee+=m?R.right/2:R.right);var te=$+2*ee*Math.PI*u/Math.max(1,c);if(!(te-g>.01)){var ae={x:l+d*Math.cos(te),y:h+d*Math.sin(te)},ne={x:l+(d+5)*Math.cos(te),y:h+(d+5)*Math.sin(te)};I.line(e.jqx._ptrnd(ae.x),e.jqx._ptrnd(ae.y),e.jqx._ptrnd(ne.x),e.jqx._ptrnd(ne.y),se)}}}var oe=[];if(n.spider){var le=[];le="date"==s.type?this._generateDTOffsets(q,L,c,R,_,_,s.baseUnit,!0,0,!1,G):this._getOffsets("",s,c,P,a,R,!0,_),T||m||le.unshift({offset:-R.right});for(var N=0;N<le.length;N++){var ee=le[N].offset;T||(ee+=m?R.right/2:R.right);var te=$+2*ee*Math.PI*u/Math.max(1,c);te-g>.01||oe.push(te)}y.offsetAngles=oe}var he=r._renderSpiderValueAxis(t,i,T?o.adjR:o.r,oe);if(he||(he=[]),n.spider){if(!T)for(var N=0;N<he.length;N++)he[N]=he[N]*o.adjR/o.r;he.push(d),this._renderSpiderLines(l,h,he,o,oe,Z)}if(v&&D.visible){y.polarLabels=[];for(var N=0;N<H.length;N++){var ee=H[N].x,te=$+2*ee*Math.PI*u/Math.max(1,c);te=(360-te/(2*Math.PI)*360)%360,te<0&&(te=360+te);var de,fe=I.measureText(H[N].text,0,{class:a.labels.style}),ge=(T?o.adjR:o.r)+(k.visible?7:2),ue=a.labels;if(ue.autoRotate){var ce=e.jqx._ptRotate(l-fe.width/2,h-ge-fe.height,l,h,-te/180*Math.PI),me=e.jqx._ptRotate(l+fe.width/2,h-ge,l,h,-te/180*Math.PI);fe.width=Math.abs(ce.x-me.x),fe.height=Math.abs(ce.y-me.y),de={x:Math.min(ce.x,me.x),y:Math.min(ce.y,me.y)}}else de=this._adjustTextBoxPosition(l,h,fe,ge,te,!1,!1,!1);y.polarLabels.push({x:de.x,y:de.y,value:H[N].text}),I.text(H[N].text,de.x,de.y,fe.width,fe.height,ue.autoRotate?90-te:ue.angle,{class:ue.style},!1,ue.halign,ue.valign)}}}}}}},_renderSpiderLines:function(t,i,r,s,a,n){for(var o=this.renderer,l=(s.startAngle,s.endAngle,s.isClosedCircle),h=0;h<r.length;h++){for(var d=r[h],f=void 0,g=void 0,u=0;u<a.length;u++){var c=a[u],m=e.jqx._ptrnd(t+d*Math.cos(c)),x=e.jqx._ptrnd(i+d*Math.sin(c));f&&o.line(f.x,f.y,m,x,n),f={x:m,y:x},g||(g={x:m,y:x})}
g&&l&&o.line(f.x,f.y,g.x,g.y,n)}},_renderSpiderValueAxis:function(t,i,r,s){var a=this.seriesGroups[t],n=this._getPolarAxisCoords(t,i);if(n){var o=e.jqx._ptrnd(n.x),l=e.jqx._ptrnd(n.y);r=r||n.r;var h=n.startAngle,d=n.endAngle,f=e.jqx._rnd(Math.abs(h-d)/(2*Math.PI),.001,!0);if(!(r<1)){r=e.jqx._ptrnd(r);var g=this._getValueAxis(t);if(settings=this._getAxisSettings(g),g&&0!=settings.visible){var u=this._stats.seriesGroups[t].mu,c=settings.labels,m=c.formatSettings;-1!=a.type.indexOf("stacked")&&-1!=a.type.indexOf("100")&&!m&&(m={sufix:"%"});var x=this._get([c.step,c.unitInterval/u]);isNaN(x)&&(x=1),x=Math.max(1,Math.round(x)),this._calcValueAxisItems(t,r,x);var _=settings.gridLines,p=settings.tickMarks,y=(this._getInterval(_,u),this._getInterval(p,u),settings.labels),v={stroke:_.color,fill:"none","stroke-width":1,"stroke-dasharray":_.dashStyle||""},N=this._renderData[t].valueAxis,M=N.items,b=h;if(M.length&&settings.line.visible){isNaN(settings.line.angle)||(b=2*Math.PI*settings.line.angle/360);var w=o+Math.cos(b)*r,A=l+Math.sin(b)*r;if(-1==s.indexOf(b)){var S=e.extend({},v);S["stroke-width"]=settings.line.lineWidth,S.stroke=settings.line.color,S["stroke-dasharray"]=settings.line.dashStyle,this.renderer.line(o,l,w,A,S)}}M=M.reverse();var C=this.renderer;N.polarLabels=[];for(var k=0;k<M.length-1;k++){var D=M[k];if(!isNaN(D)){var O=y.formatFunction?y.formatFunction(D):this._formatNumber(D,m),F=C.measureText(O,0,{class:y.style}),j=o+(0!=g.showTickMarks?3:2),T=l-N.itemWidth*k-F.height/2,I=e.jqx._ptRotate(j,T,o,l,b),P=e.jqx._ptRotate(j+F.width,T+F.height,o,l,b);j=Math.min(I.x,P.x),T=Math.min(I.y,P.y),F.width=Math.abs(I.x-P.x),F.height=Math.abs(I.y-P.y),j+=settings.labels.textOffset.x,T+=settings.labels.textOffset.y,N.polarLabels.push({x:j,y:T,value:O}),C.text(O,j,T,F.width,F.height,y.autoRotate?90+180*h/Math.PI:y.angle,{class:y.style},!1,y.halign,y.valign)}}var q=1==g.logarithmicScale,L=q?M.length:N.rangeLength;aIncrement=2*Math.PI/L;var R=0!=g.valuesOnTicks,G=this._stats.seriesGroups[t],V=G.mu,E=1==g.logarithmicScale;g.logarithmicScaleBase;E&&(V=1);var H={min:G.min,max:G.max,logAxis:{enabled:1==E,base:g.logarithmicScaleBase,minPow:G.minPow,maxPow:G.maxPow}};(_.visible||a.spider||g.alternatingBackgroundColor||g.alternatingBackgroundColor2)&&(_.offsets=this._getOffsets("gridLines",g,r,H,settings,{left:0,right:0},R,V));var B=[];if(_.visible||a.spider)for(var v={stroke:_.color,fill:"none","stroke-width":1,"stroke-dasharray":_.dashStyle||""},k=0;k<_.offsets.length;k++){var T=e.jqx._ptrnd(_.offsets[k].offset);if(T!=r)if(a.spider)B.push(T);else if(1!=f){var z=-h/Math.PI*180,W=-d/Math.PI*180;this.renderer.pieslice(o,l,0,T,Math.min(z,W),Math.max(z,W),void 0,v)}else C.circle(o,l,T,v)}if(g.tickMarks&&(g.tickMarks.visible||g.showTickMarks)||(p.visible=!1),p.visible){p.offsets=this._getOffsets("tickMarks",g,r,H,settings,{left:0,right:0},R,V),tickMarkSize=2*p.size;for(var v={stroke:p.color,fill:"none","stroke-width":1,"stroke-dasharray":p.dashStyle||""},k=0;k<p.offsets.length;k++){var X=p.offsets[k].offset,I={x:o+X*Math.cos(b)-tickMarkSize/2*Math.sin(b+Math.PI/2),y:l+X*Math.sin(b)-tickMarkSize/2*Math.cos(b+Math.PI/2)},P={x:o+X*Math.cos(b)+tickMarkSize/2*Math.sin(b+Math.PI/2),y:l+X*Math.sin(b)+tickMarkSize/2*Math.cos(b+Math.PI/2)};C.line(e.jqx._ptrnd(I.x),e.jqx._ptrnd(I.y),e.jqx._ptrnd(P.x),e.jqx._ptrnd(P.y),v)}}return B}}}},_renderAxis:function(t,i,r,s,a,n,o,l,h,d,f){if(r.customDraw&&!d)return{width:NaN,height:NaN};var g=r.title,u=r.labels,c=(r.gridLines,r.tickMarks),m=r.padding,x=c.visible?c.size:0,_={width:0,height:0},p={width:0,height:0};t?_.height=p.height=s.height:_.width=p.width=s.width,!d&&i&&t&&(s.x-=s.width);var y=h.renderData,v=y.itemWidth;if(g.visible&&void 0!=g.text&&""!=g){var N=g.angle,M=this.renderer.measureText(g.text,N,{class:g.style});p.width=M.width,p.height=M.height,d||this.renderer.text(g.text,s.x+g.offset.x+(t?i?-m.right-2+2*s.width-p.width:2+m.left:0),s.y+g.offset.y+(t?0:i?m.top+2:s.height-2-p.height-m.bottom),t?p.width:s.width,t?s.height:p.height,N,{class:g.style},!0,g.halign,g.valign,g.rotationPoint)}var b=0,w=l?-v/2:0;l&&!t&&(u.halign="center");var A=s.x,S=s.y,C=u.textOffset;C&&(isNaN(C.x)||(A+=C.x),isNaN(C.y)||(S+=C.y)),t?(A+=m.left+2+(p.width>0?p.width+2:0)+(i?s.width-p.width:0),S+=w):(A+=w,i?(S+=p.height>0?p.height+6:4,S+=x-(l?x:x/4)):S+=l?x:x/4,S+=m.top);var k=0,D=0,O=h.items;y.itemOffsets={},!this._isToggleRefresh&&this._isUpdate||(f=0);for(var F=!1,j=0,T=0;T<O.length&&u.visible;T++,b+=v)if(O[T]&&!isNaN(v)){var I=O[T].text;isNaN(O[T].targetX)||(b=O[T].targetX);var M=this.renderer.measureText(I,u.angle,{class:u.style});if(M.width>D&&(D=M.width),M.height>k&&(k=M.height),j+=t?k:D,!d){if(t&&b>s.height+2||!t&&b>s.width+2)continue;var P=t?A+(i?0==p.width?x:x-2:0):A+b,q=t?S+b:S;y.itemOffsets[O[T].key]={x:P,y:q},F||(!isNaN(O[T].x)||!isNaN(O[T].y)&&f)&&(F=!0),O[T].targetX=P,O[T].targetY=q,O[T].width=t?s.width-m.left-m.right-4-x-(p.width>0?p.width+2:0):v,O[T].height=t?v:s.height-m.top-m.bottom-4-x-(p.height>0?p.height+2:0),O[T].visible=!0}}if(y.avgWidth=0==O.length?0:j/O.length,!d){var L={items:O,textSettings:u};if(!isNaN(f)&&F||(f=0),this._animateAxisText(L,0==f?1:0),0!=f){var R=this;this._enqueueAnimation("series",void 0,void 0,f,function(e,t,i){R._animateAxisText(t,i)},L)}}_.width+=4+x+p.width+D+(t&&p.width>0?2:0),_.height+=4+x+p.height+k+(!t&&p.height>0?2:0),t?_.width+=m.left+m.right:_.height+=m.top+m.bottom;if(!d&&r.line.visible){var G={stroke:r.line.color,"stroke-width":r.line.width,"stroke-dasharray":r.line.dashStyle||""};if(t){var P=s.x+s.width+(i?m.left:-m.right);P=e.jqx._ptrnd(P),this.renderer.line(P,s.y,P,s.y+s.height,G)}else{var q=e.jqx._ptrnd(s.y+(i?s.height-m.bottom:m.top));this.renderer.line(e.jqx._ptrnd(s.x),q,e.jqx._ptrnd(s.x+s.width+1),q,G)}}return _.width=e.jqx._rup(_.width),_.height=e.jqx._rup(_.height),_},_drawPlotAreaLines:function(t,i,r){var s=this.seriesGroups[t],a="horizontal"!=s.orientation;if(this._renderData&&!(this._renderData.length<=t)){var n=i?"valueAxis":"xAxis",o=this._renderData[t][n];if(o){var l=this._renderData.axisDrawState;l||(l=this._renderData.axisDrawState={});var h,d="";i?(d="valueAxis_"+(s.valueAxis?t:"")+(a?"swap":""),h=this._getValueAxis(t)):(d="xAxis_"+(s.xAxis||s.categoryAxis?t:"")+(a?"swap":""),h=this._getXAxis(t)),l=l[d]?l[d]:l[d]={},i||(a=!a);var f=o.settings;if(f&&!f.customDraw){var g=f.gridLines,u=f.tickMarks,c=f.padding,m=o.rect,x=this._plotRect;if(g&&u){var _=.5,p={},y={stroke:g.color,"stroke-width":g.width,"stroke-dasharray":g.dashStyle||""},v=i?m.y+m.height:m.x,N=g.offsets;if(i&&!h.flip&&(N=e.extend([],N),N=N.reverse()),N&&N.length>0)for(var M=NaN,b=(N.length,0);b<N.length;b++)if(a?(lineOffset=e.jqx._ptrnd(m.y+N[b].offset),lineOffset<m.y-_&&(lineOffset=e.jqx._ptrnd(m.y)),lineOffset>m.y+m.height&&(lineOffset=m.y+m.height)):(lineOffset=e.jqx._ptrnd(m.x+N[b].offset),lineOffset>m.x+m.width+_&&(lineOffset=e.jqx._ptrnd(m.x+m.width))),!isNaN(lineOffset)&&(isNaN(M)||!(Math.abs(lineOffset-M)<2))){if(M=lineOffset,r.gridLines&&0!=g.visible&&1!=l.gridLines&&(a?this.renderer.line(e.jqx._ptrnd(x.x),lineOffset,e.jqx._ptrnd(x.x+x.width),lineOffset,y):this.renderer.line(lineOffset,e.jqx._ptrnd(x.y),lineOffset,e.jqx._ptrnd(x.y+x.height),y)),p[lineOffset]=!0,r.alternatingBackground&&(g.alternatingBackgroundColor||g.alternatingBackgroundColor2)&&1!=l.alternatingBackground){var w=b%2==0?g.alternatingBackgroundColor2:g.alternatingBackgroundColor;if(b>0&&w){var A;A=a?this.renderer.rect(e.jqx._ptrnd(x.x),v,e.jqx._ptrnd(x.width-1),lineOffset-v,y):this.renderer.rect(v,e.jqx._ptrnd(x.y),lineOffset-v,e.jqx._ptrnd(x.height),y),this.renderer.attr(A,{"stroke-width":0,fill:w,opacity:g.alternatingBackgroundOpacity||1})}}v=lineOffset}var y={stroke:u.color,"stroke-width":u.width,"stroke-dasharray":u.dashStyle||""};if(r.tickMarks&&u.visible&&1!=l.tickMarks)for(var S=u.size,N=u.offsets,M=NaN,b=0;b<N.length;b++)if(a?(lineOffset=e.jqx._ptrnd(m.y+N[b].offset),lineOffset<m.y-_&&(lineOffset=e.jqx._ptrnd(m.y)),lineOffset>m.y+m.height&&(lineOffset=m.y+m.height)):(lineOffset=e.jqx._ptrnd(m.x+N[b].offset),lineOffset>m.x+m.width+_&&(lineOffset=e.jqx._ptrnd(m.x+m.width))),!isNaN(lineOffset)&&(isNaN(M)||!(Math.abs(lineOffset-M)<2))){if(p[lineOffset-1]?lineOffset--:p[lineOffset+1]&&lineOffset++,a){if(lineOffset>m.y+m.height+_)break}else if(lineOffset>m.x+m.width+_)break;M=lineOffset;var C=o.isMirror?S:-S;if(a){var k=m.x+m.width+("right"==h.position?c.left:-c.right);i||(k=m.x+(o.isMirror?c.left:-c.right+m.width)),this.renderer.line(k,lineOffset,k+C,lineOffset,y)}else{var D=m.y+(o.isMirror?m.height:0);D+=o.isMirror?-c.bottom:c.top,D=e.jqx._ptrnd(D),this.renderer.line(lineOffset,D,lineOffset,D-C,y)}}l.tickMarks=l.tickMarks||r.tickMarks,l.gridLines=l.gridLines||r.gridLines,l.alternatingBackground=l.alternatingBackground||r.alternatingBackground}}}}},_calcValueAxisItems:function(e,t,i){var r=this._stats.seriesGroups[e];if(!r||!r.isValid)return!1;var s=this.seriesGroups[e],a=(s.orientation,this._getValueAxis(e)),n=0!=a.valuesOnTicks,o=(a.dataField,r.intervals),l=t/o,h=r.min,d=r.mu,f=1==a.logarithmicScale,g=a.logarithmicScaleBase||10,u=-1!=s.type.indexOf("stacked")&&-1!=s.type.indexOf("100");for(f&&(d=isNaN(a.unitInterval)?1:a.unitInterval),n||(o=Math.max(o-1,1));this._renderData.length<e+1;)this._renderData.push({});this._renderData[e].valueAxis={};var c=this._renderData[e].valueAxis;c.itemWidth=c.intervalWidth=l,c.items=[];for(var m=c.items,x=0;x<=o;x++){var _=0;_=f?u?r.max/Math.pow(g,o-x):h*Math.pow(g,x):n?h+x*d:h+(x+.5)*d,x%i==0?m.push(_):m.push(NaN)}return c.rangeLength=f&&!u?r.intervals:r.intervals*d,1!=a.flip&&(m=m.reverse()),!0},_getDecimalPlaces:function(e,t,i){var r=0;isNaN(i)&&(i=10);for(var s=0;s<e.length;s++){var a=void 0===t?e[s]:e[s][t];if(!isNaN(a)){for(var n=a.toString(),o=0;o<n.length;o++)if((n[o]<"0"||n[o]>"9")&&(r=n.length-(o+1))>=0)return Math.min(r,i);for(r>0&&(a*=Math.pow(10,r));Math.round(a)!=a&&r<i;)r++,a*=10}}return r},_renderValueAxis:function(e,t,i,r){var s=this.seriesGroups[e],a="horizontal"==s.orientation,n=this._getValueAxis(e);if(!n)throw"SeriesGroup "+e+" is missing valueAxis definition";var o={width:0,height:0};if(!this._isGroupVisible(e)||this._isPieOnlySeries()||"spider"==s.type)return o;var l=0!=n.valuesOnTicks,h=this._stats.seriesGroups[e],d=h.mu,f=1==n.logarithmicScale;n.logarithmicScaleBase;if(f&&(d=isNaN(n.unitInterval)?1:n.unitInterval),0==d&&(d=1),isNaN(d))return o;var g=this._getAxisSettings(n),u=g.title,c=g.labels,m=n.labels||{};this._get([n.horizontalTextAlignment,m.horizontalAlignment])||0!=c.angle||(c.halign=a?"center":"right"==n.position?"left":"right");var x=this._get([c.step,c.unitInterval/d]);if(isNaN(x)&&(x=1),x=Math.max(1,Math.round(x)),!this._calcValueAxisItems(e,a?t.width:t.height,x)||!g.visible)return o;a||(u.angle=this.rtl?90:-90,"centercenter"==u.rotationPoint&&("top"==u.valign?u.rotationPoint="rightcenter":"bottom"==u.valign&&(u.rotationPoint="leftcenter")));var _=this._renderData[e].valueAxis,p=c.formatSettings;-1!=s.type.indexOf("stacked")&&-1!=s.type.indexOf("100")&&!p&&(p={sufix:"%"}),c.formatFunction||p&&p.decimalPlaces||(p=p||{},p.decimalPlaces=this._getDecimalPlaces([h.min,h.max,d],void 0,3));var y=g.gridLines,v=(f||this._getInterval(y,d),a?t.width:t.height),N=1==n.flip;n.flip=!N;var M={min:h.min,max:h.max,logAxis:{enabled:1==f,base:n.logarithmicScaleBase,minPow:h.minPow,maxPow:h.maxPow}};(y.visible||n.alternatingBackgroundColor||n.alternatingBackgroundColor2)&&(y.offsets=this._getOffsets("gridLines",n,v,M,g,{left:0,right:0},l,d));var b=g.tickMarks;b.visible&&(b.offsets=this._getOffsets("tickMarks",n,v,M,g,{left:0,right:0},l,d)),labelOffsets=this._getOffsets("labels",n,v,M,g,{left:0,right:0},l,d,!l),n.flip=N;var w,A=[];this._elementRenderInfo&&this._elementRenderInfo.length>e&&(w=this._elementRenderInfo[e].valueAxis);for(var S=0;S<labelOffsets.length;S++){var C=labelOffsets[S].value;if(isNaN(labelOffsets[S].offset))A.push(void 0);else{var k=c.formatFunction?c.formatFunction(C):isNaN(C)?C:this._formatNumber(C,p),D={key:C,text:k};w&&w.itemOffsets[C]&&(D.x=w.itemOffsets[C].x,D.y=w.itemOffsets[C].y),D.targetX=labelOffsets[S].offset,isNaN(D.targetX)||A.push(D)}}var O=a&&"top"==n.position||!a&&"right"==n.position||!a&&this.rtl&&"left"!=n.position,F={items:A,renderData:_},j=this._getAnimProps(e),T=j.enabled&&A.length<500?j.duration:0;return 0==this.enableAxisTextAnimation&&(T=0),_.settings=g,_.isMirror=O,_.rect=t,this._renderAxis(!a,O,g,t,r,d,f,!0,F,i,T)},_objectsArraysToArray:function(t,i){var r=[];if(!e.isArray(t))return r;for(var s=0;s<t.length;s++)r.push(t[s][i]);return r},_arraysToObjectsArray:function(e,t){var i=[];if(e.length!=t.length)return i;for(var r=0;r<e.length;r++)for(var s=0;s<e[r].length;s++)i.length<=s&&i.push({}),i[s][t[r]]=e[r][s];return i},_valuesToOffsets:function(t,i,r,s,a,n,o){var l=[];if(!i||!e.isArray(t))return l;var h=r.logAxis.base,d=r.logAxis.enabled?"logarithmic":"linear",f=i.flip,g=s,u=0,c=0;a&&!isNaN(a.left)&&(u=a.left),a&&!isNaN(a.right)&&(c=a.right),g=s-u-c,s=g;for(var m=0;m<t.length;m++)x=this._jqxPlot.scale(t[m],{min:r.min.valueOf(),max:r.max.valueOf(),type:d,base:h},{min:0,max:n?s:g,flip:f},{}),isNaN(x)?l.push(NaN):(isNaN(o)||(x+=o),x<=s+u+c+1?l.push(e.jqx._ptrnd(x)):l.push(NaN));return l},_generateIntervalValues:function(e,t,i,r,s){var a=[],n=e.min,o=e.max;if(e.logAxis&&e.logAxis.enabled&&(n=e.logAxis.minPow,o=e.logAxis.maxPow),void 0==n||void 0==o)return a;if(n==o)return e.logAxis&&e.logAxis.enabled?[Math.pow(e.logAxis.base,n)]:[n];var l=1;i<1&&(l=1e6,n*=l,o*=l,i*=l);for(var h=n;h<=o;h+=i)a.push(h/l+(s?i/2:0));if(t>i){for(var d=[],f=Math.round(t/i),h=0;h<a.length;h++)h%f==0&&d.push(a[h]);a=d}if(e.logAxis&&e.logAxis.enabled)for(var h=0;h<a.length;h++)a[h]=Math.pow(e.logAxis.base,a[h]);return a},_generateDTOffsets:function(t,i,r,s,a,n,o,l,h,d,f){o||(o="day");var g=[];if(t>i)return g;if(t==i)return d?g.push({offset:l?r/2:s.left,value:t}):l&&g.push({offset:r/2,value:t}),g;var u=r-s.left-s.right,c=t,m=s.left,x=m;n=Math.max(n,1);var _=n,p=Math.min(1,n);for(n>1&&"millisecond"!=o&&(n=1);e.jqx._ptrnd(x)<=e.jqx._ptrnd(s.left+u+(l?0:s.right));){g.push({offset:x,value:c});var y=new Date(c.valueOf());if("millisecond"==o)y.setMilliseconds(c.getMilliseconds()+n);else if("second"==o)y.setSeconds(c.getSeconds()+n);else if("minute"==o)y.setMinutes(c.getMinutes()+n);else if("hour"==o){var v=y.valueOf();y.setHours(c.getHours()+n),v==y.valueOf()&&y.setHours(c.getHours()+n+1)}else"day"==o?y.setDate(c.getDate()+n):"month"==o?y.setMonth(c.getMonth()+n):"year"==o&&y.setFullYear(c.getFullYear()+n);c=y,x=m+(c.valueOf()-t.valueOf())*p/(i.valueOf()-t.valueOf())*u}if(f)for(var N=0;N<g.length;N++)g[N].offset=r-g[N].offset;if(_>1&&"millisecond"!=o){for(var M=[],N=0;N<g.length;N+=_)M.push({offset:g[N].offset,value:g[N].value});g=M}if(!l&&!d&&g.length>1){var M=[];M.push({offset:0,value:void 0});for(var N=1;N<g.length;N++)M.push({offset:g[N-1].offset+(g[N].offset-g[N-1].offset)/2,value:void 0});var b=M.length;b>1?M.push({offset:M[b-1].offset+(M[b-1].offset-M[b-2].offset)}):M.push({offset:r,value:void 0}),g=M}if(a>n){for(var M=[],w=Math.round(a/_),N=0;N<g.length;N++)N%w==0&&M.push({offset:g[N].offset,value:g[N].value});g=M}return g},_hasStackValueReversal:function(e,t){var i=this.seriesGroups[e];if(-1==i.type.indexOf("stacked"))return!1;for(var r=-1!=i.type.indexOf("waterfall"),s=this._getDataLen(e),a=0,n=!1,o=[],l=0;l<i.series.length;l++)o[l]=this._isSerieVisible(e,l);for(var h=0;h<s;h++){var d=void 0;r||(n=!1);for(var f=0;f<i.series.length;f++)if(o[f]&&(val=this._getDataValueAsNumber(h,i.series[f].dataField,e),!isNaN(val))){if(i.series[f].summary){var g=this._getDataValue(h,i.series[f].summary,e);if(void 0!==g)continue}var u=n?val<0:val<t;if(n=!0,void 0==d&&(d=u),u!=d)return!0;d=u,a+=val}}return!1},_getValueAxis:function(e){var t=void 0==e?this.valueAxis:this.seriesGroups[e].valueAxis||this.valueAxis;return t||(t=this.valueAxis={}),t},_buildStats:function(e){var t={seriesGroups:[]};this._stats=t;for(var i=0;i<this.seriesGroups.length;i++){var r=this.seriesGroups[i];t.seriesGroups[i]={};var s=this._getXAxis(i),a=this._getValueAxis(i),n=this._getXAxisStats(i,s,"horizontal"!=r.orientation?e.width:e.height),o=t.seriesGroups[i];o.isValid=!0;var l="horizontal"==r.orientation?e.width:e.height,h=1==a.logarithmicScale,d=a.logarithmicScaleBase;isNaN(d)&&(d=10);var f=-1!=r.type.indexOf("stacked"),g=f&&-1!=r.type.indexOf("100"),u=-1!=r.type.indexOf("range"),c=-1!=r.type.indexOf("waterfall");if(c&&!this._moduleWaterfall)throw"Please include 'jqxchart.waterfall.js'";g&&(o.psums=[],o.nsums=[]);var m=NaN,x=NaN,_=NaN,p=NaN,y=a?a.baselineValue:NaN;isNaN(y)&&(y=h&&!g?1:0);var v=!1;0!=y&&f&&(v=this._hasStackValueReversal(i,y))&&(y=0),f&&c&&(v=this._hasStackValueReversal(i,y));var N=this._getDataLen(i),M=0,b=NaN,w=[];if(c)for(var A=0;A<r.series.length;A++)w.push(NaN);for(var S=NaN,C=0;C<N&&o.isValid;C++){if(s.rangeSelector){var k=s.dataField?this._getDataValue(C,s.dataField,i):C;if(k&&n.isDateTime&&(k=this._castAsDate(k,s.dateFormat)),n.useIndeces&&(k=C),k&&(k.valueOf()<n.min.valueOf()||k.valueOf()>n.max.valueOf()))continue}var D=a.minValue,O=a.maxValue;a.baselineValue&&(D=isNaN(D)?y:Math.min(y,D),O=isNaN(O)?y:Math.max(y,O));for(var F=0,j=0,A=0;A<r.series.length;A++)if(this._isSerieVisible(i,A)){var T=NaN,I=NaN,P=NaN;if(-1!=r.type.indexOf("candle")||-1!=r.type.indexOf("ohlc")){var q=["Open","Low","Close","High"];for(var L in q){var R=this._getDataValueAsNumber(C,r.series[A]["dataField"+q[L]],i);isNaN(R)||(P=isNaN(I)?R:Math.min(P,R),I=isNaN(I)?R:Math.max(I,R))}}else if(u){var G=this._getDataValueAsNumber(C,r.series[A].dataFieldFrom,i),V=this._getDataValueAsNumber(C,r.series[A].dataFieldTo,i);I=Math.max(G,V),P=Math.min(G,V)}else{if(T=this._getDataValueAsNumber(C,r.series[A].dataField,i),c){if(this._isSummary(i,C)){var E=this._getDataValue(C,r.series[A].summary,i);if(void 0!==E)continue}f?(isNaN(S)||(T+=S),S=T):(isNaN(w[A])?w[A]=T:T+=w[A],w[A]=T)}if(isNaN(T)||h&&T<=0)continue;P=I=T}(isNaN(O)||I>O)&&(isNaN(a.maxValue)||I<=a.maxValue)&&(O=I),(isNaN(D)||P<D)&&(isNaN(a.minValue)||P>=a.minValue)&&(D=P),isNaN(T)||!f||c||(T>y?F+=T:T<y&&(j+=T))}if(g||(isNaN(a.maxValue)||(F=Math.min(a.maxValue,F)),isNaN(a.minValue)||(j=Math.max(a.minValue,j))),h&&g)for(var A=0;A<r.series.length;A++)if(this._isSerieVisible(i,A)){var T=this._getDataValueAsNumber(C,r.series[A].dataField,i);if(isNaN(T)||T<=0)b=.01;else{var H=0==F?0:T/F;(isNaN(b)||H<b)&&(b=H)}}else b=.01;var B=F-j;M<B&&(M=B),g&&(o.psums[C]=F,o.nsums[C]=j),(O>x||isNaN(x))&&(x=O),(D<m||isNaN(m))&&(m=D),(F>_||isNaN(_))&&(_=F),(j<p||isNaN(p))&&(p=j)}g&&(_=0==_?0:Math.max(_,-p),p=0==p?0:Math.min(p,-_)),m==x&&(0==m?(m=-1,x=1):m<0?x=0:h?1==m&&(m/=d,x*=d):m=0);var z={gmin:m,gmax:x,gsumP:_,gsumN:p,gbase:y,isLogAxis:h,logBase:d,minPercent:b,gMaxRange:M,isStacked:f,isStacked100:g,isWaterfall:c,hasStackValueReversal:v,valueAxis:a,valueAxisSize:l};z.isStacked&&(z.gsumN<0&&(z.gmin=Math.min(z.gmin,z.gbase+z.gsumN)),z.gsumP>0&&(z.gmax=Math.max(z.gmax,z.gbase+z.gsumP))),o.context=z}this._mergeCommonValueAxisStats();for(var C=0;C<t.seriesGroups.length;C++){var o=t.seriesGroups[C];if(o.isValid){var W=this._calcOutputGroupStats(o.context);for(var L in W)o[L]=W[L];delete o.context}}},_mergeCommonValueAxisStats:function(){for(var e={},t=0;t<this.seriesGroups.length;t++)if(this._isGroupVisible(t)&&!this.seriesGroups[t].valueAxis){var i=this._stats.seriesGroups[t].context;e.gbase=i.gbase,(isNaN(e.gmin)||i.gmin<e.gmin)&&(e.gmin=i.gmin),(isNaN(e.gmax)||i.gmax>e.gmax)&&(e.gmax=i.gmax),(isNaN(e.gsumP)||i.gsumP>e.gsumP)&&(e.gsumP=i.gsumP),(isNaN(e.gsumN)||i.gsumN<e.gsumN)&&(e.gsumN=i.gsumN),(isNaN(e.logBase)||i.logBase<e.logBase)&&(e.logBase=i.logBase),(isNaN(e.minPercent)||i.minPercent<e.minPercent)&&(e.minPercent=i.minPercent),e.gsumN>0&&(e.gmin=Math.min(e.gmin,e.gbase+e.gsumN)),e.gsumP>0&&(e.gmax=Math.max(e.gmax,e.gbase+e.gsumP))}for(var t=0;t<this.seriesGroups.length;t++)if(!this.seriesGroups[t].valueAxis){var r=this._stats.seriesGroups[t].context;for(var s in e)r[s]=e[s]}},_calcOutputGroupStats:function(t){var i=t.gmin,r=t.gmax,s=t.gsumP,a=t.gsumN,n=t.gbase,o=t.isLogAxis,l=t.logBase,h=t.minPercent,d=t.gMaxRange,f=t.isStacked,g=t.isStacked100,u=t.isWaterfall,c=t.hasStackValueReversal,m=t.valueAxis,x=t.valueAxisSize,_=t.valueAxis.unitInterval;_||(_=this._calcInterval(i,r,Math.max(x/80,2))),i==r&&(i=n,r*=2);var p=NaN,y=0,v=0;if(o){if(g){p=0;var N=1;for(y=v=e.jqx.log(100,l);N>h;)N/=l,y--,p++;i=Math.pow(l,y)}else f&&!u&&(r=Math.max(r,s)),v=e.jqx._rnd(e.jqx.log(r,l),1,!0),r=Math.pow(l,v),y=e.jqx._rnd(e.jqx.log(i,l),1,!1),i=Math.pow(l,y);_=l}i<a&&(a=i),r>s&&(s=r);var M=o?i:e.jqx._rnd(i,_,!1),b=o?r:e.jqx._rnd(r,_,!0);if(g&&b>100&&(b=100),g&&!o&&(b=b>0?100:0,M=M<0?-100:0,_=m.unitInterval,(isNaN(_)||_<=0||_>=100)&&(_=10),100%_!=0))for(;_>=1&&100%_!=0;_--);return isNaN(b)||isNaN(M)||isNaN(_)?{}:(isNaN(p)&&(p=parseInt(((b-M)/(0==_?1:_)).toFixed())),o&&!g&&(p=v-y,d=Math.pow(l,p)),p<1?{}:{min:M,max:b,logarithmic:o,logBase:l,base:o?M:n,minPow:y,maxPow:v,sumP:s,sumN:a,mu:_,maxRange:d,intervals:p,hasStackValueReversal:c})},_getDataLen:function(t){var i=this.source;return void 0!=t&&-1!=t&&this.seriesGroups[t].source&&(i=this.seriesGroups[t].source),i instanceof e.jqx.dataAdapter&&(i=i.records),i?i.length:0},_getDataValue:function(t,i,r){var s=this.source;if(void 0!=r&&-1!=r&&(s=this.seriesGroups[r].source||s),s instanceof e.jqx.dataAdapter&&(s=s.records),!(!s||t<0||t>s.length-1))return e.isFunction(i)?i(t,s):i&&""!=i?s[t][i]:s[t]},_getDataValueAsNumber:function(e,t,i){var r=this._getDataValue(e,t,i);return this._isDate(r)?r.valueOf():("number"!=typeof r&&(r=parseFloat(r)),"number"!=typeof r&&(r=void 0),r)},_isPieGroup:function(e){var t=this.seriesGroups[e];return!(!t||!t.type)&&(-1!=t.type.indexOf("pie")||-1!=t.type.indexOf("donut"))},_renderPieSeries:function(t,i){for(var r=this._getDataLen(t),s=this.seriesGroups[t],a=this._calcGroupOffsets(t,i).offsets,n=0;n<s.series.length;n++){var o=s.series[n];if(!o.customDraw){var l=this._getSerieSettings(t,n),h=(o.colorScheme||s.colorScheme||this.colorScheme,this._getAnimProps(t,n)),d=h.enabled&&r<5e3&&!this._isToggleRefresh&&1!=this._isVML?h.duration:0;e.jqx.mobile.isMobileBrowser()&&this.renderer instanceof e.jqx.HTML5Renderer&&(d=0);var f=this._get([o.minAngle,o.startAngle]);(isNaN(f)||f<0||f>360)&&(f=0);var g=this._get([o.maxAngle,o.endAngle]);(isNaN(g)||g<0||g>360)&&(g=360);for(var u={rect:i,minAngle:f,maxAngle:g,groupIndex:t,serieIndex:n,settings:l,items:[]},c=0;c<r;c++){var m=a[n][c];if(m.visible){var x=m.fromAngle,_=m.toAngle,p=this.renderer.pieslice(m.x,m.y,m.innerRadius,m.outerRadius,x,0==d?_:x,m.centerOffset);this._setRenderInfo(t,n,c,{element:p});var y={displayValue:m.displayValue,itemIndex:c,visible:m.visible,x:m.x,y:m.y,innerRadius:m.innerRadius,outerRadius:m.outerRadius,fromAngle:x,toAngle:_,centerOffset:m.centerOffset};u.items.push(y)}}this._animatePieSlices(u,0);var v=this;this._enqueueAnimation("series",void 0,void 0,d,function(e,t,i){v._animatePieSlices(t,i)},u)}}},_sliceSortFunction:function(e,t){return e.fromAngle-t.fromAngle},_animatePieSlices:function(e,t){var i;this._elementRenderInfo&&this._elementRenderInfo.length>e.groupIndex&&this._elementRenderInfo[e.groupIndex].series&&this._elementRenderInfo[e.groupIndex].series.length>e.serieIndex&&(i=this._elementRenderInfo[e.groupIndex].series[e.serieIndex]);for(var r=this.seriesGroups[e.groupIndex],s=this._getLabelsSettings(e.groupIndex,e.serieIndex,NaN),a=s.visible,n=[],o=0;o<e.items.length;o++){var l=e.items[o];if(l.visible){var h=l.fromAngle,d=l.fromAngle+t*(l.toAngle-l.fromAngle);if(i&&i[l.displayValue]){var f=i[l.displayValue].fromAngle,g=i[l.displayValue].toAngle;h=f+(h-f)*t,d=g+(d-g)*t}n.push({index:o,from:h,to:d})}}i&&n.sort(this._sliceSortFunction);for(var u=NaN,o=0;o<n.length;o++){var l=e.items[n[o].index],c=this._getRenderInfo(e.groupIndex,e.serieIndex,l.itemIndex),h=n[o].from,d=n[o].to;i&&(!isNaN(u)&&h>u&&(h=u),u=d,o==n.length-1&&d!=n[0].from&&(d=e.maxAngle+n[0].from));var m=this.renderer.pieSlicePath(l.x,l.y,l.innerRadius,l.outerRadius,h,d,l.centerOffset);this.renderer.attr(c.element,{d:m});var x=this._getColors(e.groupIndex,e.serieIndex,l.itemIndex,"radialGradient",l.outerRadius),_=e.settings;c.colors=x,c.settings=_,this.renderer.attr(c.element,{fill:x.fillColor,stroke:x.lineColor,"stroke-width":_.stroke,"fill-opacity":_.opacity,"stroke-opacity":_.opacity,"stroke-dasharray":"none"});r.series[e.serieIndex];a&&this._showPieLabel(e.groupIndex,e.serieIndex,l.itemIndex,s),1==t&&this._installHandlers(c.element,"pieslice",e.groupIndex,e.serieIndex,l.itemIndex)}},_showPieLabel:function(t,i,r,s,a){var n=this._renderData[t].offsets[i][r];if(n.elementInfo.labelElement&&this.renderer.removeElement(n.elementInfo.labelElement),s||(s=this._getLabelsSettings(t,i,NaN)),s.visible){var o=n.fromAngle,l=n.toAngle,h=Math.abs(o-l);h>360&&(o=0,l=360);var d=(Math.PI,Math.PI,h/2+o);d%=360;var f,g=d*Math.PI*2/360;1==s.autoRotate&&(f=d<90||d>270?360-d:180-d);var u=s.linesEnabled,c=this._showLabel(t,i,r,{x:0,y:0,width:0,height:0},"center","center",!0,!1,!1,f),m=s.radius||n.outerRadius+Math.max(c.width,c.height);this._isPercent(m)&&(m=parseFloat(m)/100*Math.min(this._plotRect.width,this._plotRect.height)/2),m+=n.centerOffset,isNaN(a)&&(a=0),m+=a;var x=this.seriesGroups[t],_=x.series[i],p=e.jqx.getNum([_.offsetX,x.offsetX,this._plotRect.width/2]),y=e.jqx.getNum([_.offsetY,x.offsetY,this._plotRect.height/2]),v=this._plotRect.x+p,N=this._plotRect.y+y,M=this._adjustTextBoxPosition(v,N,c,m,d,n.outerRadius>m,0!=s.linesAngles,1==s.autoRotate),b={};if(n.elementInfo.labelElement=this._showLabel(t,i,r,{x:M.x,y:M.y,width:c.width,height:c.height},"left","top",!1,!1,!1,f,b),m>n.outerRadius+5&&0!=u){var w={lineColor:n.elementInfo.colors.lineColor,stroke:n.elementInfo.settings.stroke,opacity:n.elementInfo.settings.opacity,dashStyle:n.elementInfo.settings.dashStyle};n.elementInfo.labelArrowPath=this._updateLebelArrowPath(n.elementInfo.labelArrowPath,v,N,m,n.outerRadius+a,g,0!=s.linesAngles,w,b)}}},_updateLebelArrowPath:function(t,i,r,s,a,n,o,l,h){var d=e.jqx._ptrnd(i+(s-0)*Math.cos(n)),f=e.jqx._ptrnd(r-(s-0)*Math.sin(n)),g=e.jqx._ptrnd(i+(a+2)*Math.cos(n)),u=e.jqx._ptrnd(r-(a+2)*Math.sin(n)),c=[];c.push({x:h.x+h.width/2,y:h.y}),c.push({x:h.x+h.width/2,y:h.y+h.height}),c.push({x:h.x,y:h.y+h.height/2}),c.push({x:h.x+h.width,y:h.y+h.height/2}),o||(c.push({x:h.x,y:h.y}),c.push({x:h.x+h.width,y:h.y}),c.push({x:h.x+h.width,y:h.y+h.height}),c.push({x:h.x,y:h.y+h.height})),c=c.sort(function(t,s){return e.jqx._ptdist(t.x,t.y,i,r)-e.jqx._ptdist(s.x,s.y,i,r)}),c=c.sort(function(e,t){return Math.abs(e.x-i)+Math.abs(e.y-r)-(Math.abs(t.x-i)+Math.abs(t.y-r))});for(var m=0;m<c.length;m++)c[m].x=e.jqx._ptrnd(c[m].x),c[m].y=e.jqx._ptrnd(c[m].y);d=c[0].x,f=c[0].y;var x="M "+d+","+f+" L"+g+","+u;return o&&(x="M "+d+","+f+" L"+g+","+f+" L"+g+","+u),t?this.renderer.attr(t,{d:x}):t=this.renderer.path(x,{}),this.renderer.attr(t,{fill:"none",stroke:l.lineColor,"stroke-width":l.stroke,"stroke-opacity":l.opacity,"stroke-dasharray":"none"}),t},_adjustTextBoxPosition:function(t,i,r,s,a,n,o,l){var h=a*Math.PI*2/360,d=e.jqx._ptrnd(t+s*Math.cos(h)),f=e.jqx._ptrnd(i-s*Math.sin(h));if(l){var g=r.width,u=r.height,c=Math.atan(u/g)%(2*Math.PI),m=h%(2*Math.PI),x=0;m<=c?x=g/2*Math.cos(h):m>=c&&m<Math.PI-c?x=u/2*Math.sin(h):m>=Math.PI-c&&m<Math.PI+c?x=g/2*Math.cos(h):m>=Math.PI+c&&m<2*Math.PI-c?x=u/2*Math.sin(h):m>=2*Math.PI-c&&m<2*Math.PI&&(x=g/2*Math.cos(h)),s+=Math.abs(x)+3;var d=e.jqx._ptrnd(t+s*Math.cos(h)),f=e.jqx._ptrnd(i-s*Math.sin(h));return d-=r.width/2,f-=r.height/2,{x:d,y:f}}return n?(d-=r.width/2,f-=r.height/2):o?a>=90&&a<270?(f-=r.height/2,d-=r.width):f-=r.height/2:a>=0&&a<45||a>=315&&a<360?f-=r.height/2:a>=45&&a<135?(f-=r.height,d-=r.width/2):a>=135&&a<225?(f-=r.height/2,d-=r.width):a>=225&&a<315&&(d-=r.width/2),{x:d,y:f}},_isColumnType:function(e){return-1!=e.indexOf("column")||-1!=e.indexOf("waterfall")},_getColumnGroupsCount:function(e){var t=0;e=e||"vertical";for(var i=this.seriesGroups,r=0;r<i.length;r++){var s=i[r].orientation||"vertical";this._isColumnType(i[r].type)&&s==e&&t++}return this.columnSeriesOverlap&&(t=1),t},_getColumnGroupIndex:function(e){for(var t=0,i=this.seriesGroups[e].orientation||"vertical",r=0;r<e;r++){var s=this.seriesGroups[r],a=s.orientation||"vertical";this._isColumnType(s.type)&&a==i&&t++}return t},_renderAxisBands:function(t,i,r){var s=r?this._getXAxis(t):this._getValueAxis(t),a=this.seriesGroups[t],n=r?void 0:a.bands;if(!n){for(var o=0;o<t;o++){if((r?this._getXAxis(o):this._getValueAxis(o))==s)return}n=s.bands}if(e.isArray(n)){var l=i,h="horizontal"==a.orientation;h&&(l={x:i.y,y:i.x,width:i.height,height:i.width}),this._calcGroupOffsets(t,l);for(var o=0;o<n.length;o++){var d,f=n[o],g=this._get([f.minValue,f.from]),u=this._get([f.maxValue,f.to]),c=r?this.getXAxisDataPointOffset(g,t):this.getValueAxisDataPointOffset(g,t),m=r?this.getXAxisDataPointOffset(u,t):this.getValueAxisDataPointOffset(u,t),x=Math.abs(c-m);if(a.polar||a.spider){var _=this._renderData[t],p=_.polarCoords;if(r)if(a.spider){p1=this.getPolarDataPointOffset(g,this._stats.seriesGroups[t].max,t),p2=this.getPolarDataPointOffset(u,this._stats.seriesGroups[t].max,t);var y="M "+p.x+","+p.y;y+=" L "+p1.x+","+p1.y,y+=" L "+p2.x+","+p2.y,d=this.renderer.path(y)}else{var v={},N={x:Math.min(c,m),y:i.y,width:x,height:i.height};this._columnAsPieSlice(v,i,p,N),d=v.element}else{var M=this._toPolarCoord(p,i,i.x,_.baseOffset),b=this._toPolarCoord(p,i,i.x,c),w=this._toPolarCoord(p,i,i.x,m),A=e.jqx._ptdist(M.x,M.y,b.x,b.y),S=e.jqx._ptdist(M.x,M.y,w.x,w.y),C=Math.round(360*-p.startAngle/(2*Math.PI)),k=Math.round(360*-p.endAngle/(2*Math.PI));if(C>k){var D=C;C=k,k=D}if(a.spider){var O=_.xAxis.offsetAngles,y="",F=[S,A],j=O;p.isClosedCircle&&(j=e.extend([],O),j.push(j[0]));for(var T in F){for(var I=0;I<j.length;I++){var P=0==T?I:O.length-I-1,q=p.x+F[T]*Math.cos(j[P]),L=p.y+F[T]*Math.sin(j[P]);y+=""==y?"M ":" L",y+=e.jqx._ptrnd(q)+","+e.jqx._ptrnd(L)}if(0==T){var q=p.x+F[1]*Math.cos(j[P]),L=p.y+F[1]*Math.sin(j[P]);y+=" L"+e.jqx._ptrnd(q)+","+e.jqx._ptrnd(L)}}y+=" Z",d=this.renderer.path(y)}else d=this.renderer.pieslice(p.x,p.y,A,S,C,k)}}else{var R={x:Math.min(c,m),y:l.y,width:x,height:l.height};if(r||(R={x:l.x,y:Math.min(c,m),width:l.width,height:x}),h){var D=R.x;R.x=R.y,R.y=D,D=R.width,R.width=R.height,R.height=D}d=0==x||1==x?this.renderer.line(e.jqx._ptrnd(R.x),e.jqx._ptrnd(R.y),e.jqx._ptrnd(R.x+(h?0:R.width)),e.jqx._ptrnd(R.y+(h?R.height:0))):this.renderer.rect(R.x,R.y,R.width,R.height)}var G=f.fillColor||f.color||"#AAAAAA",V=f.lineColor||G,E=f.lineWidth;isNaN(E)&&(E=1);var H=f.opacity;(isNaN(H)||H<0||H>1)&&(H=1),this.renderer.attr(d,{fill:G,"fill-opacity":H,stroke:V,"stroke-opacity":H,"stroke-width":E,"stroke-dasharray":f.dashStyle})}}},_getColumnGroupWidth:function(e,t,i){var r=this.seriesGroups[e],s=-1!=r.type.indexOf("stacked"),a=(s||r.series.length,this._getColumnGroupsCount(r.orientation));(isNaN(a)||0==a)&&(a=1);var n=t.rangeLength>=1?t.itemWidth:.9*i,o=r.columnsMinWidth;isNaN(o)&&(o=1),isNaN(r.columnsMaxWidth)||(o=Math.min(r.columnsMaxWidth,o)),o>n&&t.length>0&&(n=Math.max(n,.9*i/t.length));var l=o;if(!s){var h=r.seriesGapPercent;(isNaN(h)||h<0)&&(h=10),h/=100;var d=o;d*=1+h,l+=r.series.length*d}return{requiredWidth:l,availableWidth:n,targetWidth:Math.max(n/a,l)}},_getColumnSerieWidthAndOffset:function(e,t){var i=this.seriesGroups[e],r=(i.series[t],"horizontal"==i.orientation),s=this._plotRect;r&&(s={x:s.y,y:s.x,width:s.height,height:s.width});var a=this._calcGroupOffsets(e,s);if(a&&0!=a.xoffsets.length){var n=this._getColumnGroupsCount(i.orientation);"candlestick"!=i.type&&"ohlc"!=i.type||(n=1);var o=this._getColumnGroupIndex(e),l=this._getColumnGroupWidth(e,a.xoffsets,r?s.height:s.width),h=0,d=l.targetWidth;(1==this.columnSeriesOverlap||Math.round(d)>Math.round(l.availableWidth/n))&&(n=1,o=0),h-=d*n/2,h+=d*o;var f=i.columnsGapPercent;f<=0&&(f=0),(isNaN(f)||f>=100)&&(f=25),f/=100;var g=d*f
;g+l.requiredWidth>l.targetWidth&&(g=Math.max(0,l.targetWidth-l.requiredWidth)),Math.round(d)>Math.round(l.availableWidth)&&(g=0),d-=g,h+=g/2;var u=i.seriesGapPercent;(isNaN(u)||u<0)&&(u=10);var c=-1!=i.type.indexOf("stacked"),m=d;c||(m/=i.series.length);var x=this._get([i.seriesGap,d*u/100/(i.series.length-1)]);(1==i.polar||1==i.spider||c||i.series.length<=1)&&(x=0);var _=x*(i.series.length-1);i.series.length>1&&_>d-1*i.series.length&&(_=d-1*i.series.length,x=_/Math.max(1,i.series.length-1));var p=m-_/i.series.length,y=0,v=i.columnsMaxWidth;isNaN(v)||p>v&&(y=p-v,p=v);var N=0;if(c)N=y/2;else{N=(d-p*i.series.length-_)/2+p*t+Math.max(0,t)*x}return{width:p,offset:h+N}}},_renderColumnSeries:function(t,i){var r=this.seriesGroups[t];if(r.series&&0!=r.series.length){var s=(this._getDataLen(t),"horizontal"==r.orientation),a=i;s&&(a={x:i.y,y:i.x,width:i.height,height:i.width});var n=this._calcGroupOffsets(t,a);if(n&&0!=n.xoffsets.length){var o;1!=r.polar&&1!=r.spider||(o=this._getPolarAxisCoords(t,a));var l={groupIndex:t,rect:i,vertical:!s,seriesCtx:[],renderData:n,polarAxisCoords:o};l.columnGroupWidth=this._getColumnGroupWidth(t,n.xoffsets,s?a.height:a.width);for(var h=this._getGroupGradientType(t),d=0;d<r.series.length;d++){var f=r.series[d];if(!f.customDraw){var g=(f.dataField,this._getAnimProps(t,d)),u=g.enabled&&!this._isToggleRefresh&&n.xoffsets.length<100?g.duration:0,c=this._getColumnSerieWidthAndOffset(t,d),m=this._isSerieVisible(t,d),x=this._getSerieSettings(t,d),_=this._getColors(t,d,NaN,this._getGroupGradientType(t),4),p=[];if(e.isFunction(f.colorFunction)&&!o)for(var y=n.xoffsets.first;y<=n.xoffsets.last;y++)p.push(this._getColors(t,d,y,h,4));var v={seriesIndex:d,serieColors:_,itemsColors:p,settings:x,columnWidth:c.width,xAdjust:c.offset,isVisible:m};l.seriesCtx.push(v)}}this._animColumns(l,0==u?1:0);var N=this;this._enqueueAnimation("series",void 0,void 0,u,function(e,t,i){N._animColumns(t,i)},l)}}},_getPercent:function(e,t,i,r){return isNaN(e)&&(e=t),!isNaN(i)&&!isNaN(e)&&e<i&&(e=i),!isNaN(r)&&!isNaN(e)&&e>r&&(e=r),isNaN(e)?NaN:e},_getColumnVOffsets:function(e,t,i,r,s,a){var n=this.seriesGroups[t],o=this._getPercent(n.columnsTopWidthPercent,100,0,100),l=this._getPercent(n.columnsBottomWidthPercent,100,0,100);0==o&&0==l&&(l=100);for(var h=this._getPercent(n.columnsNeckHeightPercent,NaN,0,100)/100,d=this._getPercent(n.columnsNeckWidthPercent,100,0,100)/100,f=[],g=NaN,u=0;u<i.length;u++){var c,m=i[u],x=m.seriesIndex,_=(n.series[x],e.offsets[x][r].from),p=e.offsets[x][r].to,y=e.xoffsets.data[r],v=m.isVisible;v||(p=_);var N=this._elementRenderInfo;if(v&&N&&N.length>t&&N[t].series.length>x){var M=e.xoffsets.xvalues[r];c=N[t].series[x][M],!c||isNaN(c.from)||isNaN(c.to)||(_=c.from+(_-c.from)*a,p=c.to+(p-c.to)*a,y=c.xoffset+(y-c.xoffset)*a)}c||(p=_+(p-_)*(s?1:a)),isNaN(_)&&(_=isNaN(g)?e.baseOffset:g),g=!isNaN(p)&&s?p:_,isNaN(p)&&(p=_);var b={from:_,to:p,xOffset:y};100==o&&100==l||(b.funnel=!0,b.toWidthPercent=o,b.fromWidthPercent=l),f.push(b)}if(s&&f.length>1&&!(this._elementRenderInfo&&this._elementRenderInfo.length>t)){for(var w=0,A=0,S=-1/0,C=1/0,k=1/0,D=-1/0,O=0;O<f.length;O++){var m=i[O];m.isVisible&&(f[O].to>=f[O].from?(A+=f[O].to-f[O].from,k=Math.min(k,f[O].from),D=Math.max(D,f[O].to)):(w+=f[O].from-f[O].to,S=Math.max(S,f[O].from),C=Math.min(C,f[O].to)))}var F=w,j=A;w*=a,A*=a;for(var T=0,I=0,O=0;O<f.length;O++)if(f[O].to>=f[O].from){var P=f[O].to-f[O].from;P+I>A&&(P=Math.max(0,A-I),f[O].to=f[O].from+P),100==o&&100==l||(f[O].funnel=!0,!isNaN(h)&&j*h>=I?f[O].fromWidthPercent=100*d:f[O].fromWidthPercent=Math.abs(f[O].from-k)/j*(o-l)+l,!isNaN(h)&&j*h>=0+(I+P)?f[O].toWidthPercent=100*d:f[O].toWidthPercent=Math.abs(f[O].to-k)/j*(o-l)+l),I+=P}else{var P=f[O].from-f[O].to;P+T>w&&(P=Math.max(0,w-T),f[O].to=f[O].from-P),100==o&&100==l||(f[O].funnel=!0,!isNaN(h)&&F*h>=T?f[O].fromWidthPercent=100*d:f[O].fromWidthPercent=Math.abs(f[O].from-S)/F*(o-l)+l,!isNaN(h)&&F*h>=0+(T+P)?f[O].toWidthPercent=100*d:f[O].toWidthPercent=Math.abs(f[O].to-S)/F*(o-l)+l),T+=P}}return f},_columnAsPieSlice:function(t,i,r,s){var a=this._toPolarCoord(r,i,s.x,s.y),n=this._toPolarCoord(r,i,s.x,s.y+s.height),o=e.jqx._ptdist(r.x,r.y,n.x,n.y),l=e.jqx._ptdist(r.x,r.y,a.x,a.y),h=i.width,d=180*Math.abs(r.startAngle-r.endAngle)/Math.PI,f=-(s.x-i.x)*d/h,g=-(s.x+s.width-i.x)*d/h,u=r.startAngle;if(u=360*u/(2*Math.PI),f-=u,g-=u,t)if(void 0!=t.element){var c=this.renderer.pieSlicePath(r.x,r.y,o,l,g,f,0);c+=" Z",this.renderer.attr(t.element,{d:c})}else t.element=this.renderer.pieslice(r.x,r.y,o,l,g,f,0);return{fromAngle:g,toAngle:f,innerRadius:o,outerRadius:l}},_setRenderInfo:function(e,t,i,r){this._renderData[e].offsets[t][i].elementInfo=r},_getRenderInfo:function(e,t,i){return this._renderData[e].offsets[t][i].elementInfo||{}},_animColumns:function(t,i){for(var r=this,s=t.groupIndex,a=this.seriesGroups[s],n=t.renderData,o=-1!=a.type.indexOf("waterfall"),l=this._getXAxis(s),h=-1!=a.type.indexOf("stacked"),d=t.polarAxisCoords,f=(this._getGroupGradientType(s),t.columnGroupWidth.targetWidth,-1),g=0;g<a.series.length;g++)if(this._isSerieVisible(s,g)){f=g;break}for(var u=NaN,c=NaN,g=0;g<t.seriesCtx.length;g++){var m=t.seriesCtx[g];(isNaN(u)||u>m.xAdjust)&&(u=m.xAdjust),(isNaN(c)||c<m.xAdjust+m.columnWidth)&&(c=m.xAdjust+m.columnWidth)}var x=Math.abs(c-u),_=this._get([a.columnsGapPercent,25])/100;(isNaN(_)<0||_>=1)&&(_=.25);for(var p=_*x,y=t.renderData.xoffsets,v=-1,N={},M=1==a.skipOverlappingPoints,b=y.first;b<=y.last;b++){var w=y.data[b];if(!isNaN(w)&&!(-1!=v&&Math.abs(w-v)<x-1+p&&M)){v=w;var A=this._getColumnVOffsets(n,s,t.seriesCtx,b,h,i),S=!1;if(o)for(var C=0;C<a.series.length;C++)a.series[C].summary&&y.xvalues[b][a.series[C].summary]&&(S=!0);for(var C=0;C<t.seriesCtx.length;C++){var m=t.seriesCtx[C],k=m.seriesIndex,D=a.series[k],O=A[C].from,F=A[C].to,j=A[C].xOffset,T=(t.vertical?t.rect.x:t.rect.y)+m.xAdjust,I=m.settings,P=0!=m.itemsColors.length?m.itemsColors[b-n.xoffsets.first]:m.serieColors,q=this._isSerieVisible(s,k);if(q){var w=e.jqx._ptrnd(T+j),L={x:w,width:m.columnWidth};A[C].funnel&&(L.fromWidthPercent=A[C].fromWidthPercent,L.toWidthPercent=A[C].toWidthPercent);var R=!0;t.vertical?(L.y=O,L.height=F-O,L.height<0&&(L.y+=L.height,L.height=-L.height,R=!1)):(L.x=O<F?O:F,L.width=Math.abs(O-F),R=O-F<0,L.y=w,L.height=m.columnWidth);var G=O-F;if(!isNaN(G)){G=Math.abs(G);var V=void 0,E=r._getRenderInfo(s,k,b),H=E.element,B=E.labelElement,z=void 0==H;if(B&&(r.renderer.removeElement(B),B=void 0),d){var W={element:H};V=this._columnAsPieSlice(W,t.rect,d,L),H=W.element;var P=this._getColors(s,k,void 0,"radialGradient",V.outerRadius)}else if(A[C].funnel){var X=this._getTrapezoidPath(e.extend({},L),t.vertical,R);z?H=this.renderer.path(X,{}):this.renderer.attr(H,{d:X})}else z?H=this.renderer.rect(L.x,L.y,t.vertical?L.width:0,t.vertical?0:L.height):1==t.vertical?this.renderer.attr(H,{x:L.x,y:L.y,height:G}):this.renderer.attr(H,{x:L.x,y:L.y,width:G});if(G<1&&(1!=i||d)?this.renderer.attr(H,{display:"none"}):this.renderer.attr(H,{display:"block"}),z&&this.renderer.attr(H,{fill:P.fillColor,"fill-opacity":I.opacity,"stroke-opacity":I.opacity,stroke:P.lineColor,"stroke-width":I.stroke,"stroke-dasharray":I.dashStyle}),B&&this.renderer.removeElement(B),!q||0==G&&i<1)E={element:H,labelElement:B},r._setRenderInfo(s,k,b,E);else{if(o&&0!=this._get([D.showWaterfallLines,a.showWaterfallLines])){if(!h||h&&C==f){var U=h?-1:C;if(1==i&&!isNaN(n.offsets[C][b].from)&&!isNaN(n.offsets[C][b].to)){var Y=N[U];if(void 0!=Y){var Z={x:Y.x,y:e.jqx._ptrnd(Y.y)},J={x:w,y:Z.y},Q=a.columnsTopWidthPercent/100;isNaN(Q)?Q=1:(Q>1||Q<0)&&(Q=1);var K=a.columnsBottomWidthPercent/100;isNaN(K)?K=1:(K>1||K<0)&&(K=1);var $=t.vertical?L.width:L.height;if(Z.x=Z.x-$/2+$/2*Q,S){var ee=$*Q/2;J.x=J.x+$/2-(l.flip?-ee:ee)}else{var ee=$*K/2;J.x=J.x+$/2-(l.flip?-ee:ee)}t.vertical||(this._swapXY([Z]),this._swapXY([J])),this.renderer.line(Z.x,Z.y,J.x,J.y,{stroke:Y.color,"stroke-width":I.stroke,"stroke-opacity":I.opacity,"fill-opacity":I.opacity,"stroke-dasharray":I.dashStyle})}}}1==i&&0!=G&&(N[h?-1:C]={y:F,x:t.vertical?L.x+L.width:L.y+L.height,color:P.lineColor})}if(d){var $=(this._toPolarCoord(d,t.rect,L.x+L.width/2,L.y),this._showLabel(s,k,b,L,void 0,void 0,!0)),te=V.outerRadius+10;labelOffset=this._adjustTextBoxPosition(d.x,d.y,$,te,(V.fromAngle+V.toAngle)/2,!0,!1,!1),B=this._showLabel(s,k,b,{x:labelOffset.x,y:labelOffset.y},void 0,void 0,!1,!1,!1)}else B=this._showLabel(s,k,b,L,void 0,void 0,!1,!1,R);E={element:H,labelElement:B},r._setRenderInfo(s,k,b,E),1==i&&this._installHandlers(H,"column",s,k,b)}}}}}}},_getTrapezoidPath:function(t,i,r){var s="",a=t.fromWidthPercent/100,n=t.toWidthPercent/100;if(!i){var o=t.width;t.width=t.height,t.height=o,o=t.x,t.x=t.y,t.y=o}var l=t.x+t.width/2,h=[{x:l-t.width*(r?n:a)/2,y:t.y+t.height},{x:l-t.width*(r?a:n)/2,y:t.y},{x:l+t.width*(r?a:n)/2,y:t.y},{x:l+t.width*(r?n:a)/2,y:t.y+t.height}];i||this._swapXY(h),s+="M "+e.jqx._ptrnd(h[0].x)+","+e.jqx._ptrnd(h[0].y);for(var d=1;d<h.length;d++)s+=" L "+e.jqx._ptrnd(h[d].x)+","+e.jqx._ptrnd(h[d].y);return s+=" Z"},_swapXY:function(e){for(var t=0;t<e.length;t++){var i=e[t].x;e[t].x=e[t].y,e[t].y=i}},_renderCandleStickSeries:function(t,i,r){var s=this,a=s.seriesGroups[t];if(a.series&&0!=a.series.length){var n="horizontal"==a.orientation,o=i;n&&(o={x:i.y,y:i.x,width:i.height,height:i.width});var l=s._calcGroupOffsets(t,o);if(l&&0!=l.xoffsets.length){var h;o.width;(a.polar||a.spider)&&(h=s._getPolarAxisCoords(t,o),2*h.r);for(var d=(s._alignValuesWithTicks(t),s._getGroupGradientType(t)),f=[],g=0;g<a.series.length;g++)f[g]=s._getColumnSerieWidthAndOffset(t,g);for(var g=0;g<a.series.length;g++)if(this._isSerieVisible(t,g)){var u=s._getSerieSettings(t,g),c=a.series[g];if(!c.customDraw){var m=e.isFunction(c.colorFunction)?void 0:s._getColors(t,g,NaN,d),x={rect:i,inverse:n,groupIndex:t,seriesIndex:g,symbolType:c.symbolType,symbolSize:c.symbolSize,"fill-opacity":u.opacity,"stroke-opacity":u.opacity,"stroke-width":u.stroke,"stroke-dasharray":u.dashStyle,gradientType:d,colors:m,renderData:l,polarAxisCoords:h,columnsInfo:f,isOHLC:r,items:[],self:s},_=s._getAnimProps(t,g),p=_.enabled&&!s._isToggleRefresh&&l.xoffsets.length<5e3?_.duration:0;s._animCandleStick(x,0);s._enqueueAnimation("series",void 0,void 0,p,function(e,t,i){s._animCandleStick(t,i)},x)}}}}},_animCandleStick:function(t,i){var r=["Open","Low","Close","High"],s=t.columnsInfo[t.seriesIndex].width,a=t.self.seriesGroups[t.groupIndex],n=t.renderData.xoffsets,o=-1,l=Math.abs(n.data[n.last]-n.data[n.first]);l*=i;for(var h=NaN,d=NaN,f=0;f<t.columnsInfo.length;f++){var g=t.columnsInfo[f];(isNaN(h)||h>g.offset)&&(h=g.offset),(isNaN(d)||d<g.offset+g.width)&&(d=g.offset+g.width)}for(var u=Math.abs(d-h),c=0!=a.skipOverlappingPoints,m=n.first;m<=n.last;m++){var x=n.data[m];if(!isNaN(x)&&!(-1!=o&&Math.abs(x-o)<u&&c)){if(Math.abs(n.data[m]-n.data[n.first])>l)break;o=x;var _=t.items[m]=t.items[m]||{};for(var f in r){var p=t.self._getDataValueAsNumber(m,a.series[t.seriesIndex]["dataField"+r[f]],t.groupIndex);if(isNaN(p))break;var y=t.renderData.offsets[t.seriesIndex][m][r[f]];if(isNaN(y))break;_[r[f]]=y}if(x+=t.inverse?t.rect.y:t.rect.x,t.polarAxisCoords){var v=this._toPolarCoord(t.polarAxisCoords,this._plotRect,x,y);x=v.x,y=v.y}x=e.jqx._ptrnd(x);for(var N in r)_[N]=e.jqx._ptrnd(_[N]);var M=t.colors;if(M||(M=t.self._getColors(t.groupIndex,t.seriesIndex,m,t.gradientType)),t.isOHLC){var b="M"+x+","+_.Low+" L"+x+","+_.High+" M"+(x-s/2)+","+_.Open+" L"+x+","+_.Open+" M"+(x+s/2)+","+_.Close+" L"+x+","+_.Close;t.inverse&&(b="M"+_.Low+","+x+" L"+_.High+","+x+" M"+_.Open+","+(x-s/2)+" L"+_.Open+","+x+" M"+_.Close+","+x+" L"+_.Close+","+(x+s/2));var w=_.lineElement;w||(w=this.renderer.path(b,{}),this.renderer.attr(w,{fill:M.fillColor,"fill-opacity":t["fill-opacity"],"stroke-opacity":t["fill-opacity"],stroke:M.lineColor,"stroke-width":t["stroke-width"],"stroke-dasharray":t["stroke-dasharray"]}),_.lineElement=w),1==i&&this._installHandlers(w,"column",t.groupIndex,t.seriesIndex,m)}else{var w=_.lineElement;w||(w=t.inverse?this.renderer.line(_.Low,x,_.High,x):this.renderer.line(x,_.Low,x,_.High),this.renderer.attr(w,{fill:M.fillColor,"fill-opacity":t["fill-opacity"],"stroke-opacity":t["fill-opacity"],stroke:M.lineColor,"stroke-width":t["stroke-width"],"stroke-dasharray":t["stroke-dasharray"]}),_.lineElement=w);var A=_.stickElement;if(x-=s/2,!A){var S=M.fillColor;_.Close<=_.Open&&M.fillColorAlt&&(S=M.fillColorAlt),A=t.inverse?this.renderer.rect(Math.min(_.Open,_.Close),x,Math.abs(_.Close-_.Open),s):this.renderer.rect(x,Math.min(_.Open,_.Close),s,Math.abs(_.Close-_.Open)),this.renderer.attr(A,{fill:S,"fill-opacity":t["fill-opacity"],"stroke-opacity":t["fill-opacity"],stroke:M.lineColor,"stroke-width":t["stroke-width"],"stroke-dasharray":t["stroke-dasharray"]}),_.stickElement=A}1==i&&this._installHandlers(A,"column",t.groupIndex,t.seriesIndex,m)}}}},_renderScatterSeries:function(t,i,r){var s=this.seriesGroups[t];if(s.series&&0!=s.series.length){var a=-1!=s.type.indexOf("bubble"),n="horizontal"==s.orientation,o=i;n&&(o={x:i.y,y:i.x,width:i.height,height:i.width});var l=this._calcGroupOffsets(t,o);if(l&&0!=l.xoffsets.length){var h,d=o.width;(s.polar||s.spider)&&(h=this._getPolarAxisCoords(t,o),d=2*h.r);var f=(this._alignValuesWithTicks(t),this._getGroupGradientType(t));r||(r="to");for(var g=0;g<s.series.length;g++){var u=this._getSerieSettings(t,g),c=s.series[g];if(!c.customDraw){var m=c.dataField,x=e.isFunction(c.colorFunction),_=this._getColors(t,g,NaN,f),p=NaN,y=NaN;if(a)for(var v=l.xoffsets.first;v<=l.xoffsets.last;v++){var N=this._getDataValueAsNumber(v,c.radiusDataField||c.sizeDataField,t);if("number"!=typeof N)throw"Invalid radiusDataField value at ["+v+"]";isNaN(N)||((isNaN(p)||N<p)&&(p=N),(isNaN(y)||N>y)&&(y=N))}var M=c.minRadius||c.minSymbolSize;isNaN(M)&&(M=d/50);var b=c.maxRadius||c.maxSymbolSize;isNaN(b)&&(b=d/25),M>b&&(b=M);var w=c.radius;w=isNaN(w)&&!isNaN(c.symbolSize)?"circle"==c.symbolType?c.symbolSize/2:c.symbolSize:5;for(var A=this._getAnimProps(t,g),S=A.enabled&&!this._isToggleRefresh&&l.xoffsets.length<5e3?A.duration:0,C={groupIndex:t,seriesIndex:g,symbolType:c.symbolType,symbolSize:c.symbolSize,"fill-opacity":u.opacity,"stroke-opacity":u.opacity,"stroke-width":u.stroke,"stroke-width-symbol":u.strokeSymbol,"stroke-dasharray":u.dashStyle,items:[],polarAxisCoords:h},v=l.xoffsets.first;v<=l.xoffsets.last;v++){var N=this._getDataValueAsNumber(v,m,t);if("number"==typeof N){var k=l.xoffsets.data[v],D=l.xoffsets.xvalues[v],O=l.offsets[g][v][r];if(!(O<o.y||O>o.y+o.height||isNaN(k)||isNaN(O))){if(n){var F=k;k=O,O=F+i.y}else k+=i.x;var j=w;if(a){var T=this._getDataValueAsNumber(v,c.radiusDataField||c.sizeDataField,t);if("number"!=typeof T)continue;j=M+(b-M)*(T-p)/Math.max(1,y-p),isNaN(j)&&(j=M)}l.offsets[g][v].radius=j;var I=NaN,P=NaN,q=0,L=this._elementRenderInfo;if(void 0!=D&&L&&L.length>t&&L[t].series.length>g){var R=L[t].series[g][D];if(R&&!isNaN(R.to)){if(I=R.to,P=R.xoffset,q=w,n){var F=P;P=I,I=F+i.y}else P+=i.x;a&&(q=M+(b-M)*(R.valueRadius-p)/Math.max(1,y-p),isNaN(q)&&(q=M))}}x&&(_=this._getColors(t,g,v,f)),C.items.push({from:q,to:j,itemIndex:v,fill:_.fillColor,stroke:_.lineColor,x:k,y:O,xFrom:P,yFrom:I})}}}this._animR(C,0);var G=this;this._enqueueAnimation("series",void 0,void 0,S,function(e,t,i){G._animR(t,i)},C)}}}}},_animR:function(t,i){for(var r=t.items,s=t.symbolType||"circle",a=t.symbolSize,n=0;n<r.length;n++){var o=r[n],l=o.x,h=o.y,d=Math.round((o.to-o.from)*i+o.from);if(isNaN(o.yFrom)||(h=o.yFrom+(h-o.yFrom)*i),isNaN(o.xFrom)||(l=o.xFrom+(l-o.xFrom)*i),t.polarAxisCoords){var f=this._toPolarCoord(t.polarAxisCoords,this._plotRect,l,h);l=f.x,h=f.y}l=e.jqx._ptrnd(l),h=e.jqx._ptrnd(h),d=e.jqx._ptrnd(d);var g=this._getRenderInfo(t.groupIndex,t.seriesIndex,r[n].itemIndex),u=g.element,c=g.labelElement;"circle"==s?(u||(u=this.renderer.circle(l,h,d),this.renderer.attr(u,{fill:o.fill,"fill-opacity":t["fill-opacity"],"stroke-opacity":t["fill-opacity"],stroke:o.stroke,"stroke-width":t["stroke-width"],"stroke-dasharray":t["stroke-dasharray"]})),this._isVML?this.renderer.updateCircle(u,void 0,void 0,d):this.renderer.attr(u,{r:d,cy:h,cx:l})):(u&&this.renderer.removeElement(u),u=this._drawSymbol(s,l,h,o.fill,t["fill-opacity"],o.stroke,t["stroke-opacity"]||t["fill-opacity"],t["stroke-width-symbol"],t["stroke-dasharray"],a||d)),c&&this.renderer.removeElement(c),c=this._showLabel(t.groupIndex,t.seriesIndex,o.itemIndex,{x:l-d,y:h-d,width:2*d,height:2*d}),i>=1&&this._installHandlers(u,"circle",t.groupIndex,t.seriesIndex,o.itemIndex),this._setRenderInfo(t.groupIndex,t.seriesIndex,r[n].itemIndex,{element:u,labelElement:c})}},_showToolTip:function(t,i,r,s,a){var n=this,o=n._getXAxis(r),l=n._getValueAxis(r);if(!n._ttEl||r!=n._ttEl.gidx||s!=n._ttEl.sidx||a!=n._ttEl.iidx){var h=n.seriesGroups[r],d=h.series[s],f=n.enableCrosshairs;n._pointMarker?(t=parseInt(n._pointMarker.x+5),i=parseInt(n._pointMarker.y-5)):f=!1;var g=f&&0==n.showToolTips;t=e.jqx._ptrnd(t),i=e.jqx._ptrnd(i);n._ttEl;if(0!=h.showToolTips&&0!=d.showToolTips){var u=n._get([d.toolTipFormatSettings,h.toolTipFormatSettings,l.toolTipFormatSettings,n.toolTipFormatSettings]),c=n._get([d.toolTipFormatFunction,h.toolTipFormatFunction,l.toolTipFormatFunction,n.toolTipFormatFunction]),m=n._getColors(r,s,a),x=n._getDataValue(a,o.dataField,r);void 0!=o.dataField&&""!=o.dataField||(x=a),"date"==o.type&&(x=n._castAsDate(x,(u?u.dateFormat:void 0)||o.dateFormat));var _="";if(e.isFunction(c)){var p={},y=0;for(var v in d)0==v.indexOf("dataField")&&(p[v.substring(9,v.length).toLowerCase()]=n._getDataValue(a,d[v],r),y++);0==y?p=n._getDataValue(a,void 0,r):1==y&&(p=p[""]),_=c(p,a,d,h,x,o)}else{_=n._getFormattedValue(r,s,a,u,c);var N=this._getAxisSettings(o),M=N.toolTipFormatSettings,b=N.toolTipFormatFunction;b||M||"date"!=o.type||(b=this._getDefaultDTFormatFn(o.baseUnit||"day"));var w=n._formatValue(x,M,b,r,s,a);if(n._isPieGroup(r))x=n._getDataValue(a,d.displayText||d.dataField,r),w=n._formatValue(x,M,b,r,s,a),_=w+": "+_;else{var A=o.displayText||o.dataField||"";_=A.length>0?A+": "+w+"<br>"+_:w+"<br>"+_}}if(n._ttEl||(n._ttEl={}),n._ttEl.sidx=s,n._ttEl.gidx=r,n._ttEl.iidx=a,rect=n.renderer.getRect(),f){var S=e.jqx._ptrnd(n._pointMarker.x),C=e.jqx._ptrnd(n._pointMarker.y),k=n.crosshairsColor||n._defaultLineColor;if(h.polar||h.spider){var D=this._getPolarAxisCoords(r,this._plotRect);if(e.jqx._ptdist(S,C,D.x,D.y)>D.r)return;var O=Math.atan2(C-D.y,S-D.x),F=Math.cos(O)*D.r+D.x,j=Math.sin(O)*D.r+D.y;n._ttEl.vLine?n.renderer.attr(n._ttEl.vLine,{x1:D.x,y1:D.y,x2:F,y2:j}):n._ttEl.vLine=n.renderer.line(D.x,D.y,F,j,{stroke:k,"stroke-width":n.crosshairsLineWidth||1,"stroke-dasharray":n.crosshairsDashStyle||""})}else n._ttEl.vLine&&n._ttEl.hLine?(n.renderer.attr(n._ttEl.vLine,{x1:S,x2:S}),n.renderer.attr(n._ttEl.hLine,{y1:C,y2:C})):(n._ttEl.vLine=n.renderer.line(S,n._plotRect.y,S,n._plotRect.y+n._plotRect.height,{stroke:k,"stroke-width":n.crosshairsLineWidth||1,"stroke-dasharray":n.crosshairsDashStyle||""}),n._ttEl.hLine=n.renderer.line(n._plotRect.x,C,n._plotRect.x+n._plotRect.width,C,{stroke:k,"stroke-width":n.crosshairsLineWidth||1,"stroke-dasharray":n.crosshairsDashStyle||""}))}if(!g&&0!=n.showToolTips){var T=d.toolTipClass||h.toolTipClass||this.toThemeProperty("jqx-chart-tooltip-text",null),I=d.toolTipBackground||h.toolTipBackground||"#FFFFFF",P=d.toolTipLineColor||h.toolTipLineColor||m.lineColor,q=this._get([d.toolTipOpacity,h.toolTipOpacity,1]),L=this.getItemCoord(r,s,a),R=0;n._pointMarker&&n._pointMarker.element&&(R=d.symbolSizeSelected,isNaN(R)&&(R=d.symbolSize),(isNaN(R)||R>50||R<0)&&(R=h.symbolSize),(isNaN(R)||R>50||R<0)&&(R=8)),n._createTooltip(L,h,_,{css:T,fill:I,stroke:P,fillOpacity:q,symbolSize:R})}}}},_fitTooltip:function(e,t,i,r,s){var a={},n=2+s/2;if(t.x-i.width-7-n>e.x&&t.y+t.height/2-i.height/2>e.y&&t.y+t.height/2+i.height/2<e.y+e.height&&(a.left={arrowLocation:"right",x:t.x-i.width-7-n,y:t.y+t.height/2-i.height/2,width:i.width+7,height:i.height}),t.x+t.width+i.width+7+n<e.x+e.width&&t.y+t.height/2-i.height/2>e.y&&t.y+t.height/2+i.height/2<e.y+e.height&&(a.right={arrowLocation:"left",x:t.x+t.width+n,y:t.y+t.height/2-i.height/2,width:i.width+7,height:i.height}),t.y-i.height-n-7>e.y&&t.x+t.width/2-i.width/2>e.x&&t.x+t.width/2+i.width/2<e.x+e.width&&(a.top={arrowLocation:"bottom",x:t.x+t.width/2-i.width/2,y:t.y-i.height-n-7,width:i.width,height:i.height+7}),t.y+t.height+i.height+7+n<e.y+e.height&&t.x+t.width/2-i.width/2>e.x&&t.x+t.width/2+i.width/2<e.x+e.width&&(a.bottom={arrowLocation:"top",x:t.x+t.width/2-i.width/2,y:t.y+t.height+n,width:i.width,height:i.height+7}),t.width>t.height||(-1!=r.type.indexOf("stackedcolumn")||-1!=r.type.indexOf("stackedwaterfall"))&&"horizontal"!=r.orientation){if(a.left)return a.left;if(a.right)return a.right}else{if(a.top)return a.top;if(a.bottom)return a.bottom}for(var o in a)if(a[o])return a[o];return{arrowLocation:""}},_createTooltip:function(t,i,r,s){var a=this,n=i.type,o=!1,l=a._ttEl.box;if(!l){o=!0,l=a._ttEl.box=document.createElement("div");l.style.position="absolute",l.style.cursor="default",e(h).css({"z-index":1e7,"box-sizing":"content-box"}),e(document.body).append(l);var h=document.createElement("div");h.id="arrowOuterDiv",h.style.width="0px",h.style.height="0px",h.style.position="absolute",e(h).css({"z-index":1e7+1,"box-sizing":"content-box"});var d=document.createElement("div");d.id="arrowInnerDiv",d.style.width="0px",d.style.height="0px",d.style.position="absolute";var f=document.createElement("div");f.id="contentDiv",f.style.position="absolute",e(f).css({"box-sizing":"content-box"}),e(f).addClass("jqx-rc-all jqx-button"),e(f).appendTo(e(l)),e(h).appendTo(e(l)),e(d).appendTo(e(l)),e(d).css({"z-index":1e7+2,"box-sizing":"content-box"})}if(!r||0==r.length)return void e(l).fadeTo(0,0);f=e(l).find("#contentDiv")[0],h=e(l).find("#arrowOuterDiv")[0],d=e(l).find("#arrowInnerDiv")[0],d.style.opacity=h.style.opacity=s.fillOpacity,f.style.backgroundColor=s.fill,f.style.borderColor=s.stroke,f.style.opacity=s.fillOpacity;var g="<span class='"+s.css+"'>"+r+"</span>";e(f).html(g);var u=this._measureHtml(g,"jqx-rc-all jqx-button");if(rect=a._plotRect,!(u.width>rect.width||u.height>rect.height)){var c={width:u.width,height:u.height};arrowLocation="";var m=a._isColumnType(n);if(x=Math.max(t.x,rect.x),y=Math.max(t.y,rect.y),"dataPoint"==a.toolTipAlignment){if(-1!=n.indexOf("pie")||-1!=n.indexOf("donut")){var _=(t.fromAngle+t.toAngle)/2;_*=Math.PI/180;var p=!isNaN(t.innerRadius)&&t.innerRadius>0?(t.innerRadius+t.outerRadius)/2:.75*t.outerRadius;x=t.x=t.center.x+Math.cos(_)*p,y=t.y=t.center.y-Math.sin(_)*p,t.width=t.height=1}else m&&(i.polar||i.spider)&&(t.width=t.height=1);var v=this._fitTooltip(this._plotRect,t,c,i,s.symbolSize);""!=v.arrowLocation&&(arrowLocation=v.arrowLocation,x=v.x,y=v.y,c.width=v.width,c.height=v.height)}else arrowLocation="";"top"==arrowLocation||"bottom"==arrowLocation?(c.height+=7,x-=3.5,"bottom"==arrowLocation&&(y-=7)):"left"!=arrowLocation&&"right"!=arrowLocation||(c.width+=7,y-=3.5,"right"==arrowLocation&&(x-=7)),x+c.width>rect.x+rect.width&&(arrowLocation="",x=rect.x+rect.width-c.width),y+c.height>rect.y+rect.height&&(arrowLocation="",y=rect.y+rect.height-c.height);var N={x:0,y:0};e(f).css({width:u.width,height:u.height,left:0,top:0}),h.style["margin-top"]=h.style["margin-left"]=0,d.style["margin-top"]=d.style["margin-left"]=0,f.style["margin-top"]=f.style["margin-left"]=0;var M="7px solid",b="7px solid transparent";switch(arrowLocation){case"left":N={x:0,y:(u.height-7)/2},contentPostion={x:7,y:0},f.style["margin-left"]="7px",h.style["margin-left"]="0px",h.style["margin-top"]=N.y+"px",h.style["border-left"]="",h.style["border-right"]=M+" "+s.stroke,h.style["border-top"]=b,h.style["border-bottom"]=b,d.style["margin-left"]="1px",d.style["margin-top"]=N.y+"px",d.style["border-left"]="",d.style["border-right"]=M+" "+s.fill,d.style["border-top"]=b,d.style["border-bottom"]=b;break;case"right":N={x:c.width-7,y:(u.height-7)/2},contentPostion={x:0,y:0},h.style["margin-left"]=N.x+"px",h.style["margin-top"]=N.y+"px",h.style["border-left"]=M+" "+s.stroke,h.style["border-right"]="",h.style["border-top"]=b,h.style["border-bottom"]=b,d.style["margin-left"]=N.x-1+"px",d.style["margin-top"]=N.y+"px",d.style["border-left"]=M+" "+s.fill,d.style["border-right"]="",d.style["border-top"]=b,d.style["border-bottom"]=b;break;case"top":N={x:c.width/2-3.5,y:0},contentPostion={x:0,y:7},f.style["margin-top"]=contentPostion.y+"px",h.style["margin-left"]=N.x+"px",h.style["border-top"]="",h.style["border-bottom"]=M+" "+s.stroke,h.style["border-left"]=b,h.style["border-right"]=b,d.style["margin-left"]=N.x+"px",d.style["margin-top"]="1px",d.style["border-top"]="",d.style["border-bottom"]=M+" "+s.fill,d.style["border-left"]=b,d.style["border-right"]=b;break;case"bottom":N={x:c.width/2-3.5,y:c.height-7},contentPostion={x:0,y:0},h.style["margin-left"]=N.x+"px",h.style["margin-top"]=N.y+"px",h.style["border-top"]=M+" "+s.stroke,h.style["border-bottom"]="",h.style["border-left"]=b,h.style["border-right"]=b,d.style["margin-left"]=N.x+"px",d.style["margin-top"]=N.y-1+"px",d.style["border-top"]=M+" "+s.fill,d.style["border-bottom"]="",d.style["border-left"]=b,d.style["border-right"]=b}""==arrowLocation?(e(h).hide(),e(d).hide()):(e(h).show(),e(d).show()),e(l).css({width:c.width+"px",height:c.height+"px"});var w=a.host.coord();o&&(e(l).fadeOut(0,0),l.style.left=x+w.left+"px",l.style.top=y+w.top+"px"),e(l).clearQueue(),e(l).animate({left:x+w.left,top:y+w.top,opacity:1},a.toolTipMoveDuration,"easeInOutCirc"),e(l).fadeTo(400,1)}},_measureHtml:function(t,i){var r=this._measureDiv;r||(this._measureDiv=r=document.createElement("div"),r.style.position="absolute",r.style.cursor="default",r.style.overflow="hidden",r.style.display="none",e(r).addClass(i),this.host.append(r)),e(r).html(t);var s={width:e(r).width()+2,height:e(r).height()+2};return e.jqx.browser&&e.jqx.browser.mozilla&&(s.height+=3),s},_hideToolTip:function(t){this._ttEl&&(this._ttEl.box&&(0==t?e(this._ttEl.box).hide():e(this._ttEl.box).fadeOut()),this._hideCrosshairs(),this._ttEl.gidx=void 0)},_hideCrosshairs:function(){this._ttEl&&(this._ttEl.vLine&&(this.renderer.removeElement(this._ttEl.vLine),this._ttEl.vLine=void 0),this._ttEl.hLine&&(this.renderer.removeElement(this._ttEl.hLine),this._ttEl.hLine=void 0))},_get:function(t){return e.jqx.getByPriority(t)},_getAxisSettings:function(e){if(!e)return{};var t=this,i=e.gridLines||{},r={visible:this._get([i.visible,e.showGridLines,!0]),color:t._get([i.color,e.gridLinesColor,t._defaultLineColor]),unitInterval:t._get([i.unitInterval,i.interval,e.gridLinesInterval]),step:t._get([i.step,e.gridLinesStep]),dashStyle:t._get([i.dashStyle,e.gridLinesDashStyle]),width:t._get([i.lineWidth,1]),offsets:[],alternatingBackgroundColor:e.alternatingBackgroundColor,alternatingBackgroundColor2:e.alternatingBackgroundColor2,alternatingBackgroundOpacity:e.alternatingBackgroundOpacity},s=e.tickMarks||{},a={visible:this._get([s.visible,e.showTickMarks,!0]),color:t._get([s.color,e.tickMarksColor,t._defaultLineColor]),unitInterval:t._get([s.unitInterval,s.interval,e.tickMarksInterval]),step:t._get([s.step,e.tickMarksStep]),dashStyle:t._get([s.dashStyle,e.tickMarksDashStyle]),width:t._get([s.lineWidth,1]),size:t._get([s.size,4]),offsets:[]},n=e.title||{},o={visible:t._get([n.visible,!0]),text:t._get([e.description,n.text]),style:t._get([e.descriptionClass,n.class,t.toThemeProperty("jqx-chart-axis-description",null)]),halign:t._get([e.horizontalDescriptionAlignment,n.horizontalAlignment,"center"]),valign:t._get([e.verticalDescriptionAlignment,n.verticalAlignment,"center"]),angle:0,rotationPoint:t._get([n.rotationPoint,"centercenter"]),offset:t._get([n.offset,{x:0,y:0}])},l=e.line||{},h={visible:t._get([l.visible,!0]),color:t._get([l.color,r.color,t._defaultLineColor]),dashStyle:t._get([l.dashStyle,r.dashStyle,""]),width:t._get([l.lineWidth,1]),angle:t._get([l.angle,NaN])},d=e.padding||{};d={left:d.left||0,right:d.right||0,top:d.top||0,bottom:d.bottom||0};var f=this._getAxisLabelsSettings(e);return{visible:this._get([e.visible,e.showValueAxis,e.showXAxis,e.showCategoryAxis,!0]),customDraw:this._get([e.customDraw,!1]),gridLines:r,tickMarks:a,line:h,title:o,labels:f,padding:d,toolTipFormatFunction:this._get([e.toolTipFormatFunction,e.formatFunction,f.formatFunction]),toolTipFormatSettings:this._get([e.toolTipFormatSettings,e.formatSettings,f.formatSettings])}},_getAxisLabelsSettings:function(e){var t=this,i=e.labels||{};return{visible:t._get([e.showLabels,i.visible,!0]),unitInterval:t._get([i.unitInterval,i.interval,e.labelsInterval]),step:t._get([i.step,e.labelsStep]),angle:t._get([e.textRotationAngle,i.angle,0]),style:t._get([e.class,i.class,t.toThemeProperty("jqx-chart-axis-text",null)]),halign:t._get([e.horizontalTextAlignment,i.horizontalAlignment,"center"]),valign:t._get([e.verticalTextAlignment,i.verticalAlignment,"center"]),textRotationPoint:t._get([e.textRotationPoint,i.rotationPoint,"auto"]),textOffset:t._get([e.textOffset,i.offset,{x:0,y:0}]),autoRotate:t._get([e.labelsAutoRotate,i.autoRotate,!1]),formatSettings:t._get([e.formatSettings,i.formatSettings,void 0]),formatFunction:t._get([e.formatFunction,i.formatFunction,void 0])}},_getLabelsSettings:function(t,i,r,s){for(var a=this.seriesGroups[t],n=a.series[i],o=isNaN(r)?void 0:this._getDataValue(r,n.dataField,t),l=s||["Visible","Offset","Angle","HorizontalAlignment","VerticalAlignment","Class","BackgroundColor","BorderColor","BorderOpacity","Padding","Opacity","BackgroundOpacity","LinesAngles","LinesEnabled","AutoRotate","Radius"],h={},d=0;d<l.length;d++){var f=l[d],g="labels"+f,u="label"+f,c=f.substring(0,1).toLowerCase()+f.substring(1),m=void 0;a.labels&&"object"==typeof a.labels&&(m=a.labels[c]),n.labels&&"object"==typeof n.labels&&void 0!=n.labels[c]&&(m=n.labels[c]),m=this._get([n[g],n[u],m,a[g],a[u]]),e.isFunction(m)?h[c]=m(o,r,n,a):h[c]=m}h.class=h.class||this.toThemeProperty("jqx-chart-label-text",null),h.visible=this._get([h.visible,n.showLabels,a.showLabels,void 0!=n.labels||void 0,void 0!=a.labels||void 0]);var x=h.padding||1;return h.padding={left:this._get([x.left,isNaN(x)?1:x]),right:this._get([x.right,isNaN(x)?1:x]),top:this._get([x.top,isNaN(x)?1:x]),bottom:this._get([x.bottom,isNaN(x)?1:x])},h},_showLabel:function(e,t,i,r,s,a,n,o,l,h,d){var f=this.seriesGroups[e],g=(f.series[t],{width:0,height:0});if(!isNaN(i)){var u=this._getLabelsSettings(e,t,i);if(!u.visible)return n?g:void 0;if(r.width<0||r.height<0)return n?g:void 0;var c=u.angle;isNaN(h)||(c=h);var m=u.offset||{},x={x:m.x,y:m.y};isNaN(x.x)&&(x.x=0),isNaN(x.y)&&(x.y=0),s=s||u.horizontalAlignment||"center",a=a||u.verticalAlignment||"center";var _=this._getFormattedValue(e,t,i,void 0,void 0,!0),p=r.width,y=r.height;if(1==o&&"center"!=s&&(s="right"==s?"left":"right"),1==l&&"center"!=a&&"middle"!=a&&(a="top"==a?"bottom":"top",x.y*=-1),g=this.renderer.measureText(_,c,{class:u.class}),n)return g;var v=0,N=0;p>0&&(""==s||"center"==s?v+=(p-g.width)/2:"right"==s&&(v+=p-g.width)),y>0&&(""==a||"center"==a?N+=(y-g.height)/2:"bottom"==a&&(N+=y-g.height)),v+=r.x+x.x,N+=r.y+x.y;var M=this._plotRect;v<=M.x&&(v=M.x+2),N<=M.y&&(N=M.y+2);var b={width:Math.max(g.width,1),height:Math.max(g.height,1)};N+b.height>=M.y+M.height&&(N=M.y+M.height-b.height-2),v+b.width>=M.x+M.width&&(v=M.x+M.width-b.width-2);var w,A=u.backgroundColor,S=u.borderColor,C=u.padding;if(A||S){w=this.renderer.beginGroup();var r=this.renderer.rect(v-C.left,N-C.top,g.width+C.left+C.right,g.height+C.bottom+C.bottom,{fill:A||"transparent","fill-opacity":u.backgroundOpacity||1,stroke:S||"transparent","stroke-opacity":u.borderOpacity,"stroke-width":1})}var k=this.renderer.text(_,v,N,g.width,g.height,c,{class:u.class,opacity:u.opacity||1},!1,"center","center");return d&&(d.x=v-C.left,d.y=N-C.top,d.width=g.width+C.left+C.right,d.height=g.height+C.bottom+C.bottom),this._isVML&&(this.renderer.removeElement(k),this.renderer.getContainer()[0].appendChild(k)),w&&this.renderer.endGroup(),w||k}},
_getAnimProps:function(e,t){var i=this.seriesGroups[e],r=isNaN(t)?void 0:i.series[t],s=1==this.enableAnimations;i.enableAnimations&&(s=1==i.enableAnimations),r&&r.enableAnimations&&(s=1==r.enableAnimations);var a=this.animationDuration;isNaN(a)&&(a=1e3);var n=i.animationDuration;if(isNaN(n)||(a=n),r){var o=r.animationDuration;isNaN(o)||(a=o)}return a>5e3&&(a=1e3),{enabled:s,duration:a}},_isColorTransition:function(e,t,i,r){if(r-1<i.xoffsets.first)return!1;var s=this._getColors(e,t,r,this._getGroupGradientType(e)),a=this._getColors(e,t,r-1,this._getGroupGradientType(e));return s.fillColor!=a.fillColor},_renderLineSeries:function(t,i){var r=this.seriesGroups[t];if(r.series&&0!=r.series.length){var s=-1!=r.type.indexOf("area"),a=-1!=r.type.indexOf("stacked"),n=a&&-1!=r.type.indexOf("100"),o=-1!=r.type.indexOf("spline"),l=-1!=r.type.indexOf("step"),h=-1!=r.type.indexOf("range"),d=1==r.polar||1==r.spider;if(d&&(l=!1),!l||!o){var f=this._getDataLen(t),g=(i.width,"horizontal"==r.orientation),u=1==this._getXAxis(t).flip,c=i;g&&(c={x:i.y,y:i.x,width:i.height,height:i.width});var m=this._calcGroupOffsets(t,c);if(m&&0!=m.xoffsets.length){this._linesRenderInfo||(this._linesRenderInfo={}),this._linesRenderInfo[t]={};for(var x=r.series.length-1;x>=0;x--){var _=this._getSerieSettings(t,x),p={groupIndex:t,rect:c,serieIndex:x,swapXY:g,isArea:s,isSpline:o,isRange:h,isPolar:d,settings:_,segments:[],pointsLength:0};if(this._isSerieVisible(t,x)){var y=r.series[x];if(!y.customDraw){var v,N=e.isFunction(y.colorFunction),M=m.xoffsets.first,b=M,w=this._getColors(t,x,NaN,this._getGroupGradientType(t));do{var A=[],S=[],C=[],k=0,D=0,O=NaN,F=NaN,j=NaN;if(!(m.xoffsets.length<1)){var T=this._getAnimProps(t,x),I=T.enabled&&!this._isToggleRefresh&&m.xoffsets.length<1e4&&1!=this._isVML?T.duration:0,P=M;v=!1;for(var q=(this._getColors(t,x,M,this._getGroupGradientType(t)),void 0),L=M;L<=m.xoffsets.last;L++){M=L;var R=m.xoffsets.data[L],G=m.xoffsets.xvalues[L];if(!isNaN(R)&&(R=Math.max(R,1),k=R,D=m.offsets[x][L].to,!(q&&this.enableSampling&&e.jqx._ptdist(q.x,q.y,k,D)<1))){q={x:k,y:D};var V=m.offsets[x][L].from;if(isNaN(D)||isNaN(V)){if("connect"==y.emptyPointsDisplay)continue;if("zero"!=y.emptyPointsDisplay){v=!0;break}isNaN(D)&&(D=m.baseOffset),isNaN(V)&&(V=m.baseOffset)}if(N&&this._isColorTransition(t,x,m,M)&&A.length>1){M--;break}var E=this._elementRenderInfo;if(E&&E.length>t&&E[t].series.length>x){var H=E[t].series[x][G],j=e.jqx._ptrnd(H?H.to:void 0),B=e.jqx._ptrnd(c.x+(H?H.xoffset:void 0));C.push(g?{y:B,x:j,index:L}:{x:B,y:j,index:L})}b=L,_.stroke<2&&(D-c.y<=1&&(D=c.y+1),V-c.y<=1&&(V=c.y+1),c.y+c.height-D<=1&&(D=c.y+c.height-1),c.y+c.height-V<=1&&(V=c.y+c.height-1)),!s&&n&&(D<=c.y&&(D=c.y+1),D>=c.y+c.height&&(D=c.y+c.height-1),V<=c.y&&(V=c.y+1),V>=c.y+c.height&&(V=c.y+c.height-1)),R=Math.max(R,1),k=R+c.x,1==r.skipOverlappingPoints&&!isNaN(O)&&Math.abs(O-k)<=1||(!l||isNaN(O)||isNaN(F)||F!=D&&A.push(g?{y:k,x:e.jqx._ptrnd(F)}:{x:k,y:e.jqx._ptrnd(F)}),A.push(g?{y:k,x:e.jqx._ptrnd(D),index:L}:{x:k,y:e.jqx._ptrnd(D),index:L}),S.push(g?{y:k,x:e.jqx._ptrnd(V),index:L}:{x:k,y:e.jqx._ptrnd(V),index:L}),O=k,F=D,isNaN(j)&&(j=D))}}if(0!=A.length){var z=A[A.length-1].index;N&&(w=this._getColors(t,x,z,this._getGroupGradientType(t)));var W=c.x+m.xoffsets.data[P],X=c.x+m.xoffsets.data[b];if(s&&1==r.alignEndPointsWithIntervals){if(W>c.x&&(W=c.x),X<c.x+c.width&&(X=c.x+c.width),u){var U=W;W=X,X=U}}X=e.jqx._ptrnd(X),W=e.jqx._ptrnd(W);var Y=m.baseOffset;j=e.jqx._ptrnd(j);var Z=e.jqx._ptrnd(D)||Y;h&&(A=A.concat(S.reverse())),p.pointsLength+=A.length;var J={lastItemIndex:z,colorSettings:w,pointsArray:A,pointsStart:C,left:W,right:X,pyStart:j,pyEnd:Z,yBase:Y,labelElements:[],symbolElements:[]};p.segments.push(J)}else M++}}while(M<m.xoffsets.length-1||v);this._linesRenderInfo[t][x]=p}}else this._linesRenderInfo[t][x]=p}var Q=this._linesRenderInfo[t],K=[];for(var L in Q)K.push(Q[L]);K=K.sort(function(e,t){return e.serieIndex-t.serieIndex}),s&&a&&K.reverse();for(var L=0;L<K.length;L++){var p=K[L];this._animateLine(p,0==I?1:0);var $=this;this._enqueueAnimation("series",void 0,void 0,I,function(e,t,i){$._animateLine(t,i)},p)}}}}},_animateLine:function(e,t){var i=e.settings,r=e.groupIndex,s=e.serieIndex,a=this.seriesGroups[r],n=a.series[s],o=this._getSymbol(r,s),l=this._getLabelsSettings(r,s,NaN,["Visible"]).visible,h=!0;e.isPolar&&(isNaN(a.endAngle)||360==Math.round(Math.abs((isNaN(a.startAngle)?0:a.startAngle)-a.endAngle))||(h=!1));for(var d=0,f=0;f<e.segments.length;f++){var g=e.segments[f],u=this._calculateLine(r,e.pointsLength,d,g.pointsArray,g.pointsStart,g.yBase,t,e.isArea,e.swapXY);if(d+=g.pointsArray.length,""!=u){var c=u.split(" "),m=(c.length,u);m=""!=m?this._buildLineCmd(u,e.isRange,g.left,g.right,g.pyStart,g.pyEnd,g.yBase,e.isArea,e.isPolar,h,e.isSpline,e.swapXY):"M 0 0";var x=g.colorSettings;if(g.pathElement?this.renderer.attr(g.pathElement,{d:m}):(g.pathElement=this.renderer.path(m,{"stroke-width":i.stroke,stroke:x.lineColor,"stroke-opacity":i.opacity,"fill-opacity":i.opacity,"stroke-dasharray":i.dashStyle,fill:e.isArea?x.fillColor:"none"}),this._installHandlers(g.pathElement,"path",r,s,g.lastItemIndex)),g.labelElements){for(var _=0;_<g.labelElements.length;_++)this.renderer.removeElement(g.labelElements[_]);g.labelElements=[]}if(g.symbolElements){for(var _=0;_<g.symbolElements.length;_++)this.renderer.removeElement(g.symbolElements[_]);g.symbolElements=[]}if(g.pointsArray.length==c.length&&("none"!=o||l))for(var p=n.symbolSize,y=this._plotRect,_=0;_<c.length;_++){var v=c[_].split(",");if(v={x:parseFloat(v[0]),y:parseFloat(v[1])},!(v.x<y.x||v.x>y.x+y.width||v.y<y.y||v.y>y.y+y.height)){if("none"!=o){var N=this._getColors(r,s,g.pointsArray[_].index,this._getGroupGradientType(r)),M=this._drawSymbol(o,v.x,v.y,N.fillColorSymbol,i.opacity,N.lineColorSymbol,i.opacity,i.strokeSymbol,void 0,p);g.symbolElements.push(M)}if(l){var b=(_>0?c[_-1]:c[_]).split(",");b={x:parseFloat(b[0]),y:parseFloat(b[1])};var w=(_<c.length-1?c[_+1]:c[_]).split(",");if(w={x:parseFloat(w[0]),y:parseFloat(w[1])},v=this._adjustLineLabelPosition(r,s,g.pointsArray[_].index,v,b,w)){var A=this._showLabel(r,s,g.pointsArray[_].index,{x:v.x,y:v.y,width:0,height:0});g.labelElements.push(A)}}}}if(1==t&&"none"!=o)for(var _=0;_<g.symbolElements.length;_++)isNaN(g.pointsArray[_].index)||this._installHandlers(g.symbolElements[_],"symbol",r,s,g.pointsArray[_].index)}}},_adjustLineLabelPosition:function(e,t,i,r,s,a){var n=this._showLabel(e,t,i,{width:0,height:0},"","",!0);if(n){var o={x:r.x-n.width/2,y:0};return o.y=r.y-1.5*n.height,o}},_calculateLine:function(t,i,r,s,a,n,o,l,h){var d,f=this.seriesGroups[t];1!=f.polar&&1!=f.spider||(d=this._getPolarAxisCoords(t,this._plotRect));var g="",u=s.length;if(!l&&0==a.length){u=i*o-r}for(var c=0;c<u+1&&c<s.length;c++){c>0&&(g+=" ");var m=s[c].y,x=s[c].x,_=l?n:m,p=x;if(a&&a.length>c&&(_=a[c].y,p=a[c].x,(isNaN(_)||isNaN(p))&&(_=m,p=x)),p,u<=s.length&&c>0&&c==u&&(p=s[c-1].x,_=s[c-1].y),h?(x=e.jqx._ptrnd((x-_)*(l?o:1)+_),m=e.jqx._ptrnd(m)):(x=e.jqx._ptrnd((x-p)*o+p),m=e.jqx._ptrnd((m-_)*o+_)),d){var y=this._toPolarCoord(d,this._plotRect,x,m);x=y.x,m=y.y}g+=x+","+m}return g},_buildLineCmd:function(e,t,i,r,s,a,n,o,l,h,d,f){var g=e,u=f?n+","+i:i+","+n,c=f?n+","+r:r+","+n;!o||l||t||(g=u+" "+e+" "+c),d&&(g=this._getBezierPoints(g));var m=g.split(" ");if(0==m.length)return"";if(1==m.length){var x=m[0].split(",");return"M "+m[0]+" L"+(parseFloat(x[0])+1)+","+(parseFloat(x[1])+1)}var _=m[0].replace("M","");return o&&!l?g=t?"M "+_+" L "+_+(d?"":" L "+_+" ")+g:"M "+u+" L "+_+" "+g:d||(g="M "+_+" L "+_+" "+g),(l&&h||t)&&(g+=" Z"),g},_getSerieSettings:function(e,t){var i=this.seriesGroups[e],r=-1!=i.type.indexOf("area"),s=-1!=i.type.indexOf("line"),a=i.series[t],n=a.dashStyle||i.dashStyle||"",o=a.opacity||i.opacity;(isNaN(o)||o<0||o>1)&&(o=1);var l=a.lineWidth;isNaN(l)&&"auto"!=l&&(l=i.lineWidth),("auto"==l||isNaN(l)||l<0||l>15)&&(l=r?2:s?3:1);var h=a.lineWidthSymbol;return isNaN(h)&&(h=1),{stroke:l,strokeSymbol:h,opacity:o,dashStyle:n}},_getColors:function(t,i,r,s,a){var n=this.seriesGroups[t],o=n.series[i],l=this._get([o.useGradientColors,n.useGradientColors,n.useGradient,!0]),h=this._getSeriesColors(t,i,r);h.fillColor||(h.fillColor=y,h.fillColorSelected=e.jqx.adjustColor(y,1.1),h.fillColorAlt=e.jqx.adjustColor(y,4),h.fillColorAltSelected=e.jqx.adjustColor(y,3),h.lineColor=h.symbolColor=e.jqx.adjustColor(y,.9),h.lineColorSelected=h.symbolColorSelected=e.jqx.adjustColor(y,.9));var d=[[0,1.4],[100,1]],f=[[0,1],[25,1.1],[50,1.4],[100,1]],g=[[0,1.3],[90,1.2],[100,1]],u=NaN;if(isNaN(a)||(u=2==a?d:f),l){var c={};for(var m in h)c[m]=h[m];if(h=c,"verticalLinearGradient"==s||"horizontalLinearGradient"==s){var x="verticalLinearGradient"==s?u||d:u||f,_=["fillColor","fillColorSelected","fillColorAlt","fillColorAltSelected"];for(var p in _){var y=h[_[p]];y&&(h[_[p]]=this.renderer._toLinearGradient(y,"verticalLinearGradient"==s,x))}}else if("radialGradient"==s){var v,u=d;("pie"==n.type||"donut"==n.type||n.polar)&&void 0!=r&&this._renderData[t]&&this._renderData[t].offsets[i]&&(v=this._renderData[t].offsets[i][r],u=g),h.fillColor=this.renderer._toRadialGradient(h.fillColor,u,v),h.fillColorSelected=this.renderer._toRadialGradient(h.fillColorSelected,u,v)}}return h},_installHandlers:function(e,t,i,r,s){if(!this.enableEvents)return!1;var a=this,n=this.seriesGroups[i],o=this.seriesGroups[i].series[r],l=-1!=n.type.indexOf("line")||-1!=n.type.indexOf("area");l||0==n.enableSelection||0==o.enableSelection||(this.renderer.addHandler(e,"mousemove",function(e){var t=a._selected;if(!t||!t.isLineType||"click"!=t.linesUnselectMode||t.group==i&&t.series==r){var n=e.pageX||e.clientX||e.screenX,o=e.pageY||e.clientY||e.screenY,l=a.host.offset();n-=l.left,o-=l.top,a._mouseX==n&&a._mouseY==o||a._ttEl&&a._ttEl.gidx==i&&a._ttEl.sidx==r&&a._ttEl.iidx==s||a._startTooltipTimer(i,r,s)}}),this.renderer.addHandler(e,"mouseout",function(e){return})),0!=n.enableSelection&&0!=o.enableSelection&&this.renderer.addHandler(e,"mouseover",function(n){var o=a._selected;o&&o.isLineType&&"click"==o.linesUnselectMode&&(o.group!=i||o.series!=r)||a._select(e,t,i,r,s,s)}),this.renderer.addHandler(e,"click",function(e){clearTimeout(a._hostClickTimer),a._lastClickTs=(new Date).valueOf(),l&&"symbol"!=t&&"pointMarker"!=t||(a._isColumnType(n.type)&&a._unselect(),isNaN(s)||(e.stopImmediatePropagation(),a._raiseItemEvent("click",n,o,s)))})},_getHorizontalOffset:function(t,i,r,s){var a=this._plotRect;if(0==this._getDataLen(t))return{index:void 0,value:r};var n=this._calcGroupOffsets(t,this._plotRect);if(0==n.xoffsets.length)return{index:void 0,value:void 0};var o,l=r,h=s,d=this.seriesGroups[t];(d.polar||d.spider)&&(o=this._getPolarAxisCoords(t,a));for(var f,g,u,c,m=(this._getXAxis(t).flip,n.xoffsets.first);m<=n.xoffsets.last;m++){var x=n.xoffsets.data[m],_=n.offsets[i][m].to,p=0;if(o){var y=this._toPolarCoord(o,a,x+a.x,_);x=y.x,_=y.y,p=e.jqx._ptdist(l,h,x,_)}else if("horizontal"==d.orientation){x+=a.y;var v=_;_=x,x=v,p=e.jqx._ptdist(l,h,x,_)}else x+=a.x,p=Math.abs(l-x);(isNaN(f)||f>p)&&(f=p,g=m,u=x,c=_)}return{index:g,value:n.xoffsets.data[g],polarAxisCoords:o,x:u,y:c}},onmousemove:function(t,i){if((this._mouseX!=t||this._mouseY!=i)&&(this._mouseX=t,this._mouseY=i,this._selected)){var r=this._selected.group,s=this._selected.series,a=this.seriesGroups[r],n=a.series[s],o=this._plotRect;if(this.renderer&&(o=this.renderer.getRect(),o.x+=5,o.y+=5,o.width-=10,o.height-=10),t<o.x||t>o.x+o.width||i<o.y||i>o.y+o.height)return this._hideToolTip(),void this._unselect();var l="horizontal"==a.orientation,o=this._plotRect;if(-1!=a.type.indexOf("line")||-1!=a.type.indexOf("area")){var h=this._getHorizontalOffset(r,this._selected.series,t,i),d=h.index;if(void 0==d)return;if(this._selected.item!=d){for(var f=this._linesRenderInfo[r][s].segments,g=0;d>f[g].lastItemIndex;)if(++g>=f.length)return;var u=f[g].pathElement,c=f[g].lastItemIndex;this._unselect(!1),this._select(u,"path",r,s,d,c)}var m=this._getSymbol(this._selected.group,this._selected.series);"none"==m&&(m="circle");var x=this._calcGroupOffsets(r,o),_=x.offsets[this._selected.series][d].to,p=_;-1!=a.type.indexOf("range")&&(p=x.offsets[this._selected.series][d].from);var y=l?t:i;if(i=!isNaN(p)&&Math.abs(y-p)<Math.abs(y-_)?p:_,isNaN(i))return;if(t=h.value,l){var v=t;t=i,i=v+o.y}else t+=o.x;if(h.polarAxisCoords&&(t=h.x,i=h.y),i=e.jqx._ptrnd(i),t=e.jqx._ptrnd(t),this._pointMarker&&this._pointMarker.element&&(this.renderer.removeElement(this._pointMarker.element),this._pointMarker.element=void 0),isNaN(t)||isNaN(i))return;var N=this._getSeriesColors(r,s,d),M=this._getSerieSettings(r,s),b=n.symbolSizeSelected;isNaN(b)&&(b=n.symbolSize),(isNaN(b)||b>50||b<0)&&(b=a.symbolSize),(isNaN(b)||b>50||b<0)&&(b=8),(this.showToolTips||this.enableCrosshairs)&&(this._pointMarker={type:m,x:t,y:i,gidx:r,sidx:s,iidx:d},this._pointMarker.element=this._drawSymbol(m,t,i,N.fillColorSymbolSelected,M.opacity,N.lineColorSymbolSelected,M.opacity,M.strokeSymbol,M.dashStyle,b),this._installHandlers(this._pointMarker.element,"pointMarker",r,s,d)),this._startTooltipTimer(r,this._selected.series,d)}}},_drawSymbol:function(e,t,i,r,s,a,n,o,l,h){var d,f=h||6,g=f/2;switch(e){case"none":return;case"circle":d=this.renderer.circle(t,i,f/2);break;case"square":f-=1,g=f/2,d=this.renderer.rect(t-g,i-g,f,f);break;case"diamond":var u="M "+(t-g)+","+i+" L"+t+","+(i-g)+" L"+(t+g)+","+i+" L"+t+","+(i+g)+" Z";d=this.renderer.path(u);break;case"triangle_up":case"triangle":var u="M "+(t-g)+","+(i+g)+" L "+(t+g)+","+(i+g)+" L "+t+","+(i-g)+" Z";d=this.renderer.path(u);break;case"triangle_down":var u="M "+(t-g)+","+(i-g)+" L "+t+","+(i+g)+" L "+(t+g)+","+(i-g)+" Z";d=this.renderer.path(u);break;case"triangle_left":var u="M "+(t-g)+","+i+" L "+(t+g)+","+(i+g)+" L "+(t+g)+","+(i-g)+" Z";d=this.renderer.path(u);break;case"triangle_right":var u="M "+(t-g)+","+(i-g)+" L "+(t-g)+","+(i+g)+" L "+(t+g)+","+i+" Z";d=this.renderer.path(u);break;default:d=this.renderer.circle(t,i,f)}return this.renderer.attr(d,{fill:r,"fill-opacity":s,stroke:a,"stroke-width":o,"stroke-opacity":n,"stroke-dasharray":l||""}),"circle"!=e&&(this.renderer.attr(d,{r:f/2}),"square"!=e&&this.renderer.attr(d,{x:t,y:i})),d},_getSymbol:function(e,t){var i,r=["circle","square","diamond","triangle_up","triangle_down","triangle_left","triangle_right"],s=this.seriesGroups[e],a=s.series[t];return void 0!=a.symbolType&&(i=a.symbolType),void 0==i&&(i=s.symbolType),"default"==i?r[t%r.length]:void 0!=i?i:"none"},_startTooltipTimer:function(e,t,i,r,s,a,n){this._cancelTooltipTimer();var o=this,l=(o.seriesGroups[e],this.toolTipShowDelay||this.toolTipDelay);(isNaN(l)||l>1e4||l<0)&&(l=500),(this._ttEl||1==this.enableCrosshairs&&0==this.showToolTips)&&(l=0),isNaN(a)||(l=a),clearTimeout(this._tttimerHide),isNaN(r)&&(r=o._mouseX),isNaN(s)&&(s=o._mouseY-3),0==l&&o._showToolTip(r,s,e,t,i),this._tttimer=setTimeout(function(){0!=l&&o._showToolTip(r,s,e,t,i);var a=o.toolTipHideDelay;isNaN(n)||(a=n),isNaN(a)&&(a=4e3),o._tttimerHide=setTimeout(function(){o._hideToolTip(),o._unselect()},a)},l)},_cancelTooltipTimer:function(){clearTimeout(this._tttimer)},_getGroupGradientType:function(e){var t=this.seriesGroups[e];return-1!=t.type.indexOf("area")?"horizontal"==t.orientation?"horizontalLinearGradient":"verticalLinearGradient":this._isColumnType(t.type)||-1!=t.type.indexOf("candle")?t.polar?"radialGradient":"horizontal"==t.orientation?"verticalLinearGradient":"horizontalLinearGradient":-1!=t.type.indexOf("scatter")||-1!=t.type.indexOf("bubble")||this._isPieGroup(e)?"radialGradient":void 0},_select:function(e,t,i,r,s,a){if(this._selected){if(this._selected.item==s&&this._selected.series==r&&this._selected.group==i)return;this._unselect()}var n=this.seriesGroups[i],o=n.series[r];if(0!=n.enableSelection&&0!=o.enableSelection){var l=-1!=n.type.indexOf("line")&&-1==n.type.indexOf("area");this._selected={element:e,type:t,group:i,series:r,item:s,iidxBase:a,isLineType:l,linesUnselectMode:o.linesUnselectMode||n.linesUnselectMode};var h=this._getColors(i,r,a||s,this._getGroupGradientType(i)),d=h.fillColorSelected;l&&(d="none");var f=this._getSerieSettings(i,r),g="symbol"==t?h.lineColorSymbolSelected:h.lineColorSelected;d="symbol"==t?h.fillColorSymbolSelected:d;var u="symbol"==t?1:f.stroke;this.renderer.getAttr(e,"fill")==h.fillColorAlt&&(d=h.fillColorAltSelected),this.renderer.attr(e,{stroke:g,fill:d,"stroke-width":u}),-1==n.type.indexOf("pie")&&-1==n.type.indexOf("donut")||this._applyPieSelect(),this._raiseItemEvent("mouseover",n,o,s)}},_applyPieSelect:function(){var e=this;e._createAnimationGroup("animPieSlice");var t=this._selected;if(t){var i=this.getItemCoord(t.group,t.series,t.item);if(i){var r=this._getRenderInfo(t.group,t.series,t.item),s={element:r,coord:i};this._enqueueAnimation("animPieSlice",void 0,void 0,300,function(i,r,s){var a=r.coord,n=a.selectedRadiusChange*s,o=e.renderer.pieSlicePath(a.center.x,a.center.y,0==a.innerRadius?0:a.innerRadius+n,a.outerRadius+n,a.fromAngle,a.toAngle,a.centerOffset);e.renderer.attr(r.element.element,{d:o}),e._showPieLabel(t.group,t.series,t.item,void 0,n)},s),e._startAnimation("animPieSlice")}}},_applyPieUnselect:function(){this._stopAnimations();var e=this._selected;if(e){var t=this.getItemCoord(e.group,e.series,e.item);if(t&&t.center){var i=this.renderer.pieSlicePath(t.center.x,t.center.y,t.innerRadius,t.outerRadius,t.fromAngle,t.toAngle,t.centerOffset);this.renderer.attr(e.element,{d:i}),this._showPieLabel(e.group,e.series,e.item,void 0,0)}}},_unselect:function(){var e=this;if(e._selected){var t=e._selected.group,i=e._selected.series,r=e._selected.item,s=e._selected.iidxBase,a=e._selected.type,n=e.seriesGroups[t],o=n.series[i],l=-1!=n.type.indexOf("line")&&-1==n.type.indexOf("area"),h=e._getColors(t,i,s||r,e._getGroupGradientType(t)),d=h.fillColor;l&&(d="none");var f=e._getSerieSettings(t,i),g="symbol"==a?h.lineColorSymbol:h.lineColor;d="symbol"==a?h.fillColorSymbol:d,this.renderer.getAttr(e._selected.element,"fill")==h.fillColorAltSelected&&(d=h.fillColorAlt);var u="symbol"==a?1:f.stroke;e.renderer.attr(e._selected.element,{stroke:g,fill:d,"stroke-width":u}),-1==n.type.indexOf("pie")&&-1==n.type.indexOf("donut")||this._applyPieUnselect(),e._selected=void 0,isNaN(r)||e._raiseItemEvent("mouseout",n,o,r)}e._pointMarker&&(e._pointMarker.element&&(e.renderer.removeElement(e._pointMarker.element),e._pointMarker.element=void 0),e._pointMarker=void 0,e._hideCrosshairs())},_raiseItemEvent:function(t,i,r,s){for(var a=r[t]||i[t],n=0;n<this.seriesGroups.length&&this.seriesGroups[n]!=i;n++);if(n!=this.seriesGroups.length){var o={event:t,seriesGroup:i,serie:r,elementIndex:s,elementValue:this._getDataValue(s,r.dataField,n)};a&&e.isFunction(a)&&a(o),this._raiseEvent(t,o)}},_raiseEvent:function(t,i){var r=new e.Event(t);return r.owner=this,i.event=t,r.args=i,this.host.trigger(r)},_calcInterval:function(e,t,i){var r=Math.abs(t-e),s=r/i,a=[1,2,3,4,5,10,15,20,25,50,100],n=[.5,.25,.125,.1],o=.1,l=a;s<1&&(l=n,o=10);var h=0;do{h=0,s>=1?o*=10:o/=10;for(var d=1;d<l.length&&Math.abs(l[h]*o-s)>Math.abs(l[d]*o-s);d++)h=d}while(h==l.length-1);return l[h]*o},_renderDataClone:function(){if(this._renderData&&!this._isToggleRefresh){var e=this._elementRenderInfo=[];if(!this._isSelectorRefresh)for(var t=0;t<this._renderData.length;t++){for(this._getXAxis(t).dataField;e.length<=t;)e.push({});var i=e[t],r=this._renderData[t];if(r.offsets){if(r.valueAxis){i.valueAxis={itemOffsets:{}};for(var s in r.valueAxis.itemOffsets)i.valueAxis.itemOffsets[s]=r.valueAxis.itemOffsets[s]}if(r.xAxis){i.xAxis={itemOffsets:{}};for(var s in r.xAxis.itemOffsets)i.xAxis.itemOffsets[s]=r.xAxis.itemOffsets[s]}i.series=[];for(var a=i.series,n=this._isPieGroup(t),o=0;o<r.offsets.length;o++){a.push({});for(var l=0;l<r.offsets[o].length;l++)if(n){var h=r.offsets[o][l];a[o][h.displayValue]={value:h.value,x:h.x,y:h.y,fromAngle:h.fromAngle,toAngle:h.toAngle}}else a[o][r.xoffsets.xvalues[l]]={value:r.offsets[o][l].value,valueRadius:r.offsets[o][l].valueRadius,xoffset:r.xoffsets.data[l],from:r.offsets[o][l].from,to:r.offsets[o][l].to}}}}}},getPolarDataPointOffset:function(e,t,i){var r=this._renderData[i];if(!r)return{x:NaN,y:NaN};var s=this.getValueAxisDataPointOffset(t,i),a=this.getXAxisDataPointOffset(e,i),n=this._toPolarCoord(r.polarCoords,r.xAxis.rect,a,s);return{x:n.x,y:n.y}},_getDataPointOffsetDiff:function(e,t,i,r,s,a,n){var o=this._getDataPointOffset(e,i,r,s,a,n),l=this._getDataPointOffset(t,i,r,s,a,n);return Math.abs(o-l)},_getXAxisRenderData:function(e){if(!(e>=this._renderData.length)){var t=this.seriesGroups[e],i=this._renderData[e].xAxis;if(i){if(void 0==t.xAxis){for(var r=0;r<=e&&void 0!=this.seriesGroups[r].xAxis;r++);i=this._renderData[r].xAxis}return i}}},getXAxisDataPointOffset:function(e,t){var i=this.seriesGroups[t];if(isNaN(e))return NaN;if(renderData=this._getXAxisRenderData(t),!renderData)return NaN;var r=renderData.data.axisStats,s=r.min.valueOf(),a=r.max.valueOf(),n=a-s;if(0==n&&(n=1),e.valueOf()>a||e.valueOf()<s)return NaN;var o=this._getXAxis(t),l="horizontal"==i.orientation?"height":"width",h="horizontal"==i.orientation?"y":"x",d=(e.valueOf()-s)/n,f=renderData.rect[l]-renderData.data.padding.left-renderData.data.padding.right;if(i.polar||i.spider){this._renderData[t].polarCoords.isClosedCircle&&(f=renderData.data.axisSize)}return this._plotRect[h]+renderData.data.padding.left+f*(o.flip?1-d:d)},getValueAxisDataPointOffset:function(e,t){var i=this._getValueAxis(t);if(!i)return NaN;var r=this._renderData[t];if(!r)return NaN;var s=1==i.flip,a=r.logBase,n=r.scale,o=r.gbase,l=r.baseOffset;return this._getDataPointOffset(e,o,a,n,l,s)},_getDataPointOffset:function(t,i,r,s,a,n){var o;return isNaN(t)&&(t=i),o=isNaN(r)?(t-i)*s:(e.jqx.log(t,r)-e.jqx.log(i,r))*s,this._isVML&&(o=Math.round(o)),o=n?a+o:a-o},_calcGroupOffsets:function(t,i){for(var r=this.seriesGroups[t];this._renderData.length<t+1;)this._renderData.push({});if(null!=this._renderData[t]&&void 0!=this._renderData[t].offsets)return this._renderData[t];if(this._isPieGroup(t))return this._calcPieSeriesGroupOffsets(t,i);var s=this._getValueAxis(t);if(!s||!r.series||0==r.series.length)return this._renderData[t];var a=1==s.flip,n=1==s.logarithmicScale,o=s.logarithmicScaleBase||10,l=[],h=-1!=r.type.indexOf("stacked"),d=h&&-1!=r.type.indexOf("100"),f=-1!=r.type.indexOf("range"),g=this._isColumnType(r.type),u=-1!=r.type.indexOf("waterfall"),c=this._getDataLen(t),m=r.baselineValue||s.baselineValue||0;d&&(m=0);var x=this._stats.seriesGroups[t];if(x&&x.isValid){var _=x.hasStackValueReversal;if(_&&(m=0),u&&h){if(_)return;m=x.base}m>x.max&&(m=x.max),m<x.min&&(m=x.min);var p=d||n?x.maxRange:x.max-x.min,y=x.min,v=x.max,N=i.height/(n?x.intervals:p),M=0;d?y*v<0?(p/=2,M=-(p+m)*N):M=-m*N:M=-(m-y)*N,a?M=i.y-M:M+=i.y+i.height;var b,w=[],A=[],S=[];n&&(b=e.jqx.log(v,o)-e.jqx.log(m,o),h&&(b=x.intervals,m=d?0:y),x.intervals-b,a||(M=i.y+b/x.intervals*i.height)),M=e.jqx._ptrnd(M);var C=y*v<0?i.height/2:i.height,k=[],D=[],O=h&&(g||n),F=[];l=new Array(r.series.length);for(var j=0;j<r.series.length;j++)l[j]=new Array(c);for(var T=0;T<c;T++){!u&&h&&(D=[]);for(var j=0;j<r.series.length;j++){!h&&n&&(k=[]);var I=r.series[j],P=I.dataField,q=I.dataFieldFrom,L=I.dataFieldTo,R=I.radiusDataField||I.sizeDataField;l[j][T]={};var G=this._isSerieVisible(t,j);if(-1==r.type.indexOf("candle")&&-1==r.type.indexOf("ohlc")){if(h)for(;D.length<=T;)D.push(0);var V=NaN;f&&(V=this._getDataValueAsNumber(T,q,t),isNaN(V)&&(V=m));var E=NaN;E=f?this._getDataValueAsNumber(T,L,t):this._getDataValueAsNumber(T,P,t);var H=this._getDataValueAsNumber(T,R,t);if(h&&(D[T]+=G?E:0),G||(E=NaN),isNaN(E)||n&&E<=0)l[j][T]={from:void 0,to:void 0};else{var B;h&&(O?B=E>=m?w:A:E=D[T]);var z=N*(E-m);if(f&&(z=N*(E-V)),h&&O&&(F[T]?z=N*E:(F[T]=!0,z=N*(E-m))),n){for(;k.length<=T;)k.push({p:{value:0,height:0},n:{value:0,height:0}});var W=f||f?V:m,X=E>W?k[T].p:k[T].n;X.value+=E,d?(E=X.value/(x.psums[T]+x.nsums[T])*100,z=(e.jqx.log(E,o)-x.minPow)*N):(z=e.jqx.log(X.value,o)-e.jqx.log(W,o),z*=N),z-=X.height,X.height+=z}var U=M;if(f){var Y=0;Y=n?(e.jqx.log(V,o)-e.jqx.log(m,o))*N:(V-m)*N,U+=a?Y:-Y}if(h){if(d&&!n){var Z=x.psums[T]-x.nsums[T];E>m?(z=x.psums[T]/Z*C,0!=x.psums[T]&&(z*=E/x.psums[T])):(z=x.nsums[T]/Z*C,0!=x.nsums[T]&&(z*=E/x.nsums[T]))}O&&(isNaN(B[T])&&(B[T]=U),U=B[T])}isNaN(S[T])&&(S[T]=0);var J=S[T];z=Math.abs(z);var Q=z;if(z>=1&&(h_new=this._isVML?Math.round(z):e.jqx._ptrnd(z)-1,z=Math.abs(z-h_new)>.5?Math.round(z):h_new),J+=z-Q,h||(J=0),Math.abs(J)>.5&&(J>0?(z-=1,J-=1):(z+=1,J+=1)),S[T]=J,j==r.series.length-1&&d){for(var K=0,$=0;$<j;$++)K+=Math.abs(l[$][T].to-l[$][T].from);if((K+=z)<C)if(z>.5)z=e.jqx._ptrnd(z+C-K);else for(var $=j-1;$>=0;){var ee=Math.abs(l[$][T].to-l[$][T].from);if(ee>1){l[$][T].from>l[$][T].to&&(l[$][T].from+=C-K);break}$--}}a&&(z*=-1);var te=E<m;f&&(te=V>E);var ie=isNaN(V)?E:{from:V,to:E};te?(O&&(B[T]+=z),l[j][T]={from:U,to:U+z,value:ie,valueRadius:H}):(O&&(B[T]-=z),l[j][T]={from:U,to:U-z,value:ie,valueRadius:H})}}else{var re=["Open","Close","High","Low"];for(var se in re){var ae="dataField"+re[se];I[ae]&&(l[j][T][re[se]]=this._getDataPointOffset(this._getDataValueAsNumber(T,I[ae],t),m,n?o:NaN,N,M,a))}}}}var ne=this._renderData[t];return ne.baseOffset=M,ne.gbase=m,ne.logBase=n?o:NaN,ne.scale=N,ne.offsets=u?this._applyWaterfall(l,c,t,M,m,n?o:NaN,N,a,h):l,ne.xoffsets=this._calculateXOffsets(t,i.width),this._renderData[t]}},_isPercent:function(e){return"string"==typeof e&&e.length>0&&e.indexOf("%")==e.length-1},_calcPieSeriesGroupOffsets:function(t,i){for(var r=this,s=this._getDataLen(t),a=this.seriesGroups[t],n=this._renderData[t]={},o=n.offsets=[],l=0;l<a.series.length;l++){var h=a.series[l],d=this._get([h.minAngle,h.startAngle]);(isNaN(d)||d<0||d>360)&&(d=0);var f=this._get([h.maxAngle,h.endAngle]);(isNaN(f)||f<0||f>360)&&(f=360);var g=f-d,u=h.initialAngle||0;u<d&&(u=d),u>f&&(u=f);var c=h.centerOffset||0,m=e.jqx.getNum([h.offsetX,a.offsetX,i.width/2]),x=e.jqx.getNum([h.offsetY,a.offsetY,i.height/2]),_=Math.min(i.width,i.height)/2,p=u,y=h.radius;r._isPercent(y)&&(y=parseFloat(y)/100*_),isNaN(y)&&(y=.4*_);var v=h.innerRadius;r._isPercent(v)&&(v=parseFloat(v)/100*_),(isNaN(v)||v>=y)&&(v=0);var N=h.selectedRadiusChange;r._isPercent(N)&&(N=parseFloat(N)/100*(y-v)),isNaN(N)&&(N=.1*(y-v)),o.push([]);for(var M=0,b=0,w=0;w<s;w++){var A=this._getDataValueAsNumber(w,h.dataField,t);isNaN(A)||(this._isSerieVisible(t,l,w)||1==h.hiddenPointsDisplay)&&(A>0?M+=A:b+=A)}var S=M-b;0==S&&(S=1);for(var w=0;w<s;w++){var A=this._getDataValueAsNumber(w,h.dataField,t);if(isNaN(A))o[l].push({});else{var C=h.displayText||h.displayField,k=this._getDataValue(w,C,t);void 0==k&&(k=w);var D=0,O=this._isSerieVisible(t,l,w);(O||1==h.hiddenPointsDisplay)&&(D=Math.abs(A)/S*g);var F=i.x+m,j=i.y+x,T=c;e.isFunction(c)&&(T=c({seriesIndex:l,seriesGroupIndex:t,itemIndex:w})),isNaN(T)&&(T=0);var I={key:t+"_"+l+"_"+w,value:A,displayValue:k,x:F,y:j,fromAngle:p,toAngle:p+D,centerOffset:T,innerRadius:v,outerRadius:y,selectedRadiusChange:N,visible:O};o[l].push(I),p+=D}}}return n},_isPointSeriesOnly:function(){for(var e=0;e<this.seriesGroups.length;e++){var t=this.seriesGroups[e];if(-1==t.type.indexOf("line")&&-1==t.type.indexOf("area")&&-1==t.type.indexOf("scatter")&&-1==t.type.indexOf("bubble"))return!1}return!0},_hasColumnSeries:function(){for(var e=["column","ohlc","candlestick","waterfall"],t=0;t<this.seriesGroups.length;t++){var i=this.seriesGroups[t];for(var r in e)if(-1!=i.type.indexOf(e[r]))return!0}return!1},_alignValuesWithTicks:function(e){var t=this._isPointSeriesOnly(),i=this.seriesGroups[e],r=this._getXAxis(e),s=void 0==r.valuesOnTicks?t:0!=r.valuesOnTicks;return r.logarithmicScale&&(s=!0),void 0==e?s:void 0==i.valuesOnTicks?s:i.valuesOnTicks},_getYearsDiff:function(e,t){return t.getFullYear()-e.getFullYear()},_getMonthsDiff:function(e,t){return 12*(t.getFullYear()-e.getFullYear())+t.getMonth()-e.getMonth()},_getDateDiff:function(t,i,r,s){var a=0;switch("year"!=r&&"month"!=r&&(a=i.valueOf()-t.valueOf()),r){case"year":a=this._getYearsDiff(t,i);break;case"month":a=this._getMonthsDiff(t,i);break;case"day":a/=864e5;break;case"hour":a/=36e5;break;case"minute":a/=6e4;break;case"second":a/=1e3}return"year"!=r&&"month"!=r&&0!=s&&(a=e.jqx._rnd(a,1,!0)),a},_getBestDTUnit:function(e,t,i,r,s){var a="day",n=t.valueOf()-e.valueOf();a=n<1e3?"second":n<36e5?"minute":n<864e5?"hour":n<2592e6?"day":n<31104e6?"month":"year";for(var o=[{key:"year",cnt:n/31536e6},{key:"month",cnt:n/2592e6},{key:"day",cnt:n/864e5},{key:"hour",cnt:n/36e5},{key:"minute",cnt:n/6e4},{key:"second",cnt:n/1e3},{key:"millisecond",cnt:n}],l=-1,h=0;h<o.length;h++)if(o[h].key==a){l=h;break}for(var d=-1,f=-1;l<o.length&&!(o[l].cnt/100>r);l++){var g=this._estAxisInterval(e,t,i,r,o[l].key,s),u=this._getDTIntCnt(e,t,g,o[l].key);(-1==d||d<u)&&(d=u,f=l)}return a=o[f].key},_getXAxisStats:function(t,i,r){var s=this._getDataLen(t),a="date"==i.type||"time"==i.type;if(a&&!this._autoDateFormats){this._autoDateFormats||(this._autoDateFormats=[]);var n=this._testXAxisDateFormat();n&&this._autoDateFormats.push(n)}var o=a?this._castAsDate(i.minValue,i.dateFormat):this._castAsNumber(i.minValue),l=a?this._castAsDate(i.maxValue,i.dateFormat):this._castAsNumber(i.maxValue);if(this._selectorRange&&this._selectorRange[t]){var h=this._selectorRange[t].min;isNaN(h)||(o=a?this._castAsDate(h,i.dateFormat):this._castAsNumber(h));var d=this._selectorRange[t].max;isNaN(d)||(l=a?this._castAsDate(d,i.dateFormat):this._castAsNumber(d))}for(var f,g,u=o,c=l,m=void 0==i.type||"auto"==i.type,x=m||"basic"==i.type,_=0,p=0,y=0;y<s&&i.dataField;y++){var v=this._getDataValue(y,i.dataField,t);v=a?this._castAsDate(v,i.dateFormat):this._castAsNumber(v),isNaN(v)||(a?_++:p++,(isNaN(f)||v<f)&&(f=v),(isNaN(g)||v>=g)&&(g=v))}m&&(!a&&p==s||a&&_==s)&&(x=!1),x&&(f=0,g=Math.max(0,s-1)),isNaN(u)&&(u=f),isNaN(c)&&(c=g),a?(this._isDate(u)||(u=this._isDate(c)?c:new Date),this._isDate(c)||(c=this._isDate(u)?u:new Date)):(isNaN(u)&&(u=0),isNaN(c)&&(c=x?Math.max(0,s-1):u)),void 0==f&&(f=u),void 0==g&&(g=c);var N=i.rangeSelector;if(N){var M=N.minValue||u;M&&a&&(M=this._castAsDate(M,N.dateFormat||i.dateFormat));var b=N.maxValue||c;b&&a&&(b=this._castAsDate(b,N.dateFormat||i.rangeSelector)),u<M&&(u=M),c<M&&(c=b),u>b&&(u=M),c>b&&(c=b)}var w,A,S=i.unitInterval;a&&(w=i.baseUnit,w||(w=this._getBestDTUnit(u,c,t,r)),A="hour"==w||"minute"==w||"second"==w||"millisecond"==w);var C=1==i.logarithmicScale,k=i.logarithmicScaleBase;(isNaN(k)||k<=1)&&(k=10);var S=i.unitInterval;C?S=1:(isNaN(S)||S<=0)&&(S=this._estAxisInterval(u,c,t,r,w));var D={min:u,max:c},O=this.seriesGroups[t];if(C){u||(u=1,c&&u>c&&(u=c)),c||(c=u),D={min:u,max:c};var F=e.jqx._rnd(e.jqx.log(u,k),1,!1),j=e.jqx._rnd(e.jqx.log(c,k),1,!0);c=Math.pow(k,j),u=Math.pow(k,F)}else a||!O.polar&&!O.spider||(u=e.jqx._rnd(u,S,!1),c=e.jqx._rnd(c,S,!0));return{min:u,max:c,logAxis:{enabled:C,base:k,minPow:F,maxPow:j},dsRange:{min:f,max:g},filterRange:D,useIndeces:x,isDateTime:a,isTimeUnit:A,dateTimeUnit:w,interval:S}},_getDefaultDTFormatFn:function(e){var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return"year"==e||"month"==e||"day"==e?function(e){return e.getDate()+"-"+t[e.getMonth()]+"-"+e.getFullYear()}:function(e){return e.getDate()+"-"+t[e.getMonth()]+"-"+e.getFullYear()+"<br>"+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}},_getDTIntCnt:function(e,t,i,r){var s=0,a=new Date(e),n=new Date(t);if(n=n.valueOf(),i<=0)return 1;for(;a.valueOf()<n;)"millisecond"==r?a=new Date(a.valueOf()+i):"second"==r?a=new Date(a.valueOf()+1e3*i):"minute"==r?a=new Date(a.valueOf()+6e4*i):"hour"==r?a=new Date(a.valueOf()+6e4*i*24):"day"==r?a.setDate(a.getDate()+i):"month"==r?a.setMonth(a.getMonth()+i):"year"==r&&a.setFullYear(a.getFullYear()+i),s++;return s},_estAxisInterval:function(e,t,i,r,s,a){if(isNaN(e)||isNaN(t))return NaN;var n=[1,2,5,10,15,20,50,100,200,500],o=0,l=r/(!isNaN(a)&&a>0?a:50)
;if(this._renderData&&this._renderData.length>i&&this._renderData[i].xAxis&&!isNaN(this._renderData[i].xAxis.avgWidth)){var h=Math.max(1,this._renderData[i].xAxis.avgWidth);0!=h&&isNaN(a)&&(l=.9*r/h)}if(l<=1)return Math.abs(t-e);for(;;){var d=o>=n.length?Math.pow(10,3+o-n.length):n[o];if((this._isDate(e)&&this._isDate(t)?this._getDTIntCnt(e,t,d,s):(t-e)/d)<=l)break;o++}var f=this.seriesGroups[i];return(f.spider||f.polar)&&2*d>t-e&&(d=t-e),d},_getPaddingSize:function(e,t,i,r,s,a,n){var o=e.min,l=e.max;e.logAxis.enabled&&(o=e.logAxis.minPow,l=e.logAxis.maxPow);var h=e.interval,d=e.dateTimeUnit;if(s){var f=r/Math.max(1,l-o+h)*h;return a?{left:0,right:f}:i?{left:0,right:0}:{left:f/2,right:f/2}}if(i&&!n)return{left:0,right:0};if(this._isDate(o)&&this._isDate(l)){var g=this._getDTIntCnt(o,l,Math.min(h,l-o),d),u=r/Math.max(2,g);return{left:u/2,right:u/2}}var g=Math.max(1,l-o);if(1==g)return sz=r/4,{left:sz,right:sz};var u=r/(g+1);return{left:u/2,right:u/2}},_calculateXOffsets:function(t,i){var r=this.seriesGroups[t],s=this._getXAxis(t),a=[],n=[],o=this._getDataLen(t),l=this._getXAxisStats(t,s,i),h=l.min,d=l.max,f=l.isDateTime,g=l.isTimeUnit,u=this._hasColumnSeries(),c=r.polar||r.spider,m=this._get([r.startAngle,r.minAngle,0]),x=this._get([r.endAngle,r.maxAngle,360]),_=c&&!(Math.abs(Math.abs(x-m)-360)>1e-4),p=this._alignValuesWithTicks(t),y=this._getPaddingSize(l,s,p,i,c,_,u),v=d-h,N=l.filterRange;0==v&&(v=1);var M=i-y.left-y.right;c&&p&&!_&&(y.left=y.right=0);for(var b=-1,w=-1,A=0;A<o;A++){var S=void 0===s.dataField?A:this._getDataValue(A,s.dataField,t);if(l.useIndeces){if(A<N.min||A>N.max){a.push(NaN),n.push(void 0);continue}if(k=y.left+(A-h)/v*M,1==l.logAxis.enabled){var C=l.logAxis.base;k=this._jqxPlot.scale(S,{min:h.valueOf(),max:d.valueOf(),type:"logarithmic",base:C},{min:0,max:M,flip:!1})}a.push(e.jqx._ptrnd(k)),n.push(S),-1==b&&(b=A),(-1==w||w<A)&&(w=A)}else if(S=f?this._castAsDate(S,s.dateFormat):this._castAsNumber(S),isNaN(S)||S<N.min||S>N.max)a.push(NaN),n.push(void 0);else{var k=0;if(1==l.logAxis.enabled){var C=l.logAxis.base;k=this._jqxPlot.scale(S,{min:h.valueOf(),max:d.valueOf(),type:"logarithmic",base:C},{min:0,max:M,flip:!1})}else!f||f&&g?(diffFromMin=S-h,k=(S-h)*M/v):k=(S.valueOf()-h.valueOf())/(d.valueOf()-h.valueOf())*M;k=e.jqx._ptrnd(y.left+k),a.push(k),n.push(S),-1==b&&(b=A),(-1==w||w<A)&&(w=A)}}if(1==s.flip)for(var A=0;A<a.length;A++)isNaN(a[A])||(a[A]=i-a[A]);(g||f)&&(v=this._getDateDiff(h,d,s.baseUnit),v=e.jqx._rnd(v,1,!1));var D=Math.max(1,v),O=M/D;return b==w&&1==D&&(a[b]=y.left+M/2),{axisStats:l,data:a,xvalues:n,first:b,last:w,length:-1==w?0:w-b+1,itemWidth:O,intervalWidth:O*l.interval,rangeLength:v,useIndeces:l.useIndeces,padding:y,axisSize:M}},_getXAxis:function(e){return void 0==e||this.seriesGroups.length<=e?this.categoryAxis||this.xAxis:this.seriesGroups[e].categoryAxis||this.seriesGroups[e].xAxis||this.categoryAxis||this.xAxis},_isGreyScale:function(e,t){var i=this.seriesGroups[e],r=i.series[t];return 1==r.greyScale||0!=r.greyScale&&(1==i.greyScale||0!=i.greyScale&&1==this.greyScale)},_getSeriesColors:function(t,i,r){var s=this._getSeriesColorsInternal(t,i,r);if(this._isGreyScale(t,i))for(var a in s)s[a]=e.jqx.toGreyScale(s[a]);return s},_getColorFromScheme:function(e,t,i){var r="#000000",s=this.seriesGroups[e],a=s.series[t];if(this._isPieGroup(e)){var n=this._getDataLen(e);r=this._getItemColorFromScheme(a.colorScheme||s.colorScheme||this.colorScheme,t*n+i,e,t)}else{for(var o=0,l=0;l<=e;l++)for(var h in this.seriesGroups[l].series){if(l==e&&h==t)break;o++}var d=this.colorScheme;if(s.colorScheme&&(d=s.colorScheme,sidex=seriesIndex),void 0!=d&&""!=d||(d=this.colorSchemes[0].name),!d)return r;for(var l=0;l<this.colorSchemes.length;l++){var f=this.colorSchemes[l];if(f.name==d){for(;o>f.colors.length;)o-=f.colors.length,++l>=this.colorSchemes.length&&(l=0),f=this.colorSchemes[l];r=f.colors[o%f.colors.length]}}}return r},_createColorsCache:function(){this._colorsCache={get:function(e){if(this._store[e])return this._store[e]},set:function(e,t){this._size<1e4&&(this._store[e]=t,this._size++)},clear:function(){this._store={},this._size=0},_size:0,_store:{}}},_getSeriesColorsInternal:function(t,i,r){var s=this.seriesGroups[t],a=s.series[i];e.isFunction(a.colorFunction)||"pie"==s.type||"donut"==s.type||(r=NaN);var n=t+"_"+i+"_"+(isNaN(r)?"NaN":r);if(this._colorsCache.get(n))return this._colorsCache.get(n);var o,l={lineColor:"#222222",lineColorSelected:"#151515",lineColorSymbol:"#222222",lineColorSymbolSelected:"#151515",fillColor:"#222222",fillColorSelected:"#333333",fillColorSymbol:"#222222",fillColorSymbolSelected:"#333333",fillColorAlt:"#222222",fillColorAltSelected:"#333333"};if(e.isFunction(a.colorFunction)){var h=isNaN(r)?NaN:this._getDataValue(r,a.dataField,t);if(-1!=s.type.indexOf("range")&&!isNaN(r)){h={from:this._getDataValue(r,a.dataFieldFrom,t),to:this._getDataValue(r,a.dataFieldTo,t)}}if("object"==typeof(o=a.colorFunction(h,r,a,s)))for(var d in o)l[d]=o[d];else l.fillColor=o}else{for(var d in l)a[d]&&(l[d]=a[d]);a.fillColor||a.color?a.fillColor=a.fillColor||a.color:l.fillColor=this._getColorFromScheme(t,i,r)}var f={fillColor:{baseColor:"fillColor",adjust:1},fillColorSelected:{baseColor:"fillColor",adjust:1.1},fillColorSymbol:{baseColor:"fillColor",adjust:1},fillColorSymbolSelected:{baseColor:"fillColorSymbol",adjust:2},fillColorAlt:{baseColor:"fillColor",adjust:4},fillColorAltSelected:{baseColor:"fillColor",adjust:3},lineColor:{baseColor:"fillColor",adjust:.95},lineColorSelected:{baseColor:"lineColor",adjust:.95},lineColorSymbol:{baseColor:"lineColor",adjust:1},lineColorSymbolSelected:{baseColor:"lineColorSelected",adjust:1}};for(var d in l)"object"==typeof o&&o[d]||a[d]&&(l[d]=a[d]);for(var d in l)"object"==typeof o&&o[d]||a[d]||(l[d]=e.jqx.adjustColor(l[f[d].baseColor],f[d].adjust));return this._colorsCache.set(n,l),l},_getItemColorFromScheme:function(t,i,r,s){void 0!=t&&""!=t||(t=this.colorSchemes[0].name);for(var a=0;a<this.colorSchemes.length&&t!=this.colorSchemes[a].name;a++);for(var n=0;n<=i;){a==this.colorSchemes.length&&(a=0);var o=this.colorSchemes[a].colors.length;if(!(n+o<=i)){var l=this.colorSchemes[a].colors[i-n];return this._isGreyScale(r,s)&&0==l.indexOf("#")&&(l=e.jqx.toGreyScale(l)),l}n+=o,a++}},getColorScheme:function(e){for(var t=0;t<this.colorSchemes.length;t++)if(this.colorSchemes[t].name==e)return this.colorSchemes[t].colors},addColorScheme:function(e,t){for(var i=0;i<this.colorSchemes.length;i++)if(this.colorSchemes[i].name==e)return void(this.colorSchemes[i].colors=t);this.colorSchemes.push({name:e,colors:t})},removeColorScheme:function(e){for(var t=0;t<this.colorSchemes.length;t++)if(this.colorSchemes[t].name==e){this.colorSchemes.splice(t,1);break}},colorSchemes:[{name:"scheme01",colors:["#307DD7","#AA4643","#89A54E","#71588F","#4198AF"]},{name:"scheme02",colors:["#7FD13B","#EA157A","#FEB80A","#00ADDC","#738AC8"]},{name:"scheme03",colors:["#E8601A","#FF9639","#F5BD6A","#599994","#115D6E"]},{name:"scheme04",colors:["#D02841","#FF7C41","#FFC051","#5B5F4D","#364651"]},{name:"scheme05",colors:["#25A0DA","#309B46","#8EBC00","#FF7515","#FFAE00"]},{name:"scheme06",colors:["#0A3A4A","#196674","#33A6B2","#9AC836","#D0E64B"]},{name:"scheme07",colors:["#CC6B32","#FFAB48","#FFE7AD","#A7C9AE","#888A63"]},{name:"scheme08",colors:["#3F3943","#01A2A6","#29D9C2","#BDF271","#FFFFA6"]},{name:"scheme09",colors:["#1B2B32","#37646F","#A3ABAF","#E1E7E8","#B22E2F"]},{name:"scheme10",colors:["#5A4B53","#9C3C58","#DE2B5B","#D86A41","#D2A825"]},{name:"scheme11",colors:["#993144","#FFA257","#CCA56A","#ADA072","#949681"]},{name:"scheme12",colors:["#105B63","#EEEAC5","#FFD34E","#DB9E36","#BD4932"]},{name:"scheme13",colors:["#BBEBBC","#F0EE94","#F5C465","#FA7642","#FF1E54"]},{name:"scheme14",colors:["#60573E","#F2EEAC","#BFA575","#A63841","#BFB8A3"]},{name:"scheme15",colors:["#444546","#FFBB6E","#F28D00","#D94F00","#7F203B"]},{name:"scheme16",colors:["#583C39","#674E49","#948658","#F0E99A","#564E49"]},{name:"scheme17",colors:["#142D58","#447F6E","#E1B65B","#C8782A","#9E3E17"]},{name:"scheme18",colors:["#4D2B1F","#635D61","#7992A2","#97BFD5","#BFDCF5"]},{name:"scheme19",colors:["#844341","#D5CC92","#BBA146","#897B26","#55591C"]},{name:"scheme20",colors:["#56626B","#6C9380","#C0CA55","#F07C6C","#AD5472"]},{name:"scheme21",colors:["#96003A","#FF7347","#FFBC7B","#FF4154","#642223"]},{name:"scheme22",colors:["#5D7359","#E0D697","#D6AA5C","#8C5430","#661C0E"]},{name:"scheme23",colors:["#16193B","#35478C","#4E7AC7","#7FB2F0","#ADD5F7"]},{name:"scheme24",colors:["#7B1A25","#BF5322","#9DA860","#CEA457","#B67818"]},{name:"scheme25",colors:["#0081DA","#3AAFFF","#99C900","#FFEB3D","#309B46"]},{name:"scheme26",colors:["#0069A5","#0098EE","#7BD2F6","#FFB800","#FF6800"]},{name:"scheme27",colors:["#FF6800","#A0A700","#FF8D00","#678900","#0069A5"]}],_formatValue:function(t,i,r,s,a,n){if(void 0==t)return"";if(this._isObject(t)&&!this._isDate(t)&&!r)return"";if(r){if(!e.isFunction(r))return t.toString();try{return r(t,n,a,s)}catch(e){return e.message}}return this._isNumber(t)?this._formatNumber(t,i):this._isDate(t)?this._formatDate(t,i):i?(i.prefix||"")+t.toString()+(i.sufix||""):t.toString()},_getFormattedValue:function(t,i,r,s,a,n){var o=this.seriesGroups[t],l=o.series[i],h="",d=s,f=a;f||(f=l.formatFunction||o.formatFunction),d||(d=l.formatSettings||o.formatSettings),!l.formatFunction&&l.formatSettings&&(f=void 0);var g={},u=0;for(var c in l)0==c.indexOf("dataField")&&(g[c.substring(9).toLowerCase()]=this._getDataValue(r,l[c],t),u++);if(0==u&&(g=this._getDataValue(r,void 0,t)),-1!=o.type.indexOf("waterfall")&&this._isSummary(t,r)&&(g=this._renderData[t].offsets[i][r].value,u=0),f&&e.isFunction(f))try{return f(1==u?g[""]:g,r,l,o)}catch(e){return e.message}if(1==u&&this._isPieGroup(t))return this._formatValue(g[""],d,f,t,i,r);if(u>0){var m=0;for(var c in g){m>0&&""!=h&&(h+="<br>");var x="dataField"+(c.length>0?c.substring(0,1).toUpperCase()+c.substring(1):""),_="displayText"+(c.length>0?c.substring(0,1).toUpperCase()+c.substring(1):""),p=l[_]||l[x],y=g[c];void 0!=y&&(y=this._formatValue(y,d,f,t,i,r),h+=!0===n?y:p+": "+y,m++)}}else void 0!=g&&(h=this._formatValue(g,d,f,t,i,r));return h||""},_isNumberAsString:function(t){if("string"!=typeof t)return!1;t=e.trim(t);for(var i=0;i<t.length;i++){var r=t.charAt(i);if(!(r>="0"&&r<="9"||","==r||"."==r)&&(("-"!=r||0!=i)&&!("("==r&&0==i||")"==r&&i==t.length-1)))return!1}return!0},_castAsDate:function(t,i){if(t instanceof Date&&!isNaN(t))return t;if("string"==typeof t){var r;if(i&&(r=e.jqx.dataFormat.parsedate(t,i),this._isDate(r)))return r;if(this._autoDateFormats)for(var s=0;s<this._autoDateFormats.length;s++)if(r=e.jqx.dataFormat.parsedate(t,this._autoDateFormats[s]),this._isDate(r))return r;var a=this._detectDateFormat(t);return a&&(r=e.jqx.dataFormat.parsedate(t,a),this._isDate(r))?(this._autoDateFormats.push(a),r):(r=new Date(t),this._isDate(r)&&-1==t.indexOf(":")&&r.setHours(0,0,0,0),r)}},_castAsNumber:function(e){if(e instanceof Date&&!isNaN(e))return e.valueOf();if("string"==typeof e)if(this._isNumber(e))e=parseFloat(e);else if(!/[a-zA-Z]/.test(e)){var t=new Date(e);void 0!=t&&(e=t.valueOf())}return e},_isNumber:function(e){return"string"==typeof e&&this._isNumberAsString(e)&&(e=parseFloat(e)),"number"==typeof e&&isFinite(e)},_isDate:function(e){return e instanceof Date&&!isNaN(e.getDate())},_isBoolean:function(e){return"boolean"==typeof e},_isObject:function(t){return t&&("object"==typeof t||e.isFunction(t))||!1},_formatDate:function(t,i){var r=t.toString();return i&&(i.dateFormat&&(r=e.jqx.dataFormat.formatDate(t,i.dateFormat)),r=(i.prefix||"")+r+(i.sufix||"")),r},_formatNumber:function(e,t){if(!this._isNumber(e))return e;t=t||{};var i=".",r="",s=this;s.localization&&(i=s.localization.decimalSeparator||s.localization.decimalseparator||i,r=s.localization.thousandsSeparator||s.localization.thousandsseparator||r),t.decimalSeparator&&(i=t.decimalSeparator),t.thousandsSeparator&&(r=t.thousandsSeparator);var a=t.prefix||"",n=t.sufix||"",o=t.decimalPlaces;isNaN(o)&&(o=this._getDecimalPlaces([e],void 0,3));var l=t.negativeWithBrackets||!1,h=e<0;h&&l&&(e*=-1);var d,f=e.toString(),g=Math.pow(10,o);if(f=(Math.round(e*g)/g).toString(),isNaN(f)&&(f=""),d=f.lastIndexOf("."),o>0)for(d<0?(f+=i,d=f.length-1):"."!==i&&(f=f.replace(".",i));f.length-1-d<o;)f+="0";d=f.lastIndexOf(i),d=d>-1?d:f.length;for(var u=f.substring(d),c=0,m=d;m>0;m--,c++)c%3==0&&m!==d&&(!h||m>1||h&&l)&&(u=r+u),u=f.charAt(m-1)+u;return f=u,h&&l&&(f="("+f+")"),a+f+n},_defaultNumberFormat:{prefix:"",sufix:"",decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,negativeWithBrackets:!1},_calculateControlPoints:function(e,t){var i=e[t],r=e[t+1],s=e[t+2],a=e[t+3],n=e[t+4],o=e[t+5],l=Math.sqrt(Math.pow(s-i,2)+Math.pow(a-r,2)),h=Math.sqrt(Math.pow(n-s,2)+Math.pow(o-a,2)),d=l+h;0==d&&(d=1);var f=.4*l/d,g=.4-f;return[s+f*(i-n),a+f*(r-o),s-g*(i-n),a-g*(r-o)]},_getBezierPoints:function(t){for(var i="",r=[],s=[],a=t.split(" "),n=0;n<a.length;n++){var o=a[n].split(",");r.push(parseFloat(o[0])),r.push(parseFloat(o[1])),!isNaN(r[r.length-1])&&isNaN(r[r.length-2])}var l=r.length;if(l<=1)return"";if(2==l)return i="M"+e.jqx._ptrnd(r[0])+","+e.jqx._ptrnd(r[1])+" L"+e.jqx._ptrnd(r[0]+1)+","+e.jqx._ptrnd(r[1]+1)+" ";for(var n=0;n<l-4;n+=2)s=s.concat(this._calculateControlPoints(r,n));for(var n=2;n<l-5;n+=2)i+=" C"+e.jqx._ptrnd(s[2*n-2])+","+e.jqx._ptrnd(s[2*n-1])+" "+e.jqx._ptrnd(s[2*n])+","+e.jqx._ptrnd(s[2*n+1])+" "+e.jqx._ptrnd(r[n+2])+","+e.jqx._ptrnd(r[n+3])+" ";return i=l<=4||Math.abs(r[0]-r[2])<3||Math.abs(r[1]-r[3])<3||this._isVML?"M"+e.jqx._ptrnd(r[0])+","+e.jqx._ptrnd(r[1])+" L"+e.jqx._ptrnd(r[2])+","+e.jqx._ptrnd(r[3])+" "+i:"M"+e.jqx._ptrnd(r[0])+","+e.jqx._ptrnd(r[1])+" Q"+e.jqx._ptrnd(s[0])+","+e.jqx._ptrnd(s[1])+" "+e.jqx._ptrnd(r[2])+","+e.jqx._ptrnd(r[3])+" "+i,l>=4&&(Math.abs(r[l-2]-r[l-4])<3||Math.abs(r[l-1]-r[l-3])<3||this._isVML)?i+=" L"+e.jqx._ptrnd(r[l-2])+","+e.jqx._ptrnd(r[l-1])+" ":l>=5&&(i+=" Q"+e.jqx._ptrnd(s[2*l-10])+","+e.jqx._ptrnd(s[2*l-9])+" "+e.jqx._ptrnd(r[l-2])+","+e.jqx._ptrnd(r[l-1])+" "),i},_animTickInt:50,_createAnimationGroup:function(e){this._animGroups||(this._animGroups={}),this._animGroups[e]={animations:[],startTick:NaN}},_startAnimation:function(e){var t=new Date,i=t.getTime();this._animGroups[e].startTick=i,this._runAnimation(),this._enableAnimTimer()},_enqueueAnimation:function(e,t,i,r,s,a,n){r<0&&(r=0),void 0==n&&(n="easeInOutSine"),this._animGroups[e].animations.push({key:t,properties:i,duration:r,fn:s,context:a,easing:n})},_stopAnimations:function(){clearTimeout(this._animtimer),this._animtimer=void 0,this._animGroups=void 0},_enableAnimTimer:function(){if(!this._animtimer){var e=this;this._animtimer=setTimeout(function(){e._runAnimation()},this._animTickInt)}},_runAnimation:function(t){if(this._animGroups){var i=new Date,r=i.getTime(),s={};for(var a in this._animGroups){for(var n=this._animGroups[a].animations,o=this._animGroups[a].startTick,l=0,h=0;h<n.length;h++){var d=n[h],f=r-o;d.duration>l&&(l=d.duration);var g=d.duration>0?f/d.duration:1,u=g;if(d.easing&&0!=d.duration&&(u=e.easing[d.easing](g,f,0,1,d.duration)),g>1&&(g=1,u=1),d.fn)d.fn(d.key,d.context,u);else{for(var c={},a=0;a<d.properties.length;a++){var m=d.properties[a],x=0;x=1==g?m.to:easeParecent*(m.to-m.from)+m.from,c[m.key]=x}this.renderer.attr(d.key,c)}}o+l>r&&(s[a]={startTick:o,animations:n})}this._animGroups=s,this.renderer instanceof e.jqx.HTML5Renderer&&this.renderer.refresh()}this._animtimer=null;for(var a in this._animGroups){this._enableAnimTimer();break}},_fixCoords:function(e,t){if("horizontal"!=this.seriesGroups[t].orientation)return e;var i=e.x;e.x=e.y,e.y=i+this._plotRect.y-this._plotRect.x;var i=e.width;return e.width=e.height,e.height=i,e},getItemCoord:function(e,t,i){var r=this;if(r._isPieGroup(e)&&(!r._isSerieVisible(e,t,i)||!r._renderData||r._renderData.length<=e))return{x:NaN,y:NaN};if(!r._isSerieVisible(e,t)||!r._renderData||r._renderData.length<=e)return{x:NaN,y:NaN};var s=r.seriesGroups[e],a=s.series[t],n=r._getItemCoord(e,t,i);if(r._isPieGroup(e)){if(isNaN(n.x)||isNaN(n.y)||isNaN(n.fromAngle)||isNaN(n.toAngle))return{x:NaN,y:NaN};var o=this._plotRect,l=n.fromAngle*(Math.PI/180),h=n.toAngle*(Math.PI/180);x1=o.x+n.center.x+Math.cos(l)*n.outerRadius,x2=o.x+n.center.x+Math.cos(h)*n.outerRadius,y1=o.y+n.center.y-Math.sin(l)*n.outerRadius,y2=o.y+n.center.y-Math.sin(h)*n.outerRadius;var d=Math.min(x1,x2),f=Math.abs(x2-x1),g=Math.min(y1,y2);return n={x:d,y:g,width:f,height:Math.abs(y2-y1),center:n.center,centerOffset:n.centerOffset,innerRadius:n.innerRadius,outerRadius:n.outerRadius,selectedRadiusChange:n.selectedRadiusChange,fromAngle:n.fromAngle,toAngle:n.toAngle}}if(-1!=s.type.indexOf("column")||-1!=s.type.indexOf("waterfall")){var u=this._getColumnSerieWidthAndOffset(e,t);n.height=Math.abs(n.y.to-n.y.from),n.y=Math.min(n.y.to,n.y.from),n.x+=u.offset,n.width=u.width}else if(-1!=s.type.indexOf("ohlc")||-1!=s.type.indexOf("candlestick")){var u=this._getColumnSerieWidthAndOffset(e,t),g=n.y,c=Math.min(g.Open,g.Close,g.Low,g.High),m=Math.max(g.Open,g.Close,g.Low,g.High);n.height=Math.abs(m-c),n.y=c,n.x+=u.offset,n.width=u.width}else if(-1!=s.type.indexOf("line")||-1!=s.type.indexOf("area"))n.width=n.height=0,n.y=n.y.to;else if(-1!=s.type.indexOf("bubble")||-1!=s.type.indexOf("scatter")){n.center={x:n.x,y:n.y.to};var x=n.y.radius;"circle"!=a.symbolType&&void 0!=a.symbolType&&(x/=2),n.y=n.y.to,n.radius=x,n.width=2*x,n.height=2*x}if(n=this._fixCoords(n,e),s.polar||s.spider){var _=this._toPolarCoord(this._renderData[e].polarCoords,this._plotRect,n.x,n.y);n.x=_.x,n.y=_.y,n.center&&(n.center=this._toPolarCoord(this._renderData[e].polarCoords,this._plotRect,n.center.x,n.center.y))}return-1==s.type.indexOf("bubble")&&-1==s.type.indexOf("scatter")||(n.x-=x,n.y-=x),n},_getItemCoord:function(e,t,i){var r,s,a=this.seriesGroups[e];if(!a||!this._renderData)return{x:NaN,y:NaN};if(!a.series[t])return{x:NaN,y:NaN};var n=this._plotRect;if(this._isPieGroup(e)){var o=this._renderData[e].offsets[t][i];if(!o)return{x:NaN,y:NaN};var l=(o.fromAngle+o.toAngle)/2*(Math.PI/180);return r=n.x+o.x+Math.cos(l)*o.outerRadius,s=n.y+o.y-Math.sin(l)*o.outerRadius,{x:r,y:s,center:{x:o.x,y:o.y},centerOffset:o.centerOffset,innerRadius:o.innerRadius,outerRadius:o.outerRadius,selectedRadiusChange:o.selectedRadiusChange,fromAngle:o.fromAngle,toAngle:o.toAngle}}if(r=n.x+this._renderData[e].xoffsets.data[i],s=this._renderData[e].offsets[t][i],isNaN(r)||!s)return{x:NaN,y:NaN};var h={};for(var d in s)h[d]=s[d];return{x:r,y:h}},getXAxisValue:function(t,i){var r=this.seriesGroups[i];if(r){var s=this._getXAxis(i),a=this._plotRect,n=0,o=NaN,l=this._renderData[0].xoffsets.axisStats,h=0,d=0;if(r.polar||r.spider){if(isNaN(t.x)||isNaN(t.y))return NaN;var f=this._getPolarAxisCoords(i,a);if(e.jqx._ptdist(t.x,t.y,f.x,f.y)>f.r)return NaN;var g=Math.atan2(f.y-t.y,t.x-f.x);g=Math.PI/2-g,g<0&&(g=2*Math.PI+g),o=g*f.r;var u=f.startAngle+Math.PI/2,c=f.endAngle+Math.PI/2;h=u*f.r,d=c*f.r,n=(c-u)*f.r;var m=this._getPaddingSize(l,s,s.valuesOnTicks,n,!0,f.isClosedCircle,this._hasColumnSeries());f.isClosedCircle?(n-=m.left+m.right,d-=m.left+m.right):s.valuesOnTicks||(h+=m.left,d-=m.right)}else{if("horizontal"!=r.orientation){if(t<a.x||t>a.x+a.width)return NaN;o=t-a.x,n=a.width}else{if(t<a.y||t>a.y+a.height)return NaN;o=t-a.y,n=a.height}if(this._renderData[i]&&this._renderData[i].xoffsets){var m=this._renderData[i].xoffsets.padding;n-=m.left+m.right,o-=m.left}d=n}return this._jqxPlot.scale(o,{min:h,max:d},{min:l.min.valueOf(),max:l.max.valueOf(),type:l.logAxis.enabled?"logarithmic":"linear",base:l.logAxis.base,flip:s.flip})}},getValueAxisValue:function(t,i){var r=this.seriesGroups[i];if(r){var s=this._getValueAxis(i),a=this._plotRect,n=0,o=NaN;if(r.polar||r.spider){if(isNaN(t.x)||isNaN(t.y))return NaN;var l=this._getPolarAxisCoords(i,a);o=e.jqx._ptdist(t.x,t.y,l.x,l.y),n=l.r,o=n-o}else if("horizontal"==r.orientation){if(t<a.x||t>a.x+a.width)return NaN;o=t-a.x,n=a.width}else{if(t<a.y||t>a.y+a.height)return NaN;o=t-a.y,n=a.height}var h=this._stats.seriesGroups[i];return this._jqxPlot.scale(o,{min:0,max:n},{min:h.min.valueOf(),max:h.max.valueOf(),type:h.logarithmic?"logarithmic":"linear",base:h.logBase,flip:!s.flip})}},_detectDateFormat:function(t,i){var r={en_US_d:"M/d/yyyy",en_US_D:"dddd, MMMM dd, yyyy",en_US_t:"h:mm tt",en_US_T:"h:mm:ss tt",en_US_f:"dddd, MMMM dd, yyyy h:mm tt",en_US_F:"dddd, MMMM dd, yyyy h:mm:ss tt",en_US_M:"MMMM dd",en_US_Y:"yyyy MMMM",en_US_S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",en_CA_d:"dd/MM/yyyy",en_CA_D:"MMMM-dd-yy",en_CA_f:"MMMM-dd-yy h:mm tt",en_CA_F:"MMMM-dd-yy h:mm:ss tt",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",zone1:"yyyy-MM-ddTHH:mm:ss-HH:mm",zone2:"yyyy-MM-ddTHH:mm:ss+HH:mm",custom:"yyyy-MM-ddTHH:mm:ss.fff",custom2:"yyyy-MM-dd HH:mm:ss.fff",de_DE_d:"dd.MM.yyyy",de_DE_D:"dddd, d. MMMM yyyy",de_DE_t:"HH:mm",de_DE_T:"HH:mm:ss",de_DE_f:"dddd, d. MMMM yyyy HH:mm",de_DE_F:"dddd, d. MMMM yyyy HH:mm:ss",de_DE_M:"dd MMMM",de_DE_Y:"MMMM yyyy",fr_FR_d:"dd/MM/yyyy",fr_FR_D:"dddd d MMMM yyyy",fr_FR_t:"HH:mm",fr_FR_T:"HH:mm:ss",fr_FR_f:"dddd d MMMM yyyy HH:mm",fr_FR_F:"dddd d MMMM yyyy HH:mm:ss",fr_FR_M:"d MMMM",fr_FR_Y:"MMMM yyyy",it_IT_d:"dd/MM/yyyy",it_IT_D:"dddd d MMMM yyyy",it_IT_t:"HH:mm",it_IT_T:"HH:mm:ss",it_IT_f:"dddd d MMMM yyyy HH:mm",it_IT_F:"dddd d MMMM yyyy HH:mm:ss",it_IT_M:"dd MMMM",it_IT_Y:"MMMM yyyy",ru_RU_d:"dd.MM.yyyy",ru_RU_D:"d MMMM yyyy '?.'",ru_RU_t:"H:mm",ru_RU_T:"H:mm:ss",ru_RU_f:"d MMMM yyyy '?.' H:mm",ru_RU_F:"d MMMM yyyy '?.' H:mm:ss",ru_RU_Y:"MMMM yyyy",cs_CZ_d:"d.M.yyyy",cs_CZ_D:"d. MMMM yyyy",cs_CZ_t:"H:mm",cs_CZ_T:"H:mm:ss",cs_CZ_f:"d. MMMM yyyy H:mm",cs_CZ_F:"d. MMMM yyyy H:mm:ss",cs_CZ_M:"dd MMMM",cs_CZ_Y:"MMMM yyyy",he_IL_d:"dd MMMM yyyy",he_IL_D:"dddd dd MMMM yyyy",he_IL_t:"HH:mm",he_IL_T:"HH:mm:ss",he_IL_f:"dddd dd MMMM yyyy HH:mm",he_IL_F:"dddd dd MMMM yyyy HH:mm:ss",he_IL_M:"dd MMMM",he_IL_Y:"MMMM yyyy",hr_HR_d:"d.M.yyyy.",hr_HR_D:"d. MMMM yyyy.",hr_HR_t:"H:mm",hr_HR_T:"H:mm:ss",hr_HR_f:"d. MMMM yyyy. H:mm",hr_HR_F:"d. MMMM yyyy. H:mm:ss",hr_HR_M:"d. MMMM",hu_HU_d:"yyyy.MM.dd.",hu_HU_D:"yyyy. MMMM d.",hu_HU_t:"H:mm",hu_HU_T:"H:mm:ss",hu_HU_f:"yyyy. MMMM d. H:mm",hu_HU_F:"yyyy. MMMM d. H:mm:ss",hu_HU_M:"MMMM d.",hu_HU_Y:"yyyy. MMMM",jp_JP_d:"gg y/M/d",jp_JP_D:"gg y'?'M'?'d'?'",jp_JP_t:"H:mm",jp_JP_T:"H:mm:ss",jp_JP_f:"gg y'?'M'?'d'?' H:mm",jp_JP_F:"gg y'?'M'?'d'?' H:mm:ss",jp_JP_M:"M'?'d'?'",jp_JP_Y:"gg y'?'M'?'",lt_LT_d:"yyyy.MM.dd",lt_LT_D:"yyyy 'm.' MMMM d 'd.'",lt_LT_t:"HH:mm",lt_LT_T:"HH:mm:ss",lt_LT_f:"yyyy 'm.' MMMM d 'd.' HH:mm",lt_LT_F:"yyyy 'm.' MMMM d 'd.' HH:mm:ss",lt_LT_M:"MMMM d 'd.'",lt_LT_Y:"yyyy 'm.' MMMM",sa_IN_d:"dd-MM-yyyy",sa_IN_D:"dd MMMM yyyy dddd",sa_IN_t:"HH:mm",sa_IN_T:"HH:mm:ss",sa_IN_f:"dd MMMM yyyy dddd HH:mm",sa_IN_F:"dd MMMM yyyy dddd HH:mm:ss",sa_IN_M:"dd MMMM",basic_y:"yyyy",basic_ym:"yyyy-MM",basic_d:"yyyy-MM-dd",basic_dhm:"yyyy-MM-dd hh:mm",basic_bhms:"yyyy-MM-dd hh:mm:ss",basic2_ym:"MM-yyyy",basic2_d:"MM-dd-yyyy",basic2_dhm:"MM-dd-yyyy hh:mm",basic2_dhms:"MM-dd-yyyy hh:mm:ss",basic3_ym:"yyyy/MM",basic3_d:"yyyy/MM/dd",basic3_dhm:"yyyy/MM/dd hh:mm",basic3_bhms:"yyyy/MM/dd hh:mm:ss",basic4_ym:"MM/yyyy",basic4_d:"MM/dd/yyyy",basic4_dhm:"MM/dd/yyyy hh:mm",basic4_dhms:"MM/dd/yyyy hh:mm:ss"};i&&(r=e.extend({},r,i));var s=[];e.isArray(t)?s=t:s.push(t);for(var a in r)r[a]={format:r[a],count:0};for(var n=0;n<s.length;n++)if(value=s[n],null!=value&&void 0!=value)for(var a in r){var o=e.jqx.dataFormat.parsedate(value,r[a].format);null!=o&&r[a].count++}var l={key:void 0,count:0};for(var a in r)r[a].count>l.count&&(l.key=a,l.count=r[a].count);return l.key?r[l.key].format:""},_testXAxisDateFormat:function(e){var t=this,i=t._getXAxis(e),r=t._getDataLen(e),s={};if(t.localization&&t.localization.patterns)for(var a in t.localization.patterns)s["local_"+a]=t.localization.patterns[a];for(var n=[],o=0;o<r&&o<10;o++)value=t._getDataValue(o,i.dataField,e),null!=value&&void 0!=value&&n.push(value);return t._detectDateFormat(n,s)}})}(jqxBaseFramework);