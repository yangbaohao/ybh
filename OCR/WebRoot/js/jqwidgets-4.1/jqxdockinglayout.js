!function(e){e.jqx.jqxWidget("jqxDockingLayout","jqxLayout",{}),e.extend(e.jqx._jqxDockingLayout.prototype,{defineInstance:function(){if(null===this.base)throw new Error("jqxDockingLayout: Missing reference to jqxlayout.js.");this.base.dockingLayout=this;var t={events:["float","dock"]};e.extend(!0,this,t)},createInstance:function(){var t=this;if(!t.base.host.jqxWindow)throw new Error("jqxDockingLayout: Missing reference to jqxwindow.js.");t._oldIE=e.jqx.browser.msie&&e.jqx.browser.version<9,t._addClasses(),t._createOverlay(),t._createEdgeOverlays()},loadLayout:function(t){if(void 0!==t&&!1===e.isEmptyObject(t)){var o=this.base,a=o.element.id;e("."+a+"FloatGroup").length>0&&(e("."+a+"FloatGroup").off(),e("."+a+"FloatGroup").jqxWindow("destroy")),o.loadLayout(t)}},destroy:function(){var t=this,o=t.base,a=o.element.id;e("."+a+"FloatGroup").length>0&&(e("."+a+"FloatGroup").off(),e("."+a+"FloatGroup").jqxWindow("destroy")),t._removeHandlers(),o.destroy()},addFloatGroup:function(e,t,o,a,r,i,n){var d=this.base,l={type:"floatGroup",width:e,height:t,position:o,items:[],programmaticallyAdded:!0},s={type:a,title:r,content:i,initContent:n};l.items.push(s),d.layout.push(l),d.render()},_raiseEvent:function(t,o){void 0===o&&(o={owner:null});var a=this.events[t];o.owner=this;var r=new e.Event(a);return r.owner=this,r.args=o,r.preventDefault&&r.preventDefault(),this.base.host.trigger(r)},_addClasses:function(){var e=this.base;e.host.addClass(e.toThemeProperty("jqx-docking-layout"))},_removeHandlers:function(){var t=this,o=t.base,a=o.element.id;t.removeHandler(e(document),"mousemove.jqxDockingLayout"+a),t.removeHandler(o.host,"mouseleave.jqxDockingLayout"+a),o._touchDevice&&(t.removeHandler(e(document),"touchmove.jqxDockingLayout"+a),t.removeHandler(e(document),"touchend.jqxDockingLayout"+a))},_removeByDragHandler:function(e,t,o,a,r){void 0===a&&(a=e.args.draggedIndex),void 0===r&&(r=!0),o.hasClass("jqx-ribbon")||(o=o.find(".jqx-ribbon"));var i=this,n=t.items,d=n[a],l=t.widget.find(".jqx-ribbon-content-section").eq(a).contents().detach();i._createFloatGroup(e,d.title,l,"documentGroup",t,d),i.base._closeDocumentPanel(a,n,t,o,r)},_floatTabbedGroup:function(e,t,o){for(var a,r,i=this,n=[],d=t.find(".jqx-ribbon"),l=0;l<e.items.length;l++){var s=e.items[l],u=d.find(".jqx-ribbon-content-section").eq(l).contents().detach();s.selected&&(a=s.title,r=l),n.push(u)}i._createFloatGroup(o,a,n,"tabbedGroup",e,null,r),i.base._close(e),o&&(o.target.style.cursor="")},_addTabbedGroupHandlers:function(t,o){function a(e){!0===s&&!0!==n._clickedToResize&&(i._floatTabbedGroup(t,o,e),s=!1)}var r,i=this,n=i.base,d=n.element.id,l=o.find(".jqx-layout-window-header"),s=!1,u=n._touchDevice?["touchstart","touchend"]:["mousedown","mouseup"];i.addHandler(l,u[0]+".jqxDockingLayout"+d,function(e){if(!1!==t.allowDrag&&(s=!0,e.target.style.cursor="move",n._touchDevice)){var o=e.originalEvent.touches[0];r=document.elementFromPoint(o.pageX,o.pageY)}}),i.addHandler(l,u[1]+".jqxDockingLayout"+d,function(e){s=!1,e.target.style.cursor=""}),n._touchDevice?i.addHandler(e(document),"touchmove.jqxDockingLayout"+d,function(e){!0===n._clickedToResize&&e.preventDefault();var t=e.originalEvent.touches[0];r!==document.elementFromPoint(t.pageX,t.pageY)&&a({pageX:t.pageX,pageY:t.pageY,target:r})}):i.addHandler(l,"mouseleave.jqxDockingLayout"+d,function(e){a({pageX:e.pageX,pageY:e.pageY,target:e.target})})},_floatAutoHideGroup:function(e,t,o,a){var r=this;r._createFloatGroup(a,t,o.detach(),"autoHideGroup",e,e),r.base._close(e)},_addAutoHideGroupHandlers:function(t,o,a,r){function i(e){!0===u&&(d._floatAutoHideGroup(t,a,r,e),u=!1,e.target.style.cursor="")}var n,d=this,l=d.base,s=l.element.id,u=!1,c=l._touchDevice?["touchstart","touchend"]:["mousedown","mouseup"];d.addHandler(o,c[0]+".jqxDockingLayout"+s,function(e){if(!1!==t.parent.allowDrag&&(u=!0,e.target.style.cursor="move",l._touchDevice)){var o=e.originalEvent.touches[0];n=document.elementFromPoint(o.pageX,o.pageY)}}),d.addHandler(o,c[1]+".jqxDockingLayout"+s,function(e){u=!1,e.target.style.cursor=""}),l._touchDevice?d.addHandler(e(document),"touchmove.jqxDockingLayout"+s,function(e){!0===l._clickedToResize&&e.preventDefault();var t=e.originalEvent.touches[0];n!==document.elementFromPoint(t.pageX,t.pageY)&&i({pageX:t.pageX,pageY:t.pageY,target:n})}):d.addHandler(o,"mouseleave.jqxDockingLayout"+s,function(e){i({pageX:e.pageX,pageY:e.pageY,target:e.target})})},_createFloatGroup:function(t,o,a,r,i,n,d){var l,s,u,c,g,p,y=this,v=y.base,h=e('<div class="'+v.toThemeProperty("jqx-docking-layout-group-floating")+" "+v.element.id+'FloatGroup"><div></div><div></div></div>');if(e("body").append(h),"documentGroup"===r)t&&(l=t.args.x,s=t.args.y),u=i.widget.width(),c=i.widget.height(),g=a;else if("tabbedGroup"===r){t&&(l=t.pageX,s=t.pageY),u=i.widget.width(),c=i.widget.height(),g="",p=e("<div></div>");for(var m=e("<div></div>"),q=e('<ul class="jqx-layout-ribbon-header jqx-layout-ribbon-header-'+(y.rtl?"rtl":"ltr")+'"></ul>'),f=0;f<i.items.length;f++){var _=i.items[f],x=e("<div></div>"),j=e("<li>"+_.title+"</li>");q.append(j),x.append(a[f]),m.append(x)}p.append(q),p.append(m),g=p}else"autoHideGroup"===r&&(t&&(l=t.pageX,s=t.pageY),u=i.parent.widget.find(".jqx-ribbon-content").width(),c=i.parent.widget.height(),g=a);if(!l&&!s){var w=v.host.offset();l=(v.host.width()-u)/2+w.left+100,s=(v.host.height()-c)/2+w.top+10}h.on("moved close",function(e){y._hideOverlays();var t=h.current;"moved"===e.type?(t.position.x=e.args.x,t.position.y=e.args.y,t._overlayGroup&&y._updateOverlayGroup(t._overlayGroup),y._clearTextSelection(),y._windowCreate=!1,y._hideOverlays()):(t._overlayGroup&&(t._overlayGroup.removed=!0,y._updateOverlayGroups()),t.removed=!0,v._updateLayout(v.layout))}),h.on("resized",function(t){var o=h.current,a=e(this).offset();o.width=t.args.width,o.height=t.args.height,o.position.x=a.left,o.position.y=a.top,o._overlayGroup&&y._updateOverlayGroup(o._overlayGroup)}),h.jqxWindow({theme:v.theme,title:o,content:g,width:u,maxWidth:null,height:c,maxHeight:null,position:{x:l-100,y:s-10},closeButtonAction:"close",rtl:v.rtl,initContent:function(){var e,a=h.find(".jqx-window-header"),u=v._touchDevice?"touchstart":"mousedown";e="autoHideGroup"===r?i.parent:i,t&&(y._draggedWindow={fromGroup:e,fromPanel:n,title:o,element:h},a.trigger("mousedown",[l,s]),y._windowDragged=!0,y._windowCreate=!0,y._interval(),v.resizable&&(v._overlay[0].style.display="block"),y._showEdgeOverlays()),a.on(u,function(){y._windowDragged=!0,h.current._overlayGroup&&(h.current._overlayGroup.self=!0),y._interval(),v.resizable&&(v._overlay[0].style.display="block"),y._draggedWindow={fromGroup:e,fromPanel:n,title:o,element:h},y._showEdgeOverlays()}),a.on("mouseup",function(){y._hideOverlays(),y._windowCreate=!1}),"tabbedGroup"===r&&(p.jqxRibbon({theme:v.theme,width:"100%",height:"100%",position:"bottom",selectedIndex:d,selectionMode:"click",animationType:"none",rtl:v.rtl,reorder:!0,_removeByDrag:!0}),p.on("select",function(e){if(!e.owner.widgetName||"jqxRibbon"===e.owner.widgetName){var t=h.current.items[0].items[e.args.selectedIndex];h.jqxWindow("setTitle",t.title),t.selected=!0}}),p.on("unselect",function(e){e.owner.widgetName&&"jqxRibbon"!==e.owner.widgetName||(h.current.items[0].items[e.args.unselectedIndex].selected=!1)}),p.on("reorder",function(e){v._swapPanelsInLayout(h.current.items[0].items,e.args.newIndex,e.args.oldIndex)}),p.on("_removeByDrag",function(e){y._removeByDragHandler(e,h.current.items[0],p),1===h.current.items[0].items.length&&p.jqxRibbon({_removeByDrag:!1})}))}});var b,k,G={type:"floatGroup",parent:{type:"host"},widget:h,position:{x:l-100,y:s-10},index:v.layout.length,width:u,height:c};if(h.current=G,n)G.items=[],v._copyItem(n,G.items),b=G.items,k=G;else{G.items=[{type:"tabbedGroup",items:[],parent:G,widget:p}],b=G.items[0].items;for(var T=0;T<i.items.length;T++)v._copyItem(i.items[T],b);k=G.items[0]}for(var O=0;O<b.length;O++)b[O].parent=k;v.layout.push(G),y._raiseEvent("0",{item:G}),y._trackFloatGroups()},_interval:function(){var e=this;if(!0===e._oldIE){var t=e._overlay.width(),o=e._overlay.height();e._oldIEInterval=setInterval(function(){e._checkPosition(t,o),e._windowCreate&&e._draggedWindow.element.jqxWindow("move",e._x-50,e._y-10)},1e3)}},_createOverlay:function(){function t(e,t,o,a){r._dropOverlay.show(),r._dropOverlay[0].style.width=e+"px",r._dropOverlay[0].style.height=t+"px",r._dropOverlay.offset({left:o,top:a})}function o(e){if(e=e.closest(".jqx-docking-layout-overlay-square"),l=e,!e.find(".jqx-docking-layout-overlay-inner-square").hasClass("jqx-fill-state-disabled")){var o=r._dropToGroup.element.width(),a=r._dropToGroup.element.height(),n=r._dropToGroup.element.offset();e.hasClass("jqx-docking-layout-overlay-square-top")?t(o,a/2,n.left,n.top):e.hasClass("jqx-docking-layout-overlay-square-left")?t(o/2,a,n.left,n.top):e.hasClass("jqx-docking-layout-overlay-square-center")&&!r._overlayCenter.hasClass("jqx-docking-layout-square-disabled")?t(o,a,n.left,n.top):e.hasClass("jqx-docking-layout-overlay-square-right")?t(o/2,a,n.left+o/2,n.top):e.hasClass("jqx-docking-layout-overlay-square-bottom")?t(o,a/2,n.left,n.top+a/2):i._touchDevice&&(r._dropOverlay.hide(),l=!1)}}function a(t){var o=r._dropToGroup.settings;if(t.find(".jqx-docking-layout-overlay-inner-square").hasClass("jqx-fill-state-disabled"))return void r._hideOverlays();if(t.hasClass("jqx-docking-layout-overlay-square-top"))r._dropHandler(0,"vertical","height","top");else if(t.hasClass("jqx-docking-layout-overlay-square-left"))r._dropHandler(0,"horizontal","width","left");else if(t.hasClass("jqx-docking-layout-overlay-square-center")){var a,n,d=r._getDraggedWindowInformation(),l=d.title,s=d.content;if("documentGroup"===o.type?(a=o.widget,n="documentPanel"):"tabbedGroup"===o.type&&(a="floatGroup"===o.parent.type?o.widget:o.widget.find(".jqx-ribbon"),n="layoutPanel"),"layoutGroup"===o.type)r._dropToEmptyLayoutGroup(d);else for(var u=0;u<l.length;u++){a.jqxRibbon({_suppressReorder:!0}),a.jqxRibbon("addAt",a.find(".jqx-ribbon-content-section").length,{title:l[u],content:s[u]},!0);var c=o.items.length,g={type:n,title:l[u],parent:o,index:c,detachedContent:d.content[u],docked:!0};o.items.push(g),i._addRightClickHandler(e(a.find(".jqx-ribbon-item")[c]),{current:g})}"floatGroup"===o.parent.type&&o.widget.jqxRibbon({_removeByDrag:!0}),r._clearTextSelection(),r._raiseEvent("1",{position:"center",item:o})}else t.hasClass("jqx-docking-layout-overlay-square-right")?r._dropHandler(1,"horizontal","width","right"):t.hasClass("jqx-docking-layout-overlay-square-bottom")&&r._dropHandler(1,"vertical","height","bottom");r._removeFloatGroupObject(r._draggedWindow.element.current),r._draggedWindow.element.remove(),r._hideOverlays()}var r=this,i=r.base,n=i.element.id;r._overlay=e('<div class="'+i.toThemeProperty("jqx-docking-layout-overlay")+'"></div>');var d=e('<div class="jqx-docking-layout-overlay-section"><div class="'+i.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-square jqx-docking-layout-overlay-square-invisible")+'"></div><div class="'+i.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-square jqx-widget-content jqx-docking-layout-overlay-square-top")+'"><div class="'+i.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-inner-square")+'"><div class="'+i.toThemeProperty("jqx-widget-header jqx-docking-layout-overlay-inner-square-header")+'"></div><div class="'+i.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-inner-square-content")+'"><div class="'+i.toThemeProperty("jqx-widget-content jqx-fill-state-pressed jqx-docking-layout-overlay-highlight jqx-docking-layout-overlay-highlight-top")+'"></div></div></div></div><div class="'+i.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-square jqx-docking-layout-overlay-square-invisible")+'"></div></div><div class="jqx-docking-layout-overlay-section"><div class="'+i.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-square jqx-widget-content jqx-docking-layout-overlay-square-left")+'"><div class="'+i.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-inner-square")+'"><div class="'+i.toThemeProperty("jqx-widget-header jqx-docking-layout-overlay-inner-square-header")+'"></div><div class="'+i.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-inner-square-content")+'"><div class="'+i.toThemeProperty("jqx-widget-content jqx-fill-state-pressed jqx-docking-layout-overlay-highlight jqx-docking-layout-overlay-highlight-left")+'"></div></div></div></div><div class="'+i.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-square jqx-widget-content jqx-docking-layout-overlay-square-center")+'"><div class="'+i.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-inner-square")+'"><div class="'+i.toThemeProperty("jqx-widget-header jqx-docking-layout-overlay-inner-square-header")+'"></div><div class="'+i.toThemeProperty("jqx-widget-content jqx-fill-state-pressed jqx-docking-layout-overlay-inner-square-content jqx-docking-layout-overlay-highlight")+'"></div></div></div><div class="'+i.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-square jqx-widget-content jqx-docking-layout-overlay-square-right")+'"><div class="'+i.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-inner-square")+'"><div class="'+i.toThemeProperty("jqx-widget-header jqx-docking-layout-overlay-inner-square-header")+'"></div><div class="'+i.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-inner-square-content")+'"><div class="'+i.toThemeProperty("jqx-widget-content jqx-fill-state-pressed jqx-docking-layout-overlay-highlight jqx-docking-layout-overlay-highlight-right")+'"></div></div></div></div></div><div class="jqx-docking-layout-overlay-section"><div class="'+i.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-square jqx-docking-layout-overlay-square-invisible")+'"></div><div class="'+i.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-square jqx-widget-content jqx-docking-layout-overlay-square-bottom")+'"><div class="'+i.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-inner-square")+'"><div class="'+i.toThemeProperty("jqx-widget-header jqx-docking-layout-overlay-inner-square-header")+'"></div><div class="'+i.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-inner-square-content")+'"><div class="'+i.toThemeProperty("jqx-widget-content jqx-fill-state-pressed jqx-docking-layout-overlay-highlight jqx-docking-layout-overlay-highlight-bottom")+'"></div></div></div></div><div class="'+i.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-square jqx-docking-layout-overlay-square-invisible")+'"></div></div>');r._overlay.append(d),r._overlayCenter=r._overlay.find(".jqx-docking-layout-overlay-square-center").children(),r._dropOverlay=e('<div class="'+r.toThemeProperty("jqx-docking-layout-drop-overlay")+'"></div>'),i._ie7?e("body").append(r._overlay,r._dropOverlay):i.host.append(r._overlay,r._dropOverlay),r._addOverlayHandlers(),r._squares=r._overlay.find(".jqx-docking-layout-overlay-square-top").add(r._overlay.find(".jqx-docking-layout-overlay-square-left")).add(r._overlay.find(".jqx-docking-layout-overlay-square-center")).add(r._overlay.find(".jqx-docking-layout-overlay-square-right")).add(r._overlay.find(".jqx-docking-layout-overlay-square-bottom")),r._sansCenter=r._squares.not(".jqx-docking-layout-overlay-square-center").find(".jqx-docking-layout-overlay-inner-square");var l=!1;i._touchDevice?(r.addHandler(e(document),"touchmove.jqxDockingLayout"+n,function(t){if(r._windowDragged){t.preventDefault();var a=t.originalEvent.touches[0];o(e(document.elementFromPoint(a.pageX,a.pageY)))}}),r.addHandler(e(document),"touchend.jqxDockingLayout"+n,function(){!1!==l&&(a(l),l=!1)})):(r.addHandler(r._squares,"mouseenter.jqxDockingLayout"+n,function(){o(e(this))}),r.addHandler(r._squares,"mouseleave.jqxDockingLayout"+n,function(){r._dropOverlay.hide()}),r.addHandler(r._squares,"mouseup.jqxDockingLayout"+n,function(){a(e(this))}))},_addOverlayHandlers:function(){var t=this,o=t._overlay.width(),a=t._overlay.height();t.base._touchDevice?t.addHandler(e(document),"touchmove.jqxDockingLayout"+t.base.element.id,function(e){var r=e.originalEvent.touches[0];t._x=r.pageX,t._y=r.pageY,t._windowDragged&&!t._oldIE&&(t._checkPosition(o,a),t._windowCreate&&t._draggedWindow.element.jqxWindow("move",r.pageX-50,r.pageY-10))}):t.addHandler(e(document),"mousemove.jqxDockingLayout"+t.base.element.id,function(e){t._x=e.pageX,t._y=e.pageY,t._windowDragged&&!t._oldIE&&(t._checkPosition(o,a),t._windowCreate&&t._draggedWindow.element.jqxWindow("move",e.pageX-50,e.pageY-10))})},_checkPosition:function(e,t){for(var o=this,a=o.base,r=o._x,i=o._y,n=0;n<a._overlayGroups.length;n++){var d=a._overlayGroups[n];if(!d.self){var l=d.width,s=d.height,u=d.offset,c=u.left,g=u.top;if(r>=c&&r<=c+l&&i>=g&&i<=g+s){if(("documentGroup"===d.settings.type&&"documentGroup"===o._draggedWindow.fromGroup.type||"tabbedGroup"===d.settings.type&&("tabbedGroup"===o._draggedWindow.fromGroup.type||"autoHideGroup"===o._draggedWindow.fromGroup.type)||"layoutGroup"===d.settings.type)&&!1!==d.settings.allowDrop)o._overlayCenter.removeClass(a.toThemeProperty("jqx-fill-state-disabled"));else if(o._overlayCenter.addClass(a.toThemeProperty("jqx-fill-state-disabled")),"floatGroup"===d.settings.parent.type)return;return"floatGroup"===d.settings.parent.type?o._sansCenter.addClass(a.toThemeProperty("jqx-fill-state-disabled")):o._sansCenter.removeClass(a.toThemeProperty("jqx-fill-state-disabled")),o._overlay[0].style.display="block",o._overlay.offset({left:parseInt(c+l/2-e/2,10),top:parseInt(g+s/2-t/2,10)}),void(o._dropToGroup=d)}}}o._overlay[0].style.display="none"},_dropHandler:function(t,o,a,r){var i,n,d=this,l=d.base,s=d._dropToGroup.settings,u=s.parent,c=d._getDraggedWindowInformation(),g=c.title,p=c.content,y=c.groupType,v=c.itemType,h=[];if(u.orientation===o){i=s.index+t,n={type:y,parent:u},n[a]=d._draggedWindow.element[a]();for(var m=0;m<g.length;m++)h.push({type:v,title:g[m],parent:n,prevent:!0,selected:d._getFloatGroupItemSelection(m),detachedContent:p[m],docked:!0});n.items=h,d._setOptimalDimension(a,n,s),u.items.splice(i,0,n)}else{var q,f;"width"===a?(q="height",f="minHeight"):(q="width",f="minWidth");var _={type:"layoutGroup",orientation:o,parent:s.parent,index:s.index};_[q]=s[q],s[f]&&(_[f]=s[f]),s.parent.items.splice(s.index,1),s.parent.items.splice(s.index,0,_),s.parent=_,n={type:y,parent:_};for(var x=0;x<g.length;x++)h.push({type:v,title:g[x],parent:n,prevent:!0,selected:d._getFloatGroupItemSelection(x),detachedContent:p[x],docked:!0});n.items=h,delete s[q],s[a]="50%",n[a]="50%",_.items=[s],_.items.splice(0+t,0,n)}l.render();for(var j=n.widget.find(".jqx-ribbon-content-section"),w=0;w<j.length;w++)e(j[w]).append(p[w]);d._clearTextSelection(),l._raiseEvent("1",{item:s}),d._raiseEvent("1",{position:r,item:n})},_setOptimalDimension:function(e,t,o){var a,r=this,i="width"===e?"minWidth":"minHeight",n=o[i]||r.base["minGroup"+e.charAt(0).toUpperCase()+e.slice(1)],d=o.parent.widget[e]();a=parseFloat(o[e])-n/d*100;var l=t[e]/d*100;if(a<l){t[e]=parseFloat(o[e])/2+"%",t[i]=parseInt(parseFloat(t[e])/100*d,10),o[e]=parseFloat(o[e])-parseFloat(t[e])+"%";var s=parseInt(parseFloat(o[e])/100*d,10);s<n&&(o[i]=s)}else t[e]=l+"%",o[e]=parseFloat(o[e])-l+"%"},_dropToEmptyLayoutGroup:function(t){var o=this,a=o._dropToGroup.settings,r=t.groupType,i={type:r,items:[],parent:a},n=t.content;"horizontal"===a.orientation?i.width="100%":"vertical"===a.orientation&&(i.height="100%");for(var d=0;d<t.title.length;d++){var l={type:t.itemType,title:t.title[d],parent:i,prevent:!0,selected:o._getFloatGroupItemSelection(d),detachedContent:n[d],docked:!0};i.items.push(l)}a.items.push(i),o.base.render();for(var s=i.widget.find(".jqx-ribbon-content-section"),u=0;u<s.length;u++)e(s[u]).append(n[u])},_getFloatGroupItemSelection:function(e){var t=this;return!!t._draggedWindow.fromPanel||t._draggedWindow.element.current.items[0].items[e].selected},_createEdgeOverlays:function(){function t(t){var o,r="left"===t||"right"===t?"horizontal":"vertical",i='<div class="'+a.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-mini-window-edge-"+r)+'"><div class="'+a.toThemeProperty("jqx-widget-header jqx-docking-layout-overlay-inner-square-header jqx-docking-layout-overlay-inner-square-header-"+r)+'"></div><div class="'+a.toThemeProperty("jqx-widget-content jqx-fill-state-pressed jqx-docking-layout-overlay-inner-square-content jqx-docking-layout-overlay-inner-square-content-"+r)+'"></div></div>',n='<div class="'+a.toThemeProperty("jqx-docking-layout-overlay-square-edge-arrow-container jqx-docking-layout-overlay-square-edge-arrow-container-"+r)+'"><div class="'+a.toThemeProperty("jqx-fill-state-pressed jqx-docking-layout-overlay-square-edge-arrow jqx-docking-layout-overlay-square-edge-arrow-"+t)+'"></div></div>';return o="left"===t||"top"===t?i+n:n+i,e('<div class="'+a.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-square jqx-docking-layout-overlay-square-edge")+'"><div class="'+a.toThemeProperty("jqx-docking-layout-overlay-inner-square-edge")+'">'+o+"</div></div>")}var o=this,a=o.base;o._leftOverlay=t("left"),o._rightOverlay=t("right"),o._topOverlay=t("top"),o._bottomOverlay=t("bottom"),o._edgeOverlays=o._leftOverlay.add(o._rightOverlay).add(o._topOverlay).add(o._bottomOverlay),a._ie7?e("body").append(o._edgeOverlays):a.host.append(o._edgeOverlays),o._addEdgeOverlaysHandlers()},_addEdgeOverlaysHandlers:function(){function t(e,t,o,a){i._dropOverlay.show(),i._dropOverlay[0].style.width=e,i._dropOverlay[0].style.height=t,i._dropOverlay.offset({left:o,top:a})}function o(o){switch(r=n.host.offset(),o=e(o).closest(".jqx-docking-layout-overlay-square-edge")[0],l=o,o){case i._leftOverlay[0]:t("100px",n.host.height()+"px",r.left,r.top);break;case i._rightOverlay[0]:t("100px",n.host.height()+"px",r.left+n.host.width()-100,r.top);break;case i._topOverlay[0]:t(n.host.width()+"px","100px",r.left,r.top);break;case i._bottomOverlay[0]:t(n.host.width()+"px","100px",r.left,r.top+n.host.height()-100);break;default:n._touchDevice&&(l=!1)}}function a(e){switch(e){case i._leftOverlay[0]:i._dropToEdge("left",0,"horizontal","width");break;case i._rightOverlay[0]:i._dropToEdge("right",n.layout[0].items.length-1,"horizontal","width");break;case i._topOverlay[0]:i._dropToEdge("top",0,"vertical","height");break;case i._bottomOverlay[0]:i._dropToEdge("bottom",n.layout[0].items.length-1,"vertical","height")}}var r,i=this,n=i.base,d=n.element.id,l=!1;n._touchDevice?(i.addHandler(e(document),"touchmove.jqxDockingLayout"+d,function(t){if(i._windowDragged){t.preventDefault();var a=t.originalEvent.touches[0];o(e(document.elementFromPoint(a.pageX,a.pageY)))}}),i.addHandler(e(document),"touchend.jqxDockingLayout"+d,function(){!1!==l&&(a(l),l=!1)})):(i.addHandler(i._edgeOverlays,"mouseenter.jqxDockingLayout"+d,function(){o(this)}),i.addHandler(i._edgeOverlays,"mouseleave.jqxDockingLayout"+d,function(){i._dropOverlay.hide()}),i.addHandler(i._edgeOverlays,"mouseup.jqxDockingLayout"+d,function(){a(this)}))},_dropToEdge:function(t,o,a,r){var i,n,d=this,l=d.base,s=l.layout[0],u=d._getDraggedWindowInformation(),c=u.title,g=u.content,p=u.groupType,y=u.itemType,v=[];if(d._removeFloatGroupObject(d._draggedWindow.element.current),s.orientation===a){i={type:p,parent:s},i[r]=d._draggedWindow.element[r]();for(var h=0;h<c.length;h++)v.push({type:y,title:c[h],parent:i,prevent:!0,selected:d._getFloatGroupItemSelection(h),detachedContent:g[h],docked:!0});i.items=v,n=s.items[o],d._setOptimalDimension(r,i,n),"left"===t||"top"===t?s.items.splice(o,0,i):s.items.push(i)}else{var m;"width"===r?(m="height","minHeight"):(m="width","minWidth");var q={type:"layoutGroup",orientation:a,parent:s.parent,index:s.index};i={type:p,parent:q};for(var f=0;f<c.length;f++)v.push({type:y,title:c[f],parent:i,prevent:!0,selected:d._getFloatGroupItemSelection(f),detachedContent:g[f],docked:!0});i.items=v,delete s[m],delete i[m],i[r]="50%",s[r]="50%",s.parent=q,q.items="left"===t||"top"===t?[i,s]:[s,i],l.layout[0]=q,n=s}l.render();for(var _=i.widget.find(".jqx-ribbon-content-section"),x=0;x<_.length;x++)e(_[x]).append(g[x]);d._clearTextSelection(),l._raiseEvent("1",{item:n}),d._raiseEvent("1",{position:t+"-edge",item:i}),d._draggedWindow.element.remove(),d._hideOverlays()},_showEdgeOverlays:function(){function t(e){if(e.items&&0!==e.items.length){var o=e.orientation,a=e.items[0],r=e.items[e.items.length-1];"horizontal"===o?("autoHideGroup"===a.type?l=l&&!1:"layoutGroup"===a.type&&t(a),"autoHideGroup"===r.type?s=s&&!1:"layoutGroup"===r.type&&t(r)):"vertical"===o&&("autoHideGroup"===a.type?u=u&&!1:"layoutGroup"===a.type&&t(a),"autoHideGroup"===r.type?c=c&&!1:"layoutGroup"===r.type&&t(r))}}var o=this,a=o.base,r=a.host.width(),i=a.host.height(),n=a.host.offset(),d=e(),l=!0,s=!0,u=!0,c=!0;t(a.layout[0]),l&&(d=d.add(o._leftOverlay)),s&&(d=d.add(o._rightOverlay)),u&&(d=d.add(o._topOverlay)),c&&(d=d.add(o._bottomOverlay)),d.show(),o._leftOverlay.offset({left:n.left+5,top:n.top+i/2-20}),o._rightOverlay.offset({left:n.left+r-40,top:n.top+i/2-20}),o._topOverlay.offset({left:n.left+r/2-20,top:n.top+5}),o._bottomOverlay.offset({left:n.left+r/2-20,top:n.top+i-40})},_hideOverlays:function(){var e=this,t=e.base;e._windowDragged=!1,!0===e._oldIE&&clearInterval(e._oldIEInterval),t.resizable&&setTimeout(function(){e.base._overlay[0].style.display="none"},0),e._overlay.hide(),e._edgeOverlays.hide(),e._dropOverlay.hide()},_getDraggedWindowInformation:function(){var e,t,o=this,a=[],r=[];if(o._draggedWindow.fromPanel)a.push(o._draggedWindow.title),r.push(o._draggedWindow.element.find(".jqx-window-content").contents().detach());else for(var i=0;i<o._draggedWindow.element.current.items[0].items.length;i++){var n=o._draggedWindow.element.current.items[0].items[i];a.push(n.title),r.push(o._draggedWindow.element.find(".jqx-ribbon-content-section").eq(i).contents().detach())}return"documentGroup"===o._draggedWindow.fromGroup.type?(e="documentGroup",t="documentPanel"):(e="tabbedGroup",t="layoutPanel"),{title:a,content:r,groupType:e,itemType:t}},_removeFloatGroupObject:function(e){var t=this.base;e.removed=!0,t._updateLayout(t.layout)},_trackFloatGroups:function(){for(var e=this,t=e.base,o=1;o<t.layout.length;o++){var a=t.layout[o];if("tabbedGroup"===a.items[0].type){var r=a.items[0].widget,i={element:r,width:r.width(),height:r.height(),offset:r.offset(),settings:a.items[0]};a._overlayGroup=i,t._overlayGroups.push(i)}}},_updateOverlayGroup:function(e){if(e){var t=e.element;e.width=t.width(),e.height=t.height(),e.offset=t.offset(),e.self=!1}},_updateOverlayGroups:function(){for(var e=this.base._overlayGroups,t=e.length-1;t>=0;t--){!0===e[t].removed&&e.splice(t,1)}},_clearTextSelection:function(){try{document.selection?document.selection.empty():window.getSelection&&(window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges())}catch(e){}}})}(jqxBaseFramework);