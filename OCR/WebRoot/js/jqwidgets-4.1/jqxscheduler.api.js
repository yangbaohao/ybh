!function(e){e.jqx.scheduler||(e.jqx.scheduler={}),e.jqx.scheduler.utilities={weekDays:{Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},guid:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()},areWeekDaysIncluded:function(t,i){var r=!1;return e.each(t,function(e,t){if(t===i)return r=!0,!1}),r},getStartOfDay:function(t){var i=new e.jqx.date(t.year(),t.month(),t.day(),0,0,0);return i.timeZone=t.timeZone,i},getEndOfDay:function(t){var i=new e.jqx.date(t.year(),t.month(),t.day(),23,59,59);return i.timeZone=t.timeZone,i},getDaysCount:function(e,t){for(var i=1;e<t;)e.day()!=t.day()&&i++,e=e.addDays(1);return i},getStartOfWeek:function(e,t){var i=e.dayOfWeek(),r=t.firstDay;i<r&&(i+=7);var a=i-r;return e.addDays(-a).date()},getEndOfWeek:function(e,t,i){return that.getStartOfWeek(e,dateTimeFormat,i).addDays(7)},getEndOfMonth:function(t,i){var r=t.daysInMonth(),a=new e.jqx.date(t.year(),t.month(),r,23,59,59);return a.timeZone=t.timeZone,a},rangeIntersection:function(e,t,i,r){var a=e.valueOf(),n=i.valueOf(),o=t.valueOf(),l=r.valueOf();if(n>=a&&n<o)return!0;if(n<a&&l>a)return!0;if(a==n||o==l)return!0;if(a<n){if(o>n&&o<l)return!0;if(o>l)return!0}else{if(l>a&&l<o)return!0;if(l>o)return!0}return!1},rangeContains:function(e,t,i,r){return e<=i&&r<=t},monthDays:[31,28,31,30,31,30,31,31,30,31,30,31],msPerDay:864e5,maxYear:9999,ORDINAL_BASE:new Date(1970,0,1),getYearDay:function(t){var i=new Date(t.getFullYear(),t.getMonth(),t.getDate());return Math.ceil((i-new Date(t.getFullYear(),0,1))/e.jqx.scheduler.utilities.msPerDay)+1},isLeapYear:function(e){return e instanceof Date&&(e=e.getFullYear()),e%4==0&&e%100!=0||e%400==0},tzOffset:function(e){return 60*e.getTimezoneOffset()*1e3},monthRange:function(t,i){var r=new Date(t,i,1);return[e.jqx.scheduler.utilities.getWeekday(r),e.jqx.scheduler.utilities.getMonthDays(r)]},getMonthDays:function(t){var i=t.getMonth();return 1==i&&e.jqx.scheduler.utilities.isLeapYear(t)?29:e.jqx.scheduler.utilities.monthDays[i]},getWeekday:function(e){return[6,0,1,2,3,4,5][e.getDay()]},combine:function(e,t){return t=t||e,new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())},sort:function(e){e.sort(function(e,t){return e.getTime()-t.getTime()})},timeToUntilString:function(e){for(var t,i=new Date(e),r=[i.getUTCFullYear(),i.getUTCMonth()+1,i.getUTCDate(),"T",i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),"Z"],a=0;a<r.length;a++)t=r[a],!/[TZ]/.test(t)&&t<10&&(r[a]="0"+String(t));return r.join("")},untilStringToDate:function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z)?$/,i=t.exec(e);if(!i)throw new Error("Invalid UNTIL value: "+e);return new Date(Date.UTC(i[1],i[2]-1,i[3],i[5]||0,i[6]||0,i[7]||0))},Time:function(e,t,i){this.hour=e,this.minute=t,this.second=i,this.that=this,this.getHours=function(){return that.hour},this.getMinutes=function(){return that.minute},this.getSeconds=function(){return that.second},this.getTime=function(){return 1e3*(60*that.hour*60+60*that.minute+that.second)}}},e.jqx.scheduler.appointment=function(){var t=this;if(t.from=new e.jqx.date,t.to=(new e.jqx.date).addHours(1),t.subject="",t.description="",t.location="",t.tooltip="",t.hidden=!1,t.resourceId=null,t.id="",t.background=null,t.color=null,t.borderColor=null,t.status="busy",t.style=null,t.exceptions=new Array,t.exceptionDates=new Array,t.recurrencePattern=null,t.recurrenceException=new Array,t.occurrenceEnumerator=null,t.rootAppointment=null,t.hiddenByResourceId=!1,t.draggable=!0,t.resizable=!0,t.recurrentAppointment=!1,t.allDay=!1,t.readOnly=!1,t.showStatus=!0,t.timeZone=null,t.scheduler=null,t.elements=new Array,t.duration=function(){var i=t.to-t.from,r=1e4*i;return new e.jqx.timeSpan(r)},t.toString=function(e){var i=function(e){for(var t="";e.length>75;)t+=e.substr(0,75)+"\n",e=" "+e.substr(75);return t+=e},r=function(e){return(e<10?"0":"")+e},a=function(e,t){return e?t?""+e.getFullYear()+r(e.getMonth()+1)+r(e.getDate())+"T"+r(e.getHours())+r(e.getMinutes())+r(e.getSeconds()):""+e.getUTCFullYear()+r(e.getUTCMonth()+1)+r(e.getUTCDate())+"T"+r(e.getUTCHours())+r(e.getUTCMinutes())+r(e.getUTCSeconds())+"Z":""},n=t.status;return n||(n="CONFIRMED"),"busy"==n.toLowerCase()&&(n="CONFIRMED"),"tentative"==n.toLowerCase()&&(n="TENTATIVE"),"free"==n.toLowerCase()&&(n="CANCELLED"),"outOfOffice"==n.toLowerCase()&&(n="CANCELLED"),"BEGIN:VEVENT\nUID:"+t.id+"\nDTSTAMP:"+a(new Date,e)+"\n"+i("TITLE:"+t.subject)+"\nDTSTART:"+a(t.from.toDate(),e)+"\nDTEND:"+a(t.to.toDate(),e)+"\n"+(t.recurrencePattern?"RRULE:"+t.recurrencePattern.toString()+"\n":"")+(t.recurrenceException&&t.recurrenceException.length>0?"EXDATE:"+function(){for(var i="",r=0;r<t.recurrenceException.length;r++)i+=a(t.recurrenceException[r].toDate(),e),r<t.recurrenceException.length-1&&(i+=",");return i}()+"\n":"")+(t.subject?i("SUMMARY:"+t.subject)+"\n":"")+"TRANSP:OPAQUE\n"+(t.status?i("STATUS:"+n)+"\n":"")+(t.description?i("DESCRIPTION:"+t.description)+"\n":"")+(t.location?i("LOCATION:"+t.location)+"\n":"")+"END:VEVENT"},t.range=function(){return t.allDay?{from:e.jqx.scheduler.utilities.getStartOfDay(t.from),to:e.jqx.scheduler.utilities.getEndOfDay(t.to)}:{from:t.from,to:t.to}},t.clearRecurrence=function(){t.recurrencePattern&&(t.exceptions=new Array,t.exceptionDates=new Array,t.recurrencePattern=null,t.recurrenceException=new Array,t.hidden=!1)},t.isAllDayAppointment=function(){return this.duration().days()>=1||this.allDay},t.cloneAppointmentAttributes=function(e){e.subject=t.subject,e.description=t.description,e.location=t.location,e.tooltip=t.tooltip,e.resourceId=t.resourceId,e.category=t.category,e.status=t.status,e.rootAppointment=t,e.color=t.color,e.borderColor=t.borderColor,e.background=t.background,e.hidden=t.hidden,e.timezone=t.timeZone,e.style=t.style,e.hiddenByResourceId=t.hiddenByResourceId},t.createOccurrence=function(i){if(null==i)return null;var r=new e.jqx.scheduler.appointment;r.allDay=t.allDay;var a=t.duration();return t.allDay&&(a=new e.jqx.timeSpan(1e4*(t.to-t.from))),r.from=i,r.to=i.add(a),r.occurrenceFrom=i.clone(),r.subject=t.subject,r.description=t.description,r.location=t.location,r.tooltip=t.tooltip,r.resourceId=t.resourceId,r.category=t.category,r.status=t.status,r.rootAppointment=t,r.color=t.color,r.draggable=t.draggable,r.resizable=t.resizable,r.borderColor=t.borderColor,r.background=t.background,r.recurrentAppointment=!0,r.timeZone=t.timeZone,r.style=t.style,r.hiddenByResourceId=t.hiddenByResourceId,t.hiddenByResourceId&&(r.hidden=!0),r.id=t.id+"."+e.jqx.scheduler.utilities.guid(),t.hidden=!0,t.occurrenceIndex++,r},t.clone=function(){var i=new e.jqx.scheduler.appointment;return i.allDay=t.allDay,i.from=t.from.clone(),i.to=t.to.clone(),i.subject=t.subject,i.description=t.description,i.location=t.location,i.tooltip=t.tooltip,i.resourceId=t.resourceId,i.category=t.category,i.status=t.status,i.color=t.color,i.borderColor=t.borderColor,i.background=t.background,i.style=t.style,i.timeZone=t.timeZone,i.hiddenByResourceId=t.hiddenByResourceId,t.hiddenByResourceId&&(i.hidden=!0),i.id=t.id+"."+e.jqx.scheduler.utilities.guid(),i},t.isRecurrentAppointment=function(){return t.recurrentAppointment||null!=t.recurrencePattern},t.anyExceptions=function(){return null!=t.exceptions&&t.exceptions.length>0},t.anyOccurrences=function(){return null!=t.occurrenceEnumerator&&t.occurrenceEnumerator.getNextAppointment()},t.isException=function(){var e=t.rootAppointment||this;if(!e.recurrenceException)return!1;for(var i=0;i<e.recurrenceException.length;i++){var r=e.recurrenceException[i];if(t.occurrenceFrom&&r.equals(t.occurrenceFrom))return!0}return!1},t.getOccurrences=function(i,r){t.occurrenceIndex=0;var a=null!==i?i:t.from,n=new e.jqx.scheduler.recurrentAppointmentsList(t,t.calendar,a,r,t.scheduler);return t.occurrences=n.list,n.list},1===arguments.length)if("object"==e.type(arguments[0]))for(var i in arguments[0]){var r=arguments[0][i];void 0!==this[i]&&(this[i]=r)}else t.from=arguments[0],t.to=new e.jqx.date(t.from).addHours(1);else 2===arguments.length?(t.from=arguments[0],t.to=arguments[1]):3===arguments.length?(t.from=arguments[0],t.to=arguments[1],t.subject=arguments[2]):3===arguments.length&&(t.from=arguments[0],t.to=arguments[1],t.subject=arguments[2],t.description=arguments[3]);null!=t.recurrencePattern&&t.recurrencePattern.setFrom(t.from)},e.jqx.scheduler.recurrentAppointmentsList=function(){var t=this;return t.recurrentAppointment=null,t.currentTime=null,t.calendar=e.jqx.scheduler.calendar,t.from=new e.jqx.date(0),t.to=new e.jqx.date(9999,12,31),t.foundItems=0,t.list=new Array,t.scheduler=null,t.getOccurrences=function(i,r,a){return void 0==i?t.list:new e.jqx.scheduler.recurrentAppointmentsList(i,t.calendar,r,a).list},t.current=function(){return t.recurrentAppointment.createOccurrence(t.currentTime)},t.fillList=function(){t.currentTime=null,t.foundItems=0,t.list=new Array;var e=t.recurrentAppointment.recurrencePattern;if(e.step=0,e.current=0,e.currentYearDay=0,null==e)return!1;for(;t.getNextAppointment(e);){var i=t.current();i&&t.list.push(i)}},t.getNextAppointment=function(e){if(null==t.recurrentAppointment)return!1;var i=(this.scheduler._views[this.scheduler._view].type,this.scheduler._views[this.scheduler._view]),r=0;switch(e.freq){case"weekly":r=7;break;case"monthly":r=31;break;case"yearly":r=365}for(var a=0;a<4294967295;a++){var n=e.getNewOccurenceDate();if(e.currentTime=n,e.to<n&&e.to.addDays(r)>=n||t.to<n&&t.to.addDays(r)>=n)return t.currentTime=null,!0;if(e.to.addDays(r)<n||t.to.addDays(r)<n)return t.currentTime=null,!1;var o=!0;if(o=t.getCanSetTime(e,n,o),e.canCreateNewOccurence(n,t.calendar)){var l=!0;!1===i.showWeekends&&(6!=n.dayOfWeek()&&0!=n.dayOfWeek()||(l=!1)),l&&t.foundItems++}if(o)return t.currentTime=n,!(t.foundItems>e.count)}return!1},t.getCanSetTime=function(e,i,r){return e.canCreateNewOccurence(i,t.calendar)||(r=!1),i<t.from&&i.add(t.recurrentAppointment.duration())<=t.from&&(r=!1),t.to<=i&&(r=!1),r},t.isException=function(e,i,r){for(var a=t.recurrentAppointment.exceptions,n=0;n<a.length;n++)if(r.isDateInExceptionAppointment(e,i,a[n])&&-1===r.newExceptions.indexOf(a[n]))return!0;return!1},arguments&&arguments.length>0&&(t.recurrentAppointment=arguments[0],arguments[1]&&(t.calendar=arguments[1]),arguments[2]&&(t.from=arguments[2]),arguments[3]&&(t.to=arguments[3]),arguments[4]&&(t.scheduler=arguments[4]),void 0===arguments[2]&&(t.from=new e.jqx.date(0),t.to=new e.jqx.date(9999,12,31)),t.fillList()),t},e.jqx.scheduler.recurrencePattern=function(){var t=this,i={from:new e.jqx.date(0),to:new e.jqx.date(9999,12,31),count:1e3,interval:1,exceptions:new Array,newExceptions:new Array,month:1,day:1,current:0,currentYearDay:0,step:0,days:[],bynweekday:[],isEveryWeekDay:!0,timeZone:null,weekDays:{Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},freq:"daily",bymonth:null,bymonthday:null,byyearday:null,byweekno:null,byweekday:null};return e.extend(!0,t,i),t.getNewOccurenceDate=function(){var i=function(e,t){var i=0,r=[];if(e instanceof Array)for(;i<t;i++)r[i]=[].concat(e);else for(;i<t;i++)r[i]=e;return r},r=function(e,t){var i=e%t;return i*t<0?i+t:i},a=function(e,t){1===arguments.length&&(t=e,e=0);for(var i=[],r=e;r<t;r++)i.push(r);return i},n=[0,31,60,91,121,152,182,213,244,274,305,335,366],o=[0,31,59,90,120,151,181,212,243,273,304,334,365],l=t.from.year(),d=[6,0,1,2,3,4,5],s=function(e){t.yearlen=e%4!=0||e%100==0&&e%400!=0?365:366,t.nextyearlen=(1+e)%4!=0||(1+e)%100==0&&(1+e)%400!=0?365:366;var i=(new Date(e,0,1),d[new Date(e,0,1).getDay()]),r=function(){for(var e=[],t=0;t<55;t++)e=e.concat(a(7));return e}();365==t.yearlen?(t.wdaymask=r.slice(i),t.mrange=[].concat(o)):(t.wdaymask=r.slice(i),t.mrange=[].concat(n))};switch(s(l),t.freq){case"daily":default:var c=t.from.add(new e.jqx.timeSpan(t.step*t.interval,0,0,0));return t.step++,c;case"weekly":if(t.byweekday){var c=new e.jqx.date(t.from,t.timeZone);if(c=c.addDays(t.step*t.interval*7),t.step>=1){c=c.addDays(-t.from.dayOfWeek());var u=c.addDays(7)}else var u=c.addDays(7-t.from.dayOfWeek());for(var h=c,p=0;p<7&&d[h.dayOfWeek()]!==t.byweekday[t.current]&&!(h>=u);p++)h=h.addDays(1);c=h,t.current++,void 0==t.byweekday[t.current]&&(t.current=0,t.step++)}return c;case"monthly":if(t.bynweekday.length>0){var c=new e.jqx.date(t.from.year(),t.from.month(),1,t.from.hour(),t.from.minute(),t.from.second());c.timeZone=t.timeZone,c=c.addMonths(t.step*t.interval),s(c.year());var y=c.month(),g=[t.mrange.slice(y-1,y+1)][0],m=g[0],f=g[1];f-=1,t.nwdaymask=i(0,t.yearlen),t.step++;for(var v=0;v<t.bynweekday.length;v++){var D=t.bynweekday[v][0],b=t.bynweekday[v][1];b<0?(p=f+7*(b+1),p-=r(t.wdaymask[p]-D,7)):(p=m+7*(b-1),p+=r(7-t.wdaymask[p]+D,7)),m<=p&&p<=f&&(t.nwdaymask[p]=1)}var x=p+1,w=x-m,c=new e.jqx.date(t.from.year(),t.from.month(),w,t.from.hour(),t.from.minute(),t.from.second());c.timeZone=t.timeZone,c=c.addMonths((t.step-1)*t.interval)}else if(t.bymonthday.length>0){var c=new e.jqx.date(t.from.year(),t.from.month(),t.bymonthday[t.current],t.from.hour(),t.from.minute(),t.from.second());c.timeZone=t.timeZone,c=c.addMonths(t.step*t.interval),t.current++,t.bymonthday[t.current]||(t.current=0,t.step++)}else{var c=new e.jqx.date(t.from.year(),t.from.month(),t.day,t.from.hour(),t.from.minute(),t.from.second());c.timeZone=t.timeZone,c=c.addMonths(t.step*t.interval),t.step++}return c;case"yearly":if(t.bymonth&&t.bymonth.length>0)if(t.bynweekday.length>0){var c=new e.jqx.date(t.from.year(),t.bymonth[t.current],1,t.from.hour(),t.from.minute(),t.from.second());c.timeZone=t.timeZone,c=c.addYears(t.step*t.interval),s(c.year());var y=c.month(),g=[t.mrange.slice(y-1,y+1)][0],m=g[0],f=g[1];f-=1,t.nwdaymask=i(0,t.yearlen);for(var v=0;v<t.bynweekday.length;v++){var D=t.bynweekday[v][0],b=t.bynweekday[v][1];b<0?(p=f+7*(b+1),p-=r(t.wdaymask[p]-D,7)):(p=m+7*(b-1),p+=r(7-t.wdaymask[p]+D,7)),m<=p&&p<=f&&(t.nwdaymask[p]=1)}var x=p+1,w=x-m;c=new e.jqx.date(c.year(),t.bymonth[t.current],w,t.from.hour(),t.from.minute(),t.from.second()),c.timeZone=t.timeZone,t.step++}else if(t.byyearday.length>0){var c=new e.jqx.date(t.from.year(),t.bymonth[t.current],t.byyearday[t.currentYearDay],t.from.hour(),t.from.minute(),t.from.second());c.timeZone=t.timeZone,c=c.addYears(t.step*t.interval),t.currentYearDay++,t.byyearday[t.currentYearDay]||(t.currentYearDay=0,t.current++,t.bymonth[t.current]||(t.current=0,t.step++))}else{var c=new e.jqx.date(t.from.year(),t.bymonth[t.current],t.from.day(),t.from.hour(),t.from.minute(),t.from.second());c.timeZone=t.timeZone,c=c.addYears(t.step*t.interval),t.current++,t.bymonth[t.current]||(t.current=0,t.step++)}else if(t.byyearday&&t.byyearday.length>0){var c=new e.jqx.date(t.from.year(),t.from.month(),t.byyearday[t.current],t.from.hour(),t.from.minute(),t.from.second());c.timeZone=t.timeZone,c=c.addYears(t.step*t.interval),t.current++,t.byyearday[t.current]||(t.current=0,t.step++)}else if(null!=t.byweekno){var c=t.from.addYears(t.step*t.interval);if(c=function(i,r){var a=1,n=new e.jqx.date(r.year(),1,1,r.hour(),r.minute(),r.second());for(n.timeZone=t.timeZone;a!=i&&(n=n.addDays(7),!(++a>53)););for(;e.jqx.scheduler.utilities.getWeekday(n.toDate())!=t.wkst;)n=n.addDays(1);return n}(t.byweekno[t.current],c),t.byweekday){for(var h=c,p=0;p<7&&d[h.dayOfWeek()]!==t.byweekday[t.currentYearDay];p++)h=h.addDays(1);c=h,t.currentYearDay++,t.byweekday[t.currentYearDay]||(t.currentYearDay=0,t.current++,t.byweekno[t.current]||(t.current=0,t.step++))}else t.current++,t.byweekno[t.current]||(t.current=0,t.step++)}else{var c=new e.jqx.date(t.from.year(),t.month,t.day,t.from.hour(),t.from.minute(),t.from.second());c.timeZone=t.timeZone,c=c.addYears(t.step*t.interval),t.step++}return c}},t.isDateInExceptionAppointment=function(e,i,r){switch(t.freq){case"daily":case"weekly":default:return e.year()==r.from.year()&&e.dayOfYear()==r.from.dayOfYear()}},t.createNewPattern=function(){if(t.ical){var i=new e.jqx.scheduler.recurrencePattern(t.ical);return i}var i=new e.jqx.scheduler.recurrencePattern;return i.from=t.from,i.to=t.to,i.count=t.count,i.interval=t.interval,i.exceptions=t.exceptions,i.newExceptions=t.newExceptions,i.weekDays=t.weekDays,i.isEveryWeekDay=t.isEveryWeekDay,i.month=t.month,i.day=t.day,i.current=t.current,i.currentYearDay=t.currentYearDay,i.step=t.step,i.days=t.days,i.bynweekday=t.bynweekday,i.bymonth=t.bymonth,i.bymonthday=t.bymonthday,i.byyearday=t.byyearday,i.byweekno=t.byweekno,i.byweekday=t.byweekday,i.freq=i.freq,i.timeZone=i.timeZone,i},t.equals=function(e){return t.from==e.from&&t.to==e.to&&t.count===e.count&&t.interval===e.interval&&t.day===e.day&&t.month===e.month},t.isDayOfWeekIncluded=function(i){var r=i.dayOfWeek();return e.jqx.scheduler.utilities.areWeekDaysIncluded(t.weekDays,r)},t.getWeekIndexFromDate=function(i,r){var a=r.firstDay,n=e.jqx.scheduler.utilities.getStartOfWeek(t.from,r,a),o=new e.jqx.timeSpan(i.subtract(n));return parseInt(o.days()/7)},t.canCreateNewOccurence=function(e,i){e.toDate();switch(t.freq){case"daily":default:return(!t.bymonth||-1!=t.bymonth.indexOf(e.month()))&&(!t.isEveryWeekDay||!!t.isDayOfWeekIncluded(e,i));case"weekly":var r=t.getWeekIndexFromDate(e,i);if(t.bymonth&&-1==t.bymonth.indexOf(e.month()))return!1;if(r%t.interval!=0)return!1;if(t.weekDays=={}){if(t.from.dayOfWeek()!=start.dayOfWeek())return!1}else if(!t.isDayOfWeekIncluded(e,i))return!1;break;case"monthly":case"yearly":if(t.bymonth&&-1==t.bymonth.indexOf(e.month()))return!1;if(e<t.from)return!1}return!0},t.toString=function(){var t={};t.dtstart=this.from.toDate(),t.until=this.to?this.to.toDate():null,t.count=this.count;var i={};i.YEARLY=0,i.MONTHLY=1,i.WEEKLY=2,i.DAILY=3,i.HOURLY=4,i.MINUTELY=5,i.SECONDLY=6,t.freq=i[this.freq.toUpperCase()],"YEARLY"==t.freq&&(t.bymonth=this.bymonth?this.bymonth:(new Array).push(this.month)),t.byweekday=new Array;var r=["MO","TU","WE","TH","FR","SA","SU"];return e.each(this.weekDays,function(){t.byweekday.push(this)}),void 0!=this.byyearday&&(t.byyearday=this.byyearday),void 0!=this.byweekno&&(t.byweekno=this.byweekno),t.bymonthday=this.bymonthday,t.wkst=r[this.wkst],t.interval=this.interval,new e.jqx.ICalRule(t).toString()},t.init=function(i){var r=new e.jqx.ICalRule(t.ical,i),a=r.options;if(t.from=a.dtstart?new e.jqx.date(a.dtstart,t.timeZone):t.from,t.count=void 0!=a.count?a.count:t.count,t.freq=r.FREQUENCIES[a.freq].toLowerCase(),t.interval=void 0!=a.interval?a.interval:t.interval,t.to=a.until?new e.jqx.date(a.until,t.timeZone):t.to,t.wkst=a.wkst,t.bymonth=a.bymonth,t.bymonth&&t.bymonth.length>0?t.month=t.bymonth[0]:t.month=t.from.month(),t.day=t.from.day(),void 0!=a.byweekday){t.weekDays={};for(var n=0;n<a.byweekday.length;n++){switch(a.byweekday[n]){case 0:t.weekDays.Monday=1;break;case 1:t.weekDays.Tuesday=2;break;case 2:t.weekDays.Wednesday=3;break;case 3:t.weekDays.Thursday=4;break;case 4:t.weekDays.Friday=5;break;case 5:t.weekDays.Saturday=6;break;case 6:t.weekDays.Sunday=0}}t.byweekday=a.byweekday}return t.byweekno=a.byweekno,a.bynweekday&&(t.bynweekday=a.bynweekday),void 0!=a.bymonthday&&(t.bymonthday=a.bymonthday.sort(),t.bymonthday[0]&&(t.day=t.bymonthday[0])),void 0!=a.byyearday&&(t.day=a.byyearday[0],t.byyearday=a.byyearday.sort()),a},t.setFrom=function(e){t.from=e.clone(),t.ical&&t.init(e)},1==arguments.length&&(t.ical=arguments[0],t.init()),t},e.jqx.scheduler.calendar={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",zone1:"yyyy-MM-ddTHH:mm:ss-HH:mm",zone2:"yyyy-MM-ddTHH:mm:ss+HH:mm",custom:"yyyy-MM-ddTHH:mm:ss.fff",custom2:"yyyy-MM-dd HH:mm:ss.fff"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:","},e.jqx.ICalRule=function(t,i){var r=this,a=function(e,t){1===arguments.length&&(t=e,e=0);for(var i=[],r=e;r<t;r++)i.push(r);return i},n=function(e,t){var i=0,r=[];if(e instanceof Array)for(;i<t;i++)r[i]=[].concat(e);else for(;i<t;i++)r[i]=e;return r},o=function(e){return!(e instanceof Array&&0==e.length)&&Boolean(e)},l=function(e,t){return-1!=e.indexOf(t)},d=([].concat(n(1,31),n(2,28),n(3,31),n(4,30),n(5,31),n(6,30),n(7,31),n(8,31),n(9,30),n(10,31),n(11,30),n(12,31),n(1,7)),[].concat(n(1,31),n(2,29),n(3,31),n(4,30),n(5,31),n(6,30),n(7,31),n(8,31),n(9,30),n(10,31),n(11,30),n(12,31),n(1,7)),a(1,29)),s=a(1,30),c=a(1,31),u=a(1,32);[].concat(u,s,u,c,u,c,u,u,c,u,c,u,u.slice(0,7)),[].concat(u,d,u,c,u,c,u,u,c,u,c,u,u.slice(0,7));d=a(-28,0),s=a(-29,0),c=a(-30,0),u=a(-31,0);var h=([].concat(u,s,u,c,u,c,u,u,c,u,c,u,u.slice(0,7)),[].concat(u,d,u,c,u,c,u,u,c,u,c,u,u.slice(0,7)),function(){for(var e=[],t=0;t<55;t++)e=e.concat(a(7))}(),function(e,t){var i=this;if(0===t)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t,this.nth=function(e){return i.n==e?i:new h(i.weekday,e)},this.equals=function(e){return i.weekday==e.weekday&&i.n==e.n},this.toString=function(){var e=["MO","TU","WE","TH","FR","SA","SU"][i.weekday];return this.n&&(e=(i.n>0?"+":"")+String(i.n)+e),e},this.getJsWeekday=function(){return 6==i.weekday?0:i.weekday+1}});this.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],this.YEARLY=0,this.MONTHLY=1,this.WEEKLY=2,this.DAILY=3,this.HOURLY=4,this.MINUTELY=5,this.SECONDLY=6,this.MO=new h(0),this.TU=new h(1),this.WE=new h(2),this.TH=new h(3),this.FR=new h(4),this.SA=new h(5),this.SU=new h(6);var p={freq:null,dtstart:null,interval:1,wkst:r.MO,count:null,until:null,bysetpos:null,bymonth:null,bymonthday:null,byyearday:null,byweekno:null,byweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null};this._string=null,this.toString=function(){var t,i,a,n,o,d=this.origOptions,s=[];i=Object.keys(d),a=Object.keys(p);for(var c=0;c<i.length;c++)if(l(a,i[c])&&(t=i[c].toUpperCase(),n=d[i[c]],o=[],!(null===n||n instanceof Array&&!n.length))){switch(t){case"FREQ":n=r.FREQUENCIES[d.freq];break;case"WKST":n||(n=0),n=n.toString();break;case"BYWEEKDAY":t="BYDAY",n instanceof Array||(n=[n]);for(var u,y=0;y<n.length;y++)u=n[y],u instanceof h||(u=u instanceof Array?new h(u[0],u[1]):new h(u)),o[y]=u.toString();n=o;break;case"DTSTART":case"UNTIL":n=e.jqx.scheduler.utilities.timeToUntilString(n);break;default:if(n instanceof Array){for(var y=0;y<n.length;y++)o[y]=String(n[y]);n=o}else n=String(n)}s.push([t,n])}for(var g=[],c=0;c<s.length;c++){var m=s[c];g.push(m[0]+"="+m[1].toString())}return g.join(";")},this.parseString=function(t){if(t=t.replace(/^\s+|\s+$/,""),!t.length)return null;var i,a,n,o,l,d=t.split(";"),s={};for(i=0;i<d.length;i++)if(l=d[i].split("="),n=l[0],o=l[1],""!=n)switch(n){case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":if(-1!=o.indexOf(","))for(o=o.split(","),a=0;a<o.length;a++)/^[+-]?\d+$/.test(o[a])&&(o[a]=Number(o[a]));else/^[+-]?\d+$/.test(o)&&(o=Number(o));n=n.toLowerCase(),s[n]=o;break;case"BYDAY":var c,u,p,y=o.split(",");for(s.byweekday=[],a=0;a<y.length;a++)p=y[a],2==p.length?(u=r[p],s.byweekday.push(u)):(p=p.match(/^([+-]?\d)([A-Z]{2})$/),c=Number(p[1]),u=p[2],u=r[u].weekday,s.byweekday.push(new h(u,c)));break;case"FREQ":s.freq=r[o];break;case"WKST":s.wkst=r[o];break;case"DTSTART":s.dtstart=e.jqx.scheduler.utilities.untilStringToDate(o);break;case"UNTIL":s.until=e.jqx.scheduler.utilities.untilStringToDate(o);break;case"BYEASTER":s.byeaster=Number(o);break;default:throw new Error("Unknown ICalRule property '"+n+"'")}return r.options=s,s},"string"===e.type(t)?this.options=this.parseString(t):this.options=t||{};var t=this.options;Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var i,r;if(null==this)throw new TypeError(" this is null or not defined");var a=Object(this),n=a.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(i=t),r=0;r<n;){var o;r in a&&(o=a[r],e.call(i,o,r,a)),r++}}),Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=i.length;return function(a){if("object"!=typeof a&&("function"!=typeof a||null===a))throw new TypeError("Object.keys called on non-object");var n,o,l=[];for(n in a)e.call(a,n)&&l.push(n);if(t)for(o=0;o<r;o++)e.call(a,i[o])&&l.push(i[o]);return l}}()),this.origOptions={};var y=[],g=Object.keys(this.options),m=Object.keys(p);if(g.forEach(function(e){this.origOptions[e]=this.options[e],l(m,e)||y.push(e)},this),y.length)throw new Error("Invalid options: "+y.join(", "));if(!r.FREQUENCIES[this.options.freq]&&null===t.byeaster)throw new Error("Invalid Frequency: "+String(t.freq));m.forEach(function(e){l(g,e)||(t[e]=p[e])});var f=this.options;if(null!==f.byeaster&&(f.freq=this.YEARLY),f.dtstart||(f.dtstart=new Date,f.dtstart.setMilliseconds(0)),i&&(f.dtstart=i.toDate()),null===f.wkst?f.wkst=this.MO.weekday:"number"==typeof f.wkst||(null==f.wkst?f.wkst=this.MO.weekday:f.wkst=f.wkst.weekday),null!==f.bysetpos){"number"==typeof f.bysetpos&&(f.bysetpos=[f.bysetpos]);for(var v=0;v<f.bysetpos.length;v++){var D=f.bysetpos[v];if(0==D||!(-366<=D&&D<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(o(f.byweekno)||o(f.byyearday)||o(f.bymonthday)||null!==f.byweekday||null!==f.byeaster))switch(f.freq){case this.YEARLY:f.bymonth||(f.bymonth=f.dtstart.getMonth()+1),f.bymonthday=f.dtstart.getDate();break;case this.MONTHLY:f.bymonthday=f.dtstart.getDate();break;case this.WEEKLY:f.byweekday=e.jqx.scheduler.utilities.getWeekday(f.dtstart)}if(null===f.bymonth||f.bymonth instanceof Array||(f.bymonth=[f.bymonth]),null===f.byyearday||f.byyearday instanceof Array||(f.byyearday=[f.byyearday]),null===f.bymonthday)f.bymonthday=[],f.bynmonthday=[];else if(f.bymonthday instanceof Array){var b=[],x=[];for(v=0;v<f.bymonthday.length;v++){var D=f.bymonthday[v];D>0?b.push(D):D<0&&x.push(D)}f.bymonthday=b,f.bynmonthday=x}else f.bymonthday<0?(f.bynmonthday=[f.bymonthday],f.bymonthday=[]):(f.bynmonthday=[],f.bymonthday=[f.bymonthday]);if(null===f.byweekno||f.byweekno instanceof Array||(f.byweekno=[f.byweekno]),null===f.byweekday)f.bynweekday=null;else if("number"==typeof f.byweekday)f.byweekday=[f.byweekday],f.bynweekday=null;else if(f.byweekday instanceof h)!f.byweekday.n||f.freq>this.MONTHLY?(f.byweekday=[f.byweekday.weekday],f.bynweekday=null):(f.bynweekday=[[f.byweekday.weekday,f.byweekday.n]],f.byweekday=null);else{var w=[],q=[];for(v=0;v<f.byweekday.length;v++){var j=f.byweekday[v];"number"==typeof j?w.push(j):!j.n||f.freq>this.MONTHLY?w.push(j.weekday):q.push([j.weekday,j.n])}f.byweekday=o(w)?w:null,f.bynweekday=o(q)?q:null}if(null===f.byhour?f.byhour=f.freq<this.HOURLY?[f.dtstart.getHours()]:null:"number"==typeof f.byhour&&(f.byhour=[f.byhour]),null===f.byminute?f.byminute=f.freq<this.MINUTELY?[f.dtstart.getMinutes()]:null:"number"==typeof f.byminute&&(f.byminute=[f.byminute]),null===f.bysecond?f.bysecond=f.freq<this.SECONDLY?[f.dtstart.getSeconds()]:null:"number"==typeof f.bysecond&&(f.bysecond=[f.bysecond]),f.freq>=this.HOURLY)this.timeset=null;else{if(this.timeset=[],f.byhour)for(v=0;v<f.byhour.length;v++)for(var k=f.byhour[v],A=0;A<f.byminute.length;A++)for(var F=f.byminute[A],T=0;T<f.bysecond.length;T++){var S=f.bysecond[T];this.timeset.push(new e.jqx.scheduler.utilities.Time(k,F,S))}e.jqx.scheduler.utilities.sort(this.timeset)}return this}}(jqxBaseFramework),function(e){e.extend(e.jqx._jqxScheduler.prototype,{_getexportcolor:function(e){var t=e;if("transparent"==e&&(t="#FFFFFF"),t&&t.toString()||(t="#FFFFFF"),-1!=t.toString().indexOf("rgb")){var i=t.split(",");if(-1!=t.toString().indexOf("rgba")){var r=parseInt(i[0].substring(5)),a=parseInt(i[1]),n=parseInt(i[2]),o=parseInt(i[3].substring(1,4)),l={r:r,g:a,b:n},d=this._rgbToHex(l);return 0==r&&0==a&&0==n&&0==o?"#ffffff":"#"+d}var r=parseInt(i[0].substring(4)),a=parseInt(i[1]),n=parseInt(i[2].substring(1,4)),l={r:r,g:a,b:n},d=this._rgbToHex(l);return"#"+d}if(-1!=t.toString().indexOf("#")&&4==t.toString().length){t+=t.toString().substring(1,4)}return t},_rgbToHex:function(e){return this._intToHex(e.r)+this._intToHex(e.g)+this._intToHex(e.b)},_intToHex:function(e){var t=parseInt(e).toString(16);return 1==t.length&&(t="0"+t),t.toUpperCase()},exportData:function(t){var i=this;if(!e.jqx.dataAdapter.ArrayExporter)throw"jqxScheduler: Missing reference to jqxdata.export.js!";var r=this.exportSettings.serverURL,a=this.exportSettings.characterSet,n=this.exportSettings.fileName;void 0===n&&(n="jqxScheduler");var i=this;if("ical"!=t&&"ics"!=t){var o=this.getDataAppointments(),l=new Array,d={},s={},c=this.host.find(".jqx-grid-cell:first");c.removeClass(this.toThemeProperty("jqx-grid-cell-selected")),c.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),c.removeClass(this.toThemeProperty("jqx-grid-cell-hover")),c.removeClass(this.toThemeProperty("jqx-fill-state-hover"));var u="cell",h=1,p="column",y=1,g=e(this.columns.records[0].element),m=0;e.each(this.appointmentDataFields,function(e,r){if(d[r]={},d[r].text=r,d[r].width=100,d[r].formatString="",d[r].localization=i.schedulerLocalization,"from"==e||"to"==e?(d[r].type="date",d[r].formatString=i.exportSettings.dateTimeFormatString):d[r].type="string",d[r].cellsAlign="left",l.push(d[r]),u="cell"+h,p="column"+y,"html"==t||"xls"==t||"pdf"==t){var a=function(e,a,n,o,l,c,u,h,p){s[e]={},void 0!=a&&(s[e]["font-size"]=a.css("font-size"),s[e]["font-weight"]=a.css("font-weight"),s[e]["font-style"]=a.css("font-style"),s[e]["background-color"]=i._getexportcolor(a.css("background-color")),s[e].color=i._getexportcolor(a.css("color")),s[e]["border-color"]=i._getexportcolor(a.css("border-top-color")),n?s[e]["text-align"]="left":(s[e]["text-align"]="left",s[e].formatString="",s[e].dataType="string","from"!=u&&"to"!=u||(s[e].dataType="date",s[e].formatString=i.exportSettings.dateTimeFormatString)),"html"!=t&&"pdf"!=t||(s[e]["border-top-width"]=a.css("border-top-width"),s[e]["border-left-width"]=a.css("border-left-width"),s[e]["border-right-width"]=a.css("border-right-width"),s[e]["border-bottom-width"]=a.css("border-bottom-width"),s[e]["border-top-style"]=a.css("border-top-style"),s[e]["border-left-style"]=a.css("border-left-style"),s[e]["border-right-style"]=a.css("border-right-style"),s[e]["border-bottom-style"]=a.css("border-bottom-style"),n?(0==m&&(s[e]["border-left-width"]=a.css("border-right-width")),s[e]["border-top-width"]=a.css("border-right-width"),s[e]["border-bottom-width"]=a.css("border-bottom-width")):(0==m&&(s[e]["border-left-width"]="1px"),s[e]["border-right-width"]="1px")),n&&(d[r].style=e),d[r].cellStyle=e)};a(p,g,!0,0,0,0,e),y++,a(u,c,!1,0,0,0,e),h++}m++});var f=e.jqx.dataAdapter.ArrayExporter(o,d,s,r);if(null==n){this._renderrows();var v=f.exportTo(t);return setTimeout(function(){i.exporting=!1},50),v}f.exportToFile(t,n,r,a),this._renderrows(),setTimeout(function(){i.exporting=!1},50)}else if(i._resources.length>1&&n&&i.resourcesInMultipleICSFiles)for(var o=this.getAppointments(),D=0;D<i._resources.length;D++){for(var b=i._resources[D],x=new Array,w=0;w<o.length;w++){var q=o[w];q.resourceId==b&&x.push(q)}for(var j="BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:jqxScheduler\nMETHOD:PUBLISH\n",k=0;k<x.length;k++)j+=x[k].jqxAppointment.toString(),
k<x.length-1&&(j+="\n");j+="\nEND:VCALENDAR";for(var A=j.length,F=new Uint8Array(new ArrayBuffer(A)),k=0;k<A;k++)F[k]=j.charCodeAt(k);var T=new Blob([F],{type:"application/calendar"});saveAs(T,n+"_"+b+".ics")}else{for(var o=this.getAppointments(),j="BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:jqxScheduler\nMETHOD:PUBLISH\n",D=0;D<o.length;D++)j+=o[D].jqxAppointment.toString(),D<o.length-1&&(j+="\n");j+="\nEND:VCALENDAR";var A=j.length,F=new Uint8Array(new ArrayBuffer(A));for(D=0;D<A;D++)F[D]=j.charCodeAt(D);var T=new Blob([F],{type:"application/calendar"});if(!n)return j;saveAs(T,n+".ics")}},shadeColor:function(e,t){var i=parseInt(e.slice(1),16),r=t<0?0:255,a=t<0?-1*t:t,n=i>>16,o=i>>8&255,l=255&i;return"#"+(16777216+65536*(Math.round((r-n)*a)+n)+256*(Math.round((r-o)*a)+o)+(Math.round((r-l)*a)+l)).toString(16).slice(1)},hexToRgba:function(t,i){var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),a=function(){var t=e.jqx.browser.msie&&e.jqx.browser.version<10;return void 0==this.alpha||t?"rgb("+this.r+", "+this.g+", "+this.b+")":(this.alpha>1?this.alpha=1:this.alpha<0&&(this.alpha=0),"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")")};return void 0==i?r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16),toString:a}:null:(i>1?i=1:i<0&&(i=0),r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16),alpha:i,toString:a}:null)},getAppointmentColors:function(e){var t="",i="",r="";t=this.hexToRgba(e,this.appointmentOpacity).toString(),i=e;return r=function(e){return 255-(.299*e.r+.587*e.g+.114*e.b)<105?"Black":"White"}(this.hexToRgba(e,.7)),{background:t,color:r,border:i}},getColors:function(e){-1==e&&(e=0);var t="",i="",r="",a=this.resources?this.resources.colorScheme:null;a||(a="scheme01");for(var n=new Array,o=0;o<this.colorSchemes.length;o++)if(this.colorSchemes[o].name==a){n=this.colorSchemes[o].colors;break}for(;e>n.length-1;){var l=parseInt(a.substring(6));l>=27&&(l=0),n=n.concat(this.colorSchemes[l].colors),l++}t=n[e],t=this.hexToRgba(n[e],.7).toString(),i=n[e];return r=function(e){return 255-(.299*e.r+.587*e.g+.114*e.b)<105?"Black":"White"}(this.hexToRgba(n[e],.7)),{background:t,color:r,border:i}},getAppointments:function(){for(var e=this.uiappointments,t=new Array,i=0;i<e.length;i++){var r=e[i].boundAppointment;r.toString=r.jqxAppointment.toString,t.push(r)}return t},getDataAppointments:function(){for(var t=this.uiappointments,i=new Array,r=0;r<t.length;r++){var a=t[r].boundAppointment,n={};e.each(this.appointmentDataFields,function(t,i){if(n[i]=a[t],"from"!=t&&"to"!=t||"date"!=e.type(a[t])&&(n[i]=a[t].toDate()),"recurrencePattern"==t&&a[t]&&(n[i]=a[t].toString()),"recurrenceException"==t&&a[t]){n[i]="";for(var r=0;r<a[t].length;r++)n[i]+=a[t][r].toString(),r<a[t].length-1&&(n[i]+=",")}try{JSON&&(n.toString=function(){return JSON.stringify(n)})}catch(e){}}),i.push(n)}return i},_refreshColumns:function(){this._initializeColumns(),this.columnsheader=this.columnsheader||e('<div style="overflow: hidden;"></div>'),this.columnsheader.children().remove();var t=this.columnsHeight;t=this._preparecolumnGroups(),this.columnsheader.height(t),this._rendercolumnheaders()},_refreshColumnTitles:function(){var t=this._views[this._view].type,i=this._views[this._view],r=this,a=new Array;if(r.columns.records[0].timeColumn&&a.push({}),i.timeRuler&&i.timeRuler.timeZones)for(var n=0;n<i.timeRuler.timeZones.length;n++)a.push({});for(var o=function(t,n,o){var l="halfHour";i.timeRuler&&i.timeRuler.scale&&(l=i.timeRuler.scale);var d=24,s=0,c=23;if(i.timeRuler){if(void 0!=i.timeRuler.scaleStartHour)var s=parseInt(i.timeRuler.scaleStartHour);if(void 0!=i.timeRuler.scaleEndHour)var c=parseInt(i.timeRuler.scaleEndHour);s<0&&(s=0),c<0&&(c=23),s>23&&(s=0),c>23&&(c=23),d=c-s+1}if(l)switch(l){case"sixtyMinutes":case"hour":1;break;case"thirdyMinutes":case"halfHour":2;break;case"fifteenMinutes":case"quarterHour":4;break;case"tenMinutes":6;break;case"fiveMinutes":12}var u=(new Array,"auto");i.timeRuler&&i.timeRuler.formatString&&(u=i.timeRuler.formatString);var h=s,p=d,y=t.addHours(h);if(r.rtl)var y=t.addHours(c);for(var g=0;g<p;g++){var m=y.toDate();if("auto"===u)if(0==m.getHours()&&0==m.getMinutes()||12==m.getHours()&&0==m.getMinutes())var f="hh tt";else var f="hh:mm";else if(e.isFunction(u))var f=u(m);e.jqx.dataFormat.isDate(m)&&(m=e.jqx.dataFormat.formatdate(m,f,r.schedulerLocalization)),y=r.rtl?y.addMinutes(-60):y.addMinutes(60),a.push({}),r.columns.records[a.length-1].text=m}},l=(this.tableColumns,0);l<this.tableColumns;l++)switch(t){case"dayView":var d=this.getViewStart();!1===i.showWeekends&&(0!==d.dayOfWeek()&&6!==d.dayOfWeek()||(d=d.addDays(1)),0!==d.dayOfWeek()&&6!==d.dayOfWeek()||(d=d.addDays(1))),a.push({}),this.columns.records[a.length-1].text=this._getDayName(d.dayOfWeek());break;case"weekView":case"monthView":for(var n=0;n<7;n++){var s=this.schedulerLocalization.firstDay+n;(!1!==i.showWeekends||0!==n&&6!==n)&&(a.push({}),r.rtl&&(s=6-s),this.columns.records[a.length-1].text=this._getDayName(s))}break;case"timelineDayView":r._resources[l]&&r._resources[l];o(r.getViewStart());break;case"timelineWeekView":for(var n=0;n<7;n++){var s=this.schedulerLocalization.firstDay+n;(!1!==i.showWeekends||0!==n&&6!==n)&&(r.rtl&&(s=6-s),o(r.getViewStart().addDays(n),this._getDayName(s)))}break;case"timelineMonthView":var c=r.getViewStart(),u="auto";i.timeRuler&&i.timeRuler.formatString&&(u=i.timeRuler.formatString);for(var n=0;n<41;n++){var s=c.dayOfWeek();if(!1!==i.showWeekends||0!==s&&6!==s){r.rtl&&(s=6-s);var h=c.toDate();if("auto"===u){var p="dd";h=c.toDate(),1===h.getDate()&&(p="MMM dd")}else if(e.isFunction(u))var p=u(h);e.jqx.dataFormat.isDate(h)&&(h=e.jqx.dataFormat.formatdate(h,p,r.schedulerLocalization)),c=c.addDays(1),a.push({}),r.columns.records[a.length-1].text=h}}}for(var y=r.columnsHeight,n=0;n<this.columns.records.length;n++){var g=this.columns.records[n];if(!g.timeColumn){r.columnGroups&&r.columnGroups.length&&(y=function(e,t){var i=r.columnGroupslevel*r.columnsHeight;return i-=t.level*r.columnsHeight}(g.datafield,g));var m=null!=g.renderer?g.renderer(g.text,g.align,y):r._rendercolumnheader(g.text,g.align,y,g);null==m&&(m=r._rendercolumnheader(g.text,g.align,y,r)),null!=g.renderer&&(m=e(m)),e(g.element).html(m)}}},initRepeatPanels:function(t,i,r){var a=this,n=e("<div></div>");i.append(n);var o=e("<div class='jqx-scheduler-edit-dialog-label'>"+a.schedulerLocalization.editDialogRepeatString+"</div>").appendTo(n),l=e("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(n),d=e("<div></div>").appendTo(l),s=e("<div></div>");i.append(s);var c=e("<div></div>");s.append(c);c.detach(),a.editDialogFields.repeatEndPanel={},a.editDialogFields.repeatEndPanelContainer=c,function(t,i){var n=e("<div></div>").appendTo(t),o=e("<div class='jqx-scheduler-edit-dialog-label'>"+a.schedulerLocalization.editDialogRepeatEndString+"</div>").appendTo(n),l=e("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(n),d=e("<div style='position:relative; float:left;'><span style='margin-left:2px;'>"+a.schedulerLocalization.editDialogRepeatNeverString+"</span></div>").appendTo(l);d.jqxRadioButton({rtl:a.rtl,groupName:"end"+i,theme:a.theme,width:200,height:25,checked:!0}),a.editDialogFields[i].repeatEndNever=d,a.editDialogFields[i].repeatEndNeverLabel=o;var s=e("<div class='jqx-scheduler-edit-dialog-label'></div>").appendTo(n),c=e("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(n),u=e("<div style='position:relative;  float:left;'><span style='margin-left:2px;'>"+a.schedulerLocalization.editDialogRepeatAfterString+"</span></div>").appendTo(c);u.jqxRadioButton({rtl:a.rtl,groupName:"end"+i,theme:a.theme,width:60,height:25,checked:!1});var h=e("<div style='margin-left: 3px; float:left;'></div>").appendTo(c);h.jqxNumberInput({rtl:a.rtl,decimal:10,min:1,inputMode:"simple",height:25,width:50,spinButtons:!0,decimalDigits:0,theme:a.theme});e("<div style='float: left; margin-left: 5px; line-height:25px;'>"+a.schedulerLocalization.editDialogRepeatOccurrencesString+"</div>").appendTo(c);a.editDialogFields[i].repeatEndAfter=u,a.editDialogFields[i].repeatEndAfterValue=h,a.editDialogFields[i].repeatEndAfterLabel=s;var p=e("<div class='jqx-scheduler-edit-dialog-label'></div>").appendTo(n),y=e("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(n),g=e("<div style='position:relative; float:left;'><span style='margin-left:2px;'>"+a.schedulerLocalization.editDialogRepeatOnString+"</span></div>").appendTo(y);g.jqxRadioButton({rtl:a.rtl,groupName:"end"+i,theme:a.theme,width:60,height:25,checked:!1});var m=e("<div style='margin-left: 3px; float:left;'></div>").appendTo(y);m.jqxDateTimeInput({dropDownWidth:220,dropDownHeight:220,rtl:a.rtl,localization:a._getDateTimeInputLocalization(),firstDayOfWeek:a.schedulerLocalization.firstDay,todayString:a.schedulerLocalization.todayString,clearString:a.schedulerLocalization.clearString,value:r,formatString:a.editDialogDateFormatString,height:25,width:150,theme:a.theme});m.jqxDateTimeInput("getInstance");a.editDialogFields[i].repeatEndOn=g,a.editDialogFields[i].repeatEndOnValue=m,a.editDialogFields[i].repeatEndOnLabel=p}(c,"repeatEndPanel");var u=function(){var t=e("<div style='visibility: hidden;'></div>").appendTo(e(document.body)),i=e("<div class='jqx-scheduler-edit-dialog-label'>"+a.schedulerLocalization.editDialogRepeatEveryString+"</div>").appendTo(t),r=e("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(t),n=e("<div style='float:left;'></div>").appendTo(r);n.jqxNumberInput({rtl:a.rtl,decimal:1,min:1,inputMode:"simple",height:25,width:50,spinButtons:!0,decimalDigits:0,theme:a.theme});e("<div style='float: left; margin-left: 5px; line-height:25px;'>"+a.schedulerLocalization.editDialogRepeatEveryDayString+"</div>").appendTo(r);a.editDialogFields.daily={},a.editDialogFields.daily.repeatDayInterval=n,a.editDialogFields.daily.repeatDayLabel=i,a.editDialogFields.daily.panel=t,t.detach(),a.editDialogFields.weekly={};var o=e("<div style='visibility: hidden;'></div>").appendTo(e(document.body)),l=e("<div class='jqx-scheduler-edit-dialog-label'>"+a.schedulerLocalization.editDialogRepeatEveryString+"</div>").appendTo(o),d=e("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(o),s=e("<div style='float:left;'></div>").appendTo(d);s.jqxNumberInput({rtl:a.rtl,decimal:1,min:1,inputMode:"simple",height:25,width:50,spinButtons:!0,decimalDigits:0,theme:a.theme});e("<div style='float: left; margin-left: 5px; line-height:25px;'>"+a.schedulerLocalization.editDialogRepeatEveryWeekString+"</div>").appendTo(d);a.editDialogFields.weekly.repeatWeekInterval=s,a.editDialogFields.weekly.repeatWeekIntervalLabel=l;var c=e("<div class='jqx-scheduler-edit-dialog-label'>"+a.schedulerLocalization.editDialogRepeatOnString+"</div>").appendTo(o),u=e("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(o),h=e("<div style='float:left;'></div>").appendTo(u);a.editDialogFields.weekly.repeatDaysLabel=c,a.editDialogFields.weekly.repeatDays=new Array;for(var p=0;p<7;p++){var y=a._getDayName(p,"firstTwoLetters"),g=e("<div style='position:relative; top: 6px; float:left;'><span style='margin-left:2px;'>"+y+"</span></div>");h.append(g);var m=1==p;g.jqxCheckBox({rtl:a.rtl,height:25,checked:m,width:50,theme:a.theme}),a.editDialogFields.weekly.repeatDays.push(g)}a.editDialogFields.weekly.panel=o,o.detach(),a.editDialogFields.monthly={};var f=e("<div style='visibility: hidden;'></div>").appendTo(e(document.body)),v=e("<div class='jqx-scheduler-edit-dialog-label'>"+a.schedulerLocalization.editDialogRepeatEveryString+"</div>").appendTo(f),D=e("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(f),b=e("<div style='float:left;'></div>").appendTo(D);b.jqxNumberInput({rtl:a.rtl,decimal:1,min:1,inputMode:"simple",height:25,width:50,spinButtons:!0,decimalDigits:0,theme:a.theme});e("<div style='float: left; margin-left: 5px; line-height:25px;'>"+a.schedulerLocalization.editDialogRepeatEveryMonthString+"</div>").appendTo(D);a.editDialogFields.monthly.repeatMonth=b,a.editDialogFields.monthly.repeatMonthLabel=v;var x=e("<div class='jqx-scheduler-edit-dialog-label'>"+a.schedulerLocalization.editDialogRepeatOnString+"</div>").appendTo(f),w=e("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(f),q=e("<div style='float:left;'></div>").appendTo(w),j=e("<div style='position:relative; top: 6px; float:left;'><span style='margin-left:2px;'>"+a.schedulerLocalization.editDialogRepeatEveryMonthDayString+"</span></div>").appendTo(q);j.jqxRadioButton({rtl:a.rtl,groupName:"month",height:25,width:60,checked:!0,theme:a.theme});var k=e("<div style='float:left;'></div>").appendTo(q);k.jqxNumberInput({rtl:a.rtl,decimal:1,min:1,inputMode:"simple",height:25,width:50,spinButtons:!0,decimalDigits:0,theme:a.theme}),a.editDialogFields.monthly.repeatMonthDay=k,a.editDialogFields.monthly.repeatMonthDayBool=j,a.editDialogFields.monthly.repeatMonthDayLabel=x;var A=e("<div class='jqx-scheduler-edit-dialog-label'></div>").appendTo(f),F=e("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(f),T=e("<div style='float:left;'></div>").appendTo(F),S=e("<div style='position:relative; top: 6px; float:left;'><span style='margin-left:2px;'></span></div>").appendTo(T);S.jqxRadioButton({groupName:"month",height:25,width:25,checked:!1,theme:a.theme});var E=e("<div style='float:left;'></div>").appendTo(T),L=new Array;L.push(a.schedulerLocalization.editDialogRepeatFirstString),L.push(a.schedulerLocalization.editDialogRepeatSecondString),L.push(a.schedulerLocalization.editDialogRepeatThirdString),L.push(a.schedulerLocalization.editDialogRepeatFourthString),L.push(a.schedulerLocalization.editDialogRepeatLastString),E.jqxDropDownList({dropDownWidth:150,selectedIndex:0,source:L,autoDropDownHeight:!0,height:25,width:"auto",theme:a.theme});for(var O=e("<div style='margin-left: 5px; float:left;'></div>").appendTo(T),M=new Array,p=0;p<7;p++){var y=a._getDayName(p);M.push(y)}O.jqxDropDownList({rtl:a.rtl,dropDownWidth:150,autoDropDownHeight:!0,selectedIndex:1,source:M,height:25,width:"auto",theme:a.theme}),a.editDialogFields.monthly.repeatDayOfWeekBool=S,a.editDialogFields.monthly.repeatDayOfWeek=O,a.editDialogFields.monthly.repeatDayOfWeekLabel=A,a.editDialogFields.monthly.repeatDayOfWeekType=E,a.editDialogFields.monthly.panel=f,f.detach(),a.editDialogFields.yearly={};var _=e("<div style='visibility: hidden;'></div>").appendTo(e(document.body)),I=e("<div class='jqx-scheduler-edit-dialog-label'>"+a.schedulerLocalization.editDialogRepeatEveryString+"</div>").appendTo(_),C=e("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(_),R=e("<div style='float:left;'></div>").appendTo(C);R.jqxNumberInput({decimal:1,min:1,inputMode:"simple",height:25,width:50,spinButtons:!0,decimalDigits:0,theme:a.theme});e("<div style='float: left; margin-left: 5px; line-height:25px;'>"+a.schedulerLocalization.editDialogRepeatEveryYearString+"</div>").appendTo(C);a.editDialogFields.yearly.repeatYear=R,a.editDialogFields.yearly.repeatYearLabel=I;var W=e("<div class='jqx-scheduler-edit-dialog-label'>"+a.schedulerLocalization.editDialogRepeatOnString+"</div>").appendTo(_),B=e("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(_),H=e("<div style='float:left;'></div>").appendTo(B),z=e("<div style='position:relative; top: 6px; float:left;'></span></div>").appendTo(H);z.jqxRadioButton({rtl:a.rtl,groupName:"year",height:25,width:25,checked:!0,theme:a.theme}),a.editDialogFields.yearly.repeatYearBool=z,a.editDialogFields.yearly.repeatYearBoolLabel=W;for(var N=e("<div style='float:left;'></div>").appendTo(H),Y=new Array,p=0;p<12;p++){var P=a.schedulerLocalization.months.names[p];Y.push(P)}N.jqxDropDownList({selectedIndex:0,height:25,dropDownWidth:150,width:"auto",source:Y,theme:a.theme}),a.editDialogFields.yearly.repeatYearMonth=N;var Z=e("<div style='margin-left: 5px; float:left;'></div>").appendTo(H);Z.jqxNumberInput({decimal:1,min:1,inputMode:"simple",height:25,width:50,spinButtons:!0,decimalDigits:0,theme:a.theme}),a.editDialogFields.yearly.repeatYearDay=Z;var U=e("<div class='jqx-scheduler-edit-dialog-label'></div>").appendTo(_),V=e("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(_),J=e("<div style='float:left;'></div>").appendTo(V),Q=e("<div style='position:relative; top: 6px; float:left;'><span style='margin-left:2px;'></span></div>").appendTo(J);Q.jqxRadioButton({rtl:a.rtl,groupName:"year",height:25,width:25,checked:!1,theme:a.theme});var K=e("<div style='float:left;'></div>").appendTo(J);a.editDialogFields.yearly.repeatDayOfWeekBool=Q,a.editDialogFields.yearly.repeatDayOfWeekType=K,a.editDialogFields.yearly.repeatDayOfWeekLabel=U;var X=new Array;X.push(a.schedulerLocalization.editDialogRepeatFirstString),X.push(a.schedulerLocalization.editDialogRepeatSecondString),X.push(a.schedulerLocalization.editDialogRepeatThirdString),X.push(a.schedulerLocalization.editDialogRepeatFourthString),X.push(a.schedulerLocalization.editDialogRepeatLastString),K.jqxDropDownList({dropDownWidth:150,selectedIndex:0,source:X,autoDropDownHeight:!0,height:25,width:"auto",theme:a.theme});var G=e("<div style='margin-left: 5px; float:left;'></div>").appendTo(J);a.editDialogFields.yearly.repeatDayOfWeek=G;for(var $=new Array,p=0;p<7;p++){var y=a._getDayName(p);$.push(y)}G.jqxDropDownList({rtl:a.rtl,dropDownWidth:150,selectedIndex:1,autoDropDownHeight:!0,source:$,height:25,width:"auto",theme:a.theme});for(var Y=new Array,ee=(e("<div style='line-height:25px; height: 25px; margin-left: 5px; float:left;'>"+a.schedulerLocalization.editDialogRepeatOfString+"</div>").appendTo(J),e("<div style='margin-left: 5px; float:left;'></div>").appendTo(J)),p=0;p<12;p++){var P=a.schedulerLocalization.months.names[p];Y.push(P)}a.editDialogFields.yearly.repeatDayOfWeekMonth=ee,ee.jqxDropDownList({rtl:a.rtl,dropDownWidth:150,selectedIndex:0,source:Y,height:25,width:"auto",theme:a.theme}),a.editDialogFields.yearly.panel=_,_.detach()};a.editAppointment&&a.editAppointment.rootAppointment,u();var h=e("<div></div>");i.append(h);var p=e("<div class='jqx-scheduler-edit-dialog-label'>"+a.schedulerLocalization.editDialogExceptionsString+"</div>").appendTo(h),y=e("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(h),g=e("<div style='position:relative; top: 6px;'>"+a.schedulerLocalization.editDialogResetExceptionsString+"</div>").appendTo(y);g.jqxCheckBox({height:25,width:25,theme:a.theme}),h.hide(),a.editDialogFields.resetExceptions=g,a.editDialogFields.resetExceptionsLabel=p,a.editDialogFields.resetExceptionsContainer=h;var m=new Array;m.push(a.schedulerLocalization.editDialogRepeatNeverString),m.push(a.schedulerLocalization.editDialogRepeatDailyString),m.push(a.schedulerLocalization.editDialogRepeatWeeklyString),m.push(a.schedulerLocalization.editDialogRepeatMonthlyString),m.push(a.schedulerLocalization.editDialogRepeatYearlyString),d.jqxDropDownList({rtl:a.rtl,width:"100%",height:25,autoDropDownHeight:!0,theme:a.theme,source:m,selectedIndex:0}),a.editDialogFields.repeat=d,a.editDialogFields.repeatLabel=o,a.editDialogFields.repeatContainer=n,a.editDialogFields.repeatPanel=s,this.addHandler(d,"change",function(e){var r=e.args.item.index;!function(){switch(s.children().detach(),r){case 0:break;case 1:a.editDialogFields.daily.panel.css("visibility","visible"),s.append(a.editDialogFields.daily.panel);break;case 2:a.editDialogFields.weekly.panel.css("visibility","visible"),s.append(a.editDialogFields.weekly.panel);break;case 3:a.editDialogFields.monthly.panel.css("visibility","visible"),s.append(a.editDialogFields.monthly.panel);break;case 4:a.editDialogFields.yearly.panel.css("visibility","visible"),s.append(a.editDialogFields.yearly.panel)}s.append(c),0==r?a.editDialogFields.repeatEndPanelContainer.hide():a.editDialogFields.repeatEndPanelContainer.show(),a.isTouchDevice()||(t.jqxWindow({height:150}),t.jqxWindow({height:i[0].scrollHeight+40}))}()})},_initMenu:function(){var t=this;if(this.host.jqxMenu){if(this.menu){if(this._hasOpenedMenu)return;this.removeHandler(this.menu,"keydown"),this.removeHandler(this.menu,"closed"),this.removeHandler(this.menu,"itemclick"),this.menu.jqxMenu("destroy"),this.menu.removeData(),this.menu.remove()}this.menuitemsarray=new Array,this.menu=e('<div id="menu.jqxscheduler'+this.element.id+'" style="white-space: nowrap; z-index: 9999999999999;"></div>'),this.host.append(this.menu),this.addHandler(e(window),"orientationchange.jqxscheduler"+this.element.id,function(){t.menu.jqxMenu("close"),t._hasOpenedMenu=!1}),this.addHandler(e(window),"orientationchanged.jqxscheduler"+this.element.id,function(){t.menu.jqxMenu("close"),t._hasOpenedMenu=!1}),this.removeHandler(this.menu,"keydown"),this.addHandler(this.menu,"keydown",function(e){27==e.keyCode&&(t.menu.jqxMenu("close"),t._hasOpenedMenu=!1,t.focus())}),this.addHandler(this.menu,"open",function(e){t.contextMenuOpen&&t.contextMenuOpen(t.menu,t.selectedJQXAppointment?t.selectedJQXAppointment.boundAppointment:null,e),t._raiseEvent("contextMenuOpen",{menu:t.menu,appointment:t.selectedJQXAppointment?t.selectedJQXAppointment.boundAppointment:null}),t._removeFeedbackAndStopResize()}),this.addHandler(this.menu,"close",function(e){t.contextMenuClose&&t.contextMenuClose(t.menu,t.selectedJQXAppointment?t.selectedJQXAppointment.boundAppointment:null,e),t._hasOpenedMenu=!1,document.activeElement&&document.activeElement.className.indexOf("jqx-menu")>=0&&!t.menuOpening&&t.focus(),t._raiseEvent("contextMenuClose",{menu:t.menu,appointment:t.selectedJQXAppointment?t.selectedJQXAppointment.boundAppointment:null})}),this.addHandler(this.host,"contextmenu",function(e){return e.preventDefault(),e.stopPropagation(),!1}),this.addHandler(this.menu,"itemclick",function(e){var i=t.menu.jqxMenu("getItem",e.args.id);if(t._raiseEvent("contextMenuItemClick",{item:i,menu:t.menu,appointment:t.selectedJQXAppointment?t.selectedJQXAppointment.boundAppointment:null}),t.contextMenuItemClick){var r=t.contextMenuItemClick(t.menu,t.selectedJQXAppointment?t.selectedJQXAppointment.boundAppointment:null,e);if(1==r)return new Date-t.renderedTime>500&&t._renderrows(),t.menu.jqxMenu("close"),void(t._hasOpenedMenu=!1)}if("createAppointment"==i.id)t._initDialog(),t._openDialog(),"keyboard"==e.args.clickType&&(t.menu.jqxMenu("close"),t._hasOpenedMenu=!1);else{if("editAppointment"!=i.id)return"keyboard"==e.args.clickType&&(t.menu.jqxMenu("close"),t._hasOpenedMenu=!1),!0;var a=t.getJQXAppointmentByElement(t.selectedAppointment);if(!a.readOnly){var r=t._initDialog(a);!1!==r&&t._openDialog()}"keyboard"==e.args.clickType&&(t.menu.jqxMenu("close"),t._hasOpenedMenu=!1)}});var i=new Array;i.push({label:this.schedulerLocalization.contextMenuEditAppointmentString,id:"editAppointment"}),i.push({label:this.schedulerLocalization.contextMenuCreateAppointmentString,id:"createAppointment"});var r={rtl:this.rtl,keyboardNavigation:!0,source:i,popupZIndex:999999,autoOpenPopup:!1,mode:"popup",theme:this.theme,animationShowDuration:0,animationHideDuration:0,animationShowDelay:0};t.contextMenuCreate&&t.contextMenuCreate(t.menu,r),t._raiseEvent("contextMenuCreate",{menu:t.menu,settings:r}),this.menu.jqxMenu(r)}},_initDialog:function(t,i){var r=this,a=null;if(t&&t.isRecurrentAppointment()&&!r.editRecurrenceDialog.jqxWindow("isOpen")){var n=r.host.coord(),o=n.top+r.host.height()/2-r.editRecurrenceDialog.height()/2,l=n.left+r.host.width()/2-r.editRecurrenceDialog.width()/2;r.editRecurrenceDialog.find("button:first").focus(),setTimeout(function(){r.editRecurrenceDialog.find("button:first").focus()},25),r.editRecurrenceDialog.jqxWindow("move",l,o),r.editRecurrenceDialog.jqxWindow("open"),r.editSeries=function(e){e?(r._initDialog(t.rootAppointment),r._openDialog()):(r._initDialog(t),r._openDialog())},r.overlay.show(),r.overlay.width(r.host.width()),r.overlay.height(r.host.height());var n=r.host.coord();return r.overlay.offset(n),r._editDialog||r._initDialog(),!1}if(r.editAppointment=t,t||(a=r.getSelection())||(r.focus(),r.focusedCell.setAttribute("data-selected","true"),r._lastSelectedCell=r.focusedCell,r._updateCellsSelection(r.focusedCell),a=r.getSelection()),a||t){var d=a?a.from:t.from,s=a?a.to:t.to,c=r.getSelectedCells();if(c.length>0){c[c.length-1].getAttribute("data-end-date")&&(s=e.jqx.scheduler.utilities.getEndOfDay(s))}r._editStart=d,r._editEnd=s}if(r.editDialogFields&&r.editDialogFields.resourceContainer&&r._resources.length>0){for(var u=new Array,h=0;h<r._resources.length;h++)u.push(r._resources[h]);var p=!0;u.length>10&&(p=!1),r.editDialogFields.resource.jqxDropDownList({source:u,selectedIndex:0,autoDropDownHeight:p}),t||r.editDialogFields.resource.val(a.resourceId)}if(r.editDialogFields&&r.editDialogFields.repeatContainer&&(t&&t.rootAppointment?(r.editDialogFields.repeatContainer.hide(),r.editDialogFields.repeatPanel.hide()):(r.editDialogFields.repeatContainer.show(),r.editDialogFields.repeatPanel.show())),null==r._editDialog){r._editDialog=null;var y=null==t?r.schedulerLocalization.editDialogCreateTitleString:r.schedulerLocalization.editDialogTitleString,g=e("<div><div>"+y+"</div><div id='dialog"+this.element.id+"'></div></div>");e(g).jqxWindow({rtl:r.rtl,zIndex:99999,autoFocus:!1,autoOpen:!1,animationType:"none",theme:r.theme,width:530,maxHeight:800,minHeight:110,resizable:!1,initContent:function(){r.editDialogFields={},null==d&&null==s&&r._editStart&&r._editEnd&&(d=r._editStart,s=r._editEnd),g.jqxWindow("setTitle",y);var i=e(g.children()[1]),n=e("<div></div>");i.append(n);var o=e("<div class='jqx-scheduler-edit-dialog-label'>"+r.schedulerLocalization.editDialogSubjectString+"</div>").appendTo(n),l=e("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(n),c=e("<input type='text'/>").appendTo(l);c.jqxInput({rtl:r.rtl,width:"100%",height:25,theme:r.theme}),c.css("box-sizing","border-box"),r.editDialogFields.subject=c,r.editDialogFields.subjectLabel=o,r.editDialogFields.subjectContainer=n;var u=e("<div></div>");i.append(u);var h=e("<div class='jqx-scheduler-edit-dialog-label'>"+r.schedulerLocalization.editDialogLocationString+"</div>").appendTo(u),p=e("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(u),m=e("<input type='text'/>").appendTo(p);m.jqxInput({rtl:r.rtl,width:"100%",height:25,theme:r.theme}),m.css("box-sizing","border-box"),r.editDialogFields.location=m,r.editDialogFields.locationLabel=h,r.editDialogFields.locationContainer=u;var f=e("<div></div>");i.append(f);var v=e("<div class='jqx-scheduler-edit-dialog-label'>"+r.schedulerLocalization.editDialogFromString+"</div>").appendTo(f),D=e("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(f),b=e("<div></div>").appendTo(D),x=null;if(d)x=d.toDate();else{var w=new Date;w.setHours(9,0,0),x=w}b.jqxDateTimeInput({dropDownWidth:220,dropDownHeight:220,rtl:r.rtl,localization:r._getDateTimeInputLocalization(),firstDayOfWeek:r.schedulerLocalization.firstDay,todayString:r.schedulerLocalization.todayString,clearString:r.schedulerLocalization.clearString,value:x,formatString:r.editDialogDateTimeFormatString,width:"100%",showTimeButton:!0,height:25,theme:r.theme}),r.editDialogFields.from=b,r.editDialogFields.fromLabel=v,r.editDialogFields.fromContainer=f;var q=e("<div></div>");i.append(q);var j=e("<div class='jqx-scheduler-edit-dialog-label'>"+r.schedulerLocalization.editDialogToString+"</div>").appendTo(q),k=e("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(q),A=e("<div></div>").appendTo(k),F=null;if(s)F=s.toDate();else{var w=new Date;w.setHours(10,0,0),F=w}A.jqxDateTimeInput({dropDownWidth:220,dropDownHeight:220,rtl:r.rtl,localization:r._getDateTimeInputLocalization(),firstDayOfWeek:r.schedulerLocalization.firstDay,todayString:r.schedulerLocalization.todayString,clearString:r.schedulerLocalization.clearString,value:F,formatString:r.editDialogDateTimeFormatString,width:"100%",showTimeButton:!0,height:25,theme:r.theme}),r.editDialogFields.to=A,r.editDialogFields.toLabel=j,r.editDialogFields.toContainer=q,r._changeFromUser=!0,r.addHandler(b,"change",function(t){if(r._changeFromUser){var i=(t.args,t.args.oldValue),a=A.val("date"),n=new e.jqx.date(a)-new e.jqx.date(i);if(n>0){var o=1e4*n,l=e.jqx.timeSpan(o),d=new e.jqx.date(t.args.newValue).add(l);A.val(d.toDate())}}}),r.addHandler(A,"change",function(e){if(r._changeFromUser){var t=(e.args,e.args.oldValue),i=A.val("date");b.val("date")>=i&&A.val(t)}});var T=e("<div></div>");i.append(T);var S=e("<div class='jqx-scheduler-edit-dialog-label'>"+r.schedulerLocalization.editDialogAllDayString+"</div>").appendTo(T),E=e("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(T),L=e("<div style='position:relative;'></div>").appendTo(E);L.jqxCheckBox({rtl:r.rtl,height:25,width:25,theme:r.theme}),r.editDialogFields.allDay=L,r.editDialogFields.allDayLabel=S,r.editDialogFields.allDayContainer=T,r.addHandler(T,"change",function(e){e.args.checked?(A.jqxDateTimeInput({showTimeButton:!1,formatString:r.editDialogDateFormatString}),b.jqxDateTimeInput({showTimeButton:!1,formatString:r.editDialogDateFormatString})):(A.jqxDateTimeInput({showTimeButton:!0,formatString:r.editDialogDateTimeFormatString}),b.jqxDateTimeInput({showTimeButton:!0,formatString:r.editDialogDateTimeFormatString}))}),e.jqx.scheduler.utilities.getStartOfDay(d).equals(d)&&e.jqx.scheduler.utilities.getEndOfDay(s).equals(s)&&r.editDialogFields.allDay.val(!0),(r._views[r._view].type.indexOf("month")>=0||d&&d.equals(s)||s&&s.equals(e.jqx.scheduler.utilities.getEndOfDay(s)))&&r.editDialogFields.allDay.val(!0);var O=e("<div></div>");i.append(O);var M=e("<div class='jqx-scheduler-edit-dialog-label'>"+r.schedulerLocalization.editDialogTimeZoneString+"</div>").appendTo(O),_=e("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(O),I=e("<div></div>").appendTo(_),C=new Array;C.push({displayName:r.schedulerLocalization.editDialogSelectTimeZoneString,id:null}),C=C.concat(r.timeZones);for(var R=0;R<C.length;R++){var W=C[R],B=W.displayName.indexOf(")");if(B>=0)var H=W.displayName.substring(2+B);else var H=W.displayName;W.searchName=H}I.jqxDropDownList({rtl:r.rtl,placeHolder:r.schedulerLocalization.editDialogSelectTimeZoneString,width:"100%",height:25,theme:r.theme,searchMember:"searchName",source:C,displayMember:"displayName",valueMember:"id"}),r.editDialogFields.timeZone=I,r.editDialogFields.timeZoneLabel=M,r.editDialogFields.timeZoneContainer=O,r.initRepeatPanels(g,i,s.toDate()),r.editDialogFields&&r.editDialogFields.repeatContainer&&(r.editAppointment&&r.editAppointment.rootAppointment?(r.editDialogFields.repeatContainer.hide(),r.editDialogFields.repeatPanel.hide()):(r.editDialogFields.repeatContainer.show(),r.editDialogFields.repeatPanel.show()));var z=e("<div></div>");i.append(z);var N=e("<div class='jqx-scheduler-edit-dialog-label'>"+r.schedulerLocalization.editDialogDescriptionString+"</div>").appendTo(z),Y=e("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(z),P=e("<textarea type='text' resizable='off' style='position:relative; top: 3px; padding:3px;'></textarea>").appendTo(Y);P.jqxInput({rtl:r.rtl,height:40,width:"100%",theme:r.theme}),P.css("box-sizing","border-box"),r.editDialogFields.description=P,r.editDialogFields.descriptionLabel=N,r.editDialogFields.descriptionContainer=z;var Z=e("<div></div>");i.append(Z);var U=e("<div class='jqx-scheduler-edit-dialog-label'>"+r.schedulerLocalization.editDialogColorString+"</div>").appendTo(Z),V=e("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(Z),J=e("<div></div>").appendTo(V),Q=function(e){if(-1==e)return"";var t=r.colors[e],i="",i="";return i+="<div style='margin-top: 1px; float: left; border-radius: 3px; width: 96%; height: 20px; border: none; background:"+t+"; margin-left: 2%;'></div>"},K=function(e,t){if(t<0)return e.css("top","4px"),e.css("position","relative"),e[0].outerHTML;var i=r.colors[t],a="";return a+="<div style='margin-top: 2px; float: left; border-radius: 3px; width: 96%; height: 20px; border: none; background:"+i+"; margin-left: 2%;'></div>"};J.jqxDropDownList({rtl:r.rtl,selectedIndex:-1,
placeHolder:r.schedulerLocalization.editDialogColorPlaceHolderString,selectionRenderer:K,renderer:Q,source:r.colors,height:25,width:"100%",theme:r.theme}),r.editDialogFields.color=J,r.editDialogFields.colorLabel=U,r.editDialogFields.colorContainer=Z;var X=e("<div></div>");i.append(X);var G=e("<div class='jqx-scheduler-edit-dialog-label'>"+r.schedulerLocalization.editDialogStatusString+"</div>").appendTo(X),$=e("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(X),ee=e("<div></div>").appendTo($);ee.jqxDropDownList({rtl:r.rtl,selectedIndex:2,autoDropDownHeight:!0,source:r.schedulerLocalization.editDialogStatuses,height:25,width:"100%",theme:r.theme}),r.editDialogFields.status=ee,r.editDialogFields.statusLabel=G,r.editDialogFields.statusContainer=X;var te=e("<div></div>");i.append(te);for(var ie=e("<div class='jqx-scheduler-edit-dialog-label'>"+r.schedulerLocalization.editDialogResourceIdString+"</div>").appendTo(te),re=e("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(te),ae=e("<div></div>").appendTo(re),ne=new Array,R=0;R<r._resources.length;R++)ne.push(r._resources[R]);var oe=!0;ne.length>10&&(oe=!1),ae.jqxDropDownList({rtl:r.rtl,source:ne,selectedIndex:0,autoDropDownHeight:oe,height:25,width:"100%",theme:r.theme}),r.editDialogFields.resource=ae,r.editDialogFields.resourceLabel=ie,r.editDialogFields.resourceContainer=te,0==ne.length&&te.hide(),!t&&a&&r.editDialogFields.resource.val(a.resourceId);var le=e("<div></div>");i.append(le);var de=e("<div style='width:100%;' class='jqx-scheduler-edit-dialog-field'></div>").appendTo(le),se=e("<button style='margin-left: 5px; float:right;'>"+r.schedulerLocalization.editDialogCancelString+"</button>").appendTo(de),ce=e("<button style='margin-left: 5px; float:right;'>"+r.schedulerLocalization.editDialogDeleteString+"</button>").appendTo(de),ue=e("<button style='display: none; margin-left: 5px; float:right;'>"+r.schedulerLocalization.editDialogRepeatDeleteSeriesString+"</button>").appendTo(de),he=e("<button style='display: none; margin-left: 5px; float:right;'>"+r.schedulerLocalization.editDialogRepeatDeleteString+"</button>").appendTo(de),pe=e("<button style='margin-left: 5px; float:right;'>"+r.schedulerLocalization.editDialogSaveString+"</button>").appendTo(de),ye=e("<button style='display: none; margin-left: 5px; float:right;'>"+r.schedulerLocalization.editDialogRepeatSaveSeriesString+"</button>").appendTo(de),ge=e("<button style='display: none; margin-left: 5px; float:right;'>"+r.schedulerLocalization.editDialogRepeatSaveString+"</button>").appendTo(de),me=25;r.isTouchDevice()&&(me=null),ce.jqxButton({rtl:r.rtl,theme:r.theme,height:me}),ue.jqxButton({rtl:r.rtl,theme:r.theme,height:me}),he.jqxButton({rtl:r.rtl,theme:r.theme,height:me}),pe.jqxButton({rtl:r.rtl,theme:r.theme,height:me}),se.jqxButton({rtl:r.rtl,theme:r.theme,height:me}),ye.jqxButton({rtl:r.rtl,theme:r.theme,height:me}),ge.jqxButton({rtl:r.rtl,theme:r.theme,height:me}),ye.hide(),ge.hide(),r.editDialogFields.saveOccurrenceButton=ge,r.editDialogFields.saveSeriesButton=ye,r.editDialogFields.saveButton=pe,r.editDialogFields.cancelButton=se,r.editDialogFields.deleteButton=ce,r.editDialogFields.deleteSeriesButton=ue,r.editDialogFields.deleteExceptionsButton=he,r.editDialogFields.buttons=de,r.addHandler(ce,"click",function(){g.jqxWindow("close"),r.overlay.hide(),r._deleteAppointment(r.editAppointment)}),r.addHandler(se,"click",function(){g.jqxWindow("close"),r.overlay.hide()}),r.addHandler(ge,"click",function(){if(r.editAppointment.isException()){for(var e=r.editAppointment.rootAppointment?r.editAppointment.rootAppointment.exceptions:r.editAppointment.exceptions,t=0;t<e.length;t++)if(e[t].occurrenceFrom.equals(r.editAppointment.occurrenceFrom)){e[t]=r.editAppointment;break}}else null!=r.editAppointment.rootAppointment?(r.editAppointment.rootAppointment.exceptions.push(r.editAppointment),r.editAppointment.rootAppointment.recurrenceException.push(r.editAppointment.occurrenceFrom)):(r.editAppointment.exceptions.push(r.editAppointment),r.editAppointment.recurrenceException.push(r.editAppointment.occurrenceFrom));r._setAppointmentPropertiesFromDialog(r.editAppointment,"occurrence")&&(r.changedAppointments[r.editAppointment.id]={type:"Update",appointment:r.editAppointment.boundAppointment},r._raiseEvent("appointmentChange",{appointment:r.editAppointment.boundAppointment}),r._renderrows(),g.jqxWindow("close"),r.overlay.hide())}),r.addHandler(ye,"click",function(){var e=r.editAppointment;e.rootAppointment&&(e=e.rootAppointment),r._setAppointmentPropertiesFromDialog(e,"series")&&(r.changedAppointments[e.id]={type:"Update",appointment:e.boundAppointment},r._raiseEvent("appointmentChange",{appointment:e.boundAppointment}),r._renderrows(),g.jqxWindow("close"),r.overlay.hide())}),r.addHandler(pe,"click",function(){var t=!0;if(null==r.editAppointment){var i=new e.jqx.scheduler.appointment;t=r._setAppointmentPropertiesFromDialog(i,"none"),t&&r.addAppointment(i)}else r.editAppointment.rootAppointment?(ge.trigger("click"),t=!1):r.editAppointment.isRecurrentAppointment()?(ye.trigger("click"),t=!1):(t=r._setAppointmentPropertiesFromDialog(r.editAppointment,"none"))&&(r.changedAppointments[r.editAppointment.id]={type:"Update",appointment:r.editAppointment?r.editAppointment.boundAppointment:null},r._raiseEvent("appointmentChange",{appointment:r.editAppointment.boundAppointment}),r._renderrows());t&&(g.jqxWindow("close"),r.overlay.hide())}),r.addHandler(g,"close",function(e){r.overlay.hide(),r.focus(),r.editDialogClose&&r.editDialogClose(g,r.editDialogFields,r.editAppointment?r.editAppointment.boundAppointment:null),r._raiseEvent("editDialogClose",{dialog:g,fields:r.editDialogFields,appointment:r.editAppointment?r.editAppointment.boundAppointment:null})}),r.editDialogCreate&&r.editDialogCreate(g,r.editDialogFields,r.editAppointment),r._raiseEvent("editDialogCreate",{dialog:g,fields:r.editDialogFields,appointment:r.editAppointment?r.editAppointment.boundAppointment:null}),g.jqxWindow({height:i[0].scrollHeight+40})}}),r._editDialog=g}r.dialogOpenings||(r.dialogOpenings=0),r.removeHandler(r._editDialog,"open"),r.addHandler(r._editDialog,"open",function(n){if(r.editDialogOpen&&r.editDialogFields){if(1==r.editDialogOpen(g,r.editDialogFields,r.editAppointment?r.editAppointment.boundAppointment:null))return}r.rtl&&(r._editDialog.find(".jqx-scheduler-edit-dialog-label").addClass(r.toThemeProperty("jqx-scheduler-edit-dialog-label-rtl")),r._editDialog.find(".jqx-scheduler-edit-dialog-field").addClass(r.toThemeProperty("jqx-scheduler-edit-dialog-field-rtl")),r.editDialogFields.saveOccurrenceButton.css("float","left"),r.editDialogFields.saveSeriesButton.css("float","left"),r.editDialogFields.saveButton.css("float","left"),r.editDialogFields.cancelButton.css("float","left"),r.editDialogFields.deleteButton.css("float","left"),r.editDialogFields.deleteSeriesButton.css("float","left"),r.editDialogFields.deleteExceptionsButton.css("float","left"),r.editDialogFields.buttons.css("width","auto"),r.editDialogFields.allDay.css("float","right")),setTimeout(function(){var e=r.editAppointment?r.editAppointment.boundAppointment:null;r.editAppointment&&r.editAppointment.rootAppointment&&(e=r.editAppointment.rootAppointment.boundAppointment),r._raiseEvent("editDialogOpen",{dialog:r._editDialog,fields:r.editDialogFields,appointment:e})});var o=function(){setTimeout(function(){i?r.editDialogFields.deleteButton.focus():(r.editDialogFields.subject.focus(),r.editDialogFields.subject.select())},1)};if(0==r.dialogOpenings&&!t)return r.dialogOpenings++,r.isTouchDevice()||(r._editDialog.jqxWindow({height:150}),r._editDialog.jqxWindow({height:e(r._editDialog.children())[1].scrollHeight+40})),void o();r.editDialogFields&&(r.editDialogFields.subject.val(""),r.editDialogFields.location.val(""),o(),r.editDialogFields.resetExceptions.val(!1),r.editDialogFields.description.val(""),t||r.editDialogFields.deleteButton.hide(),t?(r.dialogOpenings++,r.editDialogFields.deleteButton.show(),r.editDialogFields.subject.val(t.subject),r.editDialogFields.location.val(t.location),r.editDialogFields.description.val(t.description),r.editDialogFields.timeZone.val(t.timeZone),r.colors.indexOf(t.borderColor)>=0?r.editDialogFields.color.val(t.borderColor):r.editDialogFields.color.jqxDropDownList("clearSelection"),r.editDialogFields.allDay.val(t.allDay),r.editDialogFields.resource.val(t.resourceId),r.editDialogFields.status.val(t.status),t.timeZone&&(t.from=t.from.toTimeZone(t.timeZone),t.to=t.to.toTimeZone(t.timeZone)),d=t.from,s=t.to,e.jqx.scheduler.utilities.getStartOfDay(d).equals(d)&&e.jqx.scheduler.utilities.getEndOfDay(s).equals(s)&&r.editDialogFields.allDay.val(!0),r._setAppointmentPropertiesToDialog(t,d,s,a?a.resourceId:null)):(r.editDialogFields.saveButton.show(),r._setAppointmentPropertiesToDialog(null,d,s,a?a.resourceId:null)),d&&s&&(r._changeFromUser=!1,r.editDialogFields.from.val(d.toDate()),r.editDialogFields.to.val(s.toDate()),r._changeFromUser=!0),r.isTouchDevice()||(r._editDialog.jqxWindow({height:150}),r._editDialog.jqxWindow({height:e(r._editDialog.children())[1].scrollHeight+40})))}),r.removeHandler(r._editDialog,"keydown"),r.addHandler(r._editDialog,"keydown",function(i){if(r.editDialogKeyDown){var a=r.editDialogKeyDown(g,r.editDialogFields,r.editAppointment,i);if(void 0!=a)return a}if(13==i.keyCode){if(e(document.activeElement).ischildof(r._editDialog)){if("button"==document.activeElement.nodeName.toLowerCase())return!0;t?t.isException()||t.rootAppointment?r.editDialogFields.saveOccurrenceButton.trigger("click"):t.isRecurrentAppointment()?r.editDialogFields.saveSeriesButton.trigger("click"):r.editDialogFields.saveButton.trigger("click"):r.editDialogFields.saveButton.trigger("click")}}else 27==i.keyCode&&r.editDialogFields.cancelButton.trigger("click")})},openMenu:function(t,i){var r=this;r.menu||r._initMenu();r._views[r._view].type;if(r.contextMenu&&r.menu){if(r.selectedAppointment?r.menu.jqxMenu("showItem","editAppointment"):r.menu.jqxMenu("hideItem","editAppointment"),arguments.length<2){if(r.selectedAppointment){var a=r.selectedAppointment.coord();t=a.left,i=a.top}else if(r.focusedCell)var a=e(r.focusedCell).coord();t=a.left,i=a.top}r.menu.jqxMenu("open",t,i),r._hasOpenedMenu=!0}},closeMenu:function(){var e=this;e.contextMenu&&e.menu&&setTimeout(function(){e.menu.jqxMenu("close")})},closeDialog:function(){this._editDialog.jqxWindow("close")},openDialog:function(e,t){var i=this;i._views[i._view].type;if(i.selectedJQXAppointment){!1!==i._initDialog(i.selectedJQXAppointment)&&i._openDialog(e,t)}else null==i.getSelection()&&(i.focus(),i.focusedCell.setAttribute("data-selected","true"),i._lastSelectedCell=i.focusedCell,i._updateCellsSelection(i.focusedCell)),i._initDialog(),i._openDialog(e,t)},_openDialog:function(e,t){var i=this;i._views[i._view].type;if(i.editDialog){var r=i.host.coord();i.overlay.show(),i.overlay.css("z-index",9999999),i.overlay.width(i.host.width()),i.overlay.height(i.host.height()),i.overlay.offset(r);if(i.isTouchDevice())i._editDialog.jqxWindow("move",r.left,r.top),i._editDialog.jqxWindow({draggable:!1,maxWidth:i.host.width(),maxHeight:i.host.height()}),i._editDialog.jqxWindow({width:i.host.width(),height:i.host.height()}),i._editDialog.jqxWindow("open"),i._editDialog.jqxWindow("move",r.left,r.top);else if(void 0!=e&&void 0!=t)i._editDialog.jqxWindow("move",e,t),i._editDialog.jqxWindow("open");else{var a=i._editDialog.height();a<400&&(a=400);var n=r.top+i.host.height()/2-a/2,o=r.left+i.host.width()/2-i._editDialog.width()/2;i._editDialog.jqxWindow("move",o,n),i._editDialog.jqxWindow("open")}setTimeout(function(){i.overlay.css("z-index",999)},50)}},_setAppointmentPropertiesFromDialog:function(t,i){var r=this;return function(t){var a=r._views[r._view].type,n=(r._views[r._view],r.editDialogFields.from.val("date")),o=r.editDialogFields.to.val("date");if(n>o)return r.editDialogFields.from.jqxDateTimeInput("focus"),!1;if(n==o)return a.indexOf("month")>=0;if(t.resourceId=r.editDialogFields.resource.val(),"none"==r.editDialogFields.resourceContainer.css("display")&&(t.resourceId=""),t.description=r.editDialogFields.description.val(),t.allDay=r.editDialogFields.allDay.val(),t.status=r.editDialogFields.status.val(),t.location=r.editDialogFields.location.val(),t.timeZone=r.editDialogFields.timeZone.val(),""==t.timeZone&&""!=r.timeZone&&(t.timeZone=r.timeZone),t.from=new e.jqx.date(n,t.timeZone),t.to=new e.jqx.date(o,t.timeZone),r.timeZone?(t.from=t.from.toTimeZone(r.timeZone),t.to=t.to.toTimeZone(r.timeZone)):(t.from=t.from.toTimeZone(null),t.to=t.to.toTimeZone(null)),t.allDay&&(t.from=e.jqx.scheduler.utilities.getStartOfDay(t.from),t.to=e.jqx.scheduler.utilities.getEndOfDay(t.to)),r.editDialogFields.color.val()){var l=r.getAppointmentColors(r.editDialogFields.color.val());t.color=l.color,t.background=l.background,t.borderColor=l.border}t.subject=r.editDialogFields.subject.val();var d=r.editDialogFields.repeat.jqxDropDownList("selectedIndex"),s=new e.jqx.scheduler.recurrencePattern,c=r.editDialogFields.repeatEndPanel;if(s.timeZone=r.timeZone,s.from=t.from.clone(),"occurrence"==i&&t.rootAppointment&&(s.from=t.rootAppointment.from.clone()),r.editDialogFields.resetExceptions.val()&&(t.exceptions=new Array,t.recurrenceException=new Array),c.repeatEndNever.val())s.count=1e3,s.to=new e.jqx.date(9999,12,31);else if(c.repeatEndAfter.val())s.count=c.repeatEndAfterValue.val(),s.to=new e.jqx.date(9999,12,31);else if(c.repeatEndOn.val()){s.count=1e3;var o=new e.jqx.date(c.repeatEndOnValue.jqxDateTimeInput("getDate"),r.timeZone);s.to=o}switch(d){case 0:default:t.clearRecurrence();break;case 1:var u=r.editDialogFields.daily,h=u.repeatDayInterval.val();s.interval=h,s.freq="daily";break;case 2:var p=r.editDialogFields.weekly,h=p.repeatWeekInterval.val(),y=[{Sunday:0},{Monday:1},{Tuesday:2},{Wednesday:3},{Thursday:4},{Friday:5},{Saturday:6}],g=p.repeatDays,m=new Array;s.weekDays={};for(var f=0;f<7;f++){g[f].val()&&(0==f?m.push(6):m.push(f-1),e.extend(s.weekDays,y[f]))}s.freq="weekly",s.byweekday=m,s.interval=h;break;case 3:var v=r.editDialogFields.monthly,h=v.repeatMonth.val();if(v.repeatMonthDayBool.val())s.day=v.repeatMonthDay.val(),s.bymonthday=new Array,s.bymonthday.push(s.day);else{var D=v.repeatDayOfWeek.jqxDropDownList("selectedIndex"),b=new Array;0==D?D=6:D--;var x=v.repeatDayOfWeekType.jqxDropDownList("selectedIndex"),w="";switch(x){case 0:w=1;break;case 1:w=2;break;case 2:w=3;break;case 3:w=4;break;case 4:w=-1}b.push([D,w]),s.bynweekday=b}s.freq="monthly",s.interval=h;break;case 4:var q=r.editDialogFields.yearly,h=q.repeatYear.val();if(q.repeatYearBool.val())s.day=q.repeatYearDay.val(),s.month=q.repeatYearMonth.jqxDropDownList("selectedIndex"),s.bymonth=new Array,s.bymonth.push(1+s.month),s.byyearday=new Array,s.byyearday.push(s.day);else{s.month=q.repeatDayOfWeekMonth.jqxDropDownList("selectedIndex"),s.bymonth=new Array,s.bymonth.push(1+s.month);var D=q.repeatDayOfWeek.jqxDropDownList("selectedIndex"),b=new Array;0==D?D=6:D--;var x=q.repeatDayOfWeekType.jqxDropDownList("selectedIndex"),w="";switch(x){case 0:w=1;break;case 1:w=2;break;case 2:w=3;break;case 3:w=4;break;case 4:w=-1}b.push([D,w]),s.bynweekday=b}s.freq="yearly",s.interval=h}t.rootAppointment?t.rootAppointment.recurrencePattern=s:d>0&&(t.recurrencePattern=s);var j={},k={};for(var A in r.appointmentDataFields){var F=r.appointmentDataFields[A],T=t[A];j[A]=T,"from"!=A&&"to"!=A||(T=T.toDate()),k[F]=T}return j.originalData=k,t.boundAppointment=j,!0}(t)},_setAppointmentPropertiesToDialog:function(t,i,r,a){var n=this;if(function(){var e=n.editDialogFields.repeatEndPanel;e.repeatEndNever.jqxRadioButton({checked:!0}),e.repeatEndAfterValue.val(1),e.repeatEndOnValue.val(t);var t=r.toDate();if(n.editDialogFields.daily){n.editDialogFields.daily.repeatDayInterval.val(1)}if(n.editDialogFields.weekly){for(var i=n.editDialogFields.weekly,a=0;a<i.repeatDays.length;a++)1==a?i.repeatDays[a].jqxCheckBox({checked:!0}):i.repeatDays[a].jqxCheckBox({checked:!1});i.repeatWeekInterval.val(1)}if(n.editDialogFields.monthly){var o=n.editDialogFields.monthly;o.repeatDayOfWeek.jqxDropDownList("selectIndex",1),o.repeatDayOfWeekBool.jqxRadioButton({checked:!1}),o.repeatDayOfWeekType.jqxDropDownList("selectIndex",0),o.repeatMonthDayBool.jqxRadioButton({checked:!0}),o.repeatMonthDay.val(1),o.repeatMonth.val(1)}if(n.editDialogFields.yearly){var l=n.editDialogFields.yearly;l.repeatDayOfWeekMonth.jqxDropDownList("selectIndex",0),l.repeatDayOfWeekBool.jqxRadioButton({checked:!1}),l.repeatDayOfWeekType.jqxDropDownList("selectIndex",0),l.repeatDayOfWeek.jqxDropDownList("selectIndex",1),l.repeatYear.val(1),l.repeatYearMonth.jqxDropDownList("selectIndex",0),l.repeatYearDay.val(1),l.repeatYearBool.val(!0)}}(),t&&t.isRecurrentAppointment()?t.rootAppointment?n.editDialogFields.resetExceptionsContainer.hide():n.editDialogFields.resetExceptionsContainer.show():t&&(n.editDialogFields.resetExceptionsContainer.hide(),n.editDialogFields.repeat.jqxDropDownList("selectIndex",0)),!t)return n.editDialogFields.timeZone.jqxDropDownList("clearSelection"),a?n.editDialogFields.resource.val(a):n.editDialogFields.resource.jqxDropDownList("selectIndex",0),n.editDialogFields.allDay.val(!1),(n._views[n._view].type.indexOf("month")>=0||i&&i.equals(r)||r&&r.equals(e.jqx.scheduler.utilities.getEndOfDay(r)))&&n.editDialogFields.allDay.val(!0),n.editDialogFields.color.jqxDropDownList("clearSelection"),n.editDialogFields.description.val(""),n.editDialogFields.subject.val(""),void n.editDialogFields.repeat.jqxDropDownList("selectIndex",0);!function(e){var t=e.recurrencePattern;if(e.rootAppointment)var t=e.rootAppointment.recurrencePattern;if(null!=t){var i=t.freq,r=0;"daily"==i&&(r=1),"weekly"==i&&(r=2),"monthly"==i&&(r=3),"yearly"==i&&(r=4);var a=n.editDialogFields.repeatEndPanel;switch(1e3!=t.count?(a.repeatEndAfter.jqxRadioButton({checked:!0}),a.repeatEndAfterValue.val(t.count)):9999!=t.to.year()?(a.repeatEndOn.jqxRadioButton({checked:!0}),a.repeatEndOnValue.val(t.to.toDate())):a.repeatEndNever.jqxRadioButton({checked:!0}),n.editDialogFields.repeat.jqxDropDownList("selectIndex",r),r){case 1:var o=t.interval;n.editDialogFields.daily.repeatDayInterval.val(o);break;case 2:var o=t.interval,l=n.editDialogFields.weekly;l.repeatWeekInterval.val(o);for(var d=t.byweekday,s=0;s<7;s++){var c=l.repeatDays[s];c.val(!1)}for(var s=0;s<d.length;s++){var c=d[s];6==c?l.repeatDays[0].val(!0):l.repeatDays[c+1].val(!0)}break;case 3:var u=n.editDialogFields.monthly;if(u.repeatMonth.val(t.interval),t.bymonthday&&t.bymonthday.length>0)u.repeatMonthDayBool.jqxRadioButton({checked:!0}),u.repeatMonthDay.val(t.day);else{u.repeatDayOfWeekBool.jqxRadioButton({checked:!0});var h=t.bynweekday,p=h[0][0];p++,7==p&&(p=0),u.repeatDayOfWeek.jqxDropDownList("selectIndex",p);var y=h[0][1],g="";switch(y){case 1:g=0;break;case 2:g=1;break;case 3:g=2;break;case 4:g=3;break;case-1:g=4}u.repeatDayOfWeekType.jqxDropDownList("selectIndex",g)}break;case 4:var m=n.editDialogFields.yearly;if(t.byyearday&&t.byyearday.length>0&&(m.repeatYearDay.val(t.byyearday[0]),m.repeatYearBool.val(!0)),t.bymonth&&t.bymonth.length>0&&(m.repeatYearMonth.val(t.bymonth[0]),m.repeatYearBool.val(!0)),!t.byyearday||t.byyearday&&0==t.byyearday.length){m.repeatDayOfWeekMonth.val(t.bymonth[0]),m.repeatDayOfWeekBool.jqxRadioButton({checked:!0});var h=t.bynweekday,p=h[0][0];p++,7==p&&(p=0),m.repeatDayOfWeek.jqxDropDownList("selectIndex",p);var y=h[0][1],g="";switch(y){case 1:g=0;break;case 2:g=1;break;case 3:g=2;break;case 4:g=3;break;case-1:g=4}m.repeatDayOfWeekType.jqxDropDownList("selectIndex",g)}}}}(t)}}),e.jqx.scheduler.column=function(t,i){return this.owner=t,this.datafield=null,this.displayfield=null,this.text="",this.sortable=!0,this.editable=!0,this.hidden=!1,this.hideable=!0,this.groupable=!0,this.renderer=null,this.cellsRenderer=null,this.columntype=null,this.cellsFormat="",this.align="center",this.cellsalign="center",this.width="auto",this.minwidth=60,this.maxwidth="auto",this.pinned=!1,this.visibleindex=-1,this.filterable=!0,this.filter=null,this.resizable=!0,this.draggable=!0,this.initeditor=null,this.createeditor=null,this.destroyeditor=null,this.geteditorvalue=null,this.autoCellHeight=!0,this.validation=null,this.classname="",this.cellclassname="",this.rendered=null,this.exportable=!0,this.nullable=!0,this.columngroup=null,this.columntype="textbox",this.getcolumnproperties=function(){return{nullable:this.nullable,sortable:this.sortable,hidden:this.hidden,groupable:this.groupable,width:this.width,align:this.align,editable:this.editable,minwidth:this.minwidth,maxwidth:this.maxwidth,resizable:this.resizable,datafield:this.datafield,text:this.text,exportable:this.exportable,cellsalign:this.cellsalign,pinned:this.pinned,cellsFormat:this.cellsFormat,columntype:this.columntype,classname:this.classname,cellclassname:this.cellclassname,menu:this.menu}},this.setproperty=function(e,t){if(this[e]){var i=this[e];this[e]=t,this.owner._columnPropertyChanged(this,e,t,i)}else if(this[e.toLowerCase()]){var i=this[e.toLowerCase()];this[e.toLowerCase()]=t,this.owner._columnPropertyChanged(this,e.toLowerCase(),t,i)}},this._initfields=function(i){if(null!=i){var r=this;if(e.jqx.hasProperty(i,"dataField")&&(this.datafield=e.jqx.get(i,"dataField")),e.jqx.hasProperty(i,"displayField")?this.displayfield=e.jqx.get(i,"displayField"):this.displayfield=this.datafield,e.jqx.hasProperty(i,"columnType")&&(this.columntype=e.jqx.get(i,"columnType")),e.jqx.hasProperty(i,"validation")&&(this.validation=e.jqx.get(i,"validation")),e.jqx.hasProperty(i,"autoCellHeight")&&(this.autoCellHeight=e.jqx.get(i,"autoCellHeight")),e.jqx.hasProperty(i,"text")?this.text=e.jqx.get(i,"text"):this.text=this.displayfield,e.jqx.hasProperty(i,"sortable")&&(this.sortable=e.jqx.get(i,"sortable")),e.jqx.hasProperty(i,"hidden")&&(this.hidden=e.jqx.get(i,"hidden")),e.jqx.hasProperty(i,"groupable")&&(this.groupable=e.jqx.get(i,"groupable")),e.jqx.hasProperty(i,"renderer")&&(this.renderer=e.jqx.get(i,"renderer")),e.jqx.hasProperty(i,"align")&&(this.align=e.jqx.get(i,"align")),e.jqx.hasProperty(i,"cellsAlign")&&(this.cellsalign=e.jqx.get(i,"cellsAlign")),e.jqx.hasProperty(i,"cellsFormat")&&(this.cellsFormat=e.jqx.get(i,"cellsFormat")),e.jqx.hasProperty(i,"width")&&(this.width=e.jqx.get(i,"width")),e.jqx.hasProperty(i,"minWidth")&&(this.minwidth=e.jqx.get(i,"minWidth")),e.jqx.hasProperty(i,"maxWidth")&&(this.maxwidth=e.jqx.get(i,"maxWidth")),e.jqx.hasProperty(i,"cellsRenderer")&&(this.cellsRenderer=e.jqx.get(i,"cellsRenderer")),e.jqx.hasProperty(i,"columnType")&&(this.columntype=e.jqx.get(i,"columnType")),e.jqx.hasProperty(i,"pinned")&&(this.pinned=e.jqx.get(i,"pinned")),e.jqx.hasProperty(i,"filterable")&&(this.filterable=e.jqx.get(i,"filterable")),e.jqx.hasProperty(i,"filter")&&(this.filter=e.jqx.get(i,"filter")),e.jqx.hasProperty(i,"resizable")&&(this.resizable=e.jqx.get(i,"resizable")),e.jqx.hasProperty(i,"draggable")&&(this.draggable=e.jqx.get(i,"draggable")),e.jqx.hasProperty(i,"editable")&&(this.editable=e.jqx.get(i,"editable")),e.jqx.hasProperty(i,"initEditor")&&(this.initeditor=e.jqx.get(i,"initEditor")),e.jqx.hasProperty(i,"createEditor")&&(this.createeditor=e.jqx.get(i,"createEditor")),e.jqx.hasProperty(i,"destroyEditor")&&(this.destroyeditor=e.jqx.get(i,"destroyEditor")),e.jqx.hasProperty(i,"getEditorValue")&&(this.geteditorvalue=e.jqx.get(i,"getEditorValue")),e.jqx.hasProperty(i,"className")&&(this.classname=e.jqx.get(i,"className")),e.jqx.hasProperty(i,"cellClassName")&&(this.cellclassname=e.jqx.get(i,"cellClassName")),e.jqx.hasProperty(i,"rendered")&&(this.rendered=e.jqx.get(i,"rendered")),e.jqx.hasProperty(i,"exportable")&&(this.exportable=e.jqx.get(i,"exportable")),e.jqx.hasProperty(i,"nullable")&&(this.nullable=e.jqx.get(i,"nullable")),e.jqx.hasProperty(i,"columnGroup")&&(this.columngroup=e.jqx.get(i,"columnGroup")),!i instanceof String&&"string"!=typeof i)for(var a in i)if(!r.hasOwnProperty(a)&&!r.hasOwnProperty(a.toLowerCase()))throw t.host.remove(),new Error("jqxScheduler: Invalid property name - "+a+".")}},this._initfields(i),this},e.jqx.schedulerDataCollection=function(e){return this.records=new Array,this.owner=e,this.updating=!1,this.beginUpdate=function(){this.updating=!0},this.resumeupdate=function(){this.updating=!1},this.clear=function(){this.records=new Array},this.replace=function(e,t){this.records[e]=t},this.isempty=function(e){return void 0==this.records[e]},this.initialize=function(e){e<1&&(e=1),this.records[e-1]=-1},this.length=function(){return this.records.length},this.indexOf=function(e){return this.records.indexOf(e)},this.add=function(e){return null!=e&&(this.records[this.records.length]=e,!0)},this.insertAt=function(e,t){return null!=e&&void 0!=e&&(null!=t&&(e>=0&&(e<this.records.length?(this.records.splice(e,0,t),!0):this.add(t))))},this.remove=function(e){if(null==e||void 0==e)return!1;var t=this.records.indexOf(e);return-1!=t&&(this.records.splice(t,1),!0)},this.removeAt=function(e){if(null==e||void 0==e)return!1;if(e<0)return!1;if(e<this.records.length){this.records[e];return this.records.splice(e,1),!0}return!1},this},e.jqx.scheduler.dataView=function(t){return this.that=this,this.scheduler=null,this.records=[],this.rows=[],this.columns=[],this.filters=new Array,this.pagesize=0,this.pagenum=0,this.source=null,this.databind=function(i,r){var a=this;if(e.isArray(i))return void a.update(i);var n=!!i._source,o=null;this._sortData=null,this._sortHierarchyData=null,n?(o=i,i=i._source):o=new e.jqx.dataAdapter(i,{autoBind:!1});var l=function(e){e.originaldata=o.originaldata,e.records=o.records,e.hierarchy=o.hierarchy,e.scheduler.serverProcessing||(e._sortData=null,e._sortfield=null,e._filteredData=null,e._sortHierarchyData=null),e.hierarchy||(e.hierarchy=new Array,o.hierarchy=new Array),o._source.totalrecords?e.totalrecords=o._source.totalrecords:o._source.totalRecords?e.totalrecords=o._source.totalRecords:0!==e.hierarchy.length?e.totalrecords=e.hierarchy.length:e.totalrecords=e.records.length,e.cachedrecords=o.cachedrecords};!function(e){o.recordids=[],o.records=new Array,o.cachedrecords=new Array,o.originaldata=new Array,o._options.totalrecords=e.totalrecords,o._options.originaldata=e.originaldata,o._options.recordids=e.recordids,o._options.cachedrecords=new Array,o._options.pagenum=e.pagenum,o._options.pageable=e.pageable,void 0!=i.type&&(o._options.type=i.type),void 0!=i.formatdata&&(o._options.formatData=i.formatdata),void 0!=i.contenttype&&(o._options.contentType=i.contenttype),void 0!=i.async&&(o._options.async=i.async),void 0!=i.updaterow&&(o._options.updaterow=i.updaterow),void 0!=i.addrow&&(o._options.addrow=i.addrow),void 0!=i.deleterow&&(o._options.deleterow=i.deleterow),0==e.pagesize&&(e.pagesize=10),o._options.pagesize=e.pagesize}(this),this.source=i,void 0!==r&&(uniqueId=r);var a=this;switch(i.datatype){case"local":case"array":default:if(null==i.localdata&&(i.localdata=[]),null!=i.localdata){o.unbindBindingUpdate(t+a.scheduler.element.id),(!a.scheduler.autoBind&&a.scheduler.isInitialized||a.scheduler.autoBind)&&o.dataBind();var d=function(){l(a),a.update(o.records)};d(),o.bindBindingUpdate(t+a.scheduler.element.id,d)}break;case"ics":case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":case"csv":case"tab":if(null!=i.localdata){o.unbindBindingUpdate(t+a.scheduler.element.id),(!a.scheduler.autoBind&&a.scheduler.isInitialized||a.scheduler.autoBind)&&o.dataBind();var d=function(e){l(a),a.update(o.records)};return d(),void o.bindBindingUpdate(t+a.scheduler.element.id,d)}var s={},c=o._options.data;o._options.data?e.extend(o._options.data,s):(i.data&&e.extend(s,i.data),o._options.data=s);var d=function(){var t=e.jqx.browser.msie&&e.jqx.browser.version<9,i=function(){l(a),a.update(o.records)};if(t)try{i()}catch(e){}else i()};o.unbindDownloadComplete(t+a.scheduler.element.id),o.bindDownloadComplete(t+a.scheduler.element.id,d),o._source.loaderror=function(e,t,i){d()},(!a.scheduler.autoBind&&a.scheduler.isInitialized||a.scheduler.autoBind)&&o.dataBind(),o._options.data=c}},this.addFilter=function(e,t){this._sortData=null,this._sortHierarchyData=null;for(var i=-1,r=0;r<this.filters.length;r++)if(this.filters[r].datafield==e){i=r;break}-1==i?this.filters[this.filters.length]={filter:t,datafield:e}:this.filters[i]={filter:t,datafield:e}},this.removeFilter=function(e){this._sortData=null,this._sortHierarchyData=null;for(var t=0;t<this.filters.length;t++)if(this.filters[t].datafield==e){this.filters.splice(t,1);break}},this._compare=function(t,i,r){var t=t,i=i;if(void 0===t&&(t=null),void 0===i&&(i=null),null===t&&null===i)return 0;if(null===t&&null!==i)return 1;if(null!==t&&null===i)return 1;if(t=t.toString(),i=i.toString(),e.jqx.dataFormat)if(r&&""!=r)switch(r){case"number":case"int":case"float":return t<i?-1:t>i?1:0;case"date":case"time":return t<i?-1:t>i?1:0;case"string":case"text":t=String(t).toLowerCase(),i=String(i).toLowerCase()}else{if(e.jqx.dataFormat.isNumber(t)&&e.jqx.dataFormat.isNumber(i))return t<i?-1:t>i?1:0;if(e.jqx.dataFormat.isDate(t)&&e.jqx.dataFormat.isDate(i))return t<i?-1:t>i?1:0;e.jqx.dataFormat.isNumber(t)||e.jqx.dataFormat.isNumber(i)||(t=String(t).toLowerCase(),i=String(i).toLowerCase())}try{if(t<i)return-1;if(t>i)return 1}catch(e){}return 0},this._equals=function(e,t){return 0===this._compare(e,t)},this.evaluate=function(e){if(this.scheduler.serverProcessing)return e;var t=new Array;if(this.filters.length){var i=new Array,r=function(e,t){for(var r=0;r<e.length;r++){var a=e[r];a._visible=!0;for(var n=void 0,o=0;o<this.filters.length;o++){var l=this.filters[o].filter,d=a[this.filters[o].datafield],s=l.evaluate(d);n=void 0==n?s:"or"==l.operator?n||s:n&&s}a._visible=!1,(n||a.aggregate)&&(a._visible=!0,t.push(a),i[a.uid]=a)}};if(this._filteredData)this.rows=this._filteredData;else{if(this.source.hierarchy||this.scheduler.source.hierarchy&&this.scheduler.source.hierarchy.length>0){var a=new Array,n=function(e,t){for(var i=0;i<t.length;i++){var r=t[i];a.push(r),r.records&&r.records.length>0&&n(r,r.records)}};n(null,e),r.call(this,a,t);for(var o=0;o<t.length;o++)for(var l=t[o];l.parent;){var d=l.parent;i[d.uid]||(d._visible=!0,i[d.uid]=d),l=d}t=e}else r.call(this,e,t);this._filteredData=t,this.rows=t}}else this.rows=e;return this.rows},this.getid=function(t,i,r){if(e(t,i).length>0)return e(t,i).text();if(this.rows&&""!=t&&void 0!=t&&this.rows.length>0){var a=this.rows[this.rows.length-1][t];null==a&&(a=null);for(var n=1;n<=100;n++){var o=this.scheduler.appointmentsByKey[n+a];if(!o){if(this.scheduler&&this.scheduler.treeGrid&&this.scheduler.treescheduler.virtualModeCreateRecords){var o=this.scheduler.appointmentsByKey["jqx"+a+n];if(o)continue;return"jqx"+a+n}return a+n}}}if(void 0!=t&&t.toString().length>0){var l=e(i).attr(t);if(null!=l&&l.toString().length>0)return this.scheduler&&this.scheduler.treeGrid&&this.scheduler.treescheduler.virtualModeCreateRecords?"jqx"+l:l}if(this.rows&&this.rows.length>0){var o=this.scheduler.appointmentsByKey[r];if(o){var a=this.rows[this.rows.length-1][t];null==a&&(a="");for(var n=1;n<=1e3;n++){var o=this.scheduler.appointmentsByKey[n+a];if(!o){if(this.scheduler&&this.scheduler.treeGrid&&this.scheduler.treescheduler.virtualModeCreateRecords){var o=this.scheduler.appointmentsByKey["jqx"+a+n];if(o)continue;return"jqx"+a+n}return a+n}}}}if(this.scheduler&&this.scheduler.treeGrid&&this.scheduler.treescheduler.virtualModeCreateRecords){var o=this.scheduler.appointmentsByKey["jqx"+r];if(!o)return"jqx"+r;for(var n=r+1;n<=100;n++){var o=this.scheduler.appointmentsByKey["jqx"+n];if(!o){var o=this.scheduler.appointmentsByKey["jqx"+n];if(o)continue;return"jqx"+n}}}return r},this.generatekey=function(){var e=function(){return 16*(1+Math.random())|0};return""+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()},this}}(jqxBaseFramework);