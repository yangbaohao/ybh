!function(e){e.jqx.jqxWidget("jqxTreeGrid","jqxDataTable",{}),e.extend(e.jqx._jqxTreeGrid.prototype,{defineInstance:function(){this.base.treeGrid=this,this.base.exportSettings={recordsInView:!1,columnsHeader:!0,hiddenColumns:!1,serverURL:null,characterSet:null,collapsedRecords:!1,fileName:"jqxTreeGrid"};var r={pageSizeMode:"default",checkboxes:!1,hierarchicalCheckboxes:!1,icons:!1,showSubAggregates:!1,rowDetailsRenderer:null,virtualModeCreateRecords:null,virtualModeRecordCreating:null,loadingFailed:!1};return e.extend(!0,this,r),r},createInstance:function(e){this.theme=this.base.theme},deleteRow:function(e){this.base.deleterowbykey(e)},updateRow:function(e,r){this.base.updaterowbykey(e,r)},setCellValue:function(e,r,i){this.base.setCellValueByKey(e,r,i)},getCellValue:function(e,r){return this.base.getCellValueByKey(e,r)},lockRow:function(e){this.base.lockrowbykey(e)},unlockRow:function(e){this.base.unlockrowbykey(e)},selectRow:function(e){this.base.selectrowbykey(e)},unselectRow:function(e){this.base.unselectrowbykey(e)},ensureRowVisible:function(e){this.base.ensurerowvisiblebykey(e)},beginCellEdit:function(e,r){var i=this.base,a=i.getColumn(r);i.beginroweditbykey(e,a)},beginRowEdit:function(e){this.base.beginroweditbykey(e)},endCellEdit:function(e,r,i){this.base.endroweditbykey(e,i)},endRowEdit:function(e,r){this.base.endroweditbykey(e,r)},_showLoadElement:function(){var r=this.base;"block"==r.host.css("display")&&r.autoShowLoadElement&&(e(r.dataloadelement).css("visibility","visible"),e(r.dataloadelement).css("display","block"),r.dataloadelement.width(r.host.width()),r.dataloadelement.height(r.host.height()))},_hideLoadElement:function(){var r=this.base;"block"==r.host.css("display")&&r.autoShowLoadElement&&(e(r.dataloadelement).css("visibility","hidden"),e(r.dataloadelement).css("display","none"),r.dataloadelement.width(r.host.width()),r.dataloadelement.height(r.host.height()))},getKey:function(e){if(e)return e.uid},getRows:function(){var e=this.base;return e.source.hierarchy&&0!=e.source.hierarchy.length?e.source.hierarchy:e.source.records},getCheckedRows:function(){var r=this.base,i=r._names(),a=new Array,t=function(o,l){if(l)for(var n=0;n<l.length;n++)if(l[n]){var d=e.extend({},l[n]),s=r.rowinfo[l[n].uid];s&&s[i.checked]?o.push(d):d[i.checked]&&o.push(d),t(a,l[n].records)}};return t(a,r.dataViewRecords),a},getRow:function(e){var r=this.base,i=r.source.records;if(r.source.hierarchy){var a=function(r){for(var i=0;i<r.length;i++)if(r[i]){if(r[i].uid==e)return r[i];if(r[i].records){var t=a(r[i].records);if(t)return t}}};return a(r.source.hierarchy)}for(var t=0;t<i.length;t++)if(i[t]&&i[t].uid==e)return i[t]},_renderrows:function(){var r=this.base,i=this;if(!r._loading&&!r._updating){var a=r._names();if(0===r.source.hierarchy.length&&!r.loadingFailed&&this.virtualModeCreateRecords){var t=function(e){if(!1===e||e&&0==e.length)return r._loading=!1,r.loadingFailed=!0,r.source.hierarchy=new Array,i._hideLoadElement(),r._renderrows(),r._updateScrollbars(),void r._arrange();for(var a=0;a<e.length;a++)e[a].level=0,i.virtualModeRecordCreating(e[a]),r.rowsByKey[e[a].uid]=e[a];r.source.hierarchy=e,r.source._source.hierarchy||(r.source._source.hierarchy={}),r._loading=!1,i._hideLoadElement(),r._renderrows(),r._updateScrollbars(),r._arrange()};r._loading=!0,this.virtualModeCreateRecords(null,t),this._showLoadElement()}r.rendering&&r.rendering();var o=0;r.table[0].rows=new Array;var l=r.toTP("jqx-cell")+" "+r.toTP("jqx-widget-content")+" "+r.toTP("jqx-item");r.rtl&&(l+=" "+r.toTP("jqx-cell-rtl"));var n=r.columns.records.length,d=e.jqx.browser.msie&&e.jqx.browser.version<8;d&&r.host.attr("hideFocus","true");var s=new Array,c=function(e,i){for(var t=0;t<e.length;t++){var o=e[t];if(o){var l=r.rowinfo[o.uid]?r.rowinfo[o.uid].expanded:o.expanded;if(0==r.dataview.filters.length&&(o._visible=!0),!1!==o._visible)if(l||o[a.leaf]){if(i.push(o),o.records&&o.records.length>0)for(var n=c(o.records,new Array),d=0;d<n.length;d++)i.push(n[d])}else i.push(o)}}return i},h=0===r.source.hierarchy.length?r.source.records:r.source.hierarchy;if(h=r.dataview.evaluate(h),r.dataViewRecords=h,this.showSubAggregates){var g=function(r,i){0!=r&&i.length>0&&(i[i.length-1]?i[i.length-1].aggregate||i.push({_visible:!0,level:r,siblings:i,aggregate:!0,leaf:!0}):e.jqx.browser.msie&&e.jqx.browser.version<9&&i[i.length-2]&&(i[i.length-2].aggregate||i.push({_visible:!0,level:r,siblings:i,aggregate:!0,leaf:!0})));for(var a=0;a<i.length;a++)i[a]&&i[a].records&&g(r+1,i[a].records)};g(0,h)}var w=function(e){for(var i=0,t=new Array,o=0;o<e.length;o++){var l=e[o];if(0==l[a.level]&&i++,i>r.dataview.pagesize*r.dataview.pagenum&&i<=r.dataview.pagesize*r.dataview.pagenum+r.dataview.pagesize&&t.push(l),i>r.dataview.pagesize*r.dataview.pagenum+r.dataview.pagesize)break}return t};if(0===r.source.hierarchy.length){if("all"==r.dataview.pagesize||!r.pageable||r.serverProcessing){var v=h;if(r.pageable&&r.serverProcessing&&h.length>r.dataview.pagesize)var v=h.slice(r.dataview.pagesize*r.dataview.pagenum,r.dataview.pagesize*r.dataview.pagenum+r.dataview.pagesize)}else var v=h.slice(r.dataview.pagesize*r.dataview.pagenum,r.dataview.pagesize*r.dataview.pagenum+r.dataview.pagesize);var s=v}else{var h=c.call(r,h,new Array);if("all"!=r.dataview.pagesize&&r.pageable){var v=h.slice(r.dataview.pagesize*r.dataview.pagenum,r.dataview.pagesize*r.dataview.pagenum+r.dataview.pagesize);"root"==this.pageSizeMode&&(v=w(h))}else var v=h;var s=v,u=r.dataview.pagenum;if(r.updatepagerdetails(),r.dataview.pagenum!=u){if("all"!=r.dataview.pagesize&&r.pageable){var v=h.slice(r.dataview.pagesize*r.dataview.pagenum,r.dataview.pagesize*r.dataview.pagenum+r.dataview.pagesize);"root"==this.pageSizeMode&&(v=w(h))}else var v=h;var s=v}}r.renderedRecords=s;var p=s.length,f=r.tableZIndex,x=0,b=0;if(d)for(var m=0;m<n;m++){var y=r.columns.records[m],R=y.width;R<y.minwidth&&(R=y.minwidth),R>y.maxwidth&&(R=y.maxwidth);var k=e('<table><tr><td role="gridcell" style="max-width: '+R+"px; width:"+R+'px;" class="'+l+'"></td></tr></table>');e(document.body).append(k);var _=k.find("td");x=1+parseInt(_.css("padding-left"))+parseInt(_.css("padding-right")),k.remove();break}for(var j=r.rtl?" "+r.toTP("jqx-grid-table-rtl"):"",q="<table cellspacing='0' class='"+r.toTP("jqx-grid-table")+j+"' id='table"+r.element.id+"'><colgroup>",T="<table cellspacing='0' class='"+r.toTP("jqx-grid-table")+j+"' id='pinnedtable"+r.element.id+"'><colgroup>",P=null,m=0;m<n;m++){var y=r.columns.records[m];if(!y.hidden){P=y;var R=y.width;if(R<y.minwidth&&(R=y.minwidth),R>y.maxwidth&&(R=y.maxwidth),R-=x,R<0&&(R=0),d){var z=R;0==m&&z++,T+="<col style='max-width: "+R+"px; width: "+z+"px;'>",q+="<col style='max-width: "+R+"px; width: "+z+"px;'>"}else T+="<col style='max-width: "+R+"px; width: "+R+"px;'>",q+="<col style='max-width: "+R+"px; width: "+R+"px;'>";b+=R}}q+="</colgroup>",T+="</colgroup>",r._hiddencolumns=!1;var C=!1;if(0===p){var S='<tr role="row">',E=r.host.height();if(r.pageable&&(E-=r.pagerHeight,"both"===r.pagerPosition&&(E-=r.pagerHeight)),E-=r.columnsHeight,r.filterable){var F=r.filter.find(".filterrow"),L=r.filter.find(".filterrow-hidden"),M=1;L.length>0&&(M=0),E-=r.filterHeight+r.filterHeight*F.length*M}r.showstatusbar&&(E-=r.statusBarHeight),r.showAggregates&&(E-=r.aggregatesHeight),E<25&&(E=25),"hidden"!=r.hScrollBar[0].style.visibility&&(E-=r.hScrollBar.outerHeight()),("auto"===r.height||null===r.height||r.autoheight)&&(E=100);var R=r.host.width()+2,k='<td colspan="'+r.columns.records.length+'" role="gridcell" style="border-right-color: transparent; min-height: '+E+"px; height: "+E+"px;  min-width:"+b+"px; max-width:"+b+"px; width:"+b+"px;",l=r.toTP("jqx-cell")+" "+r.toTP("jqx-grid-cell")+" "+r.toTP("jqx-item");l+=" "+r.toTP("jqx-center-align"),k+='" class="'+l+'">',r._loading||(k+=r.gridlocalization.emptydatastring),k+="</td>",S+=k,q+=S,T+=S,r.table[0].style.width=b+2+"px",o=b}for(var A=r.source._source.hierarchy&&r.source._source.hierarchy.groupingDataFields?r.source._source.hierarchy.groupingDataFields.length:0,H=0;H<s.length;H++){var B=s[H],I=B.uid;A>0&&B[a.level]<A&&(I=B.uid),void 0===B.uid&&(B.uid=r.dataview.generatekey());var S='<tr data-key="'+I+'" role="row" id="row'+H+r.element.id+'">',D='<tr data-key="'+I+'" role="row" id="row'+H+r.element.id+'">';if(B.aggregate)var S='<tr data-role="summaryrow" role="row" id="row'+H+r.element.id+'">',D='<tr data-role="summaryrow" role="row" id="row'+H+r.element.id+'">';var U=0;if(r.rowinfo[I])void 0===r.rowinfo[I].checked&&(r.rowinfo[I].checked=B[a.checked]),void 0===r.rowinfo[I].icon&&(r.rowinfo[I].icon=B[a.icon]),void 0===r.rowinfo[I].aggregate&&(r.rowinfo[I].aggregate=B[a.aggregate]),void 0===r.rowinfo[I].row&&(r.rowinfo[I].row=B),void 0===r.rowinfo[I].leaf&&(r.rowinfo[I].leaf=B[a.leaf]),void 0===r.rowinfo[I].expanded&&(r.rowinfo[I].expanded=B[a.expanded]);else{var K=B[a.checked];void 0===K&&(K=!1),r.rowinfo[I]={selected:B[a.selected],checked:K,icon:B[a.icon],aggregate:B.aggregate,row:B,leaf:B[a.leaf],expanded:B[a.expanded]}}var V=r.rowinfo[I];V.row=B,B.originalRecord&&(V.originalRecord=B.originalRecord);for(var G=0,m=0;m<n;m++){var N=r.columns.records[m];(N.pinned||r.rtl&&r.columns.records[n-1].pinned)&&(C=!0);var R=N.width;R<N.minwidth&&(R=N.minwidth),R>N.maxwidth&&(R=N.maxwidth),R-=x,R<0&&(R=0);var l=r.toTP("jqx-cell")+" "+r.toTP("jqx-grid-cell")+" "+r.toTP("jqx-item");N.pinned&&(l+=" "+r.toTP("jqx-grid-cell-pinned")),r.sortcolumn===N.displayfield&&(l+=" "+r.toTP("jqx-grid-cell-sort")),r.altRows&&H%2!=0&&(l+=" "+r.toTP("jqx-grid-cell-alt")),r.rtl&&(l+=" "+r.toTP("jqx-cell-rtl"));var W="";if(A>0&&!d&&!B.aggregate&&B[a.level]<A){W+=' colspan="'+n+'"';for(var z=0,J=0;J<n;J++){var O=r.columns.records[J];if(!O.hidden){var Z=O.width;Z<O.minwidth&&(R=O.minwidth),Z>O.maxwidth&&(R=O.maxwidth),Z-=x,Z<0&&(Z=0),z+=Z}}R=z}var k='<td role="gridcell"'+W+' style="max-width:'+R+"px; width:"+R+"px;",Q='<td role="gridcell"'+W+' style="pointer-events: none; visibility: hidden; border-color: transparent; max-width:'+R+"px; width:"+R+"px;";m==n-1&&1==n&&(k+="border-right-color: transparent;",Q+="border-right-color: transparent;"),A>0&&B[a.level]<A&&!B.aggregate?r.rtl&&(l+=" "+r.toTP("jqx-right-align")):"left"!=N.cellsalign&&("right"===N.cellsalign?l+=" "+r.toTP("jqx-right-align"):l+=" "+r.toTP("jqx-center-align")),V&&(V.selected&&r.editKey!==I&&"none"!==r.selectionMode&&(l+=" "+r.toTP("jqx-grid-cell-selected"),l+=" "+r.toTP("jqx-fill-state-pressed")),V.locked&&(l+=" "+r.toTP("jqx-grid-cell-locked")),V.aggregate&&(l+=" "+r.toTP("jqx-grid-cell-pinned"))),N.hidden?(k+="display: none;",Q+="display: none;",r._hiddencolumns=!0):(0!=G||r.rtl?(k+="border-right-width: 0px;",Q+="border-right-width: 0px;"):(k+="border-left-width: 0px;",Q+="border-left-width: 0px;"),G++,U+=x+R),N.pinned&&(k+="pointer-events: auto;",Q+="pointer-events: auto;");var X="";if(0!=r.source.hierarchy.length&&B.records&&(!B.records||0!==B.records.length)||this.virtualModeCreateRecords||(V.leaf=!0),B.records&&B.records.length>0&&(V.leaf=!1),r.dataview.filters.length>0&&B.records&&B.records.length>0){for(var Y=!1,$=0;$<B.records.length;$++)if(!1!==B.records[$]._visible&&void 0==B.records[$].aggregate){Y=!0;break}V.leaf=!Y}V&&!V.leaf&&(V.expanded?(X+=r.toTP("jqx-tree-grid-expand-button")+" ",r.rtl?X+=r.toTP("jqx-grid-group-expand-rtl"):X+=r.toTP("jqx-grid-group-expand"),X+=" "+r.toTP("jqx-icon-arrow-down")):(X+=r.toTP("jqx-tree-grid-collapse-button")+" ",r.rtl?(X+=r.toTP("jqx-grid-group-collapse-rtl"),X+=" "+r.toTP("jqx-icon-arrow-left")):(X+=r.toTP("jqx-grid-group-collapse"),X+=" "+r.toTP("jqx-icon-arrow-right")))),(!r.autoRowHeight||1===G||r.autoRowHeight&&!N.autoCellHeight)&&(l+=" "+r.toTP("jqx-grid-cell-nowrap"));var ee=r._getcellvalue(N,V.row);if(A>0&&!B.aggregate&&B[a.level]<A&&(ee=B.label),""!=N.cellsFormat&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(ee)?ee=e.jqx.dataFormat.formatdate(ee,N.cellsFormat,r.gridlocalization):(e.jqx.dataFormat.isNumber(ee)||!isNaN(parseFloat(ee))&&isFinite(ee))&&(ee=e.jqx.dataFormat.formatnumber(ee,N.cellsFormat,r.gridlocalization))),""!=N.cellclassname&&N.cellclassname)if("string"==typeof N.cellclassname)l+=" "+N.cellclassname;else{var re=N.cellclassname(H,N.datafield,r._getcellvalue(N,V.row),V.row,ee);re&&(l+=" "+re)}if(""!=N.cellsRenderer&&N.cellsRenderer){var ie=N.cellsRenderer(I,N.datafield,r._getcellvalue(N,V.row),V.row,ee);void 0!==ie&&(ee=ie)}if(V.aggregate&&N.aggregates){var ae=B.siblings.slice(0,B.siblings.length-1),te=r._calculateaggregate(N,null,!0,ae);if(B[N.displayfield]="",te)if(N.aggregatesRenderer){if(te){var oe=N.aggregatesRenderer(te[N.datafield],N,null,r.getcolumnaggregateddata(N.datafield,N.aggregates,!1,ae),"subAggregates");ee=oe,B[N.displayfield]+=name+":"+te[N.datafield]+"\n"}}else ee="",B[N.displayfield]="",e.each(te,function(){var e=this;for(obj in e){var i=obj;i=r._getaggregatename(i);var a='<div style="position: relative; margin: 0px; overflow: hidden;">'+i+":"+e[obj]+"</div>";ee+=a,B[N.displayfield]+=i+":"+e[obj]+"\n"}});else ee=""}if(1===G&&!r.rtl||N==P&&r.rtl||A>0&&B[a.level]<A){for(var le="",ne=r.toThemeProperty("jqx-tree-grid-indent"),de=V.leaf?1:0,se=0;se<B[a.level]+de;se++)le+="<span class='"+ne+"'></span>";var ce="<span class='"+X+"'></span>",he="",ge="";if(this.checkboxes&&!B.aggregate){var we=r.toThemeProperty("jqx-tree-grid-checkbox")+" "+ne+" "+r.toThemeProperty("jqx-checkbox-default")+" "+r.toThemeProperty("jqx-fill-state-normal")+" "+r.toThemeProperty("jqx-rc-all"),ve=!0;if(e.isFunction(this.checkboxes)&&void 0==(ve=this.checkboxes(I,B))&&(ve=!1),ve)if(V){var ue=V.checked;0==this.hierarchicalCheckboxes&&null===ue&&(ue=!1),he+=ue?"<span class='"+we+"'><div class='"+r.toThemeProperty("jqx-tree-grid-checkbox-tick")+" "+r.toThemeProperty("jqx-checkbox-check-checked")+"'></div></span>":!1===ue?"<span class='"+we+"'></span>":"<span class='"+we+"'><div class='"+r.toThemeProperty("jqx-tree-grid-checkbox-tick")+" "+r.toThemeProperty("jqx-checkbox-check-indeterminate")+"'></div></span>"}else he+="<span class='"+we+"'></span>"}if(this.icons&&!B.aggregate){var pe=r.toThemeProperty("jqx-tree-grid-icon")+" "+ne;if(r.rtl)var pe=r.toThemeProperty("jqx-tree-grid-icon")+" "+r.toThemeProperty("jqx-tree-grid-icon-rtl")+" "+ne;var fe=r.toThemeProperty("jqx-tree-grid-icon-size")+" "+ne,xe=V.icon;e.isFunction(this.icons)&&(V.icon=this.icons(I,B),V.icon&&(xe=!0)),xe&&(V.icon?ge+="<span class='"+pe+"'><img class='"+fe+"' src='"+V.icon+"'/></span>":ge+="<span class='"+pe+"'></span>")}var be=r.autoRowHeight&&1===G&&N.autoCellHeight?" "+r.toTP("jqx-grid-cell-wrap"):"",me=le+ce+he+ge+"<span class='"+r.toThemeProperty("jqx-tree-grid-title")+be+"'>"+ee+"</span>";ee=r.rtl?"<span class='"+r.toThemeProperty("jqx-tree-grid-title")+be+"'>"+ee+"</span>"+ge+he+ce+le:me}if(A>0&&d&&m>=A&&B[a.level]<A&&(k+="padding-left: 5px; border-left-width: 0px;",Q+="padding-left: 5px; border-left-width: 0px;",ee="<span style='visibility: hidden;'>-</span>"),k+='" class="'+l+'">',k+=ee,k+="</td>",Q+='" class="'+l+'">',Q+=ee,Q+="</td>",N.pinned?(D+=k,S+=k):(S+=k,C&&(D+=Q)),A>0&&!d&&B[a.level]<A&&!B.aggregate)break}if(0==o&&(r.table[0].style.width=U+2+"px",o=U),S+="</tr>",D+="</tr>",q+=S,T+=D,r.rowDetails&&!B.aggregate&&this.rowDetailsRenderer){var ye='<tr data-role="row-details"><td valign="top" align="left" style="pointer-events: auto; max-width:'+R+"px; width:"+R+'px; overflow: hidden; border-left: none; border-right: none;" colspan="'+r.columns.records.length+'" role="gridcell"',l=r.toTP("jqx-cell")+" "+r.toTP("jqx-grid-cell")+" "+r.toTP("jqx-item");l+=" "+r.toTP("jqx-details"),l+=" "+r.toTP("jqx-reset");var Re=this.rowDetailsRenderer(I,B);Re&&(ye+='" class="'+l+'"><div style="pointer-events: auto; overflow: hidden;"><div data-role="details">'+Re+"</div></div></td></tr>",q+=ye,T+=ye)}}if(q+="</table>",T+="</table>",C){r.WinJS?MSApp.execUnsafeLocalFunction(function(){r.table.html(T+q)}):r.table[0].innerHTML=T+q;var ke=r.table.find("#table"+r.element.id),_e=r.table.find("#pinnedtable"+r.element.id);_e.css("float","left"),_e.css("pointer-events","none"),ke.css("float","left"),_e[0].style.position="absolute",ke[0].style.position="relative",ke[0].style.zIndex=f-10,_e[0].style.zIndex=f+10,r._table=ke,r._table[0].style.left="0px",r._pinnedTable=_e,d&&(_e[0].style.left="0px"),r._table[0].style.width=o+"px",r._pinnedTable[0].style.width=o+"px",r.rtl&&r._haspinned&&(r._pinnedTable[0].style.left=3-o+parseInt(r.element.style.width)+"px")}else{r.WinJS?MSApp.execUnsafeLocalFunction(function(){r.table.html(q)}):r.table[0].innerHTML=q;var J=r.table.find("#table"+r.element.id);r._table=J,e.jqx.browser.msie&&e.jqx.browser.version<10&&(r._table[0].style.width=o+"px"),0===p&&(r._table[0].style.width=2+o+"px")}0===p&&(r._table[0].style.tableLayout="auto",r._pinnedTable&&(r._pinnedTable[0].style.tableLayout="auto")),r.showAggregates&&r._updatecolumnsaggregates(),r._loading&&0==p&&(r._arrange(),this._showLoadElement()),r.rendered&&r.rendered()}},propertyChangedHandler:function(e,r,i,a){void 0!=e.isInitialized&&0!=e.isInitialized&&("pageSizeMode"!=r&&"hierarchicalCheckboxes"!=r||e._renderrows())},checkRow:function(e,r,i){var a=this.base,t=a._names();if(!a._loading){var o=a.rowinfo[e];if(o)o.checked=!0,o.row[t.checked]=!0,o.originalRecord&&(o.originalRecord[t.checked]=!0),void 0==i&&this.hierarchicalCheckboxes&&this.checkRows(o.row,o.row),!1!==r&&a._renderrows(),a._raiseEvent("rowCheck",{key:e,row:o.row});else{var l=this.getRow(e);l&&(a.rowinfo[e]={row:l,checked:!0},a.rowinfo[e].row[t.checked]=!0,l.originalRecord&&(a.rowinfo[e].originalRecord=l.originalRecord),a._raiseEvent("rowCheck",{key:e,row:l}),void 0==i&&this.hierarchicalCheckboxes&&this.checkRows(l,l),!1!==r&&a._renderrows())}}},checkRows:function(r,i){var a=this.base,t=this,o=a._names(),l=function(e){var r=new Array,i=function(e){for(var a=0;a<e.length;a++)r.push(e[a]),e[a].records&&i(e[a].records)};return e.records&&i(e.records),r};if(null!=r){var n=0,d=!1,s=0,c=function(e){for(var r=0;r<e.length;r++){var i=e[r][o.checked];void 0===i&&(i=!1),0!=i&&(null==e[r][o.checked]&&(d=!0),e[r].records&&c(e[r].records),n++),s++}};if(r.records&&c(r.records),r!=i)n==s?this.checkRow(r.uid,!1,"tree"):n>0?this.indeterminateRow(r.uid,!1,"tree"):this.uncheckRow(r.uid,!1,"tree");else{var h=i[o.checked],g=l(i);e.each(g,function(){!0===h?t.checkRow(this.uid,!1,"tree"):!1===h?t.uncheckRow(this.uid,!1,"tree"):t.indeterminateRow(this.uid,!1,"tree")})}var w=r[o.parent]?r[o.parent]:null;this.checkRows(w,i)}else{var h=i[o.checked],g=l(i);e.each(g,function(){!0===h?t.checkRow(this.uid,!1,"tree"):!1===h?t.uncheckRow(this.uid,!1,"tree"):t.indeterminateRow(this.uid,!1,"tree")})}},indeterminateRow:function(e,r,i){var a=this.base,t=a._names();if(!a._loading){var o=a.rowinfo[e];if(o)o.checked=null,o.row[t.checked]=null,o.originalRecord&&(o.originalRecord[t.checked]=null),void 0==i&&this.hierarchicalCheckboxes&&this.checkRows(o.row,o.row),!1!==r&&a._renderrows();else{var l=this.getRow(e);l&&(a.rowinfo[e]={row:l,checked:null},a.rowinfo[e].row[t.checked]=null,l.originalRecord&&(a.rowinfo[e].originalRecord=l.originalRecord),void 0==i&&this.hierarchicalCheckboxes&&this.checkRows(l,l),!1!==r&&a._renderrows())}}},uncheckRow:function(e,r,i){var a=this.base,t=a._names();if(!a._loading){var o=a.rowinfo[e];if(o)o.checked=!1,o.row[t.checked]=!1,o.originalRecord&&(o.originalRecord[t.checked]=!1),void 0==i&&this.hierarchicalCheckboxes&&this.checkRows(o.row,o.row),!1!==r&&a._renderrows(),a._raiseEvent("rowUncheck",{key:e,row:o.row});else{var l=this.getRow(e);l&&(a.rowinfo[e]={row:l,checked:!1},a.rowinfo[e].row[t.checked]=!1,l.originalRecord&&(a.rowinfo[e].originalRecord=l.originalRecord),a._raiseEvent("rowUncheck",{key:e,row:l}),void 0==i&&this.hierarchicalCheckboxes&&this.checkRows(l,l),!1!==r&&a._renderrows())}}},expandRows:function(r){var i=this;if(r)if(i.virtualModeCreateRecords)e.each(r,function(){var e=this,r=function(){i.base._loading=!1,i.expandRows(e.records)};i.base._loading=!1,i.expandRow(e.uid,r)});else for(var a=0;a<r.length;a++){var t=r[a];i.expandRow(t.uid),i.expandRows(t.records)}},collapseRows:function(e){if(e)for(var r=0;r<e.length;r++)this.collapseRow(e[r].uid),this.collapseRows(e[r].records)},expandAll:function(){var e=this.base;e.beginUpdate(),this.expandRows(this.getRows()),e.endUpdate()},collapseAll:function(){var e=this.base;e.beginUpdate(),this.collapseRows(this.getRows()),e.endUpdate()},expandRow:function(e,r){var i=this.base;if(!i._loading){var a=i._names(),t=this,o=i.rowinfo[e];if(!o){var l=this.getRow(e);l&&(i.rowinfo[e]={row:l},l.originalRecord&&(i.rowinfo[e].originalRecord=l.originalRecord),o=i.rowinfo[e])}if(o){if(o.expanded)return void(o.row[a.expanded]=!0);if(o.expanded=!0,o.row[a.expanded]=!0,o.originalRecord&&(o.originalRecord[a.expanded]=!0),this.virtualModeCreateRecords&&!o.row._loadedOnDemand){var n=function(e){if(o.row._loadedOnDemand=!0,!1===e)return i._loading=!1,t._hideLoadElement(),o.leaf=!0,o.row[a.leaf]=!0,i._renderrows(),void(r&&r());for(var l=0;l<e.length;l++){if(e[l][a.level]=o.row[a.level]+1,e[l][a.parent]=o.row,i.rowsByKey[e[l].uid])throw i._loading=!1,t._hideLoadElement(),o.leaf=!0,o.row[a.leaf]=!0,i._renderrows(),r&&r(),new Error("Please, check whether you Add Records with unique ID/Key. ");i.rowsByKey[e[l].uid]=e[l],t.virtualModeRecordCreating(e[l])}o.row.records?o.row.records=o.row.records.concat(e):o.row.records=e,(!e||e&&0==e.length)&&(o.leaf=!0,o.row[a.leaf]=!0),o.originalRecord&&(o.originalRecord.records=e,o.originalRecord[a.expanded]=!0,0==e.length&&(o.originalRecord[a.leaf]=!0)),i._loading=!1,t._hideLoadElement();var n=i.vScrollBar.css("visibility");i._renderrows(),i._updateScrollbars();var d=n!=i.vScrollBar.css("visibility");("auto"===i.height||null===i.height||i.autoheight||d)&&i._arrange(),i._renderhorizontalscroll(),r&&r()};if(!o.row[a.leaf])return i._loading=!0,this._showLoadElement(),void this.virtualModeCreateRecords(o.row,n)}if(!i.updating()){var d=i.vScrollBar.css("visibility");i._renderrows(),i._updateScrollbars();var s=d!=i.vScrollBar.css("visibility");("auto"===i.height||null===i.height||i.autoheight||s)&&i._arrange(),i._renderhorizontalscroll(),i._raiseEvent("rowExpand",{row:o.row,key:e})}}}},collapseRow:function(e){var r=this.base,i=r._names();if(!r._loading){var a=r.rowinfo[e];if(!a){var t=this.getRow(e);t&&(r.rowinfo[e]={row:t},t.originalRecord&&(r.rowinfo[e].originalRecord=t.originalRecord),a=r.rowinfo[e])}if(a){if(!a.expanded)return void(a.row[i.expanded]=!1);if(a.expanded=!1,a.row[i.expanded]=!1,a.originalRecord&&(a.originalRecord[i.expanded]=!1),!r.updating()){var o=r.vScrollBar.css("visibility");r._renderrows(),r._updateScrollbars();var l=o!=r.vScrollBar.css("visibility");("auto"===r.height||null===r.height||r.autoheight||l)&&r._arrange(),r._renderhorizontalscroll(),r._raiseEvent("rowCollapse",{row:a.row,key:e})}}}}})}(jqxBaseFramework);