!function(e){e.jqx.jqxWidget("jqxInput","",{}),e.extend(e.jqx._jqxInput.prototype,{defineInstance:function(){var t=this,s={disabled:!1,filter:t._filter,sort:t._sort,highlight:t._highlight,dropDownWidth:null,renderer:t._renderer,opened:!1,$popup:e("<ul></ul>"),source:[],roundedCorners:!0,searchMode:"default",placeHolder:"",width:null,height:null,value:"",rtl:!1,displayMember:"",valueMember:"",events:["select","open","close","change"],popupZIndex:2e4,items:8,item:'<li><a href:"#"></a></li>',minLength:1,maxLength:null};return e.extend(!0,this,s),s},createInstance:function(e){this.render()},render:function(){if("textarea"==this.element.nodeName.toLowerCase())this.element.style.overflow="auto";else if("div"==this.element.nodeName.toLowerCase()){this.baseHost=this.element;var t=this.host.find("input"),s=!1;if(e.each(t,function(){var i=this.type;if(null==i||"text"==i||"textarea"==i)return t=e(this),s=!0,!1}),!s)throw new Error("jqxInput: Missing Text Input in the Input Group");if(t.length>0){this.baseHost=e(this.element);var i=this.host.data();this.host=t,this.element=t[0],this.host.data(i),this.baseHost.addClass(this.toThemeProperty("jqx-widget")),this.baseHost.addClass(this.toThemeProperty("jqx-rc-all")),this.baseHost.addClass(this.toThemeProperty("jqx-input-group"));var r=this.baseHost.children(),a=this;e.each(r,function(t){e(this).addClass(a.toThemeProperty("jqx-input-group-addon")),e(this).removeClass(a.toThemeProperty("jqx-rc-all")),0==t&&e(this).addClass(a.toThemeProperty("jqx-rc-l")),t==r.length-1&&e(this).addClass(a.toThemeProperty("jqx-rc-r")),this!=a.element&&e(this).addClass(a.toThemeProperty("jqx-fill-state-normal"))})}}this.addHandlers(),this.rtl&&this.host.addClass(this.toThemeProperty("jqx-rtl")),this.host.attr("role","textbox"),e.jqx.aria(this,"aria-autocomplete","both"),e.jqx.aria(this,"aria-disabled",this.disabled),e.jqx.aria(this,"aria-readonly",!1),e.jqx.aria(this,"aria-multiline",!1),this.source&&this.source.length&&e.jqx.aria(this,"aria-haspopup",!0),""!=this.value&&(this.element.value=this.value),this._oldsource=this.source,this._updateSource()},_updateSource:function(){var t=this,s=function(s){new Array;return e.map(s,function(e){if(void 0==e)return null;if("string"==typeof e||e instanceof String)return{label:e,value:e};if("string"!=typeof e&&e instanceof String==0){var s="",i="";return""!=t.displayMember&&void 0!=t.displayMember&&e[t.displayMember]&&(s=e[t.displayMember]),""!=t.valueMember&&void 0!=t.valueMember&&(i=e[t.valueMember]),""==s&&(s=e.label),""==i&&(i=e.value),{label:s,value:i}}return e})};if(this.source&&this.source._source){if(this.adapter=this.source,null!=this.adapter._source.localdata)this.adapter.unbindBindingUpdate(this.element.id),this.adapter.bindBindingUpdate(this.element.id,function(e){t.source=s(t.adapter.records)});else{var i={};this.adapter._options.data?e.extend(t.adapter._options.data,i):(this.source._source.data&&e.extend(i,this.source._source.data),this.adapter._options.data=i),this.adapter.unbindDownloadComplete(this.element.id),this.adapter.bindDownloadComplete(this.element.id,function(e){t.source=s(t.adapter.records)})}return void this.source.dataBind()}e.isFunction(this.source)||(this.source=s(this.source))},_refreshClasses:function(t){var s=t?"addClass":"removeClass";this.host[s](this.toThemeProperty("jqx-widget-content")),this.host[s](this.toThemeProperty("jqx-input")),this.host[s](this.toThemeProperty("jqx-widget")),this.$popup[s](this.toThemeProperty("jqx-popup")),e.jqx.browser.msie&&this.$popup[s](this.toThemeProperty("jqx-noshadow")),this.$popup[s](this.toThemeProperty("jqx-input-popup")),this.$popup[s](this.toThemeProperty("jqx-menu")),this.$popup[s](this.toThemeProperty("jqx-menu-vertical")),this.$popup[s](this.toThemeProperty("jqx-menu-dropdown")),this.$popup[s](this.toThemeProperty("jqx-widget")),this.$popup[s](this.toThemeProperty("jqx-widget-content")),this.roundedCorners&&(this.host[s](this.toThemeProperty("jqx-rc-all")),this.$popup[s](this.toThemeProperty("jqx-rc-all"))),this.disabled?this.host[s](this.toThemeProperty("jqx-fill-state-disabled")):this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled"))},selectAll:function(){var e=this.host;setTimeout(function(){if("selectionStart"in e[0])e[0].focus(),e[0].setSelectionRange(0,e[0].value.length);else{var t=e[0].createTextRange();t.collapse(!0),t.moveEnd("character",e[0].value.length),t.moveStart("character",0),t.select()}},10)},selectLast:function(){var e=this.host;this.selectStart(e[0].value.length)},selectFirst:function(){this.host;this.selectStart(0)},selectStart:function(e){var t=this.host;setTimeout(function(){if("selectionStart"in t[0])t[0].focus(),t[0].setSelectionRange(e,e);else{var s=t[0].createTextRange();s.collapse(!0),s.moveEnd("character",e),s.moveStart("character",e),s.select()}},10)},focus:function(){try{this.host.focus();var e=this;setTimeout(function(){e.host.focus()},25)}catch(e){}},resize:function(e,t){this.width=e,this.height=t,this.refresh()},refresh:function(){if(this._refreshClasses(!1),this._refreshClasses(!0),this.baseHost){if(this.width&&this.baseHost.width(this.width),this.height){this.baseHost.height(this.height);var t=this,s=0,i=this.baseHost.height()-2;e.jqx.browser.msie&&e.jqx.browser.version<8&&this.baseHost.css("display","inline-block"),e.each(this.baseHost.children(),function(){e(this).css("height","100%"),e.jqx.browser.msie&&e.jqx.browser.version<8&&e(this).css("height",i+"px"),this!==t.element&&(s+=e(this).outerWidth()+2)}),this.host.css("width",this.baseHost.width()-s-4+"px"),e.jqx.browser.msie&&e.jqx.browser.version<9&&(this.host.css("min-height",i+"px"),this.host.css("line-height",i+"px"))}}else this.width&&this.host.width(this.width),this.height&&this.host.height(this.height);this.host.attr("disabled",this.disabled),this.maxLength&&this.host.attr("maxlength",this.maxLength),this.host.attr("placeholder")||this._refreshPlaceHolder()},_refreshPlaceHolder:function(){if("placeholder"in this.element)this.host.attr("placeHolder",this.placeHolder);else{var e=this;""==this.element.value&&(this.element.value=this.placeHolder,this.host.focus(function(){e.element.value==e.placeHolder&&(e.element.value="")}),this.host.blur(function(){""!=e.element.value&&e.element.value!=e.placeHolder||(e.element.value=e.placeHolder)}))}},destroy:function(){this.removeHandlers(),this.baseHost?this.baseHost.remove():this.host.remove(),this.$popup&&this.$popup.remove()},propertiesChangedHandler:function(e,t,s){s.width&&s.height&&2==Object.keys(s).length&&e.refresh()},propertyChangedHandler:function(t,s,i,r){if("placeHolder"==s)return void t._refreshPlaceHolder();if(!(t.batchUpdate&&t.batchUpdate.width&&t.batchUpdate.height&&2==Object.keys(t.batchUpdate).length)){if("theme"===s&&e.jqx.utilities.setTheme(i,r,t.host),"opened"==s)return void(r?t.open():t.close());"source"==s&&(t._oldsource=r,t._updateSource()),"displayMember"!=s&&"valueMember"!=s||(t.source=t._oldsource,t._updateSource()),"disabled"==s&&e.jqx.aria(t,"aria-disabled",t.disabled),"value"==s&&(t.element.value=r),t.refresh()}},select:function(e,t,s){var i=this.$popup.find(".jqx-fill-state-pressed").attr("data-value"),r=this.$popup.find(".jqx-fill-state-pressed").attr("data-name");return this.element.value=this.renderer(r,this.element.value),this.selectedItem={label:r,value:i},this.host.attr("data-value",i),this.host.attr("data-label",r),this._raiseEvent("0",{item:{label:r,value:i},label:r,value:i}),this._raiseEvent("3",{type:s,item:{label:r,value:i},label:r,value:i}),this.close()},val:function(e){return 0==arguments.length||null!=e&&"object"==typeof e&&!e.label&&!e.value?""!=this.displayMember&&""!=this.valueMember&&this.selectedItem?""===this.element.value?"":this.selectedItem:this.element.value:e&&e.label?(this.selectedItem={label:e.label,value:e.value},this.host.attr("data-value",e.value),this.host.attr("data-label",e.label),this.value=e,this.element.value=e.label,this.element.value):(this.value=e,this.element.value=e,this.host.attr("data-value",e),this.host.attr("data-label",e),e&&e.label?this._raiseEvent("3",{type:null,item:{label:e.label,value:e.value},label:e.label,value:e.value}):this._raiseEvent("3",{type:null,item:{label:e,value:e},label:e,value:e}),this.element.value)},_raiseEvent:function(t,s){void 0==s&&(s={owner:null});var i=this.events[t];s.owner=this;var r=new e.Event(i);return r.owner=this,r.args=s,r.preventDefault&&r.preventDefault(),this.host.trigger(r)},_renderer:function(e){return e},open:function(){if(!e.jqx.isHidden(this.host)){var t=e.extend({},this.host.coord(!0),{height:this.host[0].offsetHeight});if(0==this.$popup.parent().length){var s=this.element.id+"_popup";this.$popup[0].id=s,e.jqx.aria(this,"aria-owns",s)}this.$popup.appendTo(e(document.body)).css({position:"absolute",zIndex:this.popupZIndex,top:t.top+t.height,left:t.left}).show();var i=0,r=this.$popup.children();return e.each(r,function(){i+=e(this).outerHeight(!0)-1}),this.$popup.height(i),this.opened=!0,this._raiseEvent("1",{popup:this.$popup}),e.jqx.aria(this,"aria-expanded",!0),this}},close:function(){return this.$popup.hide(),this.opened=!1,this._raiseEvent("2",{popup:this.$popup}),e.jqx.aria(this,"aria-expanded",!1),this},suggest:function(t){var s;return this.query=this.element.value,!this.query||this.query.length<this.minLength?this.opened?this.close():this:(s=e.isFunction(this.source)?this.source(this.query,e.proxy(this.load,this)):this.source,s?this.load(s):this)},load:function(t){var s=this;return t=e.grep(t,function(e){return s.filter(e)}),t=this.sort(t),t.length?this._render(t.slice(0,this.items)).open():this.opened?this.close():this},_filter:function(t){var s=this.query,i=t;switch(null!=t.label?i=t.label:this.displayMember&&(i=t[this.displayMember]),this.searchMode){case"none":break;case"containsignorecase":default:return e.jqx.string.containsIgnoreCase(i,s);case"contains":return e.jqx.string.contains(i,s);case"equals":return e.jqx.string.equals(i,s);case"equalsignorecase":return e.jqx.string.equalsIgnoreCase(i,s);case"startswith":return e.jqx.string.startsWith(i,s);case"startswithignorecase":return e.jqx.string.startsWithIgnoreCase(i,s);case"endswith":return e.jqx.string.endsWith(i,s);case"endswithignorecase":return e.jqx.string.endsWithIgnoreCase(i,s)}},_sort:function(e){for(var t,s=[],i=[],r=[],a=0;a<e.length;a++){var t=e[a],o=t;t.label?o=t.label:this.displayMember&&(o=t[this.displayMember]),0===o.toString().toLowerCase().indexOf(this.query.toString().toLowerCase())?s.push(t):o.toString().indexOf(this.query)>=0?i.push(t):o.toString().toLowerCase().indexOf(this.query.toString().toLowerCase())>=0&&r.push(t)}return s.concat(i,r)},_highlight:function(e){var t=this.query;t=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var s=new RegExp("("+t+")","ig");return e.replace(s,function(e,t){return"<b>"+t+"</b>"})},_render:function(t){var s=this;return t=e(t).map(function(t,i){var r=i;t=void 0!=i.value?void 0!=i.label?e(s.item).attr({"data-name":i.label,"data-value":i.value}):e(s.item).attr({"data-name":i.value,"data-value":i.value}):void 0!=i.label?e(s.item).attr({"data-value":i.label,"data-name":i.label}):void 0!=s.displayMember&&""!=s.displayMember?e(s.item).attr({"data-name":i[s.displayMember],"data-value":i[s.valueMember]}):e(s.item).attr({"data-value":i,"data-name":i}),i.label?r=i.label:s.displayMember&&(r=i[s.displayMember]),t.find("a").html(s.highlight(r));var a="";return s.rtl&&(a=" "+s.toThemeProperty("jqx-rtl")),t[0].className=s.toThemeProperty("jqx-item")+" "+s.toThemeProperty("jqx-menu-item")+" "+s.toThemeProperty("jqx-rc-all")+a,t[0]}),t.first().addClass(this.toThemeProperty("jqx-fill-state-pressed")),this.$popup.html(t),this.dropDownWidth?this.$popup.width(this.dropDownWidth):this.$popup.width(this.host.outerWidth()-6),this},next:function(t){var s=this.$popup.find(".jqx-fill-state-pressed").removeClass(this.toThemeProperty("jqx-fill-state-pressed")),i=s.next();i.length||(i=e(this.$popup.find("li")[0])),i.addClass(this.toThemeProperty("jqx-fill-state-pressed"))},prev:function(e){var t=this.$popup.find(".jqx-fill-state-pressed").removeClass(this.toThemeProperty("jqx-fill-state-pressed")),s=t.prev();s.length||(s=this.$popup.find("li").last()),s.addClass(this.toThemeProperty("jqx-fill-state-pressed"))},addHandlers:function(){var t=this;t.addHandler(t.host,"focus",e.proxy(t.onFocus,t)),t.addHandler(t.host,"blur",e.proxy(t.onBlur,t)),t.addHandler(t.host,"change.jqxinput"+t.element.id,function(e){if(!e.args){e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation();var s=t.val();if(s&&s.label)var i=s.label,r=s.val;else var i=s,r=s;t._raiseEvent("3",{type:"keyboard",item:{label:i,value:r},label:i,value:r})}}),t.addHandler(t.host,"keypress",e.proxy(t.keypress,t)),t.addHandler(t.host,"keyup",e.proxy(t.keyup,t)),t.addHandler(t.host,"keydown",e.proxy(t.keydown,t)),t.addHandler(t.$popup,"mousedown",e.proxy(t.click,t)),t.host.on?t.$popup.on("mouseenter","li",e.proxy(t.mouseenter,t)):t.$popup.bind("mouseenter","li",e.proxy(t.mouseenter,t))},removeHandlers:function(){var t=this;t.removeHandler(t.host,"change.jqxinput"+t.element.id),t.removeHandler(t.host,"focus",e.proxy(t.onFocus,this)),t.removeHandler(t.host,"blur",e.proxy(t.onBlur,this)),t.removeHandler(t.host,"keypress",e.proxy(t.keypress,this)),t.removeHandler(t.host,"keyup",e.proxy(t.keyup,this)),t.removeHandler(t.host,"keydown",e.proxy(t.keydown,this)),t.removeHandler(t.$popup,"mousedown",e.proxy(t.click,this)),t.host.off?t.$popup.off("mouseenter","li",e.proxy(t.mouseenter,this)):t.$popup.unbind("mouseenter","li",e.proxy(t.mouseenter,this))},move:function(e){if(this.opened){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.shiftKey||(e.preventDefault(),this.prev());break;case 40:e.shiftKey||(e.preventDefault(),this.next())}e.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.opened)return;this.select(e,this,"keyboard");break;case 27:if(!this.opened)return;this.close();break;default:var t=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){t.suggest()},300)}e.stopPropagation(),e.preventDefault()},clear:function(){this.host.val("")},onBlur:function(e){var t=this;setTimeout(function(){t.close()},150),t.host.removeClass(t.toThemeProperty("jqx-fill-state-focus")),this.value=this.host.val()},onFocus:function(e){var t=this;t.host.addClass(t.toThemeProperty("jqx-fill-state-focus"))},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(e,this,"mouse")},mouseenter:function(t){this.$popup.find(".jqx-fill-state-pressed").removeClass(this.toThemeProperty("jqx-fill-state-pressed")),e(t.currentTarget).addClass(this.toThemeProperty("jqx-fill-state-pressed"))}})}(jqxBaseFramework);