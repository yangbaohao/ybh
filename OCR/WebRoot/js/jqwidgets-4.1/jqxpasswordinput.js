!function(t){t.jqx.jqxWidget("jqxPasswordInput","",{}),t.extend(t.jqx._jqxPasswordInput.prototype,{defineInstance:function(){var e={width:null,height:null,disabled:!1,rtl:!1,placeHolder:null,showStrength:!1,showStrengthPosition:"right",maxLength:null,minLength:null,showPasswordIcon:!0,strengthTypeRenderer:null,passwordStrength:null,changeType:null,localization:{passwordStrengthString:"Password strength",tooShort:"Too short",weak:"Weak",fair:"Fair",good:"Good",strong:"Strong",showPasswordString:"Show Password"},strengthColors:{tooShort:"rgb(170, 0, 51)",weak:"rgb(170, 0, 51)",fair:"rgb(255, 204, 51)",good:"rgb(45, 152, 243)",strong:"rgb(118, 194, 97)"}};return t.extend(!0,this,e),e},createInstance:function(t){this.render()},render:function(){var e=this,o=t.jqx.browser.browser,s=t.jqx.browser.version;this._browserCheck="msie"!=o||"7.0"!=s&&"8.0"!=s,this.widgetID=e.element.id;if("password"!=e.host.attr("type"))throw"Invalid input type. Please set the type attribute of the input element to password.";e._hidden=!0,e._setTheme(),e._setAttributes(),e._showPassword(),e._showStrength()},refresh:function(e){var o=this;1!=e&&(o.removeHandler(o.host,"change.passwordinput"+o.widgetID),o.removeHandler(o.host,"focus.passwordinput"+o.widgetID),o.removeHandler(o.host,"blur.passwordinput"+o.widgetID),o.removeHandler(o.host,"click.passwordinput"+o.widgetID),o.removeHandler(t(window),"resize.passwordinput"+o.widgetID),o.removeHandler(o.host,"keyup.passwordinput"+o.widgetID),o.removeHandler(o.icon,"mousedown.passwordinput"+o.iconID),o.removeHandler(o.icon,"mouseup.passwordinput"+o.iconID),o.removeHandler(t(document),"mousedown.passwordinput"+o.iconID),o._setAttributes(),o._setTheme(),o._showPassword(),o._showStrength())},val:function(e){var o=this,s=o.element.value,r="placeholder"in o.element;if(t.isEmptyObject(e)&&""!=e)return r||s!==o.placeHolder||(s=""),s;if(!r||e!==s){if(!r){if(""===e)return void(s!==o.placeHolder&&(o.element.value=o.placeHolder,o.host.attr("type","text")));o.host.attr("type","password")}o.element.value=e,!0===o.showStrength&&o._evaluateStrength()}},propertyChangedHandler:function(e,o,s,r){var n=this.host;return"theme"===o?void t.jqx.utilities.setTheme(s,r,e.host):"disabled"==o?void(1==e.disabled?(e.host.attr("disabled","disabled"),e.host.addClass(e.toThemeProperty("jqx-fill-state-disabled"))):(e.host.removeAttr("disabled"),e.host.removeClass(e.toThemeProperty("jqx-fill-state-disabled")))):void("placeHolder"==o?this._browserCheck&&("placeholder"in this.element?n.attr("placeholder",this.placeHolder):""==n.val()?(n.attr("type","text"),e.element.value=r):n.val()==s&&(e.element.value=r)):this.refresh())},resize:function(t,e){this.width=t,this.height=e,this.host.width(this.width),this.host.height(this.height)},_setAttributes:function(){var t=this,e=t.host;e.width(t.width),e.height(t.height),t.maxLength&&e.attr("maxlength",t.maxLength),t.minLength&&e.attr("minLength",t.minLength),t.placeHolder&&t._browserCheck&&("placeholder"in t.element?e.attr("placeholder",t.placeHolder):""==e.val()&&(e.attr("type","text"),t.element.value=t.placeHolder)),1==t.disabled?(e.attr("disabled","disabled"),e.addClass(this.toThemeProperty("jqx-fill-state-disabled"))):(e.removeAttr("disabled"),e.removeClass(t.toThemeProperty("jqx-fill-state-disabled")));var o=!1;t.addHandler(e,"change.passwordinput"+t.widgetID,function(e){o||(e.stopImmediatePropagation(),e.preventDefault(),e.stopPropagation(),o=!0,t._raiseEvent(),o=!1)}),t.addHandler(e,"click.passwordinput"+t.widgetID,function(){t.showPasswordIcon&&t.icon&&(t.icon.show(),t._positionIcon())}),t.interval=null,t.addHandler(e,"keydown.passwordinput"+t.widgetID,function(){if(t.changeType="keyboard",t.showPasswordIcon&&t.icon){t.interval&&clearInterval(t.interval);var e=0;t.interval=setInterval(function(){"none"!=t.icon[0].style.display?(t._positionIcon(),++e>5&&clearInterval(t.interval)):clearInterval(t.interval)},100)}}),t.addHandler(e,"focus.passwordinput"+t.widgetID,function(){if(t._focused=!0,t.host.addClass(t.toThemeProperty("jqx-fill-state-focus")),!t.placeHolder||!t._browserCheck||"placeholder"in t.element||e.val()!=t.placeHolder||(e.val(""),1==t._hidden&&e.attr("type","password")),t.val().length>0&&1==t.showStrength){e.jqxTooltip("content")&&e.jqxTooltip("open")}t.showPasswordIcon&&t.icon&&(t.icon.show(),t._positionIcon())}),t.addHandler(e,"blur.passwordinput"+t.widgetID,function(){t._focused=!1,t.host.removeClass(t.toThemeProperty("jqx-fill-state-focus")),!t.placeHolder||!t._browserCheck||"placeholder"in t.element||""!=e.val()||(t.element.value=t.placeHolder,e.attr("type","text")),1==t.showPasswordIcon&&t._browserCheck&&(0==t.rtl?t.host.removeClass(t.toThemeProperty("jqx-passwordinput-password-icon-ltr")):t.host.removeClass(t.toThemeProperty("jqx-passwordinput-password-icon-rtl"))),1==t.showStrength&&e.jqxTooltip("close"),t.showPasswordIcon&&t.icon&&t.icon.hide()})},destroy:function(){this.host.jqxTooltip&&this.host.jqxTooltip("destroy"),this.host.remove()},_setTheme:function(){var t=this.host,e=this;t.addClass(e.toThemeProperty("jqx-widget")),t.addClass(e.toThemeProperty("jqx-widget-content")),t.addClass(e.toThemeProperty("jqx-input")),t.addClass(e.toThemeProperty("jqx-rc-all")),1==e.rtl?(t.addClass(e.toThemeProperty("jqx-rtl")),t.css("direction","rtl")):(t.removeClass(e.toThemeProperty("jqx-rtl")),t.css("direction","ltr"))},_showPassword:function(){if(1==this.showPasswordIcon&&this._browserCheck){var e=this;this.iconID=this.widgetID+"-password-icon",t("<span tabindex='-1' hasfocus='false' style='position: absolute; display: none;' id='"+e.iconID+"'></span>").insertAfter(e.host);var o=t("#"+e.iconID);e.icon=o,o.addClass(e.toThemeProperty("jqx-passwordinput-password-icon")),o.attr("title",e.localization.showPasswordString),e._positionIcon();var s=function(){e.host.attr("type","password"),e._hidden=!0,o.attr("title",e.localization.showPasswordString)},r=function(){0==e._hidden?s():1==e._hidden&&(e.host.attr("type","text"),e._hidden=!1)};t.jqx.mobile.isTouchDevice()?e.addHandler(e.icon,"mousedown.passwordinput"+e.iconID,function(t){return r(),!1}):(e.addHandler(e.icon,"mousedown.passwordinput"+e.iconID,function(t){return r(),!1}),e.addHandler(e.icon,"mouseup.passwordinput"+e.iconID,function(t){return s(),!1}),e.addHandler(t(document),"mousedown.passwordinput"+e.iconID,function(t){e._focused&&s()}))}},_positionIcon:function(){var t=this.host.offset(),e=this.host.outerWidth(),o=this.host.outerHeight();1==this.rtl?this.icon.offset({top:parseInt(t.top+o/2-5),left:t.left+2}):this.icon.offset({top:parseInt(t.top+o/2-5),left:t.left+e-18})},_showStrength:function(){var e=this;if(1==e.showStrength){if(void 0==e.host.jqxTooltip)throw new Error("jqxPasswordInput: Missing reference to jqxtooltip.js");var o,s=e.widgetID+"Strength",r=s+"Value",n=s+"Indicator";if(e.strengthTypeRenderer){var i=e.host.val();"placeholder"in e.element||!e._browserCheck||i!=e.placeHolder||(i=""),e._countCharacters();var a=e.localization.tooShort;o=e.strengthTypeRenderer(i,{letters:e.letters,numbers:e.numbers,specialKeys:e.specials},a)}else o="<div style='width: 220px;' id='"+s+"'><div><span style='font-weight: bold;'>"+e.localization.passwordStrengthString+": </span><span id='"+r+"'></span></div><div id='"+n+"'></div></div>";e.host.jqxTooltip({theme:e.theme,position:e.showStrengthPosition,content:o,trigger:"none",autoHide:!1,rtl:e.rtl}),e.strengthTypeRenderer||(t("#"+r).html(e.localization.tooShort),t("#"+n).addClass("jqx-passwordinput-password-strength-inicator").css("background-color",e.strengthColors.tooShort),0==e.rtl?t("#"+n).css("float","left"):t("#"+n).css("float","right")),e._checkStrength()}},_checkStrength:function(){var e=this;e.addHandler(t(window),"resize.passwordinput"+e.widgetID,function(){e.icon&&e.icon.hide()}),e.addHandler(e.host,"keyup.passwordinput"+e.widgetID,function(){e._evaluateStrength()})},_raiseEvent:function(e){var o=new t.Event("change");return o.args={type:this.changeType},this.changeType=null,o.owner=this,this.host.trigger(o)},_evaluateStrength:function(){var e=this,o=e.host.val(),s=o.length;if(e._countCharacters(),s>0&&1==e.showStrength){!e.host.jqxTooltip("opened")&&e.host.jqxTooltip("open")}var r,n=e.letters+e.numbers+2*e.specials+e.letters*e.numbers/2+s;if(r=s<8?e.localization.tooShort:n<20?e.localization.weak:n<30?e.localization.fair:n<40?e.localization.good:e.localization.strong,e.strengthTypeRenderer){var i=e.strengthTypeRenderer(o,{letters:e.letters,numbers:e.numbers,specialKeys:e.specials},r);e.host.jqxTooltip({content:i})}else{if(e.passwordStrength){var i=e.passwordStrength(o,{letters:e.letters,numbers:e.numbers,specialKeys:e.specials},r);t.each(e.localization,function(){if(i==this)return r=i,!1})}t("#"+e.widgetID+"StrengthValue").html(r);var a=t("#"+e.widgetID+"StrengthIndicator");switch(r){case e.localization.tooShort:a.css({width:"20%","background-color":e.strengthColors.tooShort});break;case e.localization.weak:a.css({width:"40%","background-color":e.strengthColors.weak});break;case e.localization.fair:a.css({width:"60%","background-color":e.strengthColors.fair});break;case e.localization.good:a.css({width:"80%","background-color":e.strengthColors.good});break;case e.localization.strong:a.css({width:"100%","background-color":e.strengthColors.strong})}}},_countCharacters:function(){var t=this;t.letters=0,t.numbers=0,t.specials=0;for(var e="<>@!#$%^&*()_+[]{}?:;|'\"\\,./~`-=",o=t.host.val(),s=o.length,r=0;r<s;r++){var n=o.charAt(r),i=o.charCodeAt(r);i>64&&i<91||i>96&&i<123||i>127&&i<155||i>159&&i<166?t.letters+=1:0!=isNaN(n)?-1==e.indexOf(n)||(t.specials+=1):t.numbers+=1}}})}(jqxBaseFramework);