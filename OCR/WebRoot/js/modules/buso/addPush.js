var AddPushMgt=function(){var a=this,e=_global_settings.service.url+"/voucher";this.boolean=null,this.initInput=function(){a.initNumber(),a.initPage(),a.initValidator(),a.nameBlur()},this.initNumber=function(){Core.AjaxRequest({url:_global_settings.service.url+"/code/random/ /5",type:"GET",async:!1,callback:function(a){$("#addPush-num").val(a)},failure:function(a){}})},this.initPage=function(){$("#addPush-time").dropDownlist({source:["请选择","最近一周","最近两周","最近三周","本月","本季度","本年"],width:"100%",height:34,selectedIndex:0}),$("#addPush-sTime").datetimeinput({formatString:"yyyy-MM-dd",height:34,width:"100%"}),$("#addPush-eTime").datetimeinput({formatString:"yyyy-MM-dd",height:34,width:"100%"}),$("#addPush-time").on("change",function(){setValueById("addPush-time","addPush-sTime","addPush-eTime")}),$("#addPush-vouchers").dropDownlist({source:{choose:"请选择",noUse:"未使用金额",use:"已使用金额",overdue:"已过期金额"},width:"100%",height:34,selectedIndex:0})},this.initValidator=function(){$("#editPushContent").jqxValidator({hintType:"label",animationDuration:1,rules:[{input:"#addPush-type",message:"不能为空",action:"keyup,blur",rule:"required"},{input:"#addPush-remark",message:"不能为空",action:"keyup,blur",rule:"required"}]})},this.nameBlur=function(){$("#addPush-name").on("blur",function(){""!=$("#addPush-name").val()&&Core.AjaxRequest({type:"GET",url:e+"/check/"+$("#addPush-name").val(),async:!1,callback:function(e){a.boolean=e},failure:function(){}})})},this.amtInput=function(){$("#addPush-price").on("input",function(){var a=$("#addPush-price").val();"SYSPUSH"==$("#addPush-sendtype").val()?""==$("#userNumber").text()?$("#addPush-amt").val(""):$("#addPush-amt").val(a*parseInt($("#userNumber").text())):""==$("#addPush-num").val()?$("#addPush-amt").val(""):$("#addPush-amt").val(a*$("#addPush-num").val())}),$("#addPush-num").on("input",function(){var a=$("#addPush-num").val();""==$("#addPush-price").val()?$("#addPush-amt").val(""):$("#addPush-amt").val(a*$("#addPush-price").val())})}},AddPushBindModle=function(a){var e=(_global_settings.service.url,null);this.bind=function(){$("#addPush-search").on("click",function(){var a=$("#addPush-sTime").val(),u=$("#addPush-eTime").val(),d=$("#addPush-username").val(),t=$("#addPush-smoney").val(),n=$("#addPush-emoney").val(),s=$("#addPush-vouchers").val(),i=$("#addPush-sVouchers").val(),l=$("#addPush-eVouchers").val(),o=$("#addPush-telephone").val(),r=$("#addPush-code").val();""!=t&&""!=n||(t=-1,n=-1),"choose"==s&&(s=-1),""!=i&&""!=l||(i=-1,l=-1),""!=a&&""!=u||(a=-1,u=-1),""==d&&(d=-1),""==o&&(o=-1),""==r&&(r=-1),Core.AjaxRequest({type:"GET",url:_global_settings.service.url+"/informationLogs/search/page/"+t+"/"+n+"/"+s+"/"+i+"/"+l+"/"+a+"/"+u+"/"+d+"/"+r+"/"+o,async:!1,callback:function(a){e=a.ids,$("#addPush-user").text(a.count)},failure:function(a){}})}),$("#addPush-save").on("click",function(){var a={};a.number=$("#addPush-num").val(),a.theme=$("#addPush-type").val(),a.content=$("#addPush-remark").val(),$("#editPushContent").jqxValidator("validate")&&void 0!=e&&0!=e?Core.AjaxRequest({type:"POST",url:_global_settings.service.url+"/informationLogs/"+e,async:!1,params:a,callback:function(a){try{$("#pushMgtGrid").jqxGrid("updatebounddata","cells"),$.closeTab()}catch(a){}},failure:function(a){}}):0==e?Core.alert({message:"没有您要搜索的用户，请重新检查您的检索条件！"}):void 0==e||""==e||null==e?Core.alert({message:"请您先搜索出推送用户数量！"}):Core.alert({message:"请您填写推送必填信息！"})}),$("#addPush-cancle").on("click",function(){$.closeTab()}),hiddenAclick()},this.unbindAll=function(){$("#addPush-search").off("click"),$("#addPush-save").off("click"),$("#addPush-cancle").off("click")}};