var VcMgt=function(){var e=this,i=$.pk.data,t=_global_settings.service.url+"/user/search/partnersuccess/";this.initInput=function(){e.initPage(),e.initGrid(e.searchObj)},this.searchObj={"o.createDate":{value:[],action:"between"},"o.loginId":{value:[],action:"like"},"o.regTelephone":{value:[],action:"like"},"en.name":{value:[],action:"like"}},this.initPage=function(){$("#viewClient-code").text(i.employeeCode),$("#viewClient-company").text(i.userInfo.name),$("#viewClient-show").css("display",""),$("#viewClient-time").dropDownlist({source:["请选择","最近一周","最近两周","最近三周","本月","本季度","本年"],theme:"energyblue",width:"100%",height:"34px",selectedIndex:0,dropDownHeight:150}),$("#viewClient-sTime").datetimeinput({formatString:"yyyy-MM-dd",width:"100%",height:"34px"}),$("#viewClient-eTime").datetimeinput({formatString:"yyyy-MM-dd",width:"100%",height:"34px"}),$("#viewClient-time").on("change",function(){setValueById("viewClient-time","viewClient-sTime","viewClient-eTime")}),$("#viewClient-show").addClass("hiddendiv")},this.initGrid=function(){e.settings.source.data=e.searchObj;var i=Core.AcDataAdapter("viewClientGrid",e.settings.source,{beforeLoadComplete:function(e){}},e.debug),t={source:i,rendergridrows:function(){return i.recordids},columns:[{text:"注册日期",dataField:"enrtyDate",width:"25%"},{text:"用户名",width:"25%",cellsrenderer:function(e,i,t,n,a,r){var l='<div class="agrid">';return(l+='<a class="hoverspan viewClientUser">'+r.username+"</a>")+"</div>"}},{text:"电话号码",dataField:"telephone",width:"25%"},{text:"公司名称",dataField:"name",width:"25%"}],pagesize:20,columnsheight:45};$("#viewClientGrid").grid(t),$("#viewClientGrid").on("click",".viewClientUser",function(){var e=$("#viewClientGrid").jqxGrid("getselectedrowindex");if(e>=0){var i=$("#viewClientGrid").jqxGrid("getrowdata",e);$.addTab({title:"浏览历史",pk:{id:i.id,username:i.username,name:i.name},url:"page/modules/user/viewUserMoreVisit.html",reload:!0})}})},this.settings={source:{url:t+i.employeeCode,data:e.searchObj},grid:{element:"viewClientGrid"},ajax:{url:t}},this.searchDataInfo=function(){$("#viewClientGrid").jqxGrid("applyfilters"),$("#viewClientGrid").jqxGrid("refreshfilterrow"),$("#viewClientGrid").jqxGrid("clearselection")},this.refreshDataInfo=function(){$("#viewClientGrid").jqxGrid("updatebounddata","cells"),$("#viewClientGrid").jqxGrid("clearselection"),$("#viewClientGrid").jqxGrid("refreshdata")}},VcBindModle=function(e){var i=this;_global_settings.service.url;this.search=function(){var i=$("#viewClient-sTime").val(),t=$("#viewClient-eTime").val(),n=$("#viewClient-name").val(),a=$("#viewClient-phone").val(),r=$("#viewClient-companyName").val();e.searchObj["o.createDate"].value=[],""!=i&&""!=t&&e.searchObj["o.createDate"].value.push(i+" 00:00:00",t+" 23:59:59"),e.searchObj["o.loginId"].value=[],""!=n&&e.searchObj["o.loginId"].value.push(n),e.searchObj["o.regTelephone"].value=[],""!=a&&e.searchObj["o.regTelephone"].value.push(a),e.searchObj["en.name"].value=[],""!=r&&e.searchObj["en.name"].value.push(r),e.searchDataInfo()},this.bind=function(){$("#viewClient-search").on("click",function(){$("#viewClient-show").is(":hidden")?$("#viewClient-show").slideDown("slow"):i.search()}),hiddenAclick()},this.unbindAll=function(){$("#viewClient-search").off("click")}};