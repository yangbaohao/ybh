var PsMgt=function(){var e=this,s=_global_settings.service.url+"/salesagent/";this.id=null,this.data=null,this.initInput=function(){void 0!=e.id&&null!=e.id||(Core.alert({message:"id入参错误！"}),$.closeTab())};var i=function(i){for(var n=function(e){for(var s=ComboBoxSources.getRecords("salesInfo"),i=0;i<s.length;i++)if(s[i].id==e)return s[i];if(!e)return""},a=function(e){for(var s=ComboBoxSources.getRecords("custService"),i=0;i<s.length;i++)if(s[i].id==e)return s[i];if(!e)return""},t=function(e){"enterprise"==e.type?($("#viewPs-type").val("企业"),$("#viewPs-compName").val(e.userInfo.name),$("#viewPs-busi").val(e.userInfo.businessCode),$("#viewPs-tax").val(e.userInfo.taxCode)):($("#viewPs-type").val("个人"),$("#viewPsSex").css("display",""),$("#viewPsComp").css("display","none"),$("#viewPsName").css("display",""),$("#viewPsBusi").css("display","none"),$("#viewPsTax").css("display","none"),$("#viewPsCert-type").css("display",""),$("#viewPsCert-number").css("display",""),$("#enterprise-viewPsqq").css("display","none"),$("#enterprise-viewPswx").css("display","none"),$("#view-Psqq").css("display",""),$("#view-Pswx").css("display",""),"nan"==e.userInfo.salutation?$("#viewPs-sex").val("男"):"nv"==e.userInfo.salutation?$("#viewPs-sex").val("女"):$("#viewPs-sex").val(""),$("#viewPs-name").val(e.userInfo.name),$("#viewPs-certType").val(getCodeData(e.userInfo.certificateType)),$("#viewPs-certNumber").val(e.userInfo.certificateId)),$("#viewPs-number").val(e.agentCode),void 0==e.sales?$("#viewPs-head").val(""):$("#viewPs-head").val(n(e.sales.id).username),void 0==e.customer?$("#viewPs-cust").val(""):$("#viewPs-cust").val(a(e.customer.id).username),$("#viewPs-userName").val(e.agentName),$("#viewPs-bank").val(e.openBank),$("#viewPs-bankNumber").val(e.bankAccount),$("#viewPs-phone").val(e.userInfo.telephone),$("#viewPs-eamil").val(e.userInfo.email),$("#viewPs-qq").val(e.userInfo.qq),$("#viewPs-wx").val(e.userInfo.wechat),$("#viewPs-remark").val(e.userInfo.remark),$("#viewPs-address").find("tbody").children().remove(),$.each(e.userInfo.address,function(e,s){var i="<tr><td><font>"+s.province+"</font><font>"+s.city+"</font><font>"+s.district+"</font><font>"+s.street+"</font></td></tr>";$("#viewPs-address").append(i)})},o=ComboBoxSources.getRecords("salesAgent"),r=0;r<o.length;r++)o[r].id==i&&(e.id=o[r].id);Core.AjaxRequest({url:s+e.id,type:"GET",async:!1,callback:function(s){e.data=s,t(s)},failure:function(){}})};window.getId=i,i(_global_settings.owner.id)},PsBindModle=function(e){this.bind=function(){$("#editPsBtn").on("click",function(){$.addTab({title:"编辑代理商",url:"page/modules/agent/editAgentMgt.html",pk:{data:e.data},reload:!0})})},this.unbindAll=function(){$("#editPsBtn").off("click")}};