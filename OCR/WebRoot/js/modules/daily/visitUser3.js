var exportUserInfo=[],beforeUserInfo=[],VistMgt=function(){var e=this,t=null,i=_global_settings.service.url+"/common";this.debug=!1;this.ownerNewArr=[],this.data=[],this.rowData,this.initInput=function(){e.beforeInitData()},this.beforeInitData=function(){Core.AjaxRequest({type:"GET",showMsg:!1,async:!1,url:_global_settings.service.url+"/common/owner/information",callback:function(i){beforeUserInfo=i,t=$.pk.createDate,e.initUserPage(),e.initSearch(),e.initGrid(e.searchObj),e.getTableData()}})},this.getTableData=function(){void 0!==$.pk&&void 0===$.pk.createDate&&Core.alert({message:"日期入参错误",callback:function(){$.closeTab()}})},this.initUserPage=function(){$("#agentDailyVisit-com").jqxDropDownList({source:[],theme:"energyblue",width:"100%",height:"34px",selectedIndex:0,dropDownHeight:150}),$("#agentDailyVisit-show").addClass("hiddendiv")},this.initGrid=function(){e.settings.source.data=e.searchObj,e.settings.source.url=i+"/owner/access/-1/-1/-1/-1/"+t;var r=Core.AcDataAdapter("agentDailyGrid-visit",e.settings.source,{loadComplete:function(t){for(var i=[],r=0;r<t.rows.length;r++)e.ownerIds=t.rows[r].ownerId,i.push(t.rows[r].ownerId);t.rows.length-1&&(e.ownerNewArr=i);for(var s=e.ownerNewArr.length,r=0;r<beforeUserInfo.length;r++)for(var a=0;a<s;a++)e.ownerNewArr[a]===beforeUserInfo[r].id&&void 0!=beforeUserInfo[r].username&&($(".visitAgentCode").eq(a).html(beforeUserInfo[r].username),$(".visitCompanyName").eq(a).html(beforeUserInfo[r].name),$(".visitAgentTelephone").eq(a).html(beforeUserInfo[r].telephone),$(".visitRegCreateDate").eq(a).html(beforeUserInfo[r].createDate))}},e.debug),s=function(e,t,i,r,s,a){if(void 0!==a.accessList){for(var n="",o="",l=0;l<a.accessList.length;l++)void 0!=(o=a.accessList[l].remark)&&(n+='<div class="JournalDiv" style="position: relative; border-top: 1px solid  #EBEFF2;text-overflow: ellipsis;overflow: hidden;" title='+o+">"+o+"</div>");return'<div style="height:auto;">'+n+"</div>"}},a=function(e,t,i,r,s,a){if(void 0!==a.accessList){for(var n="",o="",l=0;l<a.accessList.length;l++)o=a.accessList[l].remarkNum,n+='<div class="JournalDiv" style="border-top: 1px solid  #EBEFF2;text-overflow: ellipsis;overflow: hidden;" title='+o+">"+o+"</div>";return'<div style="height:auto;">'+n+"</div>"}},n=function(e,t,i,r,s,a){if(void 0!==a.accessList){for(var n="",o="",l=0;l<a.accessList.length;l++)o=a.accessList[l].remarkSecond,n+='<div class="JournalDiv" style="border-top: 1px solid  #EBEFF2;text-overflow: ellipsis;overflow: hidden;" title='+o+">"+o+"</div>";return'<div style="height: auto;">'+n+"</div>"}},o={columnsresize:!1,autorowheight:!0,autoheight:!0,source:r,rendergridrows:function(t){for(var i=0;i<t.data.length;i++)void 0!=t.data[i]&&(void 0==t.data[i].accessList&&""!=t.data[i].accessList||e.data.push(t.data[i]));return t.data=e.data,t.endindex=e.data.length,e.rowData=t,r.records},columns:[{text:"用户名",width:"14%",cellsrenderer:function(e){return'<div class="visitAgentCode" style="padding-top:6px; text-align: center;">'}},{text:"公司名称",width:"16%",cellsrenderer:function(e){return'<div class="visitCompanyName" style="padding-top:6px; text-align: center;">'}},{text:"联系电话",width:"14%",cellsrenderer:function(e){return'<div class="visitAgentTelephone" style="padding-top:6px; text-align: center;">'}},{text:"注册时间",width:"14%",cellsrenderer:function(e){return'<div class="visitRegCreateDate" style="padding-top:6px; text-align: center;">'}},{text:"访问模块",dataField:"remark",width:"20%",cellsrenderer:s},{text:"访问次数",width:"11%",cellsrenderer:a},{text:"停留时间(分)",width:"11%",cellsrenderer:n}],pagesize:20,columnsheight:45};$("#agentDailyGrid-visit").grid(o)},this.settings={source:{url:i+"/owner/access/-1/-1/-1/-1/"+t,data:e.searchObj,datafields:[]},grid:{element:"agentDailyGrid-visit"},ajax:{url:i}},this.searchObj={},this.initSearch=function(){e.searchObj={}},this.searchDataInfo=function(){$("#agentDailyGrid-visit").jqxGrid("applyfilters"),$("#agentDailyGrid-visit").jqxGrid("refreshfilterrow"),$("#agentDailyGrid-visit").jqxGrid("clearselection")},this.refreshDataInfo=function(){$("#agentDailyGrid-visit").jqxGrid("updatebounddata","cells"),$("#agentDailyGrid-visit").jqxGrid("clearselection"),$("#agentDailyGrid-visit").jqxGrid("refreshdata")}},VistBindModle=function(e){var t=this;this.search=function(){var t=$("#agentDaily-name").find("input").val(),i=$("#agentDaily-type").val();"全部"!=t&&e.searchObj.agentName.value.push(t),e.searchObj.type.value=[],"all"!=i&&e.searchObj.type.value.push(i),e.searchDataInfo()},this.bind=function(){$("#agentDailyVisit-search").on("click",function(){$("#agentDailyVisit-show").is(":hidden")?$("#agentDailyVisit-show").slideDown("slow"):t.search()}),hiddenAclick()},this.unbindAll=function(){}};