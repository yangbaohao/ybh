var OperationLogMgt=function(){var e=this,o=_global_settings.service.url+"/overview/";this.initInput=function(){e.initPage(),e.initSearch(),e.initOperationLogGrid()},this.initPage=function(){$("#operationLogGrid-show").css("display",""),$("#operationLogGrid-time").dropDownlist({source:{0:"请选择",1:"最近一周",2:"最近两周",3:"最近三周",4:"本月",5:"本季度",6:"本年"},selectedIndex:0,dropDownHeight:120}),$("#operationLogGrid-sDate,#operationLogGrid-eDate").datetimeinput(),$("#operationLogGrid-time").on("change",function(){setValueById("operationLogGrid-time","operationLogGrid-sDate","operationLogGrid-eDate")}),$("#operationLogGrid-name").comboBox({source:ComboBoxSources.getRecords("username"),displayMember:"name",valueMember:"name"}),$("#operationLogGrid-show").addClass("hiddendiv"),hiddenAclick()},$("#operationLogGrid-search").off("click").on("click",function(){$("#operationLogGrid-show").is(":hidden")?$("#operationLogGrid-show").slideDown("slow"):a()});var a=function(){var o=$("#operationLogGrid-sDate").val(),a=$("#operationLogGrid-eDate").val(),i=$("#operationLogGrid-name").val();e.searchObj.handleDate.value=[],""!=o&&""!=a&&(e.searchObj.handleDate.value.push(o,a),e.searchObj.handleDate.action="between"),""!=o&&""==a&&(e.searchObj.handleDate.value.push(o),e.searchObj.handleDate.action="ge"),""==o&&""!=a&&(e.searchObj.handleDate.value.push(a),e.searchObj.handleDate.action="le"),""!=i&&e.searchObj["logd.createBy"].value.push(i),searchDataInfo("operationLogGrid")};this.searchObj={},this.initSearch=function(){e.searchObj={handleDate:{value:[],action:"between"},"logd.createBy":{value:[],action:"like"}}},this.initOperationLogGrid=function(){var a={data:e.searchObj,url:o+"searchLogInfo"},i=Core.AcDataAdapter("operationLogGrid",a,{beforeLoadComplete:function(e){},loadComplete:function(e){}},!1),t={source:i,rendergridrows:function(){return i.recordids},columns:e.initColumns(),pagesize:20,enablehover:!1,columnsheight:45};$("#operationLogGrid").grid(t)},this.initColumns=function(){return[{text:"日期",dataField:"handleDate",width:"25%"},{text:"用户名",width:"25%",dataField:"createBy"},{text:"操作详情",width:"25%",cellsrenderer:function(e,o,a,i,t,r){var n='<div class="agrid">';return(n+=getCodeData(r.handletype))+"</div>"}},{text:"关联任务",dataField:"orderNumber",width:"25%",cellsrenderer:function(e,o,a,i,t,r){var n=void 0==r.orderNumber?"":r.orderNumber,d='<div class="agrid">';return(d+='<a class="hoverspan viewOcrAboutTask">'+n+"</a>")+"</div>"}}]}};