var ViewAgentDecMgt=function(){var e=this,t=_global_settings.service.url+"/user";this.debug=!1,this.username=$.pk.username,this.employeeCode=$.pk.employeeCode,this.initInput=function(){e.initPage(),e.initGrid(e.searchObj)},this.searchObj={"t.loginId":{value:[],action:"like"},"t.taxType":{value:[],action:"eq"},"l.accountPeriodMonth":{value:[],action:"eq"},"c.productName":{value:[],action:"like"},"t.taxCode":{value:[e.employeeCode],action:"eq"}},this.initPage=function(){$("#viewAgentDec-show").css("display",""),$("#viewAgentDec-tax").dropDownlist({source:{all:"请选择",smallscale:"小规模纳税人",generalvat:"一般增值税纳税人"},height:34,width:"100%",selectedIndex:0});for(var e=ComboBoxSources.getRecords("productName"),t=["全部"],i=0;i<e.length;i++)t.push(e[i].productName);$("#viewAgentDec-buy").comboBox({source:t,searchMode:"contains",displayMember:"productName",height:34,width:"100%",selectedIndex:0}),$("#viewAgentDec-date").monthpicker({callback:"abc"}),$("#viewAgentDec-show").addClass("hiddendiv")},this.initGrid=function(){e.settings.source.data=e.searchObj;var t=Core.AcDataAdapter("viewAgentDecGrid",e.settings.source,{beforeLoadComplete:function(e){}},e.debug),i={source:t,rendergridrows:function(e){return t.recordids},columns:[{text:"用户名",dataField:"loginId",width:"15%"},{text:"公司名称",dataField:"name",width:"15%"},{text:"纳税人性质",width:"15%",cellsrenderer:function(e,t,i,a,n,c){return'<div style="padding-top:6px">'+getCodeData(c.taxType)+"</div>"}},{text:"增值税率(%)",dataField:"vat",width:"15%"},{text:"账期",dataField:"mouthDate",width:"10%"},{text:"购买模块",dataField:"productName",width:"20%"},{text:"状态",dataField:"taxProgressType",width:"10%"}],pagesize:20,columnsheight:45,ready:function(){}};$("#viewAgentDecGrid").grid(i)},this.settings={source:{url:t+"/searchusertax/1",data:e.searchObj},grid:{element:"viewAgentDecGrid"},ajax:{url:t}},this.searchDataInfo=function(){$("#viewAgentDecGrid").jqxGrid("applyfilters"),$("#viewAgentDecGrid").jqxGrid("refreshfilterrow"),$("#viewAgentDecGrid").jqxGrid("clearselection")},this.refreshDataInfo=function(){$("#viewAgentDecGrid").jqxGrid("updatebounddata","cells"),$("#viewAgentDecGrid").jqxGrid("clearselection"),$("#viewAgentDecGrid").jqxGrid("refreshdata")}},ViewAgentDecBindModle=function(e){var t=this;this.search=function(){var t=$("#viewAgentDec-username").val(),i=$("#viewAgentDec-tax").val(),a=$("#viewAgentDec-date").val(),n=$("#viewAgentDec-buy").find("input").val();e.searchObj["t.loginId"].value=[],""!=t&&e.searchObj["t.loginId"].value.push(t),e.searchObj["t.taxType"].value=[],"all"!=i&&e.searchObj["t.taxType"].value.push(i),e.searchObj["l.accountPeriodMonth"].value=[],e.searchObj["l.accountPeriodMonth"].value.push(a),e.searchObj["c.productName"].value=[],"全部"!=n&&e.searchObj["c.productName"].value.push(n),e.searchDataInfo()},this.bind=function(){$("#viewAgentDec-search").on("click",function(){$("#viewAgentDec-show").is(":hidden")?$("#viewAgentDec-show").slideDown("slow"):t.search()}),hiddenAclick(),$("#viewAgentDec-stn").on("click",function(){$.addTab({title:"分配用户",isFrame:!1,url:"page/modules/spm/agentStnMgt.html",pk:{username:e.username},reload:!0})})},this.unbindAll=function(){$("#viewAgentDec-search").off("click"),$("#viewAgentDec-stn").off("click")}};