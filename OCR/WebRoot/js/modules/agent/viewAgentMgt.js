var ViewAgentMgt=function(){var e=this,n=_global_settings.service.url+"/salesagent/";this.id=null,this.data=null,this.initInput=function(){void 0!=e.id&&null!=e.id||(Core.alert({message:"id入参错误！"}),$.closeTab())};var t=function(t){e.id=$.pk.id,void 0==e.id&&(e.id=t);var i=function(e){"enterprise"==e.type?($("#viewAgent-type").val("企业"),$("#viewAgent-compName").val(e.userInfo.name),$("#viewAgent-busi").val(e.userInfo.businessCode),$("#viewAgent-tax").val(e.userInfo.taxCode)):($("#viewAgent-type").val("个人"),$("#viewAgnetSex").css("display",""),$("#viewAgentComp").css("display","none"),$("#viewAgentName").css("display",""),$("#viewAgentBusi").css("display","none"),$("#viewAgentTax").css("display","none"),$("#viewAgentCert-type").css("display",""),$("#viewAgentCert-number").css("display",""),$("#enterprise-viewqq").css("display","none"),$("#enterprise-viewwx").css("display","none"),$("#view-qq").css("display",""),$("#view-wx").css("display",""),"nan"==e.userInfo.salutation?$("#viewAgent-sex").val("男"):"nv"==e.userInfo.salutation?$("#viewAgent-sex").val("女"):$("#viewAgent-sex").val(""),$("#viewAgent-name").val(e.userInfo.name),$("#viewAgent-certType").val(getCodeData(e.userInfo.certificateType)),$("#viewAgent-certNumber").val(e.userInfo.certificateId)),$("#viewAgent-number").val(e.agentCode),void 0==e.sales||$("#viewAgent-head").val(getSalesInfoById(e.sales.id).name_user),void 0==e.customer||$("#viewAgent-cust").val(getCustomerInfoById(e.customer.id).name_user),$("#viewAgent-userName").val(e.agentName),$("#viewAgent-bank").val(e.openBank),$("#viewAgent-bankNumber").val(e.bankAccount),$("#viewAgent-phone").val(e.userInfo.telephone),$("#viewAgent-eamil").val(e.userInfo.email),$("#viewAgent-qq").val(e.userInfo.qq),$("#viewAgent-wx").val(e.userInfo.wechat),$("#viewAgent-remark").val(e.userInfo.remark),$("#viewAgent-address").find("tbody").children().remove(),$.each(e.userInfo.address,function(e,n){var t="<tr><td><font>"+n.province+"</font><font>"+n.city+"</font><font>"+n.district+"</font><font>"+n.street+"</font></td></tr>";$("#viewAgent-address").append(t)})};Core.AjaxRequest({url:n+e.id,type:"GET",async:!1,showMsg:!1,callback:function(n){e.data=n,i(n)},failure:function(){}})};window.getAgentById=t,t(id)},ViewAgentBindModle=function(e){this.bind=function(){$("#editAgentBtn").on("click",function(){$.addTab({title:"编辑代理商",url:"page/modules/agent/editAgentMgt.html",pk:{data:e.data},reload:!0})})},this.unbindAll=function(){$("#editAgentBtn").off("click")}};