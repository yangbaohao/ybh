var SagentMgt=function(){var e=this,t=_global_settings.service.url+"/salesagent";this.salesAgentData=null,this.initInput=function(){e.initAgentPage(),e.initSearch(),e.initGrid(e.searchObj)},this.initAgentPage=function(){$("#sagent-type").dropDownlist({source:{all:"全部",enterprise:"企业",person:"个人"},theme:"energyblue",width:"100%",height:"34px",selectedIndex:0,dropDownHeight:150}),$("#sagent-time").dropDownlist({source:["请选择","最近一周","最近两周","最近三周","本月","本季度","本年"],theme:"energyblue",width:"100%",height:"34px",selectedIndex:0,dropDownHeight:150}),$("#sagent-sTime").datetimeinput({formatString:"yyyy-MM-dd",width:"100%",height:"34px"}),$("#sagent-eTime").datetimeinput({formatString:"yyyy-MM-dd",width:"100%",height:"34px"}),$("#sagent-time").on("change",function(){var e=$("#sagent-time").attr("id"),t=$("#sagent-sTime").attr("id"),a=$("#sagent-eTime").attr("id");setValueById(e,t,a)}),$("#sagent-name").comboBox({source:ComboBoxSources.getRecords("salesAgent_name"),searchMode:"contains",displayMember:"name_user",valueMember:"name_user",width:"100%"}),$("#sagent-show").addClass("hiddendiv")},this.initGrid=function(){e.settings.source.data=e.searchObj;var t=Core.AcDataAdapter("sagentGrid",e.settings.source,{beforeLoadComplete:function(e){}},!1),a={source:t,rendergridrows:function(){return t.recordids},columns:[{text:"日期",width:"15%",cellsrenderer:function(e,t,a,n,i,s){return'<div class="agrid">'+s.userInfo.createDate.substring(0,10)+"</div>"}},{text:"编号",dataField:"agentCode",width:"17%",cellsrenderer:function(e,t,a,n,i,s){return'<div class="agrid">'+s.agentCode+"</div>"}},{text:"类型",dataField:"type",width:"17%",cellsrenderer:function(e,t,a,n,i,s){return'<div class="agrid">'+("enterprise"==s.type?"企业":"个人")+"</div>"}},{text:"用户名",dataField:"agentName",width:"17%"},{text:"成功客户",dataField:"client",width:"17%"},{text:"付费客户",dataField:"feeClient",width:"17%"}],pagesize:20,columnsheight:45};$("#sagentGrid").grid(a)},this.settings={source:{url:t+"/page",data:e.searchObj},grid:{element:"userGrid"},ajax:{url:t}},this.searchObj={},this.initSearch=function(){e.searchObj={"userInfo.createDate":{value:[],action:"between"},agentName:{value:[],action:"like"},agentCode:{value:[],action:"like"},type:{value:[],action:"eq"},"o.client":{value:[],action:"between"}}},this.searchDataInfo=function(){$("#sagentGrid").jqxGrid("applyfilters"),$("#sagentGrid").jqxGrid("refreshfilterrow"),$("#sagentGrid").jqxGrid("clearselection")},this.refreshDataInfo=function(){$("#sagentGrid").jqxGrid("updatebounddata","cells"),$("#sagentGrid").jqxGrid("clearselection"),$("#sagentGrid").jqxGrid("refreshdata")}},SagentBindModle=function(e){var t=this;this.search=function(){var t=$("#sagent-number").val(),a=$("#sagent-name").val(),n=$("#sagent-type").val(),i=$("#sagent-sTime").val(),s=$("#sagent-eTime").val(),r=$("#sagent-sc").val(),d=$("#sagent-ec").val();e.searchObj.agentCode.value=[],""!=t&&e.searchObj.agentCode.value.push(t),e.searchObj.agentName.value=[],""!=a&&e.searchObj.agentName.value.push(a),e.searchObj.type.value=[],"all"!=n&&e.searchObj.type.value.push(n),e.searchObj["userInfo.createDate"].value=[],""!=i&&""!=s&&e.searchObj["userInfo.createDate"].value.push(i+" 00:00:00",s+" 23:59:59"),""!=i&&""===s&&(e.searchObj["userInfo.createDate"].value.push(i+" 00:00:00"),e.searchObj["userInfo.createDate"].action="ge"),""===i&&""!=s&&(e.searchObj["userInfo.createDate"].value.push(s+" 23:59:59"),e.searchObj["userInfo.createDate"].action="le"),e.searchObj["o.client"].value=[],""!=r&&""!=d&&e.searchObj["o.client"].value.push(r,d),e.searchDataInfo()},this.bind=function(){$("#sagent-search").on("click",function(){$("#sagent-show").is(":hidden")?$("#sagent-show").slideDown(500):t.search()}),hiddenAclick()},this.unbindAll=function(){$("#sagent-search").off("click")}};