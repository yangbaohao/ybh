var AssetliabilitieMgt=function(){var t=this,e=_global_settings.service.url+"/ac/";this.date=new Date,this.random=Math.random(),this.initInput=function(){$("#asset-sendEmail").css("display","none"),$("#assetLiabilitie_nowDate").text(t.setDate()),$("#asset-time").monthpicker({callback:"dasdasd"}),$("#asset_comname").text(currentUserInfo.name),t.getTableData(),t.initPages()},this.initPages=function(){if("中文"==$("#main-changeLanguage").html()){$("#asset-search").html("&nbsp;&nbsp;Search&nbsp;&nbsp;&nbsp;"),$("#assert-print").html("&nbsp;&nbsp;Print&nbsp;&nbsp;&nbsp;"),$("#asset-out").html("&nbsp;&nbsp;Export&nbsp;&nbsp;&nbsp;"),$("#asset-searchDate").html("Date"),$("#asset-headMsg").html("Balance Sheet"),$("#asset-refresh").html("Refresh");$("#assetLiabilitie_nowDate").html(function(){var e=t.date.getFullYear(),a=t.date.getMonth();a+=1;var i=t.date.getDate();return a<10&&(a="0"+a),i<10&&(i="0"+i),i+"/"+a+"/"+e}()),$("#asset_unit").html("Unit：RMB");var e=$("#assetLiabilitieDateTable>thead>tr>th");e.eq(0).html("Assets"),e.eq(1).html("Line No."),e.eq(2).html("End. balance "),e.eq(3).html("Beg. balance "),e.eq(4).html("Liabilities & Owners('Stockholders') equity "),e.eq(5).html("Line No."),e.eq(6).html("End. balance "),e.eq(7).html("Beg. balance "),$("#assetLiabilitieDateTable>tbody>tr").eq(0).find("td").eq(0).text("Current Assets"),$("#assetLiabilitieDateTable>tbody>tr").eq(0).find("td").eq(4).text("Current liabilities"),$("#assetLiabilitieDateTable>tbody>tr").eq(16).find("td").eq(0).text("Non Floating Assets"),$("#assetLiabilitieDateTable>tbody>tr").eq(12).find("td").eq(4).text("Non Liabilities Assets"),$("#assetLiabilitieDateTable>tbody>tr").eq(25).find("td").eq(4).text("Owner's Equity (Or Shareholders' Equity):")}},this.setIdAndTextAlign=function(){$("#assetLiabilitieDateTable tr:gt(0)").each(function(e,a){var i=$(this).attr("id");void 0!=i&&$(this).attr("id",i+t.random)})},this.getTableData=function(){Core.AjaxRequest({type:"GET",showMsg:!1,url:e+(new Base64).encode("tosys/coaReport/loanAmt/liabilities/"+$("#asset-time").val()+"/"+currentUserInfo.id+"/"+currentUserInfo.loginId),callback:function(e){for(var a,i,n,s,r=0;r<e.length;r++)a=e[r].sequence,i=e[r].itemVale1,n=e[r].itemVale2,s=e[r].itemEnglishName,t.setDataToTable(a,i,n,s);if(t.setTextStyle(),"中文"==$("#main-changeLanguage").html())for(var l=$("#assetLiabilitieDateTable>tbody>tr"),r=0;r<l.length;r++);}})},this.setTextStyle=function(){$("#assetLiabilitieDateTable tr:gt(0)").each(function(){$(this).find("td").each(function(t){1!=t&&5!=t||$(this).attr("class","text-center"),2!=t&&3!=t||$(this).attr("class","p-r-8 text-right"),6!=t&&7!=t||$(this).attr("class","p-r-10 text-right")})})},this.setDataToTable=function(t,e,a,i){$("#assetLiabilitieDateTable tr:gt(0)").each(function(n,s){"-"!=t&&$(this).find("td").each(function(n,s){if(1==n||5==n){var r=$(this).text();"-"!=r&&(r==t?($(this).next().text(formatNum(e)),$(this).next().next().text(formatNum(a)),"中文"==$("#main-changeLanguage").html()&&$(this).prev().text(i)):""!=$(this).next().text()&&""!=$(this).next().next().text()||($(this).next().text(0),$(this).next().next().text(0)))}})})},this.getYearAndMonth=function(){var e=t.date.getFullYear(),a=t.date.getMonth();return a+=1,a<10&&(a="0"+a),e+"-"+a},this.setDate=function(){var e=t.date.getFullYear(),a=t.date.getMonth();a+=1;var i=t.date.getDate();return a<10&&(a="0"+a),i<10&&(i="0"+i),e+"年"+a+"月"+i+"日"}},AssetliabilitieBindModle=function(t){var e=this,a=_global_settings.service.url+"/ac/";this.searchTableData=function(e){Core.AjaxRequest({type:"GET",showMsg:!1,url:a+(new Base64).encode("tosys/coaReport/loanAmt/liabilities/"+e+"/"+currentUserInfo.id+"/"+currentUserInfo.loginId),callback:function(e){for(var a,i,n,s=0;s<e.length;s++)a=e[s].sequence,i=e[s].itemVale1,n=e[s].itemVale2,t.setDataToTable(a,i,n)}})},this.emptyTable=function(t){$("#assetLiabilitieDateTable tr:gt(0)").each(function(){$(this).find("td").each(function(t){2!=t&&3!=t&&6!=t&&7!=t||$(this).text("")})}),e.searchTableData(t)},this.bind=function(){$("#asset-search").on("click",function(){var a=$("#asset-time").val();""==a&&(a=t.getYearAndMonth()),$("#assetLiabilitie_nowDate").text(a),e.emptyTable(a)})},this.unbindAll=function(){$("#asset-search").off("click")},$("#asset-out").on({click:function(){var e=t.getYearAndMonth(),a=$("#asset-time").val();if(11==a.length&&(a=e),"中文"==$("#main-changeLanguage").text())var i=(new Base64).encode("tosys/coaReport/export/assetLiabilitieEnglish/"+a+"/"+currentUserInfo.id+"/"+currentUserInfo.loginId);else var i=(new Base64).encode("tosys/coaReport/export/assetLiabilitie/"+a+"/"+currentUserInfo.id+"/"+currentUserInfo.loginId);$.openHref(_global_settings.service.url+"/ac/exportReport/"+i)}}),$("#assert-print").on("click",function(){var e=t.getYearAndMonth(),a=$("#asset-time").val();if(11==a.length&&(a=e),"中文"==$("#main-changeLanguage").html())var i=(new Base64).encode("reportName=LiabilitiesPrintEN&date="+$("#asset-time").val()+"&printType=pdf&ownerId="+currentUserInfo.id+"&username="+currentUserInfo.loginId);else var i=(new Base64).encode("reportName=LiabilitiesPrint&date="+$("#asset-time").val()+"&printType=pdf&ownerId="+currentUserInfo.id+"&username="+currentUserInfo.loginId);window.open(_global_settings.service.url+"/ac/print/"+i)})};