!function(){function s(s,o){var c=/^(\w{6,20})$/;if(""==o){var a=$(s).attr("mark"),n=$(s).val();if("pass"==a){var e=c.test(n);return e}}else if("pass"==o){var e=c.test(s);return e}}function o(){var o=$("#form-company-username").val(),a=$("#form-company-auth-code").val(),n=$("#form-company-password").val(),e=$("#form-company-password-affirm").val();return""==o?($("#form-uname-close1").css("display","block"),$("#form-uname-check").css("display","none"),$("#form-uname-check1").css("display","none"),c=!1):($("#form-uname-close1").css("display","none"),$("#form-uname-check").css("display","block"),""==a?($("#form-auth-code-close").css("display","block"),$("#form-auth-code-close1").css("display","none"),$("#form-auth-code-check").css("display","none"),$("#form-auth-code-check1").css("display","none"),c=!1):($("#form-auth-code-close").css("display","none"),$("#form-auth-code-close1").css("display","none"),$("#form-auth-code-check").css("display","block"),$("#form-auth-code-check1").css("display","none"),""==n?($("#form-pass-close").css("display","block"),$("#form-pass-close1").css("display","none"),$("#form-pass-check").css("display","none"),$("#form-pass-check1").css("display","none"),c=!1):s(n,"pass")?($("#form-pass-close").css("display","none"),$("#form-pass-check").css("display","block"),""==e?($("#form-pass-affirm-close").css("display","block"),$("#form-pass-affirm-check").css("display","none"),$("#form-pass-affirm-check1").css("display","none"),c=!1):n==e?($("#form-pass-affirm-close").css("display","none"),$("#form-pass-affirm-check").css("display","block"),c=!0):($("#form-pass-affirm-close").css("display","block"),$("#form-pass-affirm-check").css("display","none"),$("#form-pass-affirm-check1").css("display","none"),c=!1)):($("#form-pass-close").css("display","none"),$("#form-pass-close1").css("display","block"),$("#form-pass-check").css("display","none"),$("#form-pass-check1").css("display","none"),c=!1))),c}var c,a,n,e=0,r=window.document.location.href,l=window.document.location.pathname,i=r.indexOf(l),p=(r.substring(0,i),l.substring(0,l.substr(1).indexOf("/")+1),window.location.pathname);p=1==p.indexOf("SimpleBss")?p.substring(0,6):"",$("#btn1").attr("disabled",!0);$("#form-company-uname").on("keyup",function(){""==$("#form-company-uname").val()?$("#btn1").attr("disabled",!0):$("#btn1").attr("disabled",!1)}),$("input").focus(function(){var s=$(this).attr("id");"form-company-username"==s?($("#form-uname-close").css("display","none"),$("#form-uname-check1").css("display","none")):"form-company-auth-code"==s?($("#form-auth-code-close").css("display","none"),$("#form-auth-code-check1").css("display","none")):"form-company-password"==s?($("#form-pass-close").css("display","none"),$("#form-pass-check1").css("display","none")):"form-company-password-affirm"==s&&($("#form-pass-affirm-close").css("display","none"),$("#form-pass-affirm-check1").css("display","none"))}),$("input").blur(function(){var o=$(this).attr("id"),c=$(this).val();if("form-company-uname"==o)""==c?($("#form-uname-close1").css("display","block"),$("#form-uname-close").css("display","none"),$("#form-uname-check").css("display","none"),$("#form-uname-check1").css("display","none")):$.ajax({type:"GET",url:p+"/CXF/rs/owner/direct/login/"+c,datatype:"json",success:function(s){n=s,s?($("#form-uname-close").css("display","none"),$("#form-uname-close1").css("display","none"),$("#form-uname-check").css("display","block"),$("#form-uname-check1").css("display","none"),$("#btn1").attr("disabled",!1)):($("#form-uname-close").css("display","block"),$("#form-uname-close1").css("display","none"),$("#form-uname-check").css("display","none"),$("#form-uname-check1").css("display","none"),$("#btn1").attr("disabled",!0))}});else if("form-company-auth-code"==o)""==c?($("#form-auth-code-close").css("display","block"),$("#form-auth-code-close1").css("display","none"),$("#form-auth-code-check").css("display","none")):($("#form-auth-code-close").css("display","none"),$("#form-auth-code-check").css("display","block"));else if("form-company-password"==o)""==c?($("#form-pass-close").css("display","block"),$("#form-pass-close1").css("display","none"),$("#form-pass-check").css("display","none"),$("#form-pass-check1").css("display","none")):s(this,"")?($("#form-pass-close").css("display","none"),$("#form-pass-close1").css("display","none"),$("#form-pass-check").css("display","block"),$("#form-pass-check1").css("display","none")):($("#form-pass-close").css("display","none"),$("#form-pass-close1").css("display","block"),$("#form-pass-check").css("display","none"),$("#form-pass-check1").css("display","none"));else if("form-company-password-affirm"==o)if(""==c)$("#form-pass-affirm-close").css("display","block"),$("#form-pass-affirm-check").css("display","none");else{var a=$("#form-company-password").val();a==c?($("#form-pass-affirm-close").css("display","none"),$("#form-pass-affirm-check").css("display","block")):($("#form-pass-affirm-close").css("display","block"),$("#form-pass-affirm-check").css("display","none"))}}),$("#btn1").click(function(){var s=$("#form-company-uname").val();n&&$.ajax({type:"GET",url:p+"/CXF/rs/owner/direct/phone/"+s,datatype:"json",success:function(s){var o=s.toString().substr(0,3),c=s.toString().substr(3),a=o+"****"+c;$("#mark_no").text(a),$("#Confirmphone").slideDown(300)}})}),$("#btn_Confirmphone").on("click",function(){$("#Confirmphone").slideUp(300),$("#btn1").attr("disabled",!0);var s=60,o=function(){s-=1,$("#btn1").text("获取验证码("+s+")"),0===s&&(clearInterval(c),$("#btn1").text("重新发送"),$("#btn1").removeAttr("disabled"))};e+=1;var c=setInterval(o,1e3),n=$("#form-company-uname").val();$.ajax({type:"GET",url:p+"/CXF/rs/owner/direct/valid/session/"+n+"/"+e,datatype:"json",success:function(s){a=s}})}),$("#btn_cancelPhone").click(function(){$("#Confirmphone").slideUp(300)}),$("#aid").on("click",function(){$("#aid").attr("href",p+"/page/login/login.jsp")}),$("#return_login").on("click",function(){$("#return_login").attr("href",p+"/page/login/login.jsp")}),$("#forgetpwd_next").on("click",function(){if(o()){var s=$("#form-company-uname").val(),c=$("#form-company-auth-code").val(),a=$("#form-company-password").val(),n={password:a,username:s,roles:[],locked:!1},e=JSON.stringify(n);$.ajax({type:"PUT",url:p+"/CXF/rs/owner/direct/upwd/"+c+"/"+s+"/"+a,data:e,datatype:"json",contentType:"application/json; charset=UTF-8",success:function(s){s?($("#forgetpwd_one").css("display","none"),$("#qy_succeed").css("display","block")):($("#forgetpwd_one").css("display","none"),$("#qy_fail").css("display","block"))}})}})}();