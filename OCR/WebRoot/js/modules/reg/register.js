!function(){function s(o){if(0==d)return o.removeAttribute("disabled"),$(o).text("重新发送"),void(d=60);d--,o.setAttribute("disabled",!0),$(o).text("免费获取验证码("+d+")"),setTimeout(function(){s(o)},1e3)}function o(s,o){var c=/^[A-Za-z0-9_]+$/,e=/^1[3|4|5|7|8][0-9]\d{4,8}$/,a=/[\w!#$%&'*+\/=?^_`{|}~-]+(?:\.[\w!#$%&'*+\/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/,n=/^(\w{6,20})$/;if(""==o){var l=$(s).attr("mark"),m=$(s).val();if("uname"==l){var r=c.test(m);return r}if("email"==l){var r=a.test(m);return r}if("phone"==l){var r=e.test(m);return r}if("pass"==l){var r=n.test(m);return r}}else{if("uname"==o){var r=c.test(s);return r}if("email"==o){var r=a.test(s);return r}if("phone"==o){var r=e.test(s);return r}if("pass"==o){var r=n.test(s);return r}}}function c(){var s=$("#form-company-username").val(),c=$("#form-person-name").val(),e=$("#form-company-name").val(),a=$("#company_email_number").val(),m=$("#company_phone_number").val(),r=$("#form-company-auth-code").val(),p=$("#form-company-password").val(),i=$("#form-company-password-affirm").val(),d=$("#form-company-Booked-Date").val();return""==s?($("#form-uname-close").css("display","none"),$("#form-uname-close1").css("display","block"),$("#form-uname-close2").css("display","none"),$("#form-uname-check").css("display","none"),$("#form-uname-check1").css("display","none"),l=!1):o(s,"uname")?$.ajax({type:"GET",url:f+"owner/direct/login/"+s,datatype:"json",async:!1,success:function(s){s?($("#form-uname-check").css("display","none"),$("#form-uname-close").css("display","block"),$("#form-uname-close1").css("display","none"),$("#form-uname-close2").css("display","none"),$("#form-uname-check1").css("display","none"),l=!1):($("#form-uname-close").css("display","none"),$("#form-uname-close1").css("display","none"),$("#form-uname-close2").css("display","none"),$("#form-uname-check").css("display","block"),$("#form-uname-check1").css("display","none"),""==c?($("#form-person-close").css("display","block"),$("#form-person-check").css("display","none"),$("#form-person-check1").css("display","none"),l=!1):($("#form-person-close").css("display","none"),$("#form-person-check").css("display","block"),$("#form-person-check1").css("display","none"),""==e?($("#form-company-close").css("display","block"),$("#form-company-check").css("display","none"),$("#form-company-check1").css("display","none"),l=!1):($("#form-company-close").css("display","none"),$("#form-company-check").css("display","block"),""==a?($("#form-email-close").css("display","block"),$("#form-email-close1").css("display","none"),$("#form-email-check").css("display","none"),$("#form-email-check1").css("display","none"),l=!1):o(a,"email")?($("#form-email-close").css("display","none"),$("#form-email-check").css("display","block"),""==m?($("#form-phone-close").css("display","block"),$("#form-phone-check").css("display","none"),$("#form-phone-check1").css("display","none"),l=!1):o(m,"phone")?($("#form-phone-close").css("display","none"),$("#form-phone-check").css("display","block"),""==r?($("#form-auth-code-close").css("display","block"),$("#form-auth-code-close1").css("display","none"),$("#form-auth-code-check").css("display","none"),$("#form-auth-code-check1").css("display","none"),l=!1):r==n&&($("#form-auth-code-close").css("display","none"),$("#form-auth-code-close1").css("display","none"),$("#form-auth-code-check").css("display","block"),""==p?($("#form-pass-close").css("display","block"),$("#form-pass-check").css("display","none"),$("#form-pass-check1").css("display","none"),l=!1):o(p,"pass")?($("#form-pass-close").css("display","none"),$("#form-pass-check").css("display","block"),""==i?($("#form-pass-affirm-close").css("display","block"),$("#form-pass-affirm-check").css("display","none"),$("#form-pass-affirm-check1").css("display","none"),l=!1):p==i?($("#form-pass-affirm-close").css("display","none"),$("#form-pass-affirm-check").css("display","block"),""==d?($("#form-account-period-close").css("display","block"),$("#form-account-period-close1").css("display","none"),$("#form-account-period-check").css("display","none"),$("#form-account-period-check1").css("display","none"),l=!1):($("#form-account-period-check1").css("display","none"),$("#form-account-period-close").css("display","none"),$("#form-account-period-check").css("display","block"),$("#form-tax_select").css("display","block"),$("#form-tax_select1").css("display","none"),l=!0)):($("#form-pass-affirm-close").css("display","block"),$("#form-pass-affirm-check").css("display","none"))):($("#form-pass-close").css("display","none"),$("#form-pass-close1").css("display","block"),$("#form-pass-check").css("display","none")))):($("#form-phone-close").css("display","none"),$("#form-phone-close1").css("display","block"),$("#form-phone-check").css("display","none"))):($("#form-email-close").css("display","none"),$("#form-email-close1").css("display","block"),$("#form-email-check").css("display","none")))))}}):($("#form-uname-close").css("display","none"),$("#form-uname-close1").css("display","none"),$("#form-uname-close2").css("display","block"),$("#form-uname-check").css("display","none"),$("#form-uname-check1").css("display","none")),l}function e(){return $("#qy_fail").hide(),$("#qyxx_div").hide(),$("#no1_div").show(),$("#flow_fail").show(),$("#flow_succeed").hide(),$("#flow_top_1").attr("class","show_flow_top"),$("#flow_top_2").removeClass("show_flow_top"),$("#flow_top_3").removeClass("show_flow_top"),!1}$("#register_close").click(function(){window.location.href="page/login/login.jsp"});var a,n,l=!1,m=window.document.location.href,r=window.document.location.pathname,p=m.indexOf(r),i=m.substring(0,p),f=i+"/AccountingCloud/CXF/rs/";$("#validCode").attr("disabled",!0),$("#form-company-Booked-Date").monthpicker({callback:"dasdasd"});var d=60;$("#a_privacypolicy").on("click",function(){window.open("../AccountingCloud/template/privacyPolicy.pdf")}),$("#a_useragreement").on("click",function(){window.open("../AccountingCloud/template/userAgreement.pdf")}),$("#validCode").on({click:function(){$("#form-auth-code-close").css("display","none"),s(this);var o=$("#company_phone_number").val();$.ajax({type:"GET",url:f+"owner/direct/valid/"+o,datatype:"json",success:function(s){n=s,null!=s&&""!=s||($("#form-auth-code-close").css("display","none"),$("#form-auth-code-check").css("display","block"))}})}}),$("#return_login").on({click:function(){return e(),!1}}),$("#company_phone_number").on("keyup",function(){o(this,"")&&$("#validCode").attr("disabled",!1)}),$("input").focus(function(){var s=$(this).attr("id");"form-company-username"==s?($("#form-uname-close").css("display","none"),$("#form-uname-check1").css("display","none")):"form-person-name"==s?($("#form-person-check").css("display","none"),$("#form-person-check1").css("display","none")):"form-company-name"==s?($("#form-company-close").css("display","none"),$("#form-company-check1").css("display","none")):"company_email_number"==s?($("#form-email-close").css("display","none"),$("#form-email-check1").css("display","none")):"company_phone_number"==s?($("#form-phone-close").css("display","none"),$("#form-phone-check1").css("display","none")):"form-company-auth-code"==s?($("#form-auth-code-close").css("display","none"),$("#form-auth-code-check1").css("display","none")):"form-company-password"==s?($("#form-pass-close").css("display","none"),$("#form-pass-check1").css("display","none")):"form-company-password-affirm"==s&&($("#form-pass-affirm-close").css("display","none"),$("#form-pass-affirm-check1").css("display","none"))}),$("input").blur(function(){var s=$(this).attr("id"),c=$(this).val();if("form-company-username"==s)""==c?($("#form-uname-close").css("display","none"),$("#form-uname-close1").css("display","block"),$("#form-uname-close2").css("display","none"),$("#form-uname-check").css("display","none"),$("#form-uname-check1").css("display","none")):o(this,"")?($("#form-uname-close1").css("display","none"),$("#form-uname-close2").css("display","none"),$("#form-uname-check").css("display","block"),$.ajax({type:"GET",url:f+"owner/direct/login/"+c,datatype:"json",success:function(s){s?($("#form-uname-close").css("display","block"),$("#form-uname-check").css("display","none")):($("#form-uname-close").css("display","none"),$("#form-uname-check").css("display","block"))}})):($("#form-uname-close").css("display","none"),$("#form-uname-close1").css("display","none"),$("#form-uname-close2").css("display","block"),$("#form-uname-check").css("display","none"),$("#form-uname-check1").css("display","none"));else if("form-person-name"==s)""==c?($("#form-person-close").css("display","block"),$("#form-person-check").css("display","none"),$("#form-person-check1").css("display","none")):($("#form-person-close").css("display","none"),$("#form-person-check").css("display","block"),$("#form-person-check1").css("display","none"));else if("form-company-name"==s)""==c?($("#form-company-close").css("display","block"),$("#form-company-check").css("display","none")):($("#form-company-close").css("display","none"),$("#form-company-check").css("display","block"));else if("company_email_number"==s)""==c?($("#form-email-close").css("display","block"),$("#form-email-close1").css("display","none"),$("#form-email-check").css("display","none")):o(this,"")?($("#form-email-close1").css("display","none"),$("#form-email-check").css("display","block")):($("#form-email-close1").css("display","block"),$("#form-email-check").css("display","none"));else if("company_phone_number"==s)""==c?($("#form-phone-close").css("display","block"),$("#form-phone-check").css("display","none")):o(this,"")?($("#form-phone-close1").css("display","none"),$("#form-phone-check").css("display","block"),$("#validCode").attr("disabled",!1)):($("#form-phone-close1").css("display","block"),$("#form-phone-check").css("display","none"));else if("form-company-auth-code"==s)""==c?($("#form-auth-code-close").css("display","block"),$("#form-auth-code-check").css("display","none")):c==n?($("#form-auth-code-close").css("display","none"),$("#form-auth-code-close1").css("display","none"),$("#form-auth-code-check").css("display","block")):($("#form-auth-code-close1").css("display","block"),$("#form-auth-code-check").css("display","none"));else if("form-company-password"==s)""==c?($("#form-pass-close").css("display","block"),$("#form-pass-close1").css("display","none"),$("#form-pass-check").css("display","none")):o(this,"")?($("#form-pass-close").css("display","none"),$("#form-pass-close1").css("display","none"),$("#form-pass-check").css("display","block")):($("#form-pass-close1").css("display","block"),$("#form-pass-check").css("display","none"));else if("form-company-password-affirm"==s)if(""==c)$("#form-pass-affirm-close").css("display","block"),$("#form-pass-affirm-check").css("display","none");else{var e=$("#form-company-password").val();e==c?($("#form-pass-affirm-close").css("display","none"),$("#form-pass-affirm-check").css("display","block")):($("#form-pass-affirm-close").css("display","block"),$("#form-pass-affirm-check").css("display","none"))}}),$("#step2_btn").on("click",function(){if(c()){var s=$("#form-company-username").val(),o=$("#form-person-name").val(),e=$("#form-company-name").val(),n=$("#company_phone_number").val(),l=$("#company_email_number").val(),m=$("#form-company-password").val(),r=$("#form-company-Booked-Date").val(),p=$("#tax_select").val(),i={};i.name=e,i.email=l,i.telephone=n,i.username=s,i.password=m,i.startMonth=r,i.taxType=p,i.pername=o,a=JSON.stringify(i),$.ajax({type:"POST",url:f+"owner/direct/reg",data:a,datatype:"json",contentType:"application/json; charset=UTF-8",success:function(s){$("#no1_div").css("display","none"),s?$("#qy_succeed").css("display","block"):$("#qy_fail").css("display","block")}})}})}();